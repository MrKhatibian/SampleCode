// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.33/esri/copyright.txt for details.
//>>built
require({cache:{"url:esri/dijit/analysis/customgp/editors/MultipleFeatureLayer.html":'\x3cdiv class\x3d"esriAnalysis"\x3e\r\n  \x3cdiv class\x3d"inputList" data-dojo-attach-point\x3d"inputList"\x3e\r\n    \x3cdiv class\x3d"featureList" data-dojo-attach-point\x3d"featureList"\x3e\x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"selectLayer" class\x3d"selectLayer"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n'}});
define("esri/dijit/analysis/customgp/editors/MultipleFeatureLayer","dojo/_base/declare dojo/Evented dojo/on dojo/_base/lang dojo/_base/array dojo/dom-construct dijit/_TemplatedMixin ../BaseEditor ./SelectFeatureSetFromLayer esri/dijit/analysis/utils dojo/text!./MultipleFeatureLayer.html".split(" "),function(f,g,h,d,c,e,k,l,m,n,p){return f([l,k,g],{templateString:p,editorName:"MultipleFeatureLayer",constructor:function(a){this.inherited(arguments);a.cssClass&&d.mixin(this.cssClass,a.cssClass);this.selectedFeatureLayers=
[]},postCreate:function(){this.inherited(arguments);this.analysisLayers=this.config.analysisLayers;this.param&&this.param.filter&&this.param.filter.list?this.analysisLayers=c.filter(this.analysisLayers,function(a){return-1!==c.indexOf(this.param.filter.list,a.geometryType)},this):this.param&&this.param.defaultValue&&this.param.defaultValue.geometryType&&(this.analysisLayers=c.filter(this.analysisLayers,function(a){return this.param.defaultValue&&this.param.defaultValue.geometryType===a.geometryType},
this));this._inputParam=new m({cssClass:{featureSetSelect:"esriTableFixedLayout fullSpread esriLongLabel esriAnalysisSelect",layerChooseCtr:""},param:this.param,widgetUID:void 0,widget:this.widget,config:Object.assign({showDrawOption:!1},this.config),editorManager:null,map:this.map,style:{width:"100%"}});this.selectLayer.appendChild(this._inputParam.domNode);this.own(this._inputParam.on("analysislayer-change",d.hitch(this,this.onSelectInputLayer)))},getSelectedLayers:function(){var a=[];c.forEach(this.selectedFeatureLayers,
function(b){b&&a.push(n.constructAnalysisInputLyrObj(b,!0))},this);return a},getGPValue:function(){return this.wrapValueToDeferred(this.getSelectedLayers())},onSelectInputLayer:function(a){this.appendFeatureLayerToList(a.analysisLayer);this.selectedFeatureLayers.push(a.analysisLayer)},_setSelectedFeatureLayersAttr:function(a){this.selectedFeatureLayers=a},_getSelectedFeatureLayersAttr:function(a){return this.selectedFeatureLayers},_setMapAttr:function(a){this.map=a},removeLayerFromSelection:function(a){a=
a.target.parentNode;var b=a.value;b&&(this.selectedFeatureLayers=c.filter(this.selectedFeatureLayers,function(a){return a.url!=b},this),this.featureList.removeChild(a))},appendFeatureLayerToList:function(a){var b=e.create("div",{class:"inline-block-div",value:a.url});a=e.create("div",{class:"layer-name",innerHTML:a.name});var c=e.create("div",{class:"esriAnalysisCloseIcon"});this.own(h(c,"click",d.hitch(this,this.removeLayerFromSelection)));b.appendChild(a);b.appendChild(c);this.featureList.appendChild(b)}})});