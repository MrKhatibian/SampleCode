// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.33/esri/copyright.txt for details.
//>>built
define("esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/GridDataUtil",["dojo/_base/lang","../../supportClasses/templateJsonUtils/fieldInfo/FieldLibrary","esri/dijit/geoenrichment/utils/FieldUtil","esri/dijit/geoenrichment/utils/ObjectUtil","esri/dijit/geoenrichment/ReportPlayer/countryConfig"],function(g,h,k,l,m){var c={getFieldCellValue:function(a){return a.gridData&&a.gridData[a.column.field]},setFieldCellContent:function(a,b){a.set("value",b);a.gridData[a.column.field]=b},clearFieldInfo:function(a,
b){a.fieldInfos&&delete a.fieldInfos[b];a[b]="";c.setNumericDataValue(void 0,a,b)},getNumericCellValue:function(a){return c.getNumericDataValue(a.gridData,a.column.field)},setNumericCellValue:function(a,b){return c.setNumericDataValue(b,a.gridData,a.column.field)},getNumericDataValue:function(a,b){return a&&b&&a[b+"_numeric"]},setNumericDataValue:function(a,b,c){b[c+"_numeric"]=a},getRenderedValue:function(a,b,d){var e={parentGrid:a,gridData:b,column:d};a=a._getCellRenderer().getRenderedContent(e);
if(a.isUnavailableData)return{};var f;"number"!==typeof a.value||isNaN(a.value)?"string"===typeof a.formattedValue&&(e=l.parsePercentOrCurrency(a.formattedValue,m.getCurrencyFormat()),isNaN(e)||(f=e)):f=a.value;"number"!==typeof f&&(f=c.getNumericDataValue(b,d.field));return{numericValue:f,formattedValue:a.formattedValue}},isEmptyCell:function(a){return!a.get("value")&&!a.gridData[a.column.field]&&!c.getFieldInfo(a)},hasSpans:function(a){return c.getColumnSpan(a)||c.getRowSpan(a)},getColumnSpan:function(a){return a&&
a.gridData&&a.gridData.columnSpans&&a.gridData.columnSpans[a.column.field]},getRowSpan:function(a){return a&&a.gridData&&a.gridData.rowSpans&&a.gridData.rowSpans[a.column.field]},getDataColumnSpan:function(a,b){return a&&a.columnSpans&&a.columnSpans[b]},getDataRowSpan:function(a,b){return a&&a.rowSpans&&a.rowSpans[b]},getFieldInfo:function(a){return a&&a.gridData&&a.column&&a.gridData.fieldInfos&&a.gridData.fieldInfos[a.column.field]},getGridFirstFieldInfo:function(a){return c.getFieldInfo(a.getFirstCell())},
setFieldInfo:function(a,b){a.gridData&&(a.gridData.fieldInfos[a.column.field]=b)},provideFieldInfo:function(a){c.setFieldInfo(a,c.getFieldInfo(a)||{});return c.getFieldInfo(a)},getPreservableSettings:function(a){return{triggerJson:c.getConditionalFormatting(a),dataDrilling:c.getDataDrilling(a),tooltipInfo:c.getTooltipInfo(a)}},setPreservableSettings:function(a,b){c.setConditionalFormatting(a,b&&b.triggerJson);c.setDataDrilling(a,b&&b.dataDrilling);c.setTooltipInfo(a,b&&b.tooltipInfo)},getCellStyle:function(a,
b){if(!a||!a.gridData||!a.column)return null;var d=a.gridData.style&&a.gridData.style.fields&&a.gridData.style.fields[a.column.field];!d&&b&&(d={},c.setCellStyle(a,d));return d},getCellThemeStyle:function(a){return a&&a.gridData&&a.column?a.gridData.themeStyle&&a.gridData.themeStyle.fields[a.column.field]:null},setCellStyle:function(a,b){var c=a.gridData.style=a.gridData.style||{};c.fields=c.fields||{};c.fields[a.column.field]=b},updateCellStyle:function(a,b){a=c.getCellStyle(a,!0);g.mixin(a,b)},
copyFieldStyle:function(a,b,d){a=c.getCellStyle(a);b=c.getCellStyle(b,!0);for(var e in d)void 0!==a[e]&&(b[e]=a[e])},getFieldCellUrl:function(a){if(a.gridData&&a.gridData.urls&&a.column)return a.gridData.urls[a.column.field]},setFieldCellUrl:function(a,b){a.gridData&&a.column&&(a.gridData.urls=a.gridData.urls||{},void 0===b?delete a.gridData.urls[a.column.field]:a.gridData.urls[a.column.field]=b)},getConditionalFormatting:function(a){return(a=c._toFieldInfo(a))&&a.triggerJson},setConditionalFormatting:function(a,
b){var d=c.getFieldInfo(a);d.triggerJson=null;if(b){if(a=c.isVariableLikeFieldCell(a))b.fieldInfo=d;b.fieldInfo===d&&(b.fieldInfo=g.clone(b.fieldInfo),delete b.fieldInfo.triggerJson,a&&(delete b.fieldInfo.tooltipInfo,delete b.fieldInfo.dataDrillingPanelInfo))}d.triggerJson=b},getDataDrilling:function(a){return(a=c.getSourceFieldInfo(a))&&a.dataDrillingPanelInfo},setDataDrilling:function(a,b){if(a=c.getSourceFieldInfo(a))a.dataDrillingPanelInfo=b},getTooltipInfo:function(a){return(a=c.getSourceFieldInfo(a))&&
a.tooltipInfo},setTooltipInfo:function(a,b){if(a=c.getSourceFieldInfo(a))a.tooltipInfo=b},getSourceFieldInfo:function(a){var b=c._toFieldInfo(a);a=c.getConditionalFormatting(a);return b&&b.isImage?a&&a.fieldInfo:b},_toFieldInfo:function(a){return a?a.gridData?c.getFieldInfo(a):"object"===typeof a&&a:null},isReportSectionCell:function(a){a=c._toFieldInfo(a);return!(!a||!a.isReportSection)},isInfographicCell:function(a){a=c._toFieldInfo(a);return!(!a||!a.isInfographic)},isChartCell:function(a){a=c._toFieldInfo(a);
return!(!a||!a.isChart)},isMapCell:function(a){a=c._toFieldInfo(a);return!(!a||!a.isMap)},isImageCell:function(a){a=c._toFieldInfo(a);return!(!a||!a.isImage)},isImageTriggerCell:function(a){a=c._toFieldInfo(a);return!!(a&&a.isImage&&a.triggerJson)},getImageTriggerFieldInfo:function(a){return(a=c._toFieldInfo(a))&&a.isImage&&a.triggerJson?a.triggerJson.fieldInfo:null},isShapeCell:function(a){a=c._toFieldInfo(a);return!(!a||!a.isShape)},isEmptyShapeCell:function(a){a=(a=c._toFieldInfo(a))&&a.shapeJson;
return!(!a||a.g&&a.g.length)},isPlaceholderShapeCell:function(a){a=(a=c._toFieldInfo(a))&&a.shapeJson;return!(!a||!a.isPlaceholder)},isTextLikeCell:function(a){return!c._toFieldInfo(a)||c.isRichTextCell(a)||c.isVariableLikeFieldCell(a)||c.isSpecialFieldCell(a)},isRichTextCell:function(a){a=c._toFieldInfo(a);return!(!a||!a.isRichText)},isVariableLikeFieldCell:function(a){a=c._toFieldInfo(a);return!(!a||!a.hasVariable&&!a.script&&"headers.CHART_POINT_VALUE"!==a.name)},isVariableFieldCell:function(a){a=
c._toFieldInfo(a);return!(!a||!a.hasVariable)},isScriptFieldCell:function(a){a=c._toFieldInfo(a);return!(!a||!a.script)},isUneditableScript:function(a){a=c._toFieldInfo(a);return!!(a&&a.script&&a.script.isUneditableScript)},isNumericVariableFieldCell:function(a){return(a=c._toFieldInfo(a))?a.hasVariable&&k.isNumericField(a)||a.script&&!a.script.isUneditableScript&&"String"!==a.script.type||"headers.CHART_POINT_VALUE"===a.name?!0:!1:!1},isCalculatableNumericVariableFieldCell:function(a){return c.isNumericVariableFieldCell(a)},
isStringVariableFieldCell:function(a){a=c._toFieldInfo(a);return!(!a||!(a.hasVariable&&"esriFieldTypeString"===a.type||a.script&&"String"===a.script.type))},isSpecialFieldCell:function(a){var b=c._toFieldInfo(a);return b&&("headers.CHART_POINT_VALUE"===b.name||!c.isVariableLikeFieldCell(a)&&h.hasField(b.name))}};return c});