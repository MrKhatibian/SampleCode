// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.33/esri/copyright.txt for details.
//>>built
define("esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/builder/columnBarLine/_ComparisonUtil",["dojo/_base/lang","../../ChartTypes","../ChartPlots","../../ChartFilterUtil"],function(h,g,m,k){return{getComparisonPlotName:function(a,b){return b&&b.chartType===g.LINE&&!g.isLineLike(a)?m.SECONDARY:null},isComparisonInPrimaryPlot:function(a,b){return!this.getComparisonPlotName(a,b)},getEffectiveNumberOfSeries:function(a,b,d,f,c){function e(){return c?a.filter(function(a){return!c[a.label]}).length:
a.length}return this.canShowComparison(d,a,f)?f?e():this.isComparisonInPrimaryPlot(b,d)?2*e():e():e()},canShowComparison:function(a,b,d){return a&&(d||1===b.length||2===b.length)},updateSeriesItemsForComparisonInfo:function(a){if(this.canShowComparison(a.comparisonInfo,a.seriesItems,a.isMultiFeatureChart))if(a.isMultiFeatureChart)if(g.isLineLike(a.chartType)){var b=a.seriesItems.slice(),d=k.getFirstSeriesItem(a.seriesItems)||a.seriesItems[0];a.comparisonFeatureAttributes.forEach(function(a){var c=
a.StdGeographyName,n={isComparisonSeries:!0,label:c,points:d.points.map(function(b){return{label:b.label,fieldInfo:b.fieldInfo,value:{value:a[b.fieldInfo.name]||0},isComparisonPoint:!0,comparisonFeatureAttribute:a,areaName:c,originalSeriesName:b.originalSeriesName}})};b.push(n)});a.seriesItemsWithComparison=b}else{var f=a.seriesItems.map(function(a){a=h.mixin({},a);a.points=a.points.slice();return a});a.comparisonFeatureAttributes.forEach(function(a){f.forEach(function(b){var c=k.getFirstSeriesPoint(b)||
b.points[0],l=a.StdGeographyName;b.points.push({label:l,color:c.color,fieldInfo:c.fieldInfo,value:{value:a[c.fieldInfo.name]||0},isComparisonPoint:!0,comparisonFeatureAttribute:a,areaName:l,originalSeriesName:c.originalSeriesName})})});a.seriesItems=f;delete a.comparisonInfo}else b=[],a.seriesItems.forEach(function(c,e){b.push(c);var d=a.comparisonFeatureAttributes[0].StdGeographyName;if(g.isLineLike(a.chartType))if(e===a.seriesItems.length-1)e={isComparisonSeries:!0,label:d,points:c.points.map(function(a){return h.mixin({},
a)})};else return;else e={isComparisonSeries:!0,label:d+(1<a.seriesItems.length?" ("+c.label+")":""),points:c.points.map(function(a){return h.mixin({},a)})};e.points.forEach(function(b){b.isComparisonPoint=!0;b.comparisonFeatureAttribute=a.comparisonFeatureAttributes[0];b.areaName=d;b.originalSeriesName=c.label});b.push(e)}),a.seriesItemsWithComparison=b}}});