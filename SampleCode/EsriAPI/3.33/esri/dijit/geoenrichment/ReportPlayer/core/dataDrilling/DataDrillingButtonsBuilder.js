// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.33/esri/copyright.txt for details.
//>>built
define("esri/dijit/geoenrichment/ReportPlayer/core/dataDrilling/DataDrillingButtonsBuilder","dojo/_base/declare dojo/_base/lang dojo/on dojo/dom-construct dojo/dom-style esri/dijit/geoenrichment/utils/DeviceUtil esri/dijit/geoenrichment/utils/DnDUtil esri/dijit/geoenrichment/utils/DomUtil esri/dijit/geoenrichment/utils/MouseUtil dojo/i18n!esri/nls/jsapi".split(" "),function(t,u,k,g,p,v,q,w,r,l){l=l.geoenrichment.dijit.ReportPlayer.Infographics;return t(null,{parentWidget:null,_ddButtons:null,_shownButtons:null,
constructor:function(a){u.mixin(this,a)},setDataDrillingButtonForSection:function(a,c){this._setDataDrillingButton({widget:a,getBox:function(){var c=[];a.getTables().forEach(function(a){c.push(a.domNode)});return w.uniteNodeBoxes(c,a.domNode)},onClick:c})},setDataDrillingButtonForTableCell:function(a,c){this._setDataDrillingButton({widget:a,getBox:function(){return{x:0,y:0,w:a.domNode.clientWidth,h:a.domNode.clientHeight}},onClick:c})},_setDataDrillingButton:function(a){function c(){var b=g.create("div",
{"class":"dataDrilling_drillDataButton"},h.domNode);g.create("div",{"class":"dijitInline dataDrilling_drillDataButtonIcon esriGESpaceAfterBig"},b);var c=g.create("div",{"class":"dijitInline dataDrilling_drillDataButtonLabel",innerHTML:l.drillForMoreData},b),e=a.getBox();p.set(b,{left:e.x+"px",top:e.y+"px",width:e.w+"px",height:e.h+"px",lineHeight:e.h+"px"});var d=b.clientWidth;d>e.w&&p.set(b,"left",e.x-(d-e.w)/2+"px");c.style.maxWidth=d-50+"px";c.style.whiteSpace="normal";f._ddButtons.push({destroy:function(){g.destroy(b)}});
return b}var h=a.widget,m=a.onClick,f=this;this._ddButtons=this._ddButtons||[];var b;if(v.isMobileDevice()){var d=function(a){b.style.opacity=a?1:0;f._shownButtons.splice(f._shownButtons.indexOf(b),1);a&&f._shownButtons.push(b);n&&n.remove();a&&f._syncButtonWithScale(b)},n;this._shownButtons=this._shownButtons||[];q.addNoDragClickHandler(this.parentWidget.domNode,function(){setTimeout(function(){!f._shownButtons.length&&r.isMouseOver(h.domNode,{checkAllChildren:!0})&&(b=b||c(),d(!0),setTimeout(function(){n=
q.addNoDragClickHandler(b,function(){d(!1);m(b)});k.once(document.body,"touchend",function(){d(!1)})}))})},{detectLongPress:!0,longPressTimeout:750,ignoreReleaseIfLongPressHappened:!0,longPressCallback:function(){r.isMouseOver(h.domNode,{checkAllChildren:!0})&&(b=b||c(),d(!0),m(b),setTimeout(function(){d(!1)}))}})}else h.own(k.once(this.parentWidget.domNode,"mouseover",function(){b=b||c();f._syncButtonWithScale(b);k(b,"click",function(){m(b)})}))},_panelScale:null,notifyPanelScaleChanged:function(a){this._panelScale=
a;this._ddButtons&&this._ddButtons.forEach(this._syncButtonWithScale.bind(this))},_syncButtonWithScale:function(a){a&&a.style&&(a.style.fontSize=13/(this._panelScale||1)+"px")},destroyButtons:function(){this._ddButtons=this._ddButtons||[];this._ddButtons.forEach(function(a){a.destroy()});this._ddButtons.length=0}})});