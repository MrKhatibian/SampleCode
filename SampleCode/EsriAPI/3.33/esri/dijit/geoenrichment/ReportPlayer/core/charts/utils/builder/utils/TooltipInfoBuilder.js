// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.33/esri/copyright.txt for details.
//>>built
define("esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/builder/utils/TooltipInfoBuilder",["dojo/_base/lang","esri/dijit/geoenrichment/utils/ObjectUtil","./ChartDataUtil","../../../../supportClasses/templateJsonUtils/fieldInfo/FieldInfoBuilder"],function(g,h,k,l){var f={},m=0;f.getTooltipInfo=function(a){function c(b,c,e){var f=d.dataLabelsShowValuePercentSymbol||d.yAxis&&d.yAxis.showPercentSymbol&&!d.yAxis.showValuesAsWeightsInSeries&&!d.showValuesAsWeightInStack||a.fieldInfo&&l.isFieldInfoInPercentState(a.fieldInfo),
g=d.dataLabelsShowValueCurrencySymbol;return k.formatNumber(b,void 0!==c?{dataLabelsDecimals:c}:void 0!==a.decimals?{dataLabelsDecimals:a.decimals}:d,e&&f,e&&g)}var d=a.visualProperties,e=a.isMultiFeature?a.absSumInAreasValue:a.absSumInSeriesValue,b=d.tooltip,f=h.copyOwnJsonProperties(b.style,g.mixin({},a.themeSettings.tooltip)),n=h.copyOwnJsonProperties(b.linkStyle,g.mixin({},a.themeSettings.tooltipLink)),e={id:"tooltipId."+m++,getContext:function(){return{fieldData:a.viewModel.dynamicReportInfo&&
a.viewModel.dynamicReportInfo.fieldData,conditionalStyling:a.conditionalStyling,fieldInfo:a.fieldInfo,comparisonFeatureAttribute:a.comparisonFeatureAttribute,richTextFieldInfo:b.fieldInfo,tooltipTemplateValues:b.templateValues,chartContainer:a.chartContainer,viewModel:a.viewModel,theme:a.theme,dataDrillingPanelInfo:a.dataDrillingPanelInfo}},isMultiFeature:a.isMultiFeature,value:a.yValue,label:a.pointLabel,seriesLabel:a.seriesLabel,valueLabel:c(a.yValue,void 0,!0),isSinglePointInSeries:a.isSinglePointInSeries,
sumValueLabel:c(a.isMultiFeature?a.sumInAreasValue:a.sumInSeriesValue,void 0,!0),minValueLabel:c(a.isMultiFeature?a.minInAreasValue:a.minInSeriesValue,void 0,!0),maxValueLabel:c(a.isMultiFeature?a.maxInAreasValue:a.maxInSeriesValue,void 0,!0),avgValueLabel:c(a.isMultiFeature?a.avgInAreasValue:a.avgInSeriesValue,void 0,!0),weightValueLabel:e?c(Math.abs(a.yValue)/e*100,2)+"%":"",weightInStackLabel:a.weightInStack?c(100*a.weightInStack,2)+"%":"",formatFunc:function(a){return c(a,void 0,!0)},isUnavailableData:isNaN(a.yValue),
isThisAreaSpecific:a.isThisAreaSpecific,isThisAreaSingleSeries:a.isThisAreaSingleSeries,hasNegativeValues:a.hasNegativeValues,getGroup:null,fill:a.fill,stroke:a.stroke,marker:a.marker,isBenchmarked:a.isBenchmarked,unbenchmarkedValue:a.unbenchmarkedValue,unbenchmarkedValueLabel:c(a.unbenchmarkedValue,void 0,!0),showTitle:b.title,showValue:b.value,showMin:b.min,showMax:b.max,showAvg:b.avg,showWeight:b.weight,showConditional:b.conditional,tooltipStyle:f,tooltipLinkStyle:n,pointName:a.pointName,seriesName:a.seriesName,
areaName:a.areaName,featureIndex:a.featureIndex,isComparisonPoint:a.isComparisonPoint};if(!a.viewModel.dynamicReportInfo&&a.dataDrillingPanelInfo)a.chartContainer.onTooltipInfoCreated(e);return e};return f});