// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.33/esri/copyright.txt for details.
//>>built
require({cache:{"esri/dijit/geoenrichment/promise/all":function(){define(["dojo/promise/all"],function(k){return k})},"esri/dijit/geoenrichment/Deferred":function(){define(["dojo/Deferred"],function(k){return k})},"esri/dijit/geoenrichment/when":function(){define(["dojo/when"],function(k){return k})},"esri/dijit/geoenrichment/ReportPlayer/config":function(){define(["esri/kernel"],function(k){function g(f){f=f.split(".");return Number((Number(f[0])+Number(f[1])/100).toFixed(2))}k=Math.max(g("3.33"),
g(k.version)).toFixed(2);return{jsapiVersion:k,esriDijitCssUrl:"https://js.arcgis.com/"+k+"/dijit/themes/claro/claro.css",esriCssUrl:"https://js.arcgis.com/"+k+"/esri/css/esri.css",playerSourceRootUrl:"https://js.arcgis.com/"+k+"/",configScriptText:null,env:"prod",isPlayerOnServer:!1,updateVariableInfoFromDataXml:!0,runReportTask:{cacheResult:!0,ignoreErrors:!0,secondAttempt:!0},maps:{maxNumberOfMapsShownAtTheSameTime:6},charts:{showErrorIfHasUnavailableData:!1},tables:{leaveEmptyCellsUponError:!0,
showUnavailableData:!0},createImageCommand:{skipSavingFile:!1},createPDFCommand:{skipSavingFile:!1},createPlayerCommand:{compressData:!1,prettifyDataJson:!1},exportToExcel:{skipSavingFile:!1},modules:{exportCommands:!0,complexCellTooltips:!0,paths:{panoramicViewer:null}},generalization:{factor:-1,maxVerticesInAllFeatures:1E5,numVerticesPerFeature:5E4}}})},"esri/dijit/geoenrichment/ReportPlayer/playerSupports/_CommandSupport":function(){define("dojo/_base/declare dojo/_base/lang esri/dijit/geoenrichment/Deferred esri/dijit/geoenrichment/when esri/dijit/geoenrichment/ReportPlayer/PlayerCommands esri/dijit/geoenrichment/ReportPlayer/config esri/dijit/geoenrichment/utils/DeviceUtil".split(" "),
function(k,g,f,e,c,b,a){return k(null,{_initCommands:function(){a.isMobileDevice()||!b.modules.exportCommands?this.playerToolbar.notifyCommandButtonsAdded():e(this.dataProvider.getCommands&&this.dataProvider.getCommands(),function(a){this._createCommandButtons(a);this.playerToolbar&&this.playerToolbar.notifyCommandButtonsAdded()}.bind(this))},_lastNonPrintCommandId:null,_executeExportCallback:null,_executePrintCallback:null,_createCommandButtons:function(a){function b(a){var b=new f,h=new f;d.onCommandSettingsShown(b.promise);
d._saveVisualState();e(d._getPrintableContainer({commandId:a,showDialog:!0}),function(a){if(a){var b=a.getSelectedCommandId();b&&b!==c.PRINT&&(d._lastNonPrintCommandId=b);e(d._executeCommand(b,{printableContainer:a}),h.resolve,h.reject)}else e(d._applySavedVisualState(),function(){d.onCommandCanceled();h.resolve()})}).always(b.resolve);return h.promise}var d=this;if(a&&a.length){var n,m=a.filter(function(a){return a.id===c.PRINT?(n=a,!1):!0});m.length&&(this._executeExportCallback=function(){return b(d._lastNonPrintCommandId||
m[0].id)},this._createCommandButton(m[0],this._executeExportCallback));n&&(this._executePrintCallback=function(){return b(n.id)},this._createCommandButton(n,this._executePrintCallback))}},executeExport:function(){return this._executeExportCallback&&this._executeExportCallback()},executePrint:function(){return this._executePrintCallback&&this._executePrintCallback()},_createCommandButton:function(a,b){return this.playerToolbar&&this.playerToolbar.createCommandButton(a,b)},getCommandExportDialogSettings:function(){return this._getPrintDialogSettings()},
executeCommand:function(a,b){b=b||{};this._saveVisualState();var d=this._viewModel.dynamicReportInfo.fieldData;!this.isPlayerOnServer||a!==c.PDF&&a!==c.IMAGE||(b.exportSettings=g.mixin({},d.reportInfo&&d.reportInfo.exportSettings,b.exportSettings));var h=this;return e(this._getPrintableContainer({commandId:a,showDialog:!1,exportSettings:b.exportSettings}),function(d){return h._executeCommand(a,g.mixin({printableContainer:d},b))})},_executeCommand:function(a,b){function d(){e(h.dataProvider.executeCommand&&
h.dataProvider.executeCommand(a,h,b,function(a){h.onCommandProgress(a)}),p.resolve,p.reject)}var h=this,m=this._viewModel.dynamicReportInfo.fieldData;a!==c.PDF&&a!==c.DYNAMIC_HTML||!m.runReportTaskIDs||(b.creditsTaskIDs=m.runReportTaskIDs);var p=new f;this.isPlayerOnServer?d():setTimeout(d);var g=p.promise.then(function(a){return e(h._applySavedVisualState(),function(){return a})});this.onCommandStart(g,a);this._showWaiting(g,"executeCommand");g.always(function(){h.onCommandEnd(g)});return g},_visualStateMemo:null,
_saveVisualState:function(){this._visualStateMemo=this.getVisualState()},_applySavedVisualState:function(){var a=this;return this.setVisualState(this._visualStateMemo).then(function(){a._visualStateMemo=null})},onCommandSettingsShown:function(a){},onCommandCanceled:function(){},onCommandStart:function(a,b){},onCommandProgress:function(a){},onCommandEnd:function(a){}})})},"esri/dijit/geoenrichment/ReportPlayer/PlayerCommands":function(){define([],function(){var k={HTML:"createHTML",PDF:"createPDF",
PRINT:"print",DYNAMIC_HTML:"createDynamicHTML",IMAGE:"createImage",EXCEL:"exportToExcel",isSupported:function(g){for(var f in k)if(k[f]===g)return!0;return!1}};return k})},"esri/dijit/geoenrichment/utils/DeviceUtil":function(){define(["dojo/sniff"],function(k){var g={},f=function(){var e=window,c=document,b=e.navigator.platform,a=e.navigator.userAgent,d={ios:!1,android:!1,androidChrome:!1,desktop:!1,windowsPhone:!1,iphone:!1,iphoneX:!1,ipod:!1,ipad:!1,edge:!1,ie:!1,firefox:!1,macos:!1,windows:!1,
cordova:!(!e.cordova&&!e.phonegap),phonegap:!(!e.cordova&&!e.phonegap)},h=e.screen.width,l=e.screen.height,n=a.match(/(Windows Phone);?[\s\/]+([\d.]+)?/),m=a.match(/(Android);?[\s\/]+([\d.]+)?/),p=a.match(/(iPad).*OS\s([\d_]+)/),f=a.match(/(iPod)(.*OS\s([\d_]+))?/),g=!p&&a.match(/(iPhone\sOS|iOS)\s([\d_]+)/),h=g&&(375===h&&812===l||414===h&&896===l),l=0<=a.indexOf("MSIE ")||0<=a.indexOf("Trident/"),r=0<=a.indexOf("Edge/"),k=0<=a.indexOf("Gecko/")&&0<=a.indexOf("Firefox/"),v="MacIntel"===b,b="Win32"===
b;d.ie=l;d.edge=r;d.firefox=k;n&&(d.os="windows",d.osVersion=n[2],d.windowsPhone=!0);m&&!b&&(d.os="android",d.osVersion=m[2],d.android=!0,d.androidChrome=0<=a.toLowerCase().indexOf("chrome"));if(p||g||f)d.os="ios",d.ios=!0;g&&!f&&(d.osVersion=g[2].replace(/_/g,"."),d.iphone=!0,d.iphoneX=h);p&&(d.osVersion=p[2].replace(/_/g,"."),d.ipad=!0);f&&(d.osVersion=f[3]?f[3].replace(/_/g,"."):null,d.iphone=!0);d.ios&&d.osVersion&&0<=a.indexOf("Version/")&&"10"===d.osVersion.split(".")[0]&&(d.osVersion=a.toLowerCase().split("version/")[1].split(" ")[0]);
d.webView=!(!(g||p||f)||!a.match(/.*AppleWebKit(?!.*Safari)/i)&&!e.navigator.standalone)||e.matchMedia&&e.matchMedia("(display-mode: standalone)").matches;d.standalone=d.webView;d.desktop=!(d.os||d.android||d.webView);d.desktop&&(d.macos=v,d.windows=b);d.os&&"ios"===d.os&&(a=d.osVersion.split("."),c=c.querySelector('meta[name\x3d"viewport"]'),d.minimalUi=!d.webView&&(f||g)&&(7===1*a[0]?1<=1*a[1]:7<1*a[0])&&c&&0<=c.getAttribute("content").indexOf("minimal-ui"));d.needsStatusbarOverlay=function(){return(d.webView||
d.android&&d.cordova)&&e.innerWidth*e.innerHeight===e.screen.width*e.screen.height?!d.iphoneX||90!==e.orientation&&-90!==e.orientation?!0:!1:!1};d.statusbar=d.needsStatusbarOverlay();d.pixelRatio=e.devicePixelRatio||1;return d}();g.device=f;g.isMobileDevice=function(){return!f.desktop&&!f.ipad};g.isPCWithTouchScreen=function(){return f.desktop&&k("touch")};g.isLandscape=function(){return 90===Math.abs(window.orientation)};g.press=f.desktop?"mousedown":"touchstart";g.release=f.desktop?"mouseup":"touchend";
g.click=f.desktop?"click":"touchend";g.clickOrRelease=f.desktop?"click, mouseup":"touchend";g.move=f.desktop?"mousemove":"touchmove";return g})},"esri/dijit/geoenrichment/ReportPlayer/playerSupports/_LogoSupport":function(){define(["dojo/_base/declare","esri/dijit/geoenrichment/when","../core/annotations/supportClasses/DynamicBehaviors","../core/supportClasses/images/DefaultLogoLoader"],function(k,g,f,e){return k(null,{_getReportLogo:function(c,b,a){function d(){return g(h._reportData.attachmentsStore&&
h._reportData.attachmentsStore.getImages(),function(d){return g(d&&d[0]&&d[0].getThumbnail(),function(d){return d||h._getDefaultLogo(b,a)})})}var h=this;switch(c){case f.ATTACHMENTS:return d();default:return this._getDefaultLogo(b,a)}},_getDefaultLogo:function(c,b){return this._reportData.customLogo||b||e.getDefaultLogo(this._viewModel.getDocumentDefaultStyles())}})})},"esri/dijit/geoenrichment/ReportPlayer/core/annotations/supportClasses/DynamicBehaviors":function(){define([],function(){var k={ATTACHMENTS:"attachments",
LOGO:"logo",toSupportedValue:function(g,f){return g===k.ATTACHMENTS?g:g||f?k.LOGO:null}};return k})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/images/DefaultLogoLoader":function(){define(["require","esri/dijit/geoenrichment/Deferred","esri/dijit/geoenrichment/utils/ColorUtil"],function(k,g,f){return{_identifyDefaultLogoBackground:function(e){return!e||f.isTransparent(e.backgroundColor)?"transparent":f.isLightColor(e.backgroundColor)?"light":"dark"},_loadLogo:function(e){var c=new g;
k(["./"+e],function(b){c.resolve(b)});return c.promise},getDefaultLogo:function(e){switch(this._identifyDefaultLogoBackground(e)){case "light":return this._loadLogo("DefaultLogoGraphicReportDark");case "dark":return this._loadLogo("DefaultLogoGraphicReportLight");default:return this._loadLogo("DefaultLogoGraphicReportGeneric")}}}})},"esri/dijit/geoenrichment/utils/ColorUtil":function(){define(["dojo/_base/Color","dojox/color/_base","dojox/color/Palette"],function(k,g,f){function e(b,a,d){return Math.round((b&
255)*(1-d)+(a&255)*d)}var c={toCSSColor:function(b,a,d){"string"!==typeof b||/^0x/i.test(b)||(b=k.fromString(b));if(b instanceof k)return a||1===b.a?b.toHex():b.toCss(!0);if(null==b||isNaN(b))return d?c.toCSSColor(d,a):"#000000";b="00000"+Number(b).toString(16);return"#"+b.substr(b.length-6)},toColor:function(b,a){return"object"===typeof b?(new k).setColor(b):k.fromString(c.toCSSColor(b,!1,a))},getCSSColorWithAlpha:function(b,a){return c.toCSSColor(c.getColorWithAlpha(b,a))},getColorWithAlpha:function(b,
a){b=(new k).setColor(b);b.a=a;return b},transform:function(b,a){var d=new f;d.colors=[new k(b)];return d.transform({use:void 0!==a.dl?"hsl":"hsv",dh:a.dh||0,ds:a.ds||0,dv:a.dv||0,dl:a.dl||0}).colors[0]},generateAnalogousColorScheme:function(b,a,d){return f.generators.analogous({base:b,high:a,low:d}).colors},applyColorHue:function(b,a){b=new g.Color(b);a=new g.Color(a);b=b.toHsl();var d=a.toHsl();b=g.fromHsl({h:b.h,s:0===b.s?0:0===d.s?b.s:d.s,l:d.l});b.a=a.a;return b},getColorParams:function(b){b=
new g.Color(b);var a=b.toHsv();a.l=b.toHsl().l;return a},generateGradient:function(b,a){b=b.map(c.toRGBColor);var d=[];if(0===b.length-1||1===a){b=b[0];for(var h=0;h<a;h++)d.push(b);return d}for(var l=1/(a-1),h=0;h<a;h++)d.push(c.getGradientRGBColor(b,h*l));return d},getGradientRGBColor:function(b,a,d){var h=b.length-1,l=1>h||0>=a?0:1<=a?h:-1;if(0<=l)return b[l];a*=h;l=Math.floor(a);l===h&&l--;return c.mixRGBColors(b[l],b[l+1],a-l,d)},mixRGBColors:function(b,a,d,h){1<d?d=1:0>d&&(d=0);var c=e(b,a,
d),n=e(b>>8,a>>8,d),m=e(b>>16,a>>16,d);return((h?e(b>>24,a>>24,d):0)<<24)+(m<<16)+(n<<8)+c},toRGBColor:function(b,a){b=c.toCSSColor(b,!0,a);return parseInt("0x"+b.substr(1))},getContrastColor:function(b,a,d,h){return c.isLightColor(b,h)?c.toColor(a,"#000000"):c.toColor(d,"#FFFFFF")},getHighlightColor:function(b,a){a=a||{};b=new g.Color(b);x=b.toHsl();if("darker"===a.method)x.l=50>x.l?x.l+30:x.l-20,0<x.s&&(x.s+=30);else{var d=a.saturation||100,h=a.luminosity1||75;a=a.luminosity2||50;0===x.s?x.l=50>
x.l?x.l+30:x.l-20:(x.s=d,x.l=x.l<a?h:x.l>h?a:x.l-a>h-x.l?a:h)}a=g.fromHsl(x);a.a=b.a;return a},getLightness:function(b){b=c.toRGBColor(b);return(299*(b>>16&255)+587*(b>>8&255)+114*(b&255))/1E3},isLightColor:function(b,a){return c.getLightness(b)>=(void 0===a?128:a)},colorsEqual:function(b,a){b instanceof k||(b=c.toColor(b));a instanceof k||(a=c.toColor(a));return b.a==a.a&&b.r==a.r&&b.g==a.g&&b.b==a.b},isTransparent:function(b){b=c.toCSSColor(b);return"rgba(0,0,0,0)"===b.toLowerCase().replace(/\s/g,
"")},generateRandomColor:function(b){function a(){return d+Math.round((h-d)*Math.random())}b=b||{};var d=b.min||0,h=b.max||255,c=b.randomizeAlpha?a():1;return b.grayScheme?(b=a(),new k([b,b,b,c])):new k([a(),a(),a(),c])}};return c})},"dojox/color/_base":function(){define(["../main","dojo/_base/lang","dojo/_base/Color","dojo/colors"],function(k,g,f,e){k=g.getObject("color",!0,k);k.Color=f;k.blend=f.blendColors;k.fromRgb=f.fromRgb;k.fromHex=f.fromHex;k.fromArray=f.fromArray;k.fromString=f.fromString;
k.greyscale=e.makeGrey;g.mixin(k,{fromCmy:function(c,b,a){g.isArray(c)?(b=c[1],a=c[2],c=c[0]):g.isObject(c)&&(b=c.m,a=c.y,c=c.c);return new f({r:Math.round(255*(1-c/100)),g:Math.round(255*(1-b/100)),b:Math.round(255*(1-a/100))})},fromCmyk:function(c,b,a,d){g.isArray(c)?(b=c[1],a=c[2],d=c[3],c=c[0]):g.isObject(c)&&(b=c.m,a=c.y,d=c.b,c=c.c);d/=100;return new f({r:Math.round(255*(1-Math.min(1,c/100*(1-d)+d))),g:Math.round(255*(1-Math.min(1,b/100*(1-d)+d))),b:Math.round(255*(1-Math.min(1,a/100*(1-d)+
d)))})},fromHsl:function(c,b,a){g.isArray(c)?(b=c[1],a=c[2],c=c[0]):g.isObject(c)&&(b=c.s,a=c.l,c=c.h);b/=100;for(a/=100;0>c;)c+=360;for(;360<=c;)c-=360;var d,h;120>c?(d=(120-c)/60,h=c/60,c=0):240>c?(d=0,h=(240-c)/60,c=(c-120)/60):(d=(c-240)/60,h=0,c=(360-c)/60);d=2*b*Math.min(d,1)+(1-b);h=2*b*Math.min(h,1)+(1-b);c=2*b*Math.min(c,1)+(1-b);.5>a?(d*=a,h*=a,c*=a):(d=(1-a)*d+2*a-1,h=(1-a)*h+2*a-1,c=(1-a)*c+2*a-1);return new f({r:Math.round(255*d),g:Math.round(255*h),b:Math.round(255*c)})}});k.fromHsv=
function(c,b,a){g.isArray(c)?(b=c[1],a=c[2],c=c[0]):g.isObject(c)&&(b=c.s,a=c.v,c=c.h);360==c&&(c=0);b/=100;a/=100;var d,h,l;if(0==b)h=l=d=a;else{var n=c/60;c=Math.floor(n);var e=n-c,n=a*(1-b),p=a*(1-b*e);b=a*(1-b*(1-e));switch(c){case 0:d=a;h=b;l=n;break;case 1:d=p;h=a;l=n;break;case 2:d=n;h=a;l=b;break;case 3:d=n;h=p;l=a;break;case 4:d=b;h=n;l=a;break;case 5:d=a,h=n,l=p}}return new f({r:Math.round(255*d),g:Math.round(255*h),b:Math.round(255*l)})};g.extend(f,{toCmy:function(){return{c:Math.round(100*
(1-this.r/255)),m:Math.round(100*(1-this.g/255)),y:Math.round(100*(1-this.b/255))}},toCmyk:function(){var c,b=this.r/255,a=this.g/255,d=this.b/255;c=Math.min(1-b,1-a,1-d);return{c:Math.round((1-b-c)/(1-c)*100),m:Math.round((1-a-c)/(1-c)*100),y:Math.round((1-d-c)/(1-c)*100),b:Math.round(100*c)}},toHsl:function(){var c=this.r/255,b=this.g/255,a=this.b/255,d=Math.min(c,a,b),h=Math.max(c,b,a),l=h-d,n=0,e=0,d=(d+h)/2;0<d&&1>d&&(e=l/(.5>d?2*d:2-2*d));0<l&&(h==c&&h!=b&&(n+=(b-a)/l),h==b&&h!=a&&(n+=2+(a-
c)/l),h==a&&h!=c&&(n+=4+(c-b)/l),n*=60);return{h:n,s:Math.round(100*e),l:Math.round(100*d)}},toHsv:function(){var c=this.r/255,b=this.g/255,a=this.b/255,d=Math.max(c,b,a),h=d-Math.min(c,a,b),l=null,n=0==d?0:h/d;0==n?l=0:(l=c==d?60*(b-a)/h:b==d?120+60*(a-c)/h:240+60*(c-b)/h,0>l&&(l+=360));return{h:l,s:Math.round(100*n),v:Math.round(100*d)}}});return k})},"dojox/main":function(){define(["dojo/_base/kernel"],function(k){return k.dojox})},"dojo/colors":function(){define(["./_base/kernel","./_base/lang",
"./_base/Color","./_base/array"],function(k,g,f,e){var c={};g.setObject("dojo.colors",c);var b=function(a,b,c){0>c&&++c;1<c&&--c;var d=6*c;return 1>d?a+(b-a)*d:1>2*c?b:2>3*c?a+(b-a)*(2/3-c)*6:a};k.colorFromRgb=f.fromRgb=function(a,h){var d=a.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(d){a=d[2].split(/\s*,\s*/);var c=a.length,d=d[1];if("rgb"==d&&3==c||"rgba"==d&&4==c)return d=a[0],"%"==d.charAt(d.length-1)?(d=e.map(a,function(a){return 2.56*parseFloat(a)}),4==c&&(d[3]=a[3]),f.fromArray(d,
h)):f.fromArray(a,h);if("hsl"==d&&3==c||"hsla"==d&&4==c){var d=(parseFloat(a[0])%360+360)%360/360,m=parseFloat(a[1])/100,p=parseFloat(a[2])/100,m=.5>=p?p*(m+1):p+m-p*m,p=2*p-m,d=[256*b(p,m,d+1/3),256*b(p,m,d),256*b(p,m,d-1/3),1];4==c&&(d[3]=a[3]);return f.fromArray(d,h)}}return null};var a=function(a,b,c){a=Number(a);return isNaN(a)?c:a<b?b:a>c?c:a};f.prototype.sanitize=function(){this.r=Math.round(a(this.r,0,255));this.g=Math.round(a(this.g,0,255));this.b=Math.round(a(this.b,0,255));this.a=a(this.a,
0,1);return this};c.makeGrey=f.makeGrey=function(a,b){return f.fromArray([a,a,a,b])};g.mixin(f.named,{aliceblue:[240,248,255],antiquewhite:[250,235,215],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],blanchedalmond:[255,235,205],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,
255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],
dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,
216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,
85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],oldlace:[253,245,230],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,
112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],thistle:[216,
191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],whitesmoke:[245,245,245],yellowgreen:[154,205,50]});return f})},"dojox/color/Palette":function(){define(["dojo/_base/lang","dojo/_base/array","./_base"],function(k,g,f){function e(a,b,d){var h=new f.Palette;h.colors=[];g.forEach(a.colors,function(a){h.colors.push(new f.Color({r:Math.min(255,Math.max(0,"dr"==b?a.r+d:a.r)),g:Math.min(255,Math.max(0,"dg"==b?a.g+d:a.g)),b:Math.min(255,Math.max(0,"db"==b?a.b+d:
a.b)),a:Math.min(1,Math.max(0,"da"==b?a.a+d:a.a))}))});return h}function c(a,b,d){var h=new f.Palette;h.colors=[];g.forEach(a.colors,function(a){a=a.toCmy();h.colors.push(f.fromCmy(Math.min(100,Math.max(0,"dc"==b?a.c+d:a.c)),Math.min(100,Math.max(0,"dm"==b?a.m+d:a.m)),Math.min(100,Math.max(0,"dy"==b?a.y+d:a.y))))});return h}function b(a,b,d){var h=new f.Palette;h.colors=[];g.forEach(a.colors,function(a){a=a.toCmyk();h.colors.push(f.fromCmyk(Math.min(100,Math.max(0,"dc"==b?a.c+d:a.c)),Math.min(100,
Math.max(0,"dm"==b?a.m+d:a.m)),Math.min(100,Math.max(0,"dy"==b?a.y+d:a.y)),Math.min(100,Math.max(0,"dk"==b?a.b+d:a.b))))});return h}function a(a,b,d){var h=new f.Palette;h.colors=[];g.forEach(a.colors,function(a){a=a.toHsl();h.colors.push(f.fromHsl(("dh"==b?a.h+d:a.h)%360,Math.min(100,Math.max(0,"ds"==b?a.s+d:a.s)),Math.min(100,Math.max(0,"dl"==b?a.l+d:a.l))))});return h}function d(a,b,d){var h=new f.Palette;h.colors=[];g.forEach(a.colors,function(a){a=a.toHsv();h.colors.push(f.fromHsv(("dh"==b?a.h+
d:a.h)%360,Math.min(100,Math.max(0,"ds"==b?a.s+d:a.s)),Math.min(100,Math.max(0,"dv"==b?a.v+d:a.v))))});return h}f.Palette=function(a){this.colors=[];a instanceof f.Palette?this.colors=a.colors.slice(0):a instanceof f.Color?this.colors=[null,null,a,null,null]:k.isArray(a)?this.colors=g.map(a.slice(0),function(a){return k.isString(a)?new f.Color(a):a}):k.isString(a)&&(this.colors=[null,null,new f.Color(a),null,null])};k.extend(f.Palette,{transform:function(h){var l=e;if(h.use){var n=h.use.toLowerCase();
0==n.indexOf("hs")?l="l"==n.charAt(2)?a:d:0==n.indexOf("cmy")&&(l="k"==n.charAt(3)?b:c)}else if("dc"in h||"dm"in h||"dy"in h)l="dk"in h?b:c;else if("dh"in h||"ds"in h)l="dv"in h?d:a;var n=this,m;for(m in h)"use"!=m&&(n=l(n,m,h[m]));return n},clone:function(){return new f.Palette(this)}});k.mixin(f.Palette,{generators:{analogous:function(a){var b=a.high||60,d=a.low||18;a=(k.isString(a.base)?new f.Color(a.base):a.base).toHsv();var h=Math.max(10,95>=a.s?a.s+5:100-(a.s-95)),c=92<=a.v?a.v-9:Math.max(a.v+
9,20),e=90>=a.v?Math.max(a.v+5,20):95+Math.ceil((a.v-90)/2),q=[h,1<a.s?a.s-1:21-a.s,a.s,h,h],r=[c,e,a.v,c,e];return new f.Palette(g.map([(a.h+d+360)%360,(a.h+Math.round(d/2)+360)%360,a.h,(a.h-Math.round(b/2)+360)%360,(a.h-b+360)%360],function(a,b){return f.fromHsv(a,q[b],r[b])}))},monochromatic:function(a){a=k.isString(a.base)?new f.Color(a.base):a.base;var b=a.toHsv(),d=9<b.s-30?b.s-30:b.s+30,h=b.s,c=20<b.v-20?b.v-20:b.v+60,e=20<b.v-50?b.v-50:b.v+30;return new f.Palette([f.fromHsv(b.h,d,100-.8*(100-
b.v)),f.fromHsv(b.h,h,e),a,f.fromHsv(b.h,d,e),f.fromHsv(b.h,h,c)])},triadic:function(a){a=k.isString(a.base)?new f.Color(a.base):a.base;var b=a.toHsv(),d=(b.h-157+360)%360,h=90<b.s?b.s-10:b.s+10,c=95<b.s?b.s-5:b.s+5,e=20<b.v-20?b.v-20:b.v+20,g=20<b.v-30?b.v-30:b.v+30,r=70<b.v-30?b.v-30:b.v+30;return new f.Palette([f.fromHsv((b.h+57+360)%360,20<b.s?b.s-10:b.s+10,b.v),f.fromHsv(b.h,h,g),a,f.fromHsv(d,h,e),f.fromHsv(d,c,r)])},complementary:function(a){a=k.isString(a.base)?new f.Color(a.base):a.base;
var b=a.toHsv(),d=360>2*b.h+137?2*b.h+137:Math.floor(b.h/2)-137,h=100-.9*(100-b.s),c=Math.min(100,b.s+20),e=20<b.v?b.v-30:b.v+30;return new f.Palette([f.fromHsv(b.h,Math.max(b.s-10,0),Math.min(100,b.v+30)),f.fromHsv(b.h,h,e),a,f.fromHsv(d,c,e),f.fromHsv(d,b.s,b.v)])},splitComplementary:function(a){var b=k.isString(a.base)?new f.Color(a.base):a.base,d=a.da||30;a=b.toHsv();var h=360>2*a.h+137?2*a.h+137:Math.floor(a.h/2)-137,c=(h-d+360)%360,d=(h+d)%360,h=100-.9*(100-a.s),e=Math.min(100,a.s+20),g=20<
a.v?a.v-30:a.v+30;return new f.Palette([f.fromHsv(c,Math.max(a.s-10,0),Math.min(100,a.v+30)),f.fromHsv(c,h,g),b,f.fromHsv(d,e,g),f.fromHsv(d,a.s,a.v)])},compound:function(a){a=k.isString(a.base)?new f.Color(a.base):a.base;var b=a.toHsv(),d=360>2*b.h+18?2*b.h+18:Math.floor(b.h/2)-18,h=360>2*b.h+120?2*b.h+120:Math.floor(b.h/2)-120,c=360>2*b.h+99?2*b.h+99:Math.floor(b.h/2)-99,e=80<b.s-10?b.s-10:b.s+10,g=10<b.s-25?b.s-25:b.s+25,r=80<b.v-20?b.v-20:b.v+20,u=Math.max(b.v,20);return new f.Palette([f.fromHsv(d,
10<b.s-40?b.s-40:b.s+40,10<b.v-40?b.v-40:b.v+40),f.fromHsv(d,e,r),a,f.fromHsv(h,g,u),f.fromHsv(c,e,r)])},shades:function(a){a=k.isString(a.base)?new f.Color(a.base):a.base;var b=a.toHsv(),d=100==b.s&&0==b.v?0:b.s,h=20<=b.v-25?b.v-25:b.v+55,c=20<=b.v-75?b.v-75:b.v+5,e=Math.max(b.v-10,20);return new f.Palette([new f.fromHsv(b.h,d,20<b.v-50?b.v-50:b.v+30),new f.fromHsv(b.h,d,h),a,new f.fromHsv(b.h,d,c),new f.fromHsv(b.h,d,e)])}},generate:function(a,b){if(k.isFunction(b))return b({base:a});if(f.Palette.generators[b])return f.Palette.generators[b]({base:a});
throw Error("dojox.color.Palette.generate: the specified generator ('"+b+"') does not exist.");}});return f.Palette})},"esri/dijit/geoenrichment/ReportPlayer/playerSupports/_MapSupport":function(){define("require dojo/_base/declare esri/dijit/geoenrichment/Deferred esri/dijit/geoenrichment/when esri/graphic esri/dijit/geoenrichment/utils/CoordinateUtil".split(" "),function(k,g,f,e,c,b){return g(null,{_initBuilderPromise:null,_mapBuilder:null,_initMapBuilder:function(){var a=this;if(this._initBuilderPromise)return this._initBuilderPromise;
var b=new f;k(["../core/supportClasses/map/MapBuilder"],function(d){a._mapBuilder=new d({renderMapsFromCalculators:a.isPlayerOnServer,getPlayerZoomScale:function(b){var d=a.getCurrentReportContainer();return d&&d.getPanelZoomScale?d.getPanelZoomScale(b):d&&d.getZoomInfo&&d.getZoomInfo().scale}});b.resolve()});return this._initBuilderPromise=b.promise},collectMaps:function(a){return this._mapBuilder?a&&a.allAreas?this._mapBuilder.collectAllAreasMaps():this._mapBuilder.collectAreaMaps(this.getCurrentAnalysisAreaIndex()):
[]},_resetMapBuilder:function(){this._mapBuilder&&this._mapBuilder.reset()},_createMap:function(a,d){d=d||{};var h,l={},n=d.areaIndex||0,m=this._reportData;this.isPlayerOnServer&&(m.analysisAreas.forEach(function(a){!a.location&&a.feature.attributes&&a.feature.attributes.STORE_LAT&&a.feature.attributes.STORE_LONG&&(a.location=new c({geometry:{x:a.feature.attributes.STORE_LONG,y:a.feature.attributes.STORE_LAT,spatialReference:{wkid:b.WGS_84_WKID}}}))}),m.combinedAreasInfo.groups&&m.combinedAreasInfo.groups.forEach(function(a){var b=
m.analysisAreas[a.indexes[0]];!a.location&&b.location&&(a.location=new c({geometry:b.location.geometry.toJson()}))}));if(m.isMultiFeature){h=[];var p=m.reverseAnalysisAreasOnMap?m.analysisAreas.slice().reverse():m.analysisAreas;p.forEach(function(a,b){var d=m.reverseAnalysisAreasOnMap?p.length-b-1:b;l[h.length]=d;h.push(a.feature);b=m.combinedAreasInfo.groups;b&&b.length&&b.some(function(a){return-1!==a.indexes.indexOf(d)})||(a.location&&(l[h.length]=d,h.push(a.location)),a.additionalFeatures&&a.additionalFeatures.forEach(function(a){l[h.length]=
d;h.push(a)}))});m.combinedAreasInfo.groups&&m.combinedAreasInfo.groups.forEach(function(a){a.location&&(l[h.length]=a.indexes[0],h.push(a.location),a.location.locationName=a.locationName);a.additionalFeatures&&a.additionalFeatures.forEach(function(b){l[h.length]=a.indexes[0];h.push(b)})})}else{var f=m.analysisAreas[n];h=[f.feature];f.location&&h.push(f.location);f.additionalFeatures&&(h=h.concat(f.additionalFeatures));h.forEach(function(a,b){l[b]=n})}return e(this._initMapBuilder(),function(){this._mapBuilder.setArcgisUrl(m.config.portalUrl);
this._mapBuilder.setFallbackMapImageInfos(m.mapImageInfos);return this._mapBuilder.createMap(a,{features:h,featureIndexToAreaIndexMap:l,analysisAreas:m.analysisAreas,areaIndex:n,defaultBasemapId:this._getDefaultBasemapId()||d.defaultBasemapId,webMapId:d.webMapId,additionalLayerInfos:d.additionalLayerInfos,calculatorFieldName:d.calculatorFieldName,pinSymbolJson:d.pinSymbolJson,areaSymbolJsons:d.areaSymbolJsons,areaSymbolRamp:d.areaSymbolRamp,locatorPointsControllers:d.locatorPointsControllers,stdPolygonsControllers:d.stdPolygonsControllers,
thisAreasHighlightController:d.thisAreasHighlightController,legendController:d.legendController,fieldData:this._viewModel.dynamicReportInfo.fieldData,geClient:this._viewModel.dynamicReportInfo.geClient,countryID:this._viewModel.dynamicReportInfo.countryID,hierarchy:this._viewModel.dynamicReportInfo.hierarchy,waitForLoad:d.waitForLoad,extent:d.extent,attachmentsStore:this._viewModel.dynamicReportInfo.attachmentsStore,onPanContainer:function(a,b){}})}.bind(this))},_getDefaultBasemapId:function(){return null}})})},
"esri/dijit/geoenrichment/utils/CoordinateUtil":function(){define(["esri/geometry/webMercatorUtils","esri/geometry/jsonUtils"],function(k,g){var f={},e=[4326,102100,102113,3857];f.WGS_84_WKID=4326;f.WEB_MERCATOR_WKID=102100;f.getSupportedWKIDs=function(){return e.slice()};f.testSpatialReferenceWKID=function(c){c=e.indexOf(Number(c&&"object"===typeof c?c.wkid:c));return 0<=c?e[0===c?0:1]:0};f.isWebMercator=function(c){return 102100===f.testSpatialReferenceWKID(c)};f.isWGS84=function(c){return 4326===
f.testSpatialReferenceWKID(c)};f.getGeometryConverter=function(c,b){c=f.testSpatialReferenceWKID(c);b=f.testSpatialReferenceWKID(b);return c&&b&&c!==b?4326===c?k.geographicToWebMercator:k.webMercatorToGeographic:null};f.toWGS84=function(c){return f.toSpatialReference(c,4326)};f.toWebMercator=function(c){return f.toSpatialReference(c,102100)};f.toSpatialReference=function(c,b){c&&!c.toJson&&(c=g.fromJson(c));b=f.getGeometryConverter(c&&c.spatialReference,b);return null!=b?b(c):c};return f})},"esri/dijit/geoenrichment/ReportPlayer/playerSupports/_PageNavigationSupport":function(){define("dojo/_base/declare dojo/on dojo/dom-class dojo/dom-geometry dojo/dom-style ../PlayerResizeModes ../PlayerViewModes esri/dijit/geoenrichment/utils/DomUtil esri/dijit/geoenrichment/utils/TooltipUtil dojo/i18n!esri/nls/jsapi".split(" "),
function(k,g,f,e,c,b,a,d,h,l){l=l.geoenrichment.dijit.ReportPlayer.ReportPlayer;return k(null,{_currentPageIndex:null,_initPageNavigationControls:function(){var a=this;g(this.prevPageButton,"click",function(){a._showPrevPage()});g(this.nextPageButton,"click",function(){a._showNextPage()});d.hide(this.sidePageNavigator);h.setTooltipToNode(this.prevPageButton,l.previousPage);h.setTooltipToNode(this.nextPageButton,l.nextPage)},showPageAt:function(b){this.viewMode!==a.FULL_PAGES||this.isPlayerOnServer||
(b=Math.max(0,b),this._currentPageIndex=b=Math.min(this.getCurrentReportContainer().getNumberOfPages()-1,b),this.getCurrentReportContainer().showPageAt(b),this._updatePageNavigator())},_updatePageNavigator:function(){if(this.playerToolbar){var h=this.getCurrentReportContainer()&&this.getCurrentReportContainer().getNumberOfPages&&this.viewMode===a.FULL_PAGES;this.playerToolbar.setPageControlsVisible(h);if(h){h=this.getCurrentReportContainer().getNumberOfPages();d[1===h?"hide":"show"]([this.sidePageNavigator]);
f[0===this._currentPageIndex?"add":"remove"](this.prevPageButton,"disabled");f[this._currentPageIndex===h-1?"add":"remove"](this.nextPageButton,"disabled");if(this.resizeMode===b.FIT_WINDOW){var l=e.position(this.getCurrentReportContainer().stackContainer);c.set(this.sidePageNavigator,"left",Math.min(l.x+l.w+20,document.body.clientWidth-70)+"px");c.set(this.sidePageNavigator,"top",Math.max(60,l.y+10)+"px")}this.playerToolbar.updatePageSelect(h,this._currentPageIndex)}else d.hide([this.sidePageNavigator])}},
_showPrevPage:function(){0!==this._currentPageIndex&&(this._currentPageIndex--,this.showPageAt(this._currentPageIndex))},_showNextPage:function(){this._currentPageIndex!==this.getCurrentReportContainer().getNumberOfPages()-1&&(this._currentPageIndex++,this.showPageAt(this._currentPageIndex))}})})},"esri/dijit/geoenrichment/ReportPlayer/PlayerResizeModes":function(){define([],function(){var k={AUTO:"auto",FIT_WINDOW:"fitWindow",MANUAL:"manual",isSupported:function(g){for(var f in k)if(k[f]===g)return!0;
return!1},toSupportedValue:function(g){return k.isSupported(g)?g:k.FIT_WINDOW}};return k})},"esri/dijit/geoenrichment/ReportPlayer/PlayerViewModes":function(){define([],function(){var k={FULL_PAGES:"fullPages",PANELS_IN_SLIDES:"panelsInSlides",PANELS_IN_STACK:"panelsInStack",PANELS_IN_STACK_ALL:"panelsInStackAll",PANELS_IN_ROW:"panelsInRow",isSupported:function(g){for(var f in k)if(k[f]===g)return!0;return!1},toSupportedValue:function(g){return k.isSupported(g)?g:k.FULL_PAGES},isMobileSupported:function(g){return g===
k.PANELS_IN_SLIDES||g===k.PANELS_IN_STACK||g===k.PANELS_IN_STACK_ALL||g===k.PANELS_IN_ROW},isStackLike:function(g){return g===k.PANELS_IN_STACK||g===k.PANELS_IN_STACK_ALL||g===k.PANELS_IN_ROW},isStack:function(g){return g===k.PANELS_IN_STACK||g===k.PANELS_IN_STACK_ALL}};return k})},"esri/dijit/geoenrichment/utils/DomUtil":function(){define("dojo/_base/lang dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/query esri/dijit/geoenrichment/Deferred dojo/domReady!".split(" "),
function(k,g,f,e,c,b,a,d){function h(){n||(n=e.create("div",{"class":"esriGEOffscreen"},document.body));return n}var l={isHidden:function(a){return a&&f.contains(a,"esriGEHidden")},hasVisibleChildren:function(a){if(!a||!a.children.length)return!1;for(var b=0;b<a.children.length;b++)if(!l.isHidden(a.children[b]))return!0;return!1},hide:function(a){return l.addTag(a,"esriGEHidden")},show:function(a){return l.removeTag(a,"esriGEHidden")},display:function(a,b){return l[b?"show":"hide"](a)},addTag:function(a,
b){return l.applyCallback(a,function(a){a&&f.add(a,b)})},removeTag:function(a,b){return l.applyCallback(a,function(a){a&&f.remove(a,b)})},applyCallback:function(a,b,d){d&&(b=k.hitch(d,b));Array.isArray(a)?a.forEach(b):b(a);return a},getChildIndex:function(a,b){if(!a||!a.children||!b)return-1;for(var d=0;d<a.children.length;d++)if(a.children[d]===b)return d;return-1},getChildren:function(a){if(!a||!a.children)return null;for(var b=[],d=0;d<a.children.length;d++)b.push(a.children[d]);return b},getChildNodes:function(a){if(!a||
!a.childNodes)return null;for(var b=[],d=0;d<a.childNodes.length;d++)b.push(a.childNodes[d]);return b},isChildOf:function(a,b,d){var h=!1,c=function(a){if(d&&!d(a))return!1;a.parentNode===b?h=!0:a.parentNode&&c(a.parentNode)};a&&c(a);return h},isNodeInLayout:function(a){return l.isChildOf(a,document.body,function(a){return!l.isHidden(a)&&"none"!=b.get(a,"display")&&!f.contains(a,"dijitHidden")})},isNodeVisible:function(a){return l.isChildOf(a,document.body,function(a){return!f.contains(a,"dijitHidden")&&
"hidden"!=b.get(a,"visibility")})},isNodeOnscreen:function(a){return l.isChildOf(a,document.body,function(a){return!f.contains(a,"esriGEOffscreen")})},enableContent:function(a,d,h){if(a){h=h||{};var l=a.children.length-1;if(!(0>l)){l=a.children[l];f.contains(l,"esriGEDisabledContent")||(l=null);if(d)l&&a.removeChild(l);else if(l=l||e.create("div",{"class":"esriGEDisabledContent"+(h.overlayClass?" "+h.overlayClass:"")},a),h.textContent&&(l.textContent=h.textContent),!1!==h.fitParent&&(a=c[h.marginBox?
"getMarginBox":"getContentBox"](a).h))a=a.toString()+"px",b.set(l,{height:a,marginTop:"-"+a});return l}}},enableContentAbsolute:function(a,d,h){if(a){h=h||{};var c=b.get(a,"position");"relative"!==c&&"absolute"!==c&&b.set(a,"position","relative");return l.enableContent(a,d,{overlayClass:"esriGEAbsoluteStretched "+(h.overlayClass||"")+(h.isTransparent?" esriGEDisabledContentTransparent ":""),fitParent:!1,textContent:h.textContent})}}},n;l.hideNodeInBackground=function(a,b){if(a){if(a._hideNodeInBackgroundUndoController)return a._hideNodeInBackgroundUndoController;
var d=e.create("div",null,a,"after"),c=e.create("div",{style:"position: absolute; left: 0px; top: 0px;"},h());e.place(a,c);b="DomUtil.hideNodeInBackground"+(b?"."+b:"");g.set(d,"_bg_memo_node",b);g.set(c,"_bg_temp_node",b);b={undo:function(){d&&(d.parentNode&&e.place(a,d,"replace"),e.destroy(d),e.destroy(c),n.children.length||(e.destroy(n),n=null),d=null,delete a._hideNodeInBackgroundUndoController)},remove:function(){this.undo()}};return a._hideNodeInBackgroundUndoController=b}};l.showNodeFromBackground=
function(a){a&&a._hideNodeInBackgroundUndoController&&a._hideNodeInBackgroundUndoController.undo()};l.noTransformPosition=function(a){function d(a){for(var d={x:0,y:0};a.offsetParent;)d.x+=a.offsetLeft,d.y+=a.offsetTop,a=a.offsetParent,d.x+=b.get(a,"borderLeftWidth"),d.y+=b.get(a,"borderTopWidth");return d}function h(a){return b.get(a,"width")+b.get(a,"paddingLeft")+b.get(a,"paddingRight")+b.get(a,"borderLeftWidth")+b.get(a,"borderRightWidth")}function c(a){return b.get(a,"height")+b.get(a,"paddingTop")+
b.get(a,"paddingBottom")+b.get(a,"borderTopWidth")+b.get(a,"borderBottomWidth")}if(a){var l;if(a instanceof SVGElement&&a.getBBox)return l=(l=a.ownerSVGElement&&a.ownerSVGElement.parentNode)&&d(l),a=a.getBBox(),{x:(a.x||0)+l.x,y:(a.y||0)+l.y,w:a.width||0,h:a.height||0};l=d(a);return{x:l.x,y:l.y,w:h(a),h:c(a)}}};l.uniteNodeBoxes=function(a,b){var d=1E6,h=1E6,c=-1E6,e=-1E6;a.forEach(function(a){a=l.noTransformPosition(a);d=Math.min(d,a.x);h=Math.min(h,a.y);c=Math.max(c,a.x+a.w);e=Math.max(e,a.y+a.h)});
a={x:d,y:h,w:c-d,h:e-h};b&&(b=l.noTransformPosition(b),a.x-=b.x,a.y-=b.y);return a};l.getNodesBox=function(a,b){if(!a||!a.length)return null;for(var d=1E6,h=-1E6,e=1E6,n=-1E6,m=0;m<a.length;m++)var f=a[m],f=b&&b.ignoreTranformation?l.noTransformPosition(f):c.position(f),d=Math.min(d,f.x),e=Math.min(e,f.y),h=Math.max(h,f.x+f.w),n=Math.max(n,f.y+f.h);return{x:d,y:e,w:h-d,h:n-e}};l.traverseChildren=function(a,b){function d(a){if(a&&a.children)for(var h=0;h<a.children.length;h++){var c=a.children[h];
if(b(c))break;d(c)}}d(a)};l.scrollToListNode=function(a,b,d){var h=b.offsetTop+b.clientHeight,c=h-(a.scrollTop+a.clientHeight);0<c&&(a.scrollTop+=c);d&&(h-=b.clientHeight-d.offsetTop,c=a.scrollTop-h,0<c&&(a.scrollTop-=c))};var m;l.getScrollbarSize=function(){if(!m){var a=e.create("div",null,document.body);a.style.width="100px";a.style.height="100px";a.style.overflow="scroll";a.style.position="absolute";a.style.top="9999px";m={w:a.offsetWidth-a.clientWidth,h:a.offsetHeight-a.clientHeight};e.destroy(a)}return m};
l.hasScrollbars=function(a){var d=b.getComputedStyle(a);return{w:"scroll"===d.overflowX||a.offsetWidth>a.clientWidth&&"auto"===d.overflowX,h:"scroll"===d.overflowY||a.offsetHeight>a.clientHeight&&"auto"===d.overflowY}};l.getMeasureContext=function(a){a=a||{};a.style=a.style?a.style+" ":"";a.style+="display: inline-block; position: absolute; left: 0; top: 0;";return{div:e.create("div",a,document.body),measureText:function(a){this.div.innerHTML=a;a=c.getMarginBox(this.div);delete a.l;delete a.t;return a},
destroy:function(){e.destroy(this.div)}}};l.getTextBox=function(a,b){b=l.getMeasureContext(b);a=b.measureText(a);b.destroy();return a};l.getNodeFontFamily=function(a){return(a=b.get(a,"fontFamily")||b.getComputedStyle(a)["font-family"])?a.replace(/'|"/g,"").split(",")[0]:a};l.getNodeFontSize=function(a){return b.toPixelValue(a,b.get(a,"fontSize"))};l.stealFocus=function(){var a=new d;try{var b=e.create("input",{type:"text",style:"position: absolute; left: 0px; top: 0px;"});e.place(b,document.body);
b.select();e.destroy(b)}catch(q){}setTimeout(a.resolve,0);return a.promise};l.getWindowBox=function(){for(var a=[],b=0,d=document.body.children.length;b<d;b++){var h=document.body.children[b];l.isHidden(h)||(l.hide(h),a.push(h))}b={w:document.body.clientWidth,h:document.body.clientHeight};a.forEach(function(a){l.show(a)});return b};l.getBorder=function(a){return{t:b.toPixelValue(a,b.get(a,"borderTopWidth")),r:b.toPixelValue(a,b.get(a,"borderRightWidth")),b:b.toPixelValue(a,b.get(a,"borderBottomWidth")),
l:b.toPixelValue(a,b.get(a,"borderLeftWidth"))}};l.isBodyLtr=function(){return"ltr"===(document.body.dir||"ltr").toLowerCase()};l.setAttribute=function(a,b,d){return 2===arguments.length?g.set(a,b):g.set(a,b,d)};l.getAttribute=function(a,b,d){return 2===arguments.length?g.get(a,b):g.get(a,b,d)};l.addClass=function(a,b){return f.add(a,b)};l.removeClass=function(a,b){return f.remove(a,b)};l.toggleClass=function(a,b,d){return f[d?"add":"remove"](a,b)};l.replaceClass=function(a,b,d){return f.replace(a,
b,d)};l.containsClass=function(a,b){return f.contains(a,b)};l.getStyle=function(a,d){return b.get(a,d)};l.setStyle=function(a,d,h){return 2===arguments.length?b.set(a,d):b.set(a,d,h)};l.toPixelValue=function(a,b){return parseFloat(b)||0};l.getComputedStyle=function(a){return a&&1===a.nodeType&&window.getComputedStyle(a)};l.position=function(a,b){return c.position(a,b)};l.getMarginBox=function(a,b){return c.getMarginBox(a,b)};l.setMarginBox=function(a,b){return c.setMarginBox(a,b)};l.getMarginExtents=
function(a,b){return c.getMarginExtents(a,b)};l.getContentBox=function(a,b){return c.getContentBox(a,b)};l.getPadBorderExtents=function(a,b){return c.getPadBorderExtents(a,b)};l.getPadExtents=function(a,b){return c.getPadExtents(a,b)};l.getBorderExtents=function(a,b){return c.getBorderExtents(a,b)};l.docScroll=function(){return c.docScroll()};l.create=function(a,b,d,h){return e.create(a,b,d,h)};l.toDom=function(a){return e.toDom(a)};l.place=function(a,b,d){return e.place(a,b,d)};l.empty=function(a){return e.empty(a)};
l.destroy=function(a){return e.destroy(a)};l.query=function(b,d){b=a(b,d);d=[];for(var h=0,c=b.length;h<c;h++)d.push(b[h]);return d};return l})},"esri/dijit/geoenrichment/utils/TooltipUtil":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/on dojo/mouse dojo/sniff dijit/Tooltip dijit/place dojox/gfx ./DeviceUtil ./DnDUtil ./DomUtil ./MouseUtil dojo/domReady!".split(" "),function(k,g,f,e,c,b,a,d,h,l,n,m,p,t,q,r){function u(){}
var v={},w=k(l._MasterTooltip,{_customClasses:null,_customStyle:null,_orientKey:null,addCustomClasses:function(a){a&&(f.add(this.domNode,a),this._customClasses=a)},setCustomStyle:function(a){this._customStyle=a},show:function(a,b,d,h,c,m,f){if(!this.aroundNode||this.aroundNode!==b||this.containerNode.innerHTML!=a)if("playing"==this.fadeOut.status())this._onDeck=arguments;else{"string"===typeof a?this.containerNode.innerHTML=a:(this.containerNode.innerHTML="",e.place(a.domNode||a,this.containerNode));
c&&this.set("textDir",c);this.containerNode.align=h?"right":"left";var p=n.around(this.domNode,b,d&&d.length?d:l.defaultPosition,!h,g.hitch(this,"orient")),q=p.aroundNodePos;"M"==p.corner.charAt(0)&&"M"==p.aroundCorner.charAt(0)?(this.connectorNode.style.top=q.y+(q.h-this.connectorNode.offsetHeight>>1)-p.y+"px",this.connectorNode.style.left=""):"M"==p.corner.charAt(1)&&"M"==p.aroundCorner.charAt(1)?this.connectorNode.style.left=q.x+(q.w-this.connectorNode.offsetWidth>>1)-p.x+"px":(this.connectorNode.style.left=
"",this.connectorNode.style.top="");this._drawBackground();this.domNode.style.opacity="0";this.fadeIn.play();this.isShowingNow=!0;this.aroundNode=b;this.onMouseEnter=m||u;this.onMouseLeave=f||u}},orient:function(a,b,d,l,e){this.connectorNode.style.top="";var n=l.h;l=l.w;a.className="dijitTooltip "+{"MR-ML":"dijitTooltipRight","ML-MR":"dijitTooltipLeft","TM-BM":"dijitTooltipAbove","BM-TM":"dijitTooltipBelow","BL-TL":"dijitTooltipBelow dijitTooltipABLeft","TL-BL":"dijitTooltipAbove dijitTooltipABLeft",
"BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft"}[this._orientKey=b+"-"+d];this.addCustomClasses(this._customClasses);this.domNode.style.width="auto";var m=c.position(this.domNode);if(h("ie")||h("trident"))m.w+=2;c.setMarginBox(this.domNode,{w:Math.min(Math.max(l,1),m.w)});"B"==d.charAt(0)&&"B"==b.charAt(0)?(a=c.position(a),b=this.connectorNode.offsetHeight,a.h>n?(this.connectorNode.style.top=n-(e.h+
b>>1)+"px",this.connectorNode.style.bottom=""):(this.connectorNode.style.bottom=Math.min(Math.max(e.h/2-b/2,0),a.h-b)+"px",this.connectorNode.style.top="")):(this.connectorNode.style.top="",this.connectorNode.style.bottom="");this._drawBackground();return Math.max(0,m.w-l)},_surface:null,_surfaceContainer:null,_drawBackground:function(){if(this._orientKey){var a=this.domNode.clientWidth,b=this.domNode.clientHeight,d=c.position(this.domNode),h=c.position(this.connectorNode),l=c.position(this.containerNode);
h.x-=d.x;h.y-=d.y;l.x-=d.x;l.y-=d.y;l.x+=1;l.y+=1;l.w-=2;l.h-=2;this._surface&&this._surface.destroy();this._surfaceContainer&&e.destroy(this._surfaceContainer);d=this._surfaceContainer=e.create("div",{"class":"esriGEAbsoluteStretched"},this.domNode,"first");d.style.pointerEvents="none";a=this._surface=m.createSurface(d,a,b);b=[{x:l.x,y:l.y},{x:l.x+l.w,y:l.y},{x:l.x+l.w,y:l.y+l.h},{x:l.x,y:l.y+l.h},{x:l.x,y:l.y}];d=h.x+h.w/2;h=h.y+h.h/2;switch(this._orientKey){case "BL-TL":case "BM-TM":case "BR-TR":l=
[{x:d-5,y:l.y},{x:d,y:h},{x:d+5,y:l.y}];b.splice.apply(b,[1,0].concat(l));break;case "ML-MR":case "BL-BR":l=[{x:l.x+l.w,y:h-5},{x:d,y:h},{x:l.x+l.w,y:h+5}];b.splice.apply(b,[2,0].concat(l));break;case "TM-BM":case "TL-BL":case "TR-BR":l=[{x:d+5,y:l.y+l.h},{x:d,y:h},{x:d-5,y:l.y+l.h}];b.splice.apply(b,[3,0].concat(l));break;case "MR-ML":case "BR-BL":l=[{x:l.x,y:h+5},{x:d,y:h},{x:l.x,y:h-5}],b.splice.apply(b,[4,0].concat(l))}l=a.createPolyline(b);h="function"===typeof this._customStyle?this._customStyle():
this._customStyle;l.setFill(h&&h.backgroundColor||"white").setStroke({color:"#d3d3d3",width:1,join:"round"});h&&h.color&&(this.containerNode.style.color=h.color)}}}),y={show:function(a,b,d,h,c){"string"===typeof d&&(d=[d]);d=d&&d.map(function(a){return{after:"after-centered",before:"before-centered"}[a]||a});var l=new w;c&&l.setCustomStyle(c);l.addCustomClasses(h);l.show(a,b,d);return l}};v.setTooltipToNode=function(b,h,c){function l(){!e&&v.showTooltipForNode(b,h,c)}c=c||{};if(b&&(v.hideTooltipForNode(b),
b.__setTooltipToNodeMouseEnterHandle&&b.__setTooltipToNodeMouseEnterHandle.remove(),h)){var e=!1;p.isMobileDevice()?b.__setTooltipToNodeMouseEnterHandle=t.addNoDragClickHandler(b,l):b.__setTooltipToNodeMouseEnterHandle=a(b,d.enter,l);c.showTooltip&&l();return{remove:function(){h=null;v.hideTooltipForNode(b)},suspend:function(){v.hideTooltipForNode(b);e=!0},resume:function(){e=!1},refresh:function(){b._shownTooltip&&l()}}}};v.showTooltipForNode=function(b,h,c){function l(){v.hideTooltipForNode(b);
var a=Array.isArray(c.classes)?c.classes.join(" "):c.classes,a=(a||"")+" esriGETooltip";c.notRestricted&&(a+=" notRestricted");b._shownTooltip=n=y.show(e,b,c.position||["after","before"],a,c.style)}if(b){v.hideTooltipForNode(b);var e="function"==typeof h?h():h;if(e){c.textAlign&&(e="\x3cdiv class\x3d'"+("start"===c.textAlign?"esriGEStart":"end"===c.textAlign?"esriGEEnd":"")+"'\x3e"+e+"\x3c/div\x3e");f.add(b,"esriGESimpleTextTooltip");var n;l();var m=v.hideTooltipForNode.bind(v,b);p.isMobileDevice()?
b.__setTooltipToNodeMouseLeaveHandle=a(document.body,"touchstart",function(a){r.isMouseOver(b,{event:a})||m()}):b.__setTooltipToNodeMouseLeaveHandle=a.once(b,d.leave,function(){!c.stayOnHover&&m()});c.ignoreNodeRemoval||(b.__setTooltipToNodeInLayoutHandle=setInterval(function(){!q.isNodeInLayout(b)&&m()},300));p.isMobileDevice()||(b.__setTooltipToNodeMouseOverHandle=setInterval(function(){c.stayOnHover&&r.isMouseOver(n.domNode)||r.isMouseOver(b)||m()},300),b.__setTooltipToNodeClickHandle=a(b,"click",
function(a){c.hideOnClick?m():!b._shownTooltip&&l()}),c.stayOnHover&&(b.__setTooltipToNodeMouseLeaveMasterHandle=a(n.domNode,d.leave,m)));return b._shownTooltip}}};v.isShown=function(a){return!(!a||!a._shownTooltip)};v.hideTooltipForNode=function(a){a&&(a.title="",f.remove(a,"esriGESimpleTextTooltip"),a._shownTooltip&&a._shownTooltip.destroy(),delete a._shownTooltip,a.__setTooltipToNodeMouseLeaveHandle&&a.__setTooltipToNodeMouseLeaveHandle.remove(),clearInterval(a.__setTooltipToNodeInLayoutHandle),
clearInterval(a.__setTooltipToNodeMouseOverHandle),a.__setTooltipToNodeClickHandle&&a.__setTooltipToNodeClickHandle.remove(),a.__setTooltipToNodeMouseLeaveMasterHandle&&a.__setTooltipToNodeMouseLeaveMasterHandle.remove())};var A,B;v.autoTooltip=function(b){a(b,".TrimWithEllipses:mouseover",function(){if(this!==A&&this.offsetWidth<this.scrollWidth){var b=function(){A=null;B&&(B.tooltip.destroy(),B.mouseOutH.remove(),B.mouseMoveH.remove(),B=null)};b();A=this;B={tooltip:y.show(A.textContent,A,["above",
"below"]),mouseOutH:a.once(A,"mouseout, mousedown, touchstart",b),mouseMoveH:a(document.body,"mousemove",function(){r.isMouseOver(A)||b()})}}})};v.showClosableTooltip=function(a){var b=v._createClosableTooltip(a.message,a.tooltipClass,a.position);return v._placeClosableTooltip(b,a.node,a.timeout,a.position,a.onClosed)};v.removeClosableTooltip=function(a){a&&a._removeFunc&&a._removeFunc()};v._createClosableTooltip=function(a,b,d){function h(){var a=e.create("div",{"class":"esriGEClosableTooltipTip"},
l);f.add(a,"right"===d?"esriGEClosableTooltipTipRight":"esriGEClosableTooltipTipLeft")}function c(){n=e.create("div",{"class":"esriGEClosableTooltipBody"},l);e.create("div",{innerHTML:a,"class":"esriGEClosableTooltipLabel"},n);m=e.create("div",{"class":"esriGEClosableTooltipCloseButton"},n)}var l=e.create("div",{"class":"esriGEClosableTooltip esriGENonSelectable "+(b||"")},document.body),n,m;"right"!==d?(c(),h()):(h(),c());l.style.position="fixed";return{tooltip:l,body:n,closeButton:m}};v._placeClosableTooltip=
function(d,h,l,e,n){function m(){var a=c.position(h),l=a.x+";"+a.y+";"+a.w+";"+a.h;l!==g&&(g=l,l=c.getMarginBox(d.tooltip),b.set(d.tooltip,{left:(f?a.x+a.w:a.x-l.w)+"px",top:a.y+a.h/2-l.h/2+"px"}))}var f="rtl"===document.dir&&"right"!==e||"rtl"!==document.dir&&"right"===e,g;m();var p,t,k,r,u,v=function(){p&&clearTimeout(p);t&&clearInterval(t);k&&clearInterval(k);r&&r.remove();d.tooltip.parentNode&&d.tooltip.parentNode.removeChild(d.tooltip)};t=setInterval(function(){q.isNodeInLayout(h)&&h.parentNode||
(u=!1,v());q.isNodeVisible(h)&&q.isNodeOnscreen(h)?(u=!0,q.show(d.tooltip)):(u=!1,q.hide(d.tooltip))},0);k=setInterval(function(){u&&m()},0);l&&(p=setTimeout(v,l));r=a(d.closeButton,"click",function(){v();n&&n()});d.tooltip._removeFunc=v;return d.tooltip};v.showTooltipForNode(document.body,"Normal \x3cb\x3eBold\x3c/b\x3e \x3ci\x3eItalic\x3c/i\x3e",{});v.hideTooltipForNode(document.body);return v})},"esri/dijit/geoenrichment/utils/DnDUtil":function(){define(["dojo/on","dojo/sniff","./DeviceUtil","./KeyboardUtil"],
function(k,g,f,e){var c={MOBILE_TOLERANCE:10,LONG_PRESS_TIMEOUT:500,addNoDragClickHandler:function(b,a,d){d=d||{};return f.isMobileDevice()?c._addMobile(b,a,d):c._addPC(b,a,d)},_addPC:function(b,a,d){var h=d.tolerance||0,c,n,m=k(b,"mousedown",function(b){n&&n.remove();var d=b.clientX,l=b.clientY,m;c=k(document.body,"mousemove",function(a){if(!a.shiftKey&&!e.isCtrl(a)){var b=a.clientY;if(0<Math.abs(a.clientX-d)||0<Math.abs(b-l))m=!0}});n=k.once(document.body,"mouseup",function(b){c.remove();var e=
b.clientX,n=b.clientY;!m&&Math.abs(e-d)<=h&&Math.abs(n-l)<=h&&a(b)})});return{remove:function(){c&&c.remove();n&&n.remove();m&&m.remove()}}},_addMobile:function(b,a,d){function h(){m&&m.remove();f&&f.remove();g&&g.remove();clearTimeout(q)}var l=d.tolerance||c.MOBILE_TOLERANCE,e,m,f,g,q;e=k(b,"touchstart",function(e){function n(a){return Math.abs(e.clientX-a.clientX)<l&&Math.abs(e.clientY-a.clientY)<l}h();var p;if(d.detectLongPress){var t;f=k(b,"touchmove",function(a){t=a});q=setTimeout(function(){n(t||
e)&&(d.ignoreReleaseIfLongPressHappened&&(p=!0),d.longPressCallback(e))},d.longPressTimeout||c.LONG_PRESS_TIMEOUT)}m=k.once(b,"touchend",function(b){!p&&n(b)&&a(b);h()});g=k.once(b,"touchcancel",h)});return{remove:function(){e&&e.remove();h()}}},addGlobalDragHanlder:function(b){function a(){d&&d.remove();h&&h.remove();c&&c.remove();n&&n.remove();m&&b.destroyDnDBox&&b.destroyDnDBox(m)}b.tolerance=0<b.tolerance?b.tolerance:5;var d,h,c,n,m;return k(b.node,b.downEventName||f.press,function(l){a();if(!b.onMouseDown||
b.onMouseDown(l)){var p=l.clientX,q=l.clientY,r=p,u=q;d=k(document.body,f.move,function(l){function t(){a();b.dragEnded&&b.dragEnded()}l.shiftKey||e.isCtrl(l)||!(Math.abs(p-l.clientX)>=b.tolerance||Math.abs(q-l.clientY)>=b.tolerance)||(d.remove(),b.dragStarted&&!b.dragStarted(l,l.clientX-r,l.clientY-u))||(r=l.clientX,u=l.clientY,m=b.createDnDBox&&b.createDnDBox(),h=k(document.body,f.move,function(a){b.dragMoved&&b.dragMoved(a,a.clientX-r,a.clientY-u,t);r=a.clientX;u=a.clientY}),c=k.once(document.body,
g("ie")||g("trident")?"mouseup, touchend, click":"mouseup, touchend",function(){t()}),n=k(document.body,"keyup",function(d){27==d.keyCode&&(a(),b.dragCanceled&&b.dragCanceled())}))});k.once(document.body,g("ie")||g("trident")?"mouseup, touchend, click":"mouseup, touchend",function(){d.remove()})}})}};return c})},"esri/dijit/geoenrichment/utils/KeyboardUtil":function(){define(["dojo/on","dojo/sniff","./DomUtil"],function(k,g,f){var e={listenToKeyboardCombinationOverNode:function(c){return k(document.body,
"keydown",function(b){if(!c.isCtrl||e.isCtrl(b))if(!c.isShift||b.shiftKey)if(!c.isAlt||b.altKey)String.fromCharCode(b.keyCode).toLowerCase()!==c["char"]||c.node&&!f.isNodeInLayout(c.node)||c.callback(b)})},isCtrl:function(c){return g("mac")?c.metaKey:c.ctrlKey}};return e})},"esri/dijit/geoenrichment/utils/MouseUtil":function(){define("dojo/_base/lang dojo/on dojo/sniff dojo/touch dojo/dom-geometry ./DomUtil dojo/domReady!".split(" "),function(k,g,f,e,c,b){var a={_latestEvent:null,_setLatestEvent:function(b){a._latestEvent=
b}};f("touch")?(g(document.body,e.press,function(b){a._setLatestEvent(a.fixTouchEvent(b,!0))}),g(document.body,e.move,function(b){a._setLatestEvent(a.fixTouchEvent(b,!0))})):g(document.body,"mousemove",function(b){a._setLatestEvent(a.fixTouchEvent(b,!0))});var d;g(document.body,"mousedown",function(){d||(d=!0,g.once(document.body,"mouseup, click",function(){d=!1}))});a.getCursorPosition=function(){return a._latestEvent};a.isMouseOver=function(d,l){var h=l&&l.event||a._latestEvent;if(!(d&&d.parentNode&&
d.getBoundingClientRect&&h))return!1;if(l&&l.checkAllChildren){l=k.mixin({},l);delete l.checkAllChildren;var e=!1;b.traverseChildren(d,function(b){if(a.isMouseOver(b,l))return e=!0});return e}return a.isMouseOverBox(c.position(d),l)};a.isMouseOverBox=function(b,d){if(!b)return!1;var h=d&&d.event||a._latestEvent;d&&d.ignoreBorderTolerance&&(d=d.ignoreBorderTolerance,b=k.mixin({},b),b.x+=d,b.y+=d,b.w-=2*d,b.h-=2*d);return b.x<=h.clientX&&b.x+b.w>=h.clientX&&b.y<=h.clientY&&b.y+b.h>=h.clientY};a.fixTouchEvent=
function(a,b){a=b?k.mixin({},a):a;a.touches&&1===a.touches.length?(b=a.touches[0],a.clientX=b.clientX,a.clientY=b.clientY,a.pageX=b.pageX,a.pageY=b.pageY):a.changedTouches&&1===a.changedTouches.length&&(b=a.changedTouches[0],a.clientX=b.clientX,a.clientY=b.clientY,a.pageX=b.pageX,a.pageY=b.pageY);return a};a.isBeingDragged=function(){return d};a.addOverOutHandler=function(b){function d(){clearTimeout(c);h&&h.remove()}var h,c,e=g(b.node,"mouseover",function(l){function e(){a.isMouseOver(b.node)&&(b.onMouseOver(l),
h=g(document.body,"mousemove",function(h){a.isMouseOver(b.node)||(d(),b.onMouseOut(h))}))}d();b.delayTimeout?c=setTimeout(e,b.delayTimeout):e()});return{remove:function(){e.remove();d()}}};a.addOutHandler=function(b,d){return g(document.body,"mousemove",function(h){a.isMouseOver(b,{checkAllChildren:!0})||d(h)})};return a})},"esri/dijit/geoenrichment/ReportPlayer/playerSupports/_PrintSupport":function(){define(["require","dojo/_base/declare","esri/dijit/geoenrichment/Deferred","esri/dijit/geoenrichment/when",
"../ReportPlayerState"],function(k,g,f,e,c){function b(){var a=new f;k(["../printing/PrintableContainer"],function(b){a.resolve(b)});return a.promise}return g(null,{_getPrintableContainer:function(a){var d=this;c.isAnimationSuspended=!0;return d._showWaiting(b(),"loadPrintModules").then(function(b){var h=new b(d,d._viewModel);a.onShowWaiting=function(a){d._showWaiting(a,"initPrintContainer")};return e(h.initialize(a),function(a){c.isAnimationSuspended=!1;return a?a:e(h.stop(),function(){return null})})})},
_getPrintDialogSettings:function(){var a=this;return b().then(function(b){return(new b(a,a._viewModel)).getPrintDialogSettings()})}})})},"esri/dijit/geoenrichment/ReportPlayer/ReportPlayerState":function(){define([],function(){return{isImageViewerShown:!1,isViewingDataDrillingZoom:!1,isViewingDynamicSettings:!1,isAnimationSuspended:!1}})},"esri/dijit/geoenrichment/ReportPlayer/playerSupports/_ReportContainersSwitcher":function(){define("dojo/_base/declare dojo/dom-attr dojo/dom-class dojo/dom-construct ../PlayerResizeModes ../PlayerViewModes esri/dijit/geoenrichment/utils/DomUtil".split(" "),
function(k,g,f,e,c,b,a){var d={createContainer:function(a,d){var h=a.getCurrentAnalysisAreaIndex();a.viewMode===b.PANELS_IN_STACK_ALL&&(h=0);var c=d.getContainer(h);if(!c){switch(a.viewMode){case b.PANELS_IN_SLIDES:c=this._createPaginationReportContainer(a);break;case b.PANELS_IN_STACK:case b.PANELS_IN_ROW:c=this._createStackReportContainer(a);break;case b.PANELS_IN_STACK_ALL:c=this._createStackReportContainerAll(a);break;default:c=this._createFullPageReportContainer(a)}c.isCurrentContainer=function(){return a.getCurrentReportContainer()===
c};a.own(c)}d.setContainer(c,h);return c},_createPaginationReportContainer:function(a){var b=a._viewModel;return b.layoutBuilder.createElement("reportContainerPagination",{viewModel:b,parentWidget:a,currentFeatureIndex:a.getCurrentAnalysisAreaIndex(),scaleSectionsToFit:a.scaleSlidesToFitWindow,onResized:function(b){a.playerToolbar.update();a._emitResizedEvent(b)},onPendingDataApplied:function(){a._emitResizedEvent()}},a.reportContainerDiv)},_createStackReportContainer:function(a){var d=a._viewModel,
h=a.viewMode===b.PANELS_IN_ROW,l;l=a.resizeMode!==c.AUTO?{center:!0,minLeft:h?10:0}:{center:!0,minRight:10,minBottom:10,minLeft:10};l.minTop=a.showToolbarInPopup?h?50:43:10;return d.layoutBuilder.createElement("reportContainerStack",{viewModel:d,parentWidget:a,currentFeatureIndex:a.getCurrentAnalysisAreaIndex(),isVertical:!h,renderOptions:l,onPendingDataApplied:function(){a._emitResizedEvent()}},a.reportContainerDiv)},_createStackReportContainerAll:function(a){var b=a._viewModel,d;d=a.resizeMode!==
c.AUTO?{minLeft:0}:{minRight:10,minBottom:10,minLeft:10};d.minTop=a.showToolbarInPopup?43:0;return b.layoutBuilder.createElement("reportContainerStackAll",{viewModel:b,parentWidget:a,isVertical:!0,renderOptions:d,onPendingDataApplied:function(){a._emitResizedEvent()},onSwitchToSingleAreaView:function(){a.showAnalysisAreaAt(0)}},a.reportContainerDiv)},_createFullPageReportContainer:function(a){var b=a._viewModel,d={viewModel:b,parentWidget:a,currentFeatureIndex:a.getCurrentAnalysisAreaIndex(),onPendingDataApplied:function(){a._emitResizedEvent()}};
d.renderOptions=a.resizeMode!==c.AUTO?{center:!0,minTop:10}:{center:!0,minTop:10,minRight:10,minBottom:10,minLeft:10};return b.layoutBuilder.createElement(a.getReportData().reportObject.isGraphicReport?"reportContainerGrid":"reportContainer",d,a.reportContainerDiv)}},h=k(null,{_containerInfos:null,constructor:function(){this._containerInfos=[]},getContainer:function(a){return this._getInfo(a,"container")},getContainers:function(){return this._containerInfos.map(function(a){return a.container})},getContainerIndex:function(a){return this.getContainers().indexOf(a)},
setContainer:function(a,b){g.set(a.domNode,"area-index",b);this._getInfo(b,null,a)},isLoaded:function(a){return this._getInfo(a,"loaded")},setLoaded:function(a){if(a=this._getInfo(a))a.loaded=!0},resetAllLoaded:function(){this._containerInfos.forEach(function(a){a.loaded=!1})},destroyAllContainers:function(){this._containerInfos.forEach(function(a){a.container.destroy()});this._containerInfos.length=0},_getInfo:function(a,b,d){var h=this._containerInfos[a];!h&&d&&(h=this._containerInfos[a]={container:d,
loaded:!1});return b?h&&h[b]:h}}),l=k(null,{_lastVisuals:null,reset:function(){this._lastVisuals=null},rememberCurrentContainerVisuals:function(a){this._lastVisuals=a?{scrollTop:a.getScrollableContainer&&a.getScrollableContainer().scrollTop||0,pageIndex:a.getCurrentPageIndex&&a.getCurrentPageIndex()||0,slideIndex:a.getCurrentSlideIndex&&a.getCurrentSlideIndex()||0,zoomInfo:a.getZoomInfo&&a.getZoomInfo()}:null},applyCurrentContainerVisuals:function(a){this._lastVisuals&&(a.getScrollableContainer&&
(a.getScrollableContainer().scrollTop=this._lastVisuals.scrollTop||0),a.showSlideAt&&a.showSlideAt(this._lastVisuals.slideIndex||0),a.showPageAt?a.showPageAt(this._lastVisuals.pageIndex||0):a.notifyShown(),a.setZoomInfo&&a.setZoomInfo(this._lastVisuals.zoomInfo))}});return k(null,{_containerDict:null,_visualsHelper:null,_initContainerSwither:function(){this._containerDict=new h;this._visualsHelper=new l},getCurrentReportContainer:function(){return this._currentReportContainer},getAllReportContainers:function(){return this._containerDict.getContainers()},
_destroyAllContainers:function(){this._containerDict.destroyAllContainers();this._currentReportContainer=null},_setReportContainer:function(a){a?this._resetLoadedFlags():this._visualsHelper.rememberCurrentContainerVisuals(this._currentReportContainer);this._switchToCurrentReportContainer();return!a&&this._containerDict.isLoaded(this.getCurrentAnalysisAreaIndex())?(this._resize({isPaginating:!0}),this._visualsHelper.applyCurrentContainerVisuals(this._currentReportContainer),!1):!0},_switchToCurrentReportContainer:function(){this._currentReportContainer&&
this._hideContainer(this._currentReportContainer);this._currentReportContainer=d.createContainer(this,this._containerDict);f.remove(this.domNode,"esriGEReportPlayerFullView esriGEReportPlayerPaginationView esriGEReportPlayerStackView esriGEReportPlayerRowView");switch(this.viewMode){case b.PANELS_IN_SLIDES:f.add(this.domNode,"esriGEReportPlayerPaginationView");break;case b.PANELS_IN_STACK:f.add(this.domNode,"esriGEReportPlayerStackView");break;case b.PANELS_IN_STACK_ALL:f.add(this.domNode,"esriGEReportPlayerStackAllView");
break;case b.PANELS_IN_ROW:f.add(this.domNode,"esriGEReportPlayerRowView");break;default:f.add(this.domNode,"esriGEReportPlayerFullView")}this._showContainer(this._currentReportContainer);this._connectZoomToCurrentContainer();this.notifyShown()},_hideContainer:function(b){this.isPlayerOnServer||(b.__undoHideContainerHandle=a.hideNodeInBackground(b.domNode,"reportContainer_"+this._containerDict.getContainerIndex(b)),b.own(b.__undoHideContainerHandle))},_showContainer:function(a){!this.isPlayerOnServer&&
a.__undoHideContainerHandle&&(a.__undoHideContainerHandle.undo(),delete a.__undoHideContainerHandle)},_showAllContainers:function(){var a=this;this.getAllReportContainers().forEach(function(b){a._showContainer(b);a.reportContainerDiv.removeChild(b.domNode);e.place(b.domNode,a.reportContainerDiv)});return{undo:function(){a.getAllReportContainers().forEach(function(b){a._hideContainer(b)});a._switchToCurrentReportContainer()}}},_resetLoadedFlags:function(){this._visualsHelper.reset();this._containerDict.resetAllLoaded()},
_setCurrentContainerLoaded:function(){this._visualsHelper.applyCurrentContainerVisuals(this._currentReportContainer);this._containerDict.setLoaded(this.getCurrentAnalysisAreaIndex())}})})},"esri/dijit/geoenrichment/ReportPlayer/playerSupports/_SmartLayoutSupport":function(){define(["dojo/_base/declare","dojo/dom-class","dojo/on","esri/dijit/geoenrichment/utils/DomUtil","../PlayerResizeModes"],function(k,g,f,e,c){return k(null,{_width:0,_height:0,_measuredWinBox:null,_initSmartLayout:function(){var b=
this;this.resizeMode===c.FIT_WINDOW&&this.own(f(window,"resize, orientationchange",function(){setTimeout(function(){b._measuredWinBox=null;b.resize()})}));this._resize()},_resize:function(b){b=b||{};g.remove(this.domNode,"esriGEReportPlayerFullScreen esriGEReportPlayerAutoResize esriGEReportPlayerManualResize");switch(this.resizeMode){case c.FIT_WINDOW:return this._resize_fitWindow(b);case c.AUTO:return this._resize_auto(b);case c.MANUAL:return this._resize_manual(b)}},_resize_fitWindow:function(b){this._measuredWinBox=
this._measuredWinBox||e.getWindowBox();this._width=this._maxWidth=this._measuredWinBox.w;this._height=this._maxHeight=this._measuredWinBox.h;g.add(this.domNode,"esriGEReportPlayerFullScreen");this.domNode.style.width=this._width+"px";this.domNode.style.height=this._height+"px";this._currentReportContainer&&(this._currentReportContainer.setMaxWidth&&this._currentReportContainer.setMaxWidth(this._maxWidth),this._currentReportContainer.setMaxHeight&&this._currentReportContainer.setMaxHeight(this._maxHeight-
this._getToolbarHeight()),this._currentReportContainer.resize(this._width,this._height-this._getToolbarHeight()),this._emitResizedEvent(b.isPaginating))},_resize_auto:function(b){this._height=this._width=0;g.add(this.domNode,"esriGEReportPlayerAutoResize");this.domNode.style.width="auto";this.domNode.style.height="auto";this._currentReportContainer&&(this._currentReportContainer.setMaxWidth&&this._currentReportContainer.setMaxWidth(this._maxWidth),this._currentReportContainer.setMaxHeight&&this._currentReportContainer.setMaxHeight(this._maxHeight-
this._getToolbarHeight()),this._currentReportContainer.resize(0,0),this._emitResizedEvent(b.isPaginating))},_resize_manual:function(b){this._width=void 0!==b.width?b.width:this._width;this._height=void 0!==b.height?b.height:this._height;this._width&&this._height&&(this._maxWidth&&(this._width=Math.min(this._maxWidth,this._width)),this._maxHeight&&(this._height=Math.min(this._maxHeight,this._height)),g.add(this.domNode,"esriGEReportPlayerManualResize"),this.domNode.style.width=this._width+"px",this.domNode.style.height=
this._height+"px",this._currentReportContainer&&(this._currentReportContainer.setMaxWidth&&this._currentReportContainer.setMaxWidth(this._maxWidth||this._width),this._currentReportContainer.setMaxHeight&&this._currentReportContainer.setMaxHeight((this._maxHeight||this._height)-this._getToolbarHeight()),this._currentReportContainer.resize(this._width,this._height-this._getToolbarHeight()),this._emitResizedEvent(b.isPaginating)))},_getToolbarHeight:function(){return this.showToolbarInPopup?0:50},_maxWidth:0,
_maxHeight:0,setMaxWidth:function(b){this._maxWidth=b},setMaxHeight:function(b){this._maxHeight=b}})})},"esri/dijit/geoenrichment/ReportPlayer/playerSupports/_ZoomSupport":function(){define(["dojo/_base/declare","dojo/aspect","../PlayerResizeModes","../PlayerViewModes","../PlayerZoomBehaviors"],function(k,g,f,e,c){return k(null,{_initZoomControls:function(){var b=this;this.playerToolbar.onZoomToFitPage=function(){b.getCurrentReportContainer().zoomToFitPage({showAnimation:!0})};this.playerToolbar.onZoomToFitPageWidth=
function(){b.getCurrentReportContainer().zoomToFitPageWidth({showAnimation:!0})};this.playerToolbar.onZoomToFitPageHeight=function(){b.getCurrentReportContainer().zoomToFitPageHeight({showAnimation:!0})};this.playerToolbar.onSetZoomPercent=function(a){b.getCurrentReportContainer().setZoomPercent(a,{showAnimation:!0})};this._refreshZoomControls()},_refreshZoomControls:function(){this.playerToolbar&&this.playerToolbar.setZoomSupportsInfo(this._getZoomSupportsInfo())},setBestZoom:function(){this._callZoomMethod("setBestZoom")},
zoomToFitPage:function(){this._callZoomMethod("zoomToFitPage")},zoomToFitPageWidth:function(){this._callZoomMethod("zoomToFitPageWidth")},zoomToFitPageHeight:function(){this._callZoomMethod("zoomToFitPageHeight")},resetZoom:function(){this._callZoomMethod("resetZoom")},_callZoomMethod:function(b){if(this._getZoomSupportsInfo().supported){var a=this.getCurrentReportContainer();a&&a[b]&&a[b]()}},_getZoomSupportsInfo:function(){var b={supported:!1,canFitPage:!1,canFitPageWidth:!1,canFitPageHeight:!1};
this.viewMode!==e.PANELS_IN_SLIDES&&(b.supported=!0,this.resizeMode!==f.AUTO&&(b.canFitPage=!e.isStackLike(this.viewMode),b.canFitPageWidth=this.viewMode!==e.PANELS_IN_ROW,b.canFitPageHeight=this.viewMode===e.PANELS_IN_ROW));return b},_updateZoomControls:function(){this._connectZoomToCurrentContainer();this._applyDefaultZoomBehavior()},_reportContainerZoomChangedHandle:null,_connectZoomToCurrentContainer:function(){var b=this.getCurrentReportContainer();this._reportContainerZoomChangedHandle&&this._reportContainerZoomChangedHandle.remove();
this._reportContainerZoomChangedHandle=b&&g.after(b,"onZoomChanged",function(){if(this.playerToolbar){var a=this.getCurrentReportContainer();a&&a.getZoomInfo&&this.playerToolbar.setZoomInfo(this.getCurrentReportContainer().getZoomInfo());this._updatePageNavigator();this.playerToolbar.update()}}.bind(this));b&&b.own(this._reportContainerZoomChangedHandle)},_applyDefaultZoomBehavior:function(){var b=this._getZoomSupportsInfo();b.supported&&b.canFitPage&&this.defaultZoomBehavior===c.FIT_PAGE?this.zoomToFitPage():
b.supported&&b.canFitPageWidth&&this.defaultZoomBehavior===c.FIT_PAGE_WIDTH?this.zoomToFitPageWidth():b.supported&&b.canFitPageHeight&&this.defaultZoomBehavior===c.FIT_PAGE_HEIGHT?this.zoomToFitPageHeight():this.resetZoom()}})})},"esri/dijit/geoenrichment/ReportPlayer/PlayerZoomBehaviors":function(){define([],function(){var k={RESET:"reset",FIT_PAGE:"fitPage",FIT_PAGE_WIDTH:"fitPageWidth",FIT_PAGE_HEIGHT:"fitPageHeight",isSupported:function(g){for(var f in k)if(k[f]===g)return!0;return!1},toSupportedValue:function(g){return k.isSupported(g)?
g:k.RESET}};return k})},"esri/dijit/geoenrichment/ReportPlayer/playerSupports/_WaitingSupport":function(){define("dojo/_base/declare dojo/_base/lang esri/dijit/geoenrichment/when dojo/dom-class dojo/dom-construct ../PlayerResizeModes esri/dijit/geoenrichment/utils/DelayUtil esri/dijit/geoenrichment/utils/DomUtil esri/dijit/geoenrichment/utils/WaitingUtil esri/dijit/geoenrichment/utils/progress/SmoothProgress".split(" "),function(k,g,f,e,c,b,a,d,h,l){var n=k(null,{_dataProgress:0,_areaProgresses:null,
_numAreas:0,constructor:function(a){g.mixin(this,a);this.reset()},reset:function(){this._dataProgress=0;this._areaProgresses={};this._fireProgress()},setLoadDataProgress:function(a){this._dataProgress=a;this._fireProgress()},setNumAreas:function(a){this._numAreas=a},setProgressForAreaAt:function(a,b){this._areaProgresses[b]=a;this._fireProgress()},finalize:function(){this.onChange(1);return a.delay(300)},_fireProgress:function(){var a=.25*this._dataProgress,b=.75/this._numAreas,d;for(d in this._areaProgresses)a+=
b*(this._areaProgresses[d]||0);a=Math.min(.999999,Math.max(0,a));this.onChange(a);this._printProgress()},_printProgress:function(){},onChange:function(a){}});return k(null,{_progressController:null,_initProgressController:function(){var a=this;this.showProgressBar&&(this._progressController=new n,(new l(this._progressController)).onChange=function(b){h.showProgressBar({value:b,node:a.domNode,position:"top"})})},_waitingCount:0,_hideUndoHandle:null,_waitNode:null,getWaitingPromise:function(){return h.getProgressPromiseForNode(this._waitNode||
this.domNode)},_showWaiting:function(a,l){var e=this;if(this.isPlayerOnServer)return a;this.onWaitingShown(a);return this.resizeMode!==b.FIT_WINDOW?(0===this._waitingCount++&&(this._waitNode=c.create("div",{"class":"esriGEReportPlayerWaitingNode"},this.domNode.parentNode),this._waitNode.style.width=this.domNode.clientWidth?this.domNode.clientWidth+"px":"",this._waitNode.style.height=this.domNode.clientHeight?this.domNode.clientHeight+"px":"",this._waitNode.style.position="relative",this._hideUndoHandle=
d.hideNodeInBackground(this.domNode)),f(a)["finally"](function(){0===--e._waitingCount&&(e._hideUndoHandle.undo(),e._hideUndoHandle=null,c.destroy(e._waitNode))}),h.showProgressPromise(this._waitNode,a,{progressClass:"esriGEReportPlayerProgress"})):this._showWaitingFullScreen(a,l)},_showWaitingFullScreen:function(a,b){return h.showProgressPromise(this.domNode,a,{progressClass:"esriGEReportPlayerProgress",onShowProgress:this._onShowWaiting.bind(this),onRemoveProgress:this._onRemoveWaiting.bind(this)})},
_onShowWaiting:function(){this.normalViewDiv.style.opacity="0.001";this.sidePageNavigator.style.opacity="0.001"},_onRemoveWaiting:function(){if(this.domNode){this.normalViewDiv.style.opacity="";this.sidePageNavigator.style.opacity="";var b=this.getCurrentReportContainer();b&&!b.__isBeingAnimated&&(b.__isBeingAnimated=!0,b.domNode&&e.add(b.domNode,"esriGEReportPlayer_fadeIn1000"),b.notifyShown(),a.delay(1500).then(function(){b.__isBeingAnimated=!1;b.domNode&&e.remove(b.domNode,"esriGEReportPlayer_fadeIn1000")}))}},
onWaitingShown:function(a){}})})},"esri/dijit/geoenrichment/utils/DelayUtil":function(){define(["esri/dijit/geoenrichment/Deferred"],function(k){return{delay:function(g,f){var e=new k,c="function"===typeof g?g:null;setTimeout(e.resolve,("number"===typeof g?g:f)||0);return e.promise.then(function(){return c&&c()})}}})},"esri/dijit/geoenrichment/utils/WaitingUtil":function(){define(["esri/dijit/geoenrichment/Deferred","esri/dijit/geoenrichment/when","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style"],
function(k,g,f,e,c){var b={showProgress:function(a,b){a&&!a["esri.dijit.geoenrichment.util.WaitingUtil.waitingDiv"]&&(a["esri.dijit.geoenrichment.util.WaitingUtil.waitingDiv"]=f.create("div",{"class":"esriGEProgress esriGEProgressAbsolute "+(b||"")},a))},removeProgress:function(a){a&&a["esri.dijit.geoenrichment.util.WaitingUtil.waitingDiv"]&&(f.destroy(a["esri.dijit.geoenrichment.util.WaitingUtil.waitingDiv"]),delete a["esri.dijit.geoenrichment.util.WaitingUtil.waitingDiv"])},showProgressBar:function(a){var b=
a.node;if(b){b._progressBar&&f.destroy(b._progressBar);delete b._progressBar;var h=Number(a.value);0>=h||isNaN(h)||(h=Math.min(h,1),b._progressBar=f.create("div",{"class":"esriGEWaitingMessageProgressBar esriGEWaitingMessageProgressBar_"+(a.position||"bottom")},b),c.set(b._progressBar,"width",e.position(b).w*h+"px"))}},showProgressPromise:function(a,d,h){if(!a)return d;h=h||{};void 0===a.__progressIndex&&(a.__progressIndex=0);0===a.__progressIndex&&(a.__progressDfd=new k,b.showProgress(a,h.progressClass),
h.onShowProgress&&h.onShowProgress());a.__progressIndex++;g(d)["finally"](function(){a.__progressIndex=Math.max(0,--a.__progressIndex);0===a.__progressIndex&&(a.__progressDfd&&a.__progressDfd.resolve(),delete a.__progressDfd,b.removeProgress(a),h.onRemoveProgress&&h.onRemoveProgress())});return d},getProgressPromiseForNode:function(a){return a&&a.__progressDfd&&a.__progressDfd.promise}};return b})},"esri/dijit/geoenrichment/utils/progress/SmoothProgress":function(){define(["dojo/_base/declare","dojo/aspect"],
function(k,g){return k(null,{elasticTime:1E3,fireInterval:30,_intervalHandle:null,_progressHandle:null,_realProgress:0,_smoothProgress:0,_runAheadSpeed:2.5E-4,_currentSpeed:0,constructor:function(f){0<f.fireInterval&&(this.fireInterval=f.fireInterval);0<f.elasticTime&&(this.elasticTime=f.elasticTime);0<f.timeEstimate&&(this._runAheadSpeed=Math.min(this.fireInterval/f.timeEstimate,.5));var e=this;this._progressHandle=g.after(f,"onChange",function(c){1<=c?e._finalize():e._updateProgress(c)},!0)},start:function(){this._updateProgress(0,
!0)},_updateProgress:function(f,e){this._realProgress=Math.max(f,0);if(0===this._realProgress&&(this._smoothProgress=0,this._setIntervalHandle(!1),this.onChange(0),!e))return;this._setIntervalHandle(!0);this._currentSpeed=this._smoothProgress>=this._realProgress?this._runAheadSpeed:(this._realProgress-this._smoothProgress)*this.fireInterval/this.elasticTime},_setIntervalHandle:function(f){f!==!!this._intervalHandle&&(f?this._intervalHandle=setInterval(this._tryFireProgress.bind(this),this.fireInterval):
(clearInterval(this._intervalHandle),this._intervalHandle=null))},_tryFireProgress:function(){0!==this._currentSpeed&&(this._smoothProgress+=this._currentSpeed,this._smoothProgress=Math.min(1-this._runAheadSpeed,this._smoothProgress),this._smoothProgress>=this._realProgress&&(this._currentSpeed=this._runAheadSpeed),this.onChange(this._smoothProgress))},_finalize:function(){this._smoothProgress=this._realProgress=1;this.onChange(1)},onChange:function(f){},destroy:function(){this._progressHandle.remove();
this._setIntervalHandle(!1)}})})},"esri/dijit/geoenrichment/ReportPlayer/supportClasses/PlayerConfigurator":function(){define("../PlayerResizeModes ../PlayerZoomBehaviors ../PlayerThemes ../PlayerViewModes ../config esri/dijit/geoenrichment/utils/DeviceUtil".split(" "),function(k,g,f,e,c,b){var a={configurePlayer:function(d){d.theme=d.theme&&f.toSupportedValue(d.theme);d.viewMode=d.viewMode&&e.toSupportedValue(d.viewMode);d.resizeMode=d.resizeMode&&k.toSupportedValue(d.resizeMode);d.defaultZoomBehavior=
d.defaultZoomBehavior&&g.toSupportedValue(d.defaultZoomBehavior);b.isMobileDevice()?a._configureMobile(d):a._configurePC(d);d._viewModel.setAnimationSuspended(d.viewMode===e.PANELS_IN_STACK_ALL)},getDefaultViewMode:function(a){return b.isMobileDevice()?a.allowAutoOrientation?b.isLandscape()?a.mobileLandscapeViewMode||e.PANELS_IN_SLIDES:e.PANELS_IN_STACK:e.PANELS_IN_STACK:e.FULL_PAGES},_configureMobile:function(b){b.allowAutoOrientation&&(b.viewMode=a.getDefaultViewMode(b));b.theme=b.theme||f.DARK;
b.viewMode=e.isMobileSupported(b.viewMode)?b.viewMode:e.PANELS_IN_STACK;b.resizeMode=b.resizeMode||k.FIT_WINDOW;b.enableDataDrilling=!1!==b.enableDataDrilling;b.showAreaTitle=!1;b.showToolbarInPopup=!0;b.defaultZoomBehavior=e.isStack(b.viewMode)?g.FIT_PAGE_WIDTH:b.viewMode===e.PANELS_IN_ROW?g.FIT_PAGE_HEIGHT:void 0;b.scaleSlidesToFitWindow=b.viewMode===e.PANELS_IN_SLIDES;c.modules.exportCommands=!1;c.modules.complexCellTooltips=!1},_configurePC:function(b){b.theme=b.theme||f.DARK;b.viewMode=b.viewMode||
a.getDefaultViewMode(b);b.resizeMode=b.resizeMode||k.FIT_WINDOW;b.showToolbarInPopup=!!b.showToolbarInPopup;b.enableDataDrilling=!1!==b.enableDataDrilling;c.modules.complexCellTooltips=b.viewMode===e.FULL_PAGES||b.viewMode===e.PANELS_IN_STACK_ALL;switch(b.viewMode){case e.FULL_PAGES:a._configurePC_fullPages(b);break;case e.PANELS_IN_SLIDES:a._configurePC_panelsInSlides(b);break;case e.PANELS_IN_STACK:a._configurePC_panelsInStack(b);break;case e.PANELS_IN_STACK_ALL:a._configurePC_panelsInStackAll(b);
break;case e.PANELS_IN_ROW:a._configurePC_panelsInRow(b)}},_configurePC_fullPages:function(a){a.showAreaTitle=!1!==a.showAreaTitle;a.scaleSlidesToFitWindow=!1;switch(a.resizeMode){case k.FIT_WINDOW:a.defaultZoomBehavior=a.defaultZoomBehavior||g.FIT_PAGE;break;case k.AUTO:a.defaultZoomBehavior=g.RESET;break;case k.MANUAL:a.defaultZoomBehavior=a.defaultZoomBehavior||g.FIT_PAGE}},_configurePC_panelsInSlides:function(a){a.showAreaTitle=!!a.showAreaTitle;a.defaultZoomBehavior=null;switch(a.resizeMode){case k.FIT_WINDOW:a.scaleSlidesToFitWindow=
!1!==a.scaleSlidesToFitWindow;break;case k.AUTO:a.scaleSlidesToFitWindow=!1;break;case k.MANUAL:a.scaleSlidesToFitWindow=!1!==a.scaleSlidesToFitWindow}},_configurePC_panelsInStack:function(a){a.showAreaTitle=!!a.showAreaTitle;a.scaleSlidesToFitWindow=!1;switch(a.resizeMode){case k.FIT_WINDOW:a.defaultZoomBehavior=g.FIT_PAGE_WIDTH;break;case k.AUTO:a.defaultZoomBehavior=g.RESET;break;case k.MANUAL:a.defaultZoomBehavior=g.FIT_PAGE_WIDTH}},_configurePC_panelsInStackAll:function(a){a.showAreaTitle=!1!==
a.showAreaTitle;a.scaleSlidesToFitWindow=!1;switch(a.resizeMode){case k.FIT_WINDOW:a.defaultZoomBehavior=g.FIT_PAGE_WIDTH;break;case k.AUTO:a.defaultZoomBehavior=g.RESET;break;case k.MANUAL:a.defaultZoomBehavior=g.FIT_PAGE_WIDTH}},_configurePC_panelsInRow:function(a){a.showAreaTitle=!!a.showAreaTitle;a.scaleSlidesToFitWindow=!1;switch(a.resizeMode){case k.FIT_WINDOW:a.defaultZoomBehavior=g.FIT_PAGE_HEIGHT;break;case k.AUTO:a.defaultZoomBehavior=g.RESET;break;case k.MANUAL:a.defaultZoomBehavior=g.FIT_PAGE_HEIGHT}},
configurePlayerForCustomBuild:function(a){c.esriDijitCssUrl=a+"/dijit/themes/claro/claro.css";c.esriCssUrl=a+"/esri/css/esri.css";c.playerSourceRootUrl=a+"/dojo/dojo.js";c.configScriptText='var dojoConfig \x3d { baseUrl: "'+a+'/", waitSeconds: 60, async: true, locale: typeof dojoConfig !\x3d\x3d "undefined" \x26\x26 dojoConfig.locale || null, packages: [{ name: "dojo", location: "./dojo" }, { name: "dijit", location: "./dijit" }, { name: "dojox", location: "./dojox" }, { name: "dgrid1", location: "./dgrid1" }, { name: "dstore", location: "./dstore" }, { name: "xstyle", location: "./xstyle" }, { name: "esri", location: "./esri" }, { name: "moment", location: "./moment", main: "moment/moment" }] }'}};
return a})},"esri/dijit/geoenrichment/ReportPlayer/PlayerThemes":function(){define([],function(){var k={LIGHT:"light",DARK:"dark",isSupported:function(g){for(var f in k)if(k[f]===g)return!0;return!1},toSupportedValue:function(g){return k.isSupported(g)?g:k.DARK}};return k})},"esri/dijit/geoenrichment/ReportPlayer/supportClasses/PlayerToFullScreenAnimator":function(){define(["esri/dijit/geoenrichment/utils/animation/AnimationUtil","esri/dijit/geoenrichment/utils/DelayUtil"],function(k,g){return{animateTo:function(f){if(!f._isAnimatedTo){f._isAnimatedTo=
!0;var e=k.animateResize({duration:300,domNode:f.domNode,startScaleX:.3,startScaleY:.3,fromOffset:{x:"c",y:"c"},toBox:{x:0,y:0,w:document.body.clientWidth,h:document.body.clientHeight}});k.animateFadeIn({domNode:f.domNode,duration:300});return e.then(function(){return g.delay(100)})}},animateFrom:function(f){if(f._isAnimatedTo){f._isAnimatedTo=!1;var e=k.animateResize({duration:300,domNode:f.domNode,endScaleX:.3,endScaleY:.3,toOffset:{x:"c",y:"c"},toBox:{x:(document.body.clientWidth-300)/2,y:(document.body.clientHeight-
200)/2,w:300,h:200}});k.animateFadeOut({domNode:f.domNode,duration:300});return e.then(function(){return g.delay(100)})}}}})},"esri/dijit/geoenrichment/utils/animation/AnimationUtil":function(){define(["dojo/dom-construct","dojo/dom-style","dojo/sniff","./Animator","esri/dijit/geoenrichment/utils/DomUtil"],function(k,g,f,e,c){var b={animateResize:function(a){function b(b){a.domNode=k.create("div",{"class":a.ghostClass},document.body);g.set(a.domNode,{width:b.w+"px",height:b.h+"px"})}function h(b,
d,h){var c,l=a.fromOffset.x,e=a.fromOffset.y;if("number"!==typeof l)switch(c=d.w*h.x,l){case "l":l=0;break;case "r":l=(b.w||0)-c;break;default:l=((b.w||0)-c)/2}if("number"!==typeof e)switch(c=d.h*h.y,e){case "t":e=0;break;case "b":e=(b.h||0)-c;break;default:e=((b.h||0)-c)/2}return{x:b.x+l,y:b.y+e}}function l(b,d,h){var c,l=a.toOffset.x,e=a.toOffset.y;if("number"!==typeof l)switch(c=b.w*h.x,l){case "l":l=0;break;case "r":l=(d.w||0)-c;break;default:l=((d.w||0)-c)/2}if("number"!==typeof e)switch(c=b.h*
h.y,e){case "t":e=0;break;case "b":e=(d.h||0)-c;break;default:e=((d.h||0)-c)/2}return{x:d.x+l,y:d.y+e}}var n=a.fromBox||(a.domFrom||a.domNode)&&c.noTransformPosition(a.domFrom||a.domNode);a.animateGhost&&b(n);var m=a.toBox||c.noTransformPosition(a.domTo);if(n&&m){var p=function(b,d){var h={x:a.startScaleX,y:a.startScaleY},c=0;"fit"===h.x&&(b.w?c=h.x=b.w/d.w:h.x=0);"fit"===h.y&&(b.h?c=Math.max(h.y=b.h/d.h,c):h.y=0);h.x=h.x||c||1;h.y=h.y||c||1;return h}(n,m),t=function(b,d){var h={x:a.endScaleX,y:a.endScaleY},
c=0;"fit"===h.x&&(d.w?c=h.x=d.w/b.w:h.x=0);"fit"===h.y&&(d.h?c=Math.max(h.y=d.h/b.h,c):h.y=0);h.x=h.x||c||1;h.y=h.y||c||1;return h}(n,m);a.fromOffset&&(n=h(n,m,p));a.toOffset&&(m=l(n,m,t));var q=f("webkit")?"webkitTransformOrigin":"transformOrigin";a.domNode.style[q]="0% 0%";return e.animateProperty({obj:a.domNode,duration:a.duration||250,properties:{__x:{start:n.x,end:m.x},__y:{start:n.y,end:m.y},__scaleX:{start:p.x||1,end:t.x},__scaleY:{start:p.y||1,end:t.y}},endFunction:function(){a.animateGhost&&
k.destroy(a.domNode);a.onEnd&&a.onEnd()},progressFunction:function(b,d){var h=f("webkit")?"webkitTransform":"transform";"__x"==b?a.domNode.style.left=d+"px":"__y"==b?a.domNode.style.top=d+"px":"__scaleX"==b?a.domNode.style[h]="scaleX("+d+") scaleY("+(a.domNode.__scaleY||1)+")":"__scaleY"==b&&(a.domNode.style[h]="scaleX("+(a.domNode.__scaleX||1)+") scaleY("+d+")")}}).promise}a.onEnd&&a.onEnd()},animateShrinkResize:function(a){a.endScaleX=a.endScaleX||.1;a.endScaleY=a.endScaleY||.05;return b.animateResize(a)},
animateFadeIn:function(a){return e.animateProperty({obj:a.domNode.style,duration:a.duration||250,properties:{opacity:{start:0,end:1}},endFunction:function(){a.onEnd&&a.onEnd()}}).promise},animateFadeOut:function(a){return e.animateProperty({obj:a.domNode.style,duration:a.duration||250,properties:{opacity:{start:1,end:0}},endFunction:function(){a.onEnd&&a.onEnd()}}).promise},animateSlide:function(a,b,h){var d=h.width;e.animateProperty({obj:a.style,duration:h.duration||250,properties:{left:{start:h.leftToRight?
0:-d,end:h.leftToRight?-d:0,units:"px"},right:{start:h.leftToRight?0:d,end:h.leftToRight?d:0,units:"px"}},endFunction:function(){h.onEnd&&h.onEnd()}});return e.animateProperty({obj:b.style,duration:h.duration||250,properties:{left:{start:h.leftToRight?d:0,end:h.leftToRight?0:d,units:"px"},right:{start:h.leftToRight?-d:0,end:h.leftToRight?0:-d,units:"px"}}}).promise},animateExpand:function(a,b,h){h=h||{};a.style.overflow="hidden";b&&c.show(a);var d=g.get(a,"height");return e.animateProperty({obj:a.style,
duration:h.duration,properties:{height:{start:b?0:d,end:b?d:0,units:"px"}},progressFunction:h.progressFunction,endFunction:function(){!b&&c.hide(a);g.set(a,"height","");g.set(a,"overflow","")}}).promise}};return b})},"esri/dijit/geoenrichment/utils/animation/Animator":function(){define(["esri/dijit/geoenrichment/Deferred","dojo/fx/easing","dojox/gfx/matrix"],function(k,g,f){function e(b){1>b.progress&&!b.isStopped?a.setTimeout(function(){if(b.isStopped)b.endFunction();else{var a=(new Date).getTime();
b.progress=1-(b.endTime-a)/b.duration;b.progress=Math.min(1,b.progress);c(b);e(b)}}):b.endFunction()}function c(a){for(var b in a.params.properties){var d=a.params.properties[b],c=d.easing?"function"===typeof d.easing?d.easing:g[d.easing]:null,c=c?c(a.progress):a.progress,e=d.start+c*(d.end-d.start);a.obj[b]=d.units?e+d.units:e;a.progressFunction&&a.progressFunction(b,e,c)}}var b={},a={_funcs:null,setTimeout:function(a){var b=this;this._funcs?this._funcs.push(a):(this._funcs=[a],setTimeout(function(){var a=
b._funcs;b._funcs=null;a.forEach(function(a){a()})},33))}};b.animateProperty=function(a){var b={},d=new k;b.promise=d.promise;b.params=a;b.obj=a.obj||a.node||{};b.duration=void 0!==a.duration?a.duration:1E3;b.startTime=(new Date).getTime();b.endTime=b.startTime+b.duration;b.progress=0;b.endFunction=function(){a.endFunction&&a.endFunction();d.resolve()};b.progressFunction=a.progressFunction;b.stop=function(){b.isStopped=!0};c(b);e(b);return b};b.animateTransform=function(a){var d=a.shape;d.setTransform(null);
return b.animateProperty({duration:a.duration,properties:{p:{start:0,end:1,easing:a.easing}},progressFunction:function(b,h,c){var l,e,n,m;a.transform.forEach(function(a){var b=a.start[0]+(a.end[0]-a.start[0])*c,d=a.start[1]+(a.end[1]-a.start[1])*c;"translate"===a.name?(l=b,e=d):"scale"===a.name&&(n=b,m=d)});d.setTransform(new f.Matrix2D({dx:l,dy:e,xx:n,yy:m}))},endFunction:function(){d.setTransform(null);a.onEnd&&a.onEnd()}}).promise};return b})},"dojo/fx/easing":function(){define(["../_base/lang"],
function(k){var g={linear:function(f){return f},quadIn:function(f){return Math.pow(f,2)},quadOut:function(f){return f*(f-2)*-1},quadInOut:function(f){f*=2;return 1>f?Math.pow(f,2)/2:-1*(--f*(f-2)-1)/2},cubicIn:function(f){return Math.pow(f,3)},cubicOut:function(f){return Math.pow(f-1,3)+1},cubicInOut:function(f){f*=2;return 1>f?Math.pow(f,3)/2:(Math.pow(f-2,3)+2)/2},quartIn:function(f){return Math.pow(f,4)},quartOut:function(f){return-1*(Math.pow(f-1,4)-1)},quartInOut:function(f){f*=2;return 1>f?
Math.pow(f,4)/2:-.5*(Math.pow(f-2,4)-2)},quintIn:function(f){return Math.pow(f,5)},quintOut:function(f){return Math.pow(f-1,5)+1},quintInOut:function(f){f*=2;return 1>f?Math.pow(f,5)/2:(Math.pow(f-2,5)+2)/2},sineIn:function(f){return-1*Math.cos(Math.PI/2*f)+1},sineOut:function(f){return Math.sin(Math.PI/2*f)},sineInOut:function(f){return-1*(Math.cos(Math.PI*f)-1)/2},expoIn:function(f){return 0==f?0:Math.pow(2,10*(f-1))},expoOut:function(f){return 1==f?1:-1*Math.pow(2,-10*f)+1},expoInOut:function(f){if(0==
f)return 0;if(1==f)return 1;f*=2;if(1>f)return Math.pow(2,10*(f-1))/2;--f;return(-1*Math.pow(2,-10*f)+2)/2},circIn:function(f){return-1*(Math.sqrt(1-Math.pow(f,2))-1)},circOut:function(f){return Math.sqrt(1-Math.pow(f-1,2))},circInOut:function(f){f*=2;return 1>f?-.5*(Math.sqrt(1-Math.pow(f,2))-1):.5*(Math.sqrt(1-Math.pow(f-2,2))+1)},backIn:function(f){return Math.pow(f,2)*(2.70158*f-1.70158)},backOut:function(f){--f;return Math.pow(f,2)*(2.70158*f+1.70158)+1},backInOut:function(f){f*=2;if(1>f)return Math.pow(f,
2)*(3.5949095*f-2.5949095)/2;f-=2;return(Math.pow(f,2)*(3.5949095*f+2.5949095)+2)/2},elasticIn:function(f){if(0==f||1==f)return f;--f;return-1*Math.pow(2,10*f)*Math.sin(2*(f-.075)*Math.PI/.3)},elasticOut:function(f){return 0==f||1==f?f:Math.pow(2,-10*f)*Math.sin(2*(f-.075)*Math.PI/.3)+1},elasticInOut:function(f){if(0==f)return 0;f*=2;if(2==f)return 1;var e=.3*1.5,c=e/4;if(1>f)return--f,-.5*Math.pow(2,10*f)*Math.sin(2*(f-c)*Math.PI/e);--f;return.5*Math.pow(2,-10*f)*Math.sin(2*(f-c)*Math.PI/e)+1},bounceIn:function(f){return 1-
g.bounceOut(1-f)},bounceOut:function(f){return f<1/2.75?7.5625*Math.pow(f,2):f<2/2.75?7.5625*Math.pow(f-1.5/2.75,2)+.75:f<2.5/2.75?7.5625*Math.pow(f-2.25/2.75,2)+.9375:7.5625*Math.pow(f-2.625/2.75,2)+.984375},bounceInOut:function(f){return.5>f?g.bounceIn(2*f)/2:g.bounceOut(2*f-1)/2+.5}};k.setObject("dojo.fx.easing",g);return g})},"esri/dijit/geoenrichment/ReportPlayer/toolbar/PlayerToolbar":function(){define("dojo/_base/declare dojo/on dojo/string esri/dijit/geoenrichment/when dojo/dom-class dojo/dom-construct dijit/_WidgetBase dijit/_TemplatedMixin ../PlayerCommands ../PlayerThemes ./Select ./AreasSelect ./ZoomSelect ./ToolbarArranger ./ZoomUtil esri/dijit/geoenrichment/utils/DeviceUtil esri/dijit/geoenrichment/utils/DomUtil esri/dijit/geoenrichment/utils/InvokeUtil esri/dijit/geoenrichment/utils/MouseUtil esri/dijit/geoenrichment/utils/PopupUtil esri/dijit/geoenrichment/utils/TooltipUtil dojo/text!../templates/PlayerToolbarHolder.html dojo/i18n!esri/nls/jsapi".split(" "),
function(k,g,f,e,c,b,a,d,h,l,n,m,p,t,q,r,u,v,w,y,A,B,C){C=C.geoenrichment.dijit.ReportPlayer.PlayerToolbar;var z=k([a,d],{templateString:B,nls:C,player:null,areaTitleFormatter:null,areaTitleMultiFormatter:null,showAreaTitle:!1,stretchToolbarNode:null,canAddMoreAreas:!1,areasSelectButtons:null,areasSelect:null,pageSelect:null,zoomSelect:null,_toolbarArranger:null,_infographicSelect:null,postCreate:function(){u.hide(this.commandButtonsContainer);this._toolbarArranger=new t({showAreaTitle:this.showAreaTitle,
stretchToolbarNode:this.stretchToolbarNode,domNode:this.domNode,infographicsSelectDiv:this.infographicsSelectDiv,areaTitleDiv:this.areaTitleDiv,areaTitleInnerDiv:this.areaTitleInnerDiv,rightSideControlsBlock:this.rightSideControlsBlock,areasSelectDiv:this.areasSelectDiv,zoomSelectDiv:this.zoomSelectDiv,pageSelectDiv:this.pageSelectDiv,commandButtonsContainer:this.commandButtonsContainer});this._initAreaSelect();this._initPageSelect();this._initZoomSelect();A.autoTooltip(this.domNode)},_initAreaSelect:function(){var a=
this;this.areasSelect=(new m({player:this.player,canAddMoreAreas:this.canAddMoreAreas,areasSelectButtons:this.areasSelectButtons,onChange:function(b){a.onShowAnalysisAreaAt(b.value);a.onClosePopup()},onAddMoreAreas:function(){a.onAddMoreAreas();a.onClosePopup()},onRemoveAreas:function(b,d){a.onRemoveAreas(b);d&&a.onClosePopup()},onCompareAreasSideBySide:function(){a.onCompareAreasSideBySide();a.onClosePopup()},onStopComparison:function(b){a.onShowAnalysisAreaAt(b);a.onClosePopup()}})).placeAt(this.areasSelectDiv);
this.own(this.areasSelect)},updateAreaSelect:function(a){var b=a.analysisAreas,d=a.combinedAreasInfo,h=a.currentAreaIndex,c=a.isMultiFeature;this.areasSelect.buildAreaOptions(a);this.areasSelect.set("value",h);u[1<this.areasSelect.get("options").length&&!c?"show":"hide"](this.areasSelectDiv);this._toolbarArranger.syncRightSideVisibility();c?this.areaTitleMultiFormatter?this.areaTitleMultiFormatter(this.areaTitleInnerDiv,d):this._formatAreaTitleMulti(d):(a=b["all"===h?0:h],this.areaTitleFormatter?
this.areaTitleFormatter(this.areaTitleInnerDiv,a):this._formatAreaTitle(a,h))},_formatAreaTitle:function(a,b){this.areaTitleInnerDiv.innerHTML="all"===b?C.allAreas:a.locationName||a.name},_formatAreaTitleMulti:function(a){this.areaTitleInnerDiv.innerHTML=a.locationName||a.name||a.shortName||""},_pageControlsVisible:!0,_initPageSelect:function(){var a=this;this.pageSelect=(new n({onChange:function(b){a.onShowPageAt(b.value);a.onClosePopup()}})).placeAt(this.pageSelectDiv);this.own(this.pageSelect)},
setPageControlsVisible:function(a){this._pageControlsVisible=a;u[a?"show":"hide"](this.pageSelectDiv)},updatePageSelect:function(a,b){for(var d=[],h=0;h<a;h++)d.push({label:f.substitute(C.pageIndex,{index:h+1}),value:h});this.pageSelect.set("options",d);this.pageSelect.set("value",b);u[this._pageControlsVisible&&1<a?"show":"hide"](this.pageSelectDiv)},_initZoomSelect:function(){var a=this;this.zoomSelect=(new p({onChange:function(b){if(b.value===q.FIT_PAGE)a.onZoomToFitPage();else if(b.value===q.FIT_PAGE_WIDTH)a.onZoomToFitPageWidth();
else if(b.value===q.FIT_PAGE_HEIGHT)a.onZoomToFitPageHeight();else a.onSetZoomPercent(b.value);a.onClosePopup()}})).placeAt(this.zoomSelectDiv);this.own(this.zoomSelect)},setZoomSupportsInfo:function(a){u[a.supported?"show":"hide"](this.zoomSelectDiv);this._toolbarArranger.syncRightSideVisibility();this.zoomSelect.store.data.forEach(function(b){b.hidden=!1;b.value!==q.FIT_PAGE||a.canFitPage?b.value!==q.FIT_PAGE_WIDTH||a.canFitPageWidth?b.value!==q.FIT_PAGE_HEIGHT||a.canFitPageHeight||(b.hidden=!0):
b.hidden=!0:b.hidden=!0})},setZoomInfo:function(a){a=a.isFitPageScale?q.FIT_PAGE:a.isFitPageWidthScale?q.FIT_PAGE_WIDTH:a.isFitPageHeightScale?q.FIT_PAGE_HEIGHT:q.getClosestZoomAndUpdateOptions(100*a.scale,this.zoomSelect.get("options"));a!==this.zoomSelect.get("value")&&this.zoomSelect.set("value",a)},createCommandButton:function(a,b){return this.createCustomCommandButton({callback:b,buttonClass:a.id===h.PRINT?"playerPrintButton":"playerExportButton",tooltip:a.id===h.PRINT?C.printInfographic:C.exportInfographic,
visibleOnError:!1})},createCustomCommandButton:function(a){u.show(this.commandButtonsContainer);var d=b.create("div",{"class":"playerToolbar_commandButtonContainer dijitInline"},this.commandButtonsContainer,a.addFirst?"first":"last");d.__visibleOnError=a.visibleOnError;d=b.create("div",{"class":"playerToolbar_commandButton"},d);a.buttonClass&&c.add(d,a.buttonClass);a.tooltip&&A.setTooltipToNode(d,a.tooltip);g(d,"click",a.callback);return d},setTheme:function(a){c.remove(this.domNode,"playerThemeDark playerThemeLight");
c.add(this.domNode,a===l.DARK?"playerThemeDark":"playerThemeLight");this.areasSelect.setTheme(a);this.pageSelect.setTheme(a);this.zoomSelect.setTheme(a)},setErrorShown:function(a){if(a)for(u.hide([this.areaTitleDiv,this.areasSelectDiv,this.pageSelectDiv,this.zoomSelectDiv]),a=0;a<this.commandButtonsContainer.children.length;a++){var b=this.commandButtonsContainer.children[a];u[b.__visibleOnError?"show":"hide"](b)}},arrangeControls:function(){this._toolbarArranger.arrangeControls()},hasVisibleControls:function(){return this._toolbarArranger.hasVisibleControls()},
addInfographicsSelect:function(a){this._infographicSelect=a;a.placeAt(this.infographicsSelectDiv)},isMouseOver:function(){return w.isMouseOver(this.domNode)||this.areasSelect&&this.areasSelect.isMouseOver()||this.pageSelect&&this.pageSelect.isMouseOver()||this.zoomSelect&&this.zoomSelect.isMouseOver()||this._infographicSelect&&this._infographicSelect.isMouseOver&&this._infographicSelect.isMouseOver()},setContentLoadPromise:function(a){u.enableContentAbsolute(this.commandButtonsContainer,!1);u.enableContentAbsolute(this.infographicsSelectDiv,
!1);e(a,function(){u.enableContentAbsolute(this.commandButtonsContainer,!0);u.enableContentAbsolute(this.infographicsSelectDiv,!0)}.bind(this))},onShowPageAt:function(a){},onShowAnalysisAreaAt:function(a){},onCompareAreasSideBySide:function(){},onZoomToFitPage:function(){},onZoomToFitPageWidth:function(){},onZoomToFitPageHeight:function(){},onSetZoomPercent:function(a){},onClosePopup:function(){},onAddMoreAreas:function(){},onRemoveAreas:function(a){}});return k([a,d],{templateString:"\x3cdiv class\x3d'esriGEPlayerToolbarOuter'\x3e\x3c/div\x3e",
player:null,popupButtonDiv:null,areaTitleFormatter:null,areaTitleMultiFormatter:null,showToolbarInPopup:!1,showAreaTitle:!1,stretchToolbarNode:null,showCloseButton:!1,canAddMoreAreas:!1,areasSelectButtons:null,toolbarHolder:null,postCreate:function(){var a=this;this.inherited(arguments);this.toolbarHolder=(new z({player:this.player,showAreaTitle:this.showAreaTitle,stretchToolbarNode:this.stretchToolbarNode,canAddMoreAreas:this.canAddMoreAreas,areasSelectButtons:this.areasSelectButtons,onShowPageAt:function(b){a.onShowPageAt(b)},
onShowAnalysisAreaAt:function(b){a.onShowAnalysisAreaAt(b)},onCompareAreasSideBySide:function(){a.onCompareAreasSideBySide()},onZoomToFitPage:function(){a.onZoomToFitPage()},onZoomToFitPageWidth:function(){a.onZoomToFitPageWidth()},onZoomToFitPageHeight:function(){a.onZoomToFitPageHeight()},onSetZoomPercent:function(b){a.onSetZoomPercent(b)},onClosePopup:function(){a.closePopup()},onAddMoreAreas:function(){a.onAddMoreAreas()},onRemoveAreas:function(b){a.onRemoveAreas(b)}})).placeAt(this.domNode);
this.own(this.toolbarHolder)},updateAreaSelect:function(a){this.toolbarHolder.areaTitleFormatter=this.areaTitleFormatter;this.toolbarHolder.areaTitleMultiFormatter=this.areaTitleMultiFormatter;this.toolbarHolder.updateAreaSelect(a)},setPageControlsVisible:function(a){this.toolbarHolder.setPageControlsVisible(a)},updatePageSelect:function(a,b){this.toolbarHolder.updatePageSelect(a,b)},setZoomSupportsInfo:function(a){this.toolbarHolder.setZoomSupportsInfo(a)},setZoomInfo:function(a){this.toolbarHolder.setZoomInfo(a)},
createCommandButton:function(a,b){return this.toolbarHolder.createCommandButton(a,b)},setTheme:function(a){this.toolbarHolder.setTheme(a)},setErrorShown:function(a){this.toolbarHolder.setErrorShown(a);this._arrangeControls()},_arrangeControls:function(){u.show(this.domNode);this.toolbarHolder.arrangeControls();u[this.toolbarHolder.hasVisibleControls()?"show":"hide"]([this._popupButton,this.domNode])},_popupHandle:null,_popupButton:null,update:function(){v.invoke(this,"_doUpdateToolbar")},_doUpdateToolbar:function(){c[this.isScrollShown()?
"add":"remove"](this.popupButtonDiv,"playerToolbar_parentHasScroll");c[r.isMobileDevice()?"add":"remove"](this.popupButtonDiv,"isMobileDevice");c[r.isMobileDevice()?"add":"remove"](this.toolbarHolder.domNode,"isMobileDevice");this._resetToolbarNode();var a=y.isOpen(this.toolbarHolder);this._popupHandle&&this._popupHandle.remove();this._popupHandle=null;this.showToolbarInPopup?(this._popupButton=b.create("div",{"class":"dijitInline playerToolbar_outerButton playerToolbar_settingsButton"},this.popupButtonDiv,
"first"),this._popupHandle=y.makePopup(this.toolbarHolder,this,this._popupButton,{orient:["before","below"],openPopup:a})):b.place(this.toolbarHolder.domNode,this.domNode);this._arrangeControls()},_resetToolbarNode:function(){this.toolbarHolder.domNode.parentNode&&this.toolbarHolder.domNode.parentNode.removeChild(this.toolbarHolder.domNode);b.empty(this.domNode);this._popupButton&&b.destroy(this._popupButton);this._popupButton=null},closePopup:function(){this.showToolbarInPopup&&y.close(this.toolbarHolder)},
isScrollShown:function(){return!1},createCustomCommandButton:function(a){return this.toolbarHolder.createCustomCommandButton(a)},notifyCommandButtonsAdded:function(){if(this.showCloseButton)if(this.showToolbarInPopup){var a=b.create("div",{"class":"dijitInline playerToolbar_outerButton playerToolbar_closeButtonOuter"},this.popupButtonDiv);A.setTooltipToNode(a,C.close);g(a,"click",function(){this.onClose()}.bind(this))}else this.createCustomCommandButton({buttonClass:"playerToolbar_closeButton",tooltip:C.close,
callback:function(){this.closePopup();this.onClose()}.bind(this),visibleOnError:!0})},addInfographicsSelect:function(a){this.toolbarHolder.addInfographicsSelect(a)},isMouseOver:function(){return w.isMouseOver(this.domNode)||this.toolbarHolder.isMouseOver()},setContentLoadPromise:function(a){this.toolbarHolder.setContentLoadPromise(a)},onShowPageAt:function(a){},onShowAnalysisAreaAt:function(a){},onCompareAreasSideBySide:function(){},onZoomToFitPage:function(){},onZoomToFitPageWidth:function(){},onZoomToFitPageHeight:function(){},
onSetZoomPercent:function(a){},onClose:function(){},onAddMoreAreas:function(){},onRemoveAreas:function(a){}})})},"esri/dijit/geoenrichment/ReportPlayer/toolbar/Select":function(){define(["dojo/_base/declare","dojo/dom-class","esri/dijit/geoenrichment/OnDemandSelect","../PlayerThemes"],function(k,g,f,e){return k(f,{"class":"esriGEOnDemandSelectNoBackground",listClass:"esriGEOnDemandSelectVeryTallList esriGEOnDemandSelectSpacedOut",allowRepetitiveSelection:!1,setTheme:function(c){g[c===e.DARK?"add":
"remove"](this.domNode,"esriGEOnDemandSelectWhite")}})})},"esri/dijit/geoenrichment/OnDemandSelect":function(){define("dojo/_base/declare dojo/_base/lang dojo/on dojo/dom-construct dojo/dom-class dojo/dom-style dojo/dom-geometry dojo/store/Memory dijit/_WidgetBase dijit/_TemplatedMixin ./lists/FlowList ./lists/FlowListDefaultItemRenderer ./lists/_FlowListHoverSupport ./utils/DeviceUtil ./utils/DomUtil ./utils/MouseUtil ./utils/PopupUtil ./utils/TooltipUtil dojo/text!./templates/OnDemandSelect.html".split(" "),
function(k,g,f,e,c,b,a,d,h,l,n,m,p,t,q,r,u,v,w){var y=k([n,p]),A={_currentSelect:null,_keyHandler:null,_mouseMoveHandler:null,_currentItemIndex:-1,_currentSearchLetter:null,setFocusedSelect:function(a){this._currentSelect=a;this._updateHandlers()},_updateHandlers:function(){var a=this;this._keyHandler&&this._keyHandler.remove();this._keyHandler=null;this._mouseMoveHandler&&this._mouseMoveHandler.remove();this._mouseMoveHandler=null;this._currentItemIndex=-1;this._currentSearchLetter=null;this._setNodeFocused(null);
this._currentSelect&&(this._keyHandler=f(document.body,"keyup",function(b){b=String.fromCharCode(b.keyCode);1===b.length&&(b=b.toLowerCase(),a._tryHighlightNextItemForKey(b))}),this._mouseMoveHandler=f(this._currentSelect.popupList.domNode,"mousemove",function(){a._setNodeFocused(null)}))},_tryHighlightNextItemForKey:function(a){a===this._currentSearchLetter?this._currentItemIndex++:this._currentItemIndex=0;this._currentSearchLetter=a;var b=this,d=this._currentSelect.store.query(function(d){return(d=
d[b._currentSelect.labelProperty])&&d.toLowerCase().charAt(0)===a});if(d.length){this._currentItemIndex>d.length-1&&(this._currentItemIndex=0);var h=(d=d[this._currentItemIndex])&&this._currentSelect.popupList.getItemNode(d);d&&this._currentSelect.popupList.scrollToItem(d);this._setNodeFocused(h)}},_currentFocusedNode:null,_setNodeFocused:function(a){this._currentFocusedNode&&(c.remove(this._currentFocusedNode,"listItemFocused"),this._currentFocusedNode=null);a&&(c.add(a,"listItemFocused"),this._currentFocusedNode=
a)}};return k([h,l],{templateString:w,value:null,popupList:null,listClass:null,placeHolderClass:"placeHolder",idProperty:"value",labelProperty:"label",options:null,store:null,itemRenderer:null,itemClass:null,placeHolder:null,requireSelection:!0,renderSelectionAsItem:!1,makePopupListWidthMatchOpenButtonWidth:!0,orient:null,noPopupOverflow:!1,stopOpenEventPropagation:!1,stopPopupInteractionEventPropagation:!0,onClickComponent:null,clearPopupOnClose:!0,detectItemHover:!1,hasSelectableItems:!0,allowRepetitiveSelection:!0,
labelTextToKeep:null,nodeToKeepAsSelected:null,openMouseEvent:null,toggleOnClick:!0,supportsKeyNavigation:!0,_closePopupOnChangeFunc:null,_lastPopupListScrollTop:0,postCreate:function(){var a=this;this.inherited(arguments);this._normalizeValue();this.labelTextToKeep?this.selectedLabel.innerHTML=this.labelTextToKeep:this.requireSelection||this._tryAssignPlaceholder();this.nodeToKeepAsSelected?this._updateSelection():q.hide(this.selectedItemHolder);this._createPopupList();this.own(this.popupList);this.listClass&&
c.add(this.popupList.domNode,this.listClass);this._popupCreationHandler=f(this.openButton,this.openMouseEvent||t.click,function(b){a.stopOpenEventPropagation&&("function"===typeof a.stopOpenEventPropagation?a.stopOpenEventPropagation(b):b.stopPropagation());a.openPopup()});this.popupList.startup();this._trySelectValue();f(this.popupList.domNode,t.clickOrRelease,function(b){a.stopPopupInteractionEventPropagation&&b.stopPropagation()});f(this.popupList.domNode,"scroll",function(b){a._lastPopupListScrollTop=
a.popupList.domNode.scrollTop});v.autoTooltip(this.domNode)},_createPopupList:function(){var a=this,b=this.itemRenderer||new m;this.popupList=new (this.detectItemHover?y:n)(g.mixin({"class":"esriGEOnDemandSelectFlowList",idProperty:this.idProperty,labelProperty:this.labelProperty,itemRenderer:b,itemClass:this.itemClass,stopMouseEventPropagation:this.stopPopupInteractionEventPropagation,hasSelectableItems:this.hasSelectableItems,allowRepetitiveSelection:this.allowRepetitiveSelection,onChange:function(){a._processOnChangeEvent()},
onItemHovered:function(b){a.onItemHovered(b)}},this._buildAdditionalPopupListProperties()))},_buildAdditionalPopupListProperties:function(){return null},_processOnChangeEvent:function(){if(this.popupList.selectedItem){var a=this.value,b=this.popupList.selectedItem;this.value=b[this.idProperty];this._updateSelection();this.onChange&&this.onChange({type:"change",value:this.value,previousValue:a,selectedItem:b})}this._closePopupOnChangeFunc&&!this._closePopupOnChangeFunc(this.value)||u.close(this.popupList)},
_makePopup:function(){if(this._popupCreationHandler){this._popupCreationHandler.remove();delete this._popupCreationHandler;var d=this;u.makePopup(this.popupList,this,this.openButton,{openMouseEvent:this.openMouseEvent,stopEventPropagation:this.stopOpenEventPropagation,toggleOnClick:this.toggleOnClick,wrapperClass:this.listClass?this.listClass.split(" ").map(function(a){return a+"Popup"}).join(" "):null,orient:this.orient,allowAutoOrientation:this.allowAutoOrientation,noOverflow:this.noPopupOverflow,
onClickComponent:this.onClickComponent,onPreShow:function(){d.onPopupListPreBuild();d.makePopupListWidthMatchOpenButtonWidth&&b.set(d.popupList.domNode,"minWidth",a.getContentBox(d.domNode).w+"px");d._updatePopupListStore();d.onPopupPreOpened()},onShow:function(){d.onPopupOpened();A.setFocusedSelect(d);d._onPopupOpened()},onClose:function(){d.onPopupClosed();A.setFocusedSelect(null);d.clearPopupOnClose&&d._clearPopup()},isMouseOver:function(){return d.isMouseOverList()}})}},_clearPopup:function(){this.popupList&&
this.popupList.clear&&this.popupList.clear()},_tryAssignPlaceholder:function(){if(this.placeHolder&&null===this.value)return this.selectedLabel.innerHTML=this.placeHolder,c.add(this.selectedLabel,this.placeHolderClass),!0;c.remove(this.selectedLabel,this.placeHolderClass);return!1},_normalizeValue:function(){null!==this.value&&(void 0===this.value?this.value=null:("string"===typeof this.value&&(this.value=this.value.trim()),String(this.value)||(this.value=null)))},_trySelectValue:function(){var a=
this;if((null===this.value||!this._setValueAttr(this.value,!0))&&this.requireSelection){var b=this.store&&this.store.query();b&&b.length&&(this.value&&b.some(function(b){return a.value===b[a.idProperty]})?this._setValueAttr(this.value,!0):this._setValueAttr(b[0][this.idProperty],!0))}},_setValueAttr:function(a,b){this.value=a;this._normalizeValue();if(!this.store||!this.popupList)return!1;var d=this;(a=this.store.query(function(a){return a[d.idProperty]===d.value})[0])&&this.popupList.setSelectedItem(a);
this._updateSelection(a);return!!a},_setOptionsAttr:function(a){this.options=a;this.store=this._createStore(a);this._updatePopupListStore();this._trySelectValue()},_setStoreAttr:function(a){this.options=(this.store=this._createStore(a))&&this.store.query();a.idProperty&&(this.idProperty=a.idProperty);this._updatePopupListStore();this._trySelectValue()},_createStore:function(a){return a instanceof Array?new d({data:a,idProperty:this.idProperty}):a},_updatePopupListStore:function(){this.popupList&&
(this.popupList.store&&this.popupList.store===this.store&&!this.clearPopupOnClose||this.popupList.setStore(this.store,!0),this.popupList.setSelectedItem(this.getSelectedItem()),this._lastPopupListScrollTop&&(this.popupList.domNode.scrollTop=this._lastPopupListScrollTop))},getSelectedItem:function(){if(!this.store)return null;var a=this.get("value"),b=this;return void 0!==a&&this.store.query(function(d){return d[b.idProperty]===a})[0]},setSelectedItem:function(a){this.store&&this.popupList&&a&&this._setValueAttr(a[this.idProperty],
!0)},getSelectedIndex:function(){var a=this,b=-1;if(this.store){var d=this.get("value");void 0!==d&&this.store.query().some(function(h,c){if(h[a.idProperty]==d)return b=c,!0})}return b},setSelectedIndex:function(a){this.setSelectedItem(this.store&&this.store.data[a])},_nodeToKeepAsSelectedPlacedFlag:!1,_updateSelection:function(a){a=a||this.getSelectedItem();this.nodeToKeepAsSelected?this._nodeToKeepAsSelectedPlacedFlag||(q.hide(this.selectedLabel),q.show(this.selectedItemHolder),e.empty(this.selectedItemHolder),
e.place(this.nodeToKeepAsSelected,this.selectedItemHolder),this._nodeToKeepAsSelectedPlacedFlag=!0):this.renderSelectionAsItem?(q.hide(this.selectedLabel),q.show(this.selectedItemHolder),e.empty(this.selectedItemHolder),a&&this.popupList.itemRenderer.createPresentation(a,!1,this.selectedItemHolder,this.popupList)):(q.hide(this.selectedItemHolder),this.labelTextToKeep?this.selectedLabel.innerHTML=this.labelTextToKeep:(this.selectedLabel.innerHTML=a?a[this.labelProperty]:"",this.selectedLabel.innerHTML&&
c.remove(this.selectedLabel,this.placeHolderClass),q[this.selectedLabel.innerHTML||this._tryAssignPlaceholder()?"show":"hide"](this.selectedLabel)))},refresh:function(){this.popupList.refresh();this._updateSelection()},isPopupOpen:function(){return u.isOpen(this.popupList)},openPopup:function(){this.isPopupOpen()||(this._makePopup(),u.open(this.popupList))},closePopup:function(){this._popupCreationHandler||u.close(this.popupList)},refreshPopup:function(){this.isPopupOpen()&&u.refresh(this.popupList)},
isMouseOver:function(a){return r.isMouseOver(this.domNode,{event:a})||this.isMouseOverList(a)},isMouseOverList:function(a){return this.popupList&&r.isMouseOver(this.popupList.domNode,{event:a})},onPopupListPreBuild:function(){},onPopupPreOpened:function(){},onPopupOpened:function(){},_onPopupOpened:function(){},onPopupClosed:function(){},onChange:function(a){},onItemHovered:function(a){},destroy:function(){this._popupCreationHandler&&this._popupCreationHandler.remove();this.closePopup(this.popupList);
this.popupList.destroy();this.inherited(arguments)}})})},"esri/dijit/geoenrichment/lists/FlowList":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-construct dojo/dom-class dojo/on ../utils/DeviceUtil ../utils/DnDUtil ../utils/MouseUtil ../utils/TooltipUtil ./FlowListDefaultItemRenderer ../utils/PopupUtil dijit/_WidgetBase dijit/_TemplatedMixin".split(" "),function(k,g,f,e,c,b,a,d,h,l,n,m,p){var t=k([m,p],{templateString:"\x3cdiv class\x3d'esriGEFlowList esriGENonSelectable'\x3e\x3c/div\x3e",
idProperty:"value",labelProperty:"label",selectedIndex:-1,selectedItem:null,items:null,store:null,defaultItemRendererClass:l,itemRenderer:null,itemClass:null,itemClassSelected:null,keepScrollPosition:!1,allowRepetitiveSelection:!0,selectOnMouseDown:!1,noDragTolerance:0,selectionValidator:null,allowManualSelection:!0,stopMouseEventPropagation:!0,hasSelectableItems:!0,autoDetectUrlsInLabels:!1,storeItemsInInnerDiv:!1,_addedWrappers:null,_clickHandles:null,_valueOnCreation:null,_isCreated:!1,itemsDiv:null,
postCreate:function(){this.inherited(arguments);this.itemsDiv=this.storeItemsInInnerDiv?f.create("div",{"class":"esriGEFlowList_innerDiv"},this.domNode):this.domNode;this._clearHandlers();this._setUpItemRenderer();h.autoTooltip(this.domNode);this._isCreated=!0;this._valueOnCreation?this._setValueAttr(this._valueOnCreation):this.refresh()},_setUpItemRenderer:function(){this.itemRenderer||(this.itemRenderer=new this.defaultItemRendererClass);this.itemClass&&(this.itemRenderer.itemClass=this.itemClass);
this.itemClassSelected&&(this.itemRenderer.itemClassSelected=this.itemClassSelected)},_getValueAttr:function(){return this.selectedItem&&this.selectedItem[this.idProperty]},_setValueAttr:function(a){var b=this;if(this._isCreated){var d=this.items||this.store&&this.store.data;d&&d.some(function(d){if(d[b.idProperty]==a)return b.setSelectedItem(d),!0})}else this._valueOnCreation=a},_scrollTopMemo:0,memoScroll:function(){this._scrollTopMemo=this.domNode.scrollTop},applyScrollFromMemo:function(){this.domNode.scrollTop=
this._scrollTopMemo||0},_setItemsAttr:function(a){this.setItems(a)},setItems:function(a,b){this.keepScrollPosition&&this.memoScroll();this.clear();this.items=a;b||(this.items&&this._isCreated?(this._addItems(a),this._checkIfStillSelected(),this.keepScrollPosition&&this.applyScrollFromMemo()):this._checkIfStillSelected())},_checkIfStillSelected:function(){if(-1!=this.selectedIndex||this.selectedItem){var a=this;this._addedWrappers&&this._addedWrappers.some(function(b,d){return a._isItemSelected(b,
d)})||(this.selectedIndex=-1,this.selectedItem=null)}},refresh:function(){this.store?this.setStore(this.store):this.setItems(this.items)},setSelectedItem:function(a,b){this.hasSelectableItems&&(this.selectedItem=a,this.selectedIndex=-1,this.refresh(),b&&this._dispatchChangeEvent())},setSelectedIndex:function(a,b){this.hasSelectableItems&&(this.selectedIndex=a,this.selectedItem=null,this.refresh(),b&&this._dispatchChangeEvent())},getItemNode:function(a){var b;this._addedWrappers&&this._addedWrappers.some(function(d){if(d.itemRef===
a)return b=d.__itemPresentation,!0});return b},getItemByNode:function(a){var b;this._addedWrappers&&this._addedWrappers.some(function(d){if(d.__itemPresentation===a)return b=d.itemRef,!0});return b},getItemByValue:function(a){var b,d=this;this._addedWrappers&&this._addedWrappers.some(function(h){if(h[d.idProperty]===a)return b=h.itemRef,!0});return b},__selectedPresentation:null,_addItems:function(a){this._addedWrappers=this._addedWrappers||[];var b=this;a.forEach(function(a){var d=g.mixin({},a);
d.itemRef=a;b.__addWrapper(d)})},__addWrapper:function(a){var b=this._addedWrappers.length,d=this.itemRenderer.createPresentation(a.itemRef,this._isItemSelected(a,b),this.itemsDiv,this,a);d&&(d.index=b,d.item=a.itemRef,a.__itemPresentation=d,this._isItemSelected(a,b)&&(this.selectedItem=a.itemRef,this.selectedIndex=b,this.__selectedPresentation=d),this._addClickHandler(d),this._addedWrappers.push(a),a=this._addedWrappers.length-1,e.add(d,"listItem_"+a),e.add(d,"listItem_"+(0==a%2?"even":"odd")))},
_isItemSelected:function(a,b){return this.hasSelectableItems&&this._isItemClickable(a)?b==this.selectedIndex||a.itemRef===this.selectedItem?!0:a.itemRef&&this.selectedItem?(a=a.itemRef[this.idProperty],b=this.selectedItem[this.idProperty],void 0!==a&&a===b):!1:!1},_isItemClickable:function(a){return this.selectionValidator?this.selectionValidator(a):this._selectionValidatorDefault(a)},_selectionValidatorDefault:function(a){return!!a&&!a.isSeparator&&!1!==a.enabled},_addClickHandler:function(d){function h(){(l.allowRepetitiveSelection||
l.__selectedPresentation!=d)&&l._isItemClickable(d.item)&&(l.__selectedPresentation&&l.itemRenderer.selectPresentation&&l.itemRenderer.selectPresentation(l.__selectedPresentation,!1,l.__selectedPresentation.item),l.itemRenderer.selectPresentation&&l.itemRenderer.selectPresentation(d,l.hasSelectableItems,d.item),l.__selectedPresentation=d,l.selectedIndex=d.index,l.selectedItem=d.item,l._dispatchChangeEvent())}var l=this;if(this.allowManualSelection){var e;e=this.selectOnMouseDown||!this.noDragTolerance?
c(d,this.selectOnMouseDown?b.press:b.click,function(a){l.stopMouseEventPropagation&&a.stopPropagation();h()}):a.addNoDragClickHandler(d,h,{tolerance:this.noDragTolerance});this._clickHandles.push(e)}},_dispatchChangeEvent:function(){this.onChange({type:"change",selectedIndex:this.selectedIndex,selectedItem:this.selectedItem,value:this.selectedItem&&this.selectedItem[this.idProperty]})},clear:function(){this.__selectedPresentation=null;this._addedWrappers=this._addedWrappers||[],this._addedWrappers.forEach(function(a){a.destroyPresentation&&
a.destroyPresentation()});this._addedWrappers.length=0;this.itemsDiv&&f.empty(this.itemsDiv);this._clearHandlers()},_clearHandlers:function(){this._clickHandles=this._clickHandles||[];this._clickHandles.forEach(function(a){a.remove()});this._clickHandles.length=0},scrollToItem:function(a){if(a=this.getItemNode(a))this.domNode.scrollTop=a.offsetTop},store:null,onDemandModeLoadStep:1E3,onDemandPopulateLimit:1E3,onDemandPopulatePeriod:200,_storeScrollHandler:null,_setStoreAttr:function(a){this.setStore(a)},
setStore:function(a){if(this.domNode)if(this.keepScrollPosition&&this._memoScroll(),this.clear(),this.idProperty=(this.store=a)&&a.idProperty,this.store&&this._isCreated){this._loadNextPart();this._checkIfStillSelected();this.keepScrollPosition&&this.applyScrollFromMemo();var b=this;this._storeScrollHandler=this._storeScrollHandler||c(this.domNode,"scroll",function(){var a=b._addedWrappers[b._addedWrappers.length-30];(a=a?a.__itemPresentation:null)&&a.offsetTop<b.domNode.scrollTop&&b._loadNextPart()})}else this._checkIfStillSelected()},
_loadNextPart:function(){if(this.store&&this.store.query().length!=this._addedWrappers.length){var a=this.store.query(null,{start:this._addedWrappers.length,count:this.onDemandModeLoadStep});delete a.total;this._addItems(a);a.length&&this._addedWrappers.length<this.onDemandPopulateLimit&&(a=this._loadNextPart.bind(this),setTimeout(a,this.onDemandPopulatePeriod))}},isMouseOver:function(a){return d.isMouseOver(this.domNode,{event:a})},onChange:function(a){},destroy:function(){this.clear();this.inherited(arguments)}});
t.createPopup=function(a){function b(){d||(d=new t({"class":a.listClass,itemRenderer:a.itemRenderer,items:a.options,onChange:function(b){a.onChange(b);!a.keepSelection&&d.setSelectedItem(null);n.close(d)}}),a.doNotOwn||a.wizard.own(d),a.isDeferred&&a.isDeferred(d));return d}var d;n.makePopup(a.isDeferred?b:b(),a.wizard,a.aroundNode,a.popupOptions||{});return d};return t})},"esri/dijit/geoenrichment/lists/FlowListDefaultItemRenderer":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-construct ../utils/DomUtil ../utils/TooltipUtil ../utils/RegExpUtil ../utils/UrlUtil".split(" "),
function(k,g,f,e,c,b,a,d){return k(null,{itemClass:"",itemClassSelected:"",labelClass:"",createLabelNode:!1,createImageAfterLabel:!1,constructor:function(a){g.mixin(this,a)},createPresentation:function(a,b,d,m,g){if(a.isSeparator)return b=e.create("div",{"class":"flowList_listSeparator"},d),a.hidden&&c.hide(b),b;d=e.create("div",{"class":"listItem "+(this.itemClass||" ")+(a.itemClass||""),style:a.style},d);a.isLink&&f.add(d,"esriGELink");!1===a.enabled&&f.add(d,"disabled");this._createParts(a,d,m);
this._setTooltip(a,d,m);this.selectPresentation(d,b,a);a.hidden&&c.hide(d);return d},_setTooltip:function(a,d,c){a.tooltip&&c.own(b.setTooltipToNode(d,a.tooltip))},_createParts:function(a,b,d){var h;this.createImageAfterLabel&&(this._createLabel(a,b,d),h=!0);this._createImage(a,b,d);!h&&this._createLabel(a,b,d)},_createImage:function(a,b,d){if(b=this._createImageNode(a,b,d))a.imageClass&&f.add(b,a.imageClass),a.imageUrl&&(b.style="background-image: url("+a.imageUrl+");")},_createImageNode:function(a,
b,d){return b},_createLabel:function(a,b,d){if(this.createLabelNode)return b=e.create("div",{innerHTML:a[d.labelProperty],"class":"dijitInline TrimWithEllipses listItemLabel"},b),a.labelClass&&f.add(b,a.labelClass),this.labelClass&&f.add(b,this.labelClass),d.autoDetectUrlsInLabels&&this._tryConvertToUrls(b),b;a[d.labelProperty]&&(b.innerHTML=a[d.labelProperty],d.autoDetectUrlsInLabels&&this._tryConvertToUrls(b))},_tryConvertToUrls:function(b){var h=b.innerHTML.match(a.IS_URL_RE);if(h=h&&h[0])b.innerHTML=
b.innerHTML.replace(h,"\x3ca href\x3d'"+d.toHttpsUrl(h)+"' target\x3d'_blank'\x3e"+h+"\x3c/a\x3e")},selectPresentation:function(a,b,d){f[b?"add":"remove"](a,"listItemSelected "+this.itemClassSelected)}})})},"esri/dijit/geoenrichment/utils/RegExpUtil":function(){define([],function(){var k={createRegExp:function(a,b,c){a=k.trimText(a);return!a&&c?null:new RegExp(a,b)},trimText:function(a){return a?a.replace(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,"").trim():""},replace:function(a,b,c){return null==a?"":(""+
a).replace(b,function(a){return c[a]||""})}},g=/&|<|>/g,f=/&|<|>|"|'/g,e={"\x26":"\x26amp;","\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26apos;"};k.encodeXML=function(a,b){return k.replace(a,b?f:g,e)};var c=/&amp;|&lt;|&gt;|&quot;|&apos;/g,b={"\x26amp;":"\x26","\x26lt;":"\x3c","\x26gt;":"\x3e","\x26quot;":'"',"\x26apos;":"'"};k.decodeXML=function(a){return k.replace(a,c,b)};k.IS_RICH_TEXT_RE=/<\w/;k.IS_URL_RE=/((www\.|http:\/\/|https:\/\/)[A-Za-z0-9_.\-~]+\.[A-Za-z0-9_.\-~/]+)|([A-Za-z0-9_.\-~]+\.com[A-Za-z0-9_.\-~/]*)/;
k.isRichText=function(a){return a&&k.IS_RICH_TEXT_RE.test(a)};k.isUrl=function(a){return a&&k.IS_URL_RE.test(a)};var a=/^[0-9a-fA-F]{32}$/;k.isId=function(b){return b&&a.test(b)};return k})},"esri/dijit/geoenrichment/utils/UrlUtil":function(){define(["dojo/_base/url","esri/config","esri/kernel","esri/urlUtils"],function(k,g,f,e){var c={getDomain:function(b){if("string"!==typeof b)return null;b=b.replace(/^(http:\/\/|https:\/\/)/i,"");var a=b.indexOf("/");return 0>a?b:b.substr(0,a)},getPortalUrl:function(b){if("string"!==
typeof b)return null;var a=b;b=b.replace(/^(http:\/\/|https:\/\/)/i,"");a=a.substr(0,a.indexOf(b));return-1!==b.indexOf("/sharing")?a+b.substr(0,b.indexOf("/sharing")):-1!==b.indexOf("/portal")?a+b.substr(0,b.indexOf("/portal"))+"/portal":-1!==b.indexOf("/home")&&b.indexOf("/home")==b.length-5?a+b.substr(0,b.indexOf("/home")):a+b},getProxyUrl:function(b){var a=g.defaults.io.proxyUrl;a&&!/^http/i.test(a)&&(a=e.getAbsoluteUrl(a));a&&b&&(a=c.toHttpsUrl(a));return a},registerCORS:function(b){(b=c.getDomain(b))&&
-1==g.defaults.io.corsEnabledServers.indexOf(b)&&g.defaults.io.corsEnabledServers.push(b);c._fixCORS()},_fixCORS:function(){g.defaults.io.corsEnabledServers=g.defaults.io.corsEnabledServers.filter(function(b){return b.indexOf&&0===b.indexOf("null://")?(console.log("WARNING: incorrect CORS URL detected: "+b),!1):!0})},indexOfQuery:function(b){var a=b.indexOf("?");0<=a&&(b=b.substr(a+1),/^(http:\/\/|https:\/\/)/i.test(b)&&(b=b.indexOf("?"),a=0<=b?a+1+b:-1));return a},removeQuery:function(b){var a=c.indexOfQuery(b);
return 0>a?b:b.substr(0,a)},addQueryPart:function(b,a){var d=0>c.indexOfQuery(b)?"?":"\x26";return b+d+a},getVariableValue:function(b,a){if(b&&"string"===typeof a){var d=e.urlToObject(b);if(d.query){var h={};Object.keys(d.query).forEach(function(a){h[a.toLowerCase()]=d.query[a]});return h[a.toLowerCase()]}}},addUrlVariable:function(b,a,d){a=encodeURIComponent(a);d=encodeURIComponent(d);return c.addQueryPart(b,a+"\x3d"+d)},securePortsMap:{80:"443",8080:"8443"},toHttpUrl:function(b){return!b||/^http/i.test(b)?
b:"http://"+b},toHttpsUrl:function(b){b&&(b=c.toHttpUrl(b));if(!b||!/^http:\/\//i.test(b))return b;var a=new k(b);b=b.replace(/^http/i,"https");var d=c.securePortsMap[a.port];d&&(b=b.replace(":"+a.port,":"+d));return b},combine:function(b,a){"number"===typeof a&&(a+="");if(a){if(/^(http:\/\/|https:\/\/)/i.test(a)||!b)return a;"/"!=a.charAt(0)&&(a="/"+a);if(1==a.length)return b;var d=b.length-1;"/"==b.charAt(d)&&(b=b.substr(0,d));var h=e.urlToObject(b);b=c.removeQuery(b);d=b.length-a.length;0<=d&&
b.substr(d).toLowerCase()==a.toLowerCase()&&(b=b.substr(0,d));b+=a;for(var l in h.query)c.addQueryPart(b,h.query[l])}return b},combineMulti:function(b){for(var a=b[0],d=1;d<b.length;d++)a=c.combine(a,b[d]);return a},openUrl:function(b,a){if(a)return window.open(b,"_blank");a=window.open();a.opener=null;a.referrer=null;a.location=b;return a},isPageRunOnWebService:function(){return/^http/i.test(window.location.protocol)},getToken:function(b){return(b=b&&f.id.findCredential(b)||f.id.credentials[0])&&
b.token}};return c})},"esri/dijit/geoenrichment/utils/PopupUtil":function(){define("dojo/_base/lang esri/dijit/geoenrichment/utils/onClickTouch dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style esri/dijit/geoenrichment/when dijit/popup dijit/place ./DeviceUtil ./DnDUtil ./MouseUtil dojo/domReady!".split(" "),function(k,g,f,e,c,b,a,d,h,l,n,m){function p(a){if(!a)return["below"];var b=[];a.forEach(function(a){var d=c.isBodyLtr();switch(a){case "before-alt":d=!d;case "after-alt":b.push(d?
{aroundCorner:"BR",corner:"BL"}:{aroundCorner:"BL",corner:"BR"});b.push(d?{aroundCorner:"TR",corner:"TL"}:{aroundCorner:"TL",corner:"TR"});return}b.push(a)});return b}var t={makePopup:function(h,r,u,v){function q(a){if(v.overlay&&a._popupWrapper){var d=e.create("div",{"class":v.overlay.overlayClass});if(v.overlay.overlayParent)e.place(d,v.overlay.overlayParent);else{e.place(d,E,"before");var h=b.get(a._popupWrapper,"zIndex");b.set(d,"zIndex",h)}a.__popupOverlay=d}}function y(a){a.__popupOverlay&&
(e.destroy(a.__popupOverlay),a.__popupOverlay=null)}function A(a){G=!1;a.__bodyClickHandler&&a.__bodyClickHandler.remove();a.__bodyClickHandler=null;a.__popupWidgetOpenFlag=!1;y(a);v.onClose&&v.onClose()}function B(b){b&&v.stopEventPropagation&&b.stopPropagation();G||(G=!0,a(z||("function"==typeof h?h():h),function(b){z=b;z.domNode?(z.__openPopupWidgetFunc=B,E=d.moveOffScreen(z),a(v.onPreShow&&v.onPreShow(),function(){var a=p(v.orient);if(E&&!1!==v.allowAutoOrientation){var b=-1!==a.indexOf("below"),
h=c.position(u),e=c.position(E);b&&h.y+h.h+e.h>document.body.clientHeight&&(b=!b);a=a.map(function(a){return"below"!=a||b?a:"above"})}v.noOverflow&&(z.baseClass="esriGENoOverflow "+z.baseClass);d.open({parent:r,popup:z,around:u,orient:a,onClose:function(){A(z)}});v.suppressReposition&&clearTimeout(d._aroundMoveListener);v.noOverflow&&(z.baseClass=z.baseClass.replace("esriGENoOverflow ",""));E&&v.wrapperClass&&f.add(E,v.wrapperClass);z.__popupInfo=k.mixin({},d.getTopPopup());z.__popupInfo.orient=a;
z.__popupInfo.around=u;y(z);q(z);v.onShow&&v.onShow();z.__popupWidgetOpenFlag=!0;F&&z.own&&z.own(F);z.__bodyClickHandler&&z.__bodyClickHandler.remove();if(!1!==v.closeOnClickOutside){var n="function"===typeof v.closeOnClickOutside?v.closeOnClickOutside:null;setTimeout(function(){z.__bodyClickHandler&&z.__bodyClickHandler.remove();z.__bodyClickHandler=g(document.body,l.isMobileDevice()?l.press:C,function(a){G&&(m.fixTouchEvent(a),n&&!n(a)||m.isMouseOver(E)||v.isMouseOver&&v.isMouseOver()||z.isMouseOver&&
z.isMouseOver()||z.__lockPopupWidgetFlag||t.close(z))})})}})):G=!1}))}if(h){v=v||{};var C=v.openMouseEvent?v.openMouseEvent:l.clickOrRelease,z="function"!==typeof h?h:null;if(z)var E=d.moveOffScreen(z);var G=!1;z&&(z.__openPopupWidgetFunc=B);var F;if(!1!==v.openOnMouseEvent){var D=B;if(v.toggleOnClick)var H,D=function(a){H=H||a.type;z?H===a.type&&t.toggle(z):B()};F=!1===v.onClickComponent?null:void 0!==v.noDragClickTolerance?n.addNoDragClickHandler(v.onClickComponent||u,D,{tolerance:v.noDragClickTolerance}):
g(v.onClickComponent||u,C,D)}v.openPopup&&B();return{remove:function(){z&&"function"!==typeof z&&(t.close(z),A(z),z._popupWrapper&&(z.domNode&&z.domNode.parentNode===z._popupWrapper&&z._popupWrapper.removeChild(z.domNode),e.destroy(z._popupWrapper),delete z._popupWrapper),delete z.__openPopupWidgetFunc,delete z.__popupWidgetOpenFlag);F&&F.remove()}}}},setLocked:function(a,b){a.__lockPopupWidgetFlag=b},open:function(a){a&&!a.__lockPopupWidgetFlag&&!a.__popupWidgetOpenFlag&&a.__openPopupWidgetFunc&&
a.__openPopupWidgetFunc()},close:function(a){a&&!a.__lockPopupWidgetFlag&&d.close(a)},isOpen:function(a){return!(!a||!a.__popupWidgetOpenFlag)},toggle:function(a){t.isOpen(a)?t.close(a):t.open(a)},refresh:function(a){if(a){a=a.__popupInfo;var b=c.isBodyLtr();a&&h.around(a.wrapper,a.around,a.orient,b)}},getWrapper:function(a){return a&&a._popupWrapper}};return t})},"esri/dijit/geoenrichment/utils/onClickTouch":function(){define(["dojo/_base/lang","dojo/on","dojo/sniff"],function(k,g,f){var e=f("touch");
return k.mixin(function(c,b,a,d){if(e){switch(b){case "click":b="touchstart,click";break;case "mousedown":b="touchstart,mousedown";break;case "mouseup":b="touchend,mouseup";break;case "clickend":b="touchend,click";break;default:return g(c,b,a,d)}var h=!1;return g(c,b,function(b){"touchstart"===b.type||"touchend"===b.type?(a.call(this,b),h=!0,setTimeout(function(){h=!1},500)):h||a.call(this,b)},d)}"clickend"===b&&(b="click");return g(c,b,a,d)},g)})},"esri/dijit/geoenrichment/lists/_FlowListHoverSupport":function(){define(["dojo/_base/declare",
"dojo/on","../utils/MouseUtil"],function(k,g,f){var e=k(null,{_list:null,_checkIntervalH:null,constructor:function(c){this._list=c},setHoveredItem:function(c){clearInterval(this._checkIntervalH);this._emitHoverEvent(c);this._checkIntervalH=setInterval(function(){f.isMouseOver(c)||this.setHoveredItem(null)}.bind(this),100)},_emitHoverEvent:function(c){this._list.onItemHovered({type:"itemHover",index:c?c.index:-1,item:c?c.item:null,value:c?c.item[this._list.idProperty]:void 0})}});return k(null,{_mouseHelper:null,
postCreate:function(){this._mouseHelper=new e(this);this.inherited(arguments)},_addClickHandler:function(c){this.inherited(arguments);this._clickHandles.push(g(c,"mouseover",function(){this._mouseHelper.setHoveredItem(c)}.bind(this)))},onItemHovered:function(c){}})})},"esri/dijit/geoenrichment/ReportPlayer/toolbar/AreasSelect":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-construct esri/dijit/geoenrichment/TriStateItem esri/dijit/geoenrichment/ToggleButton esri/dijit/geoenrichment/lists/FlowListDefaultItemRenderer ../PlayerViewModes ./Select ./ComparisonSettings ../dataProvider/supportClasses/areas/AnalysisAreaUtil esri/dijit/geoenrichment/utils/DeviceUtil esri/dijit/geoenrichment/utils/PopupUtil esri/dijit/geoenrichment/utils/TooltipUtil dojo/i18n!esri/nls/jsapi".split(" "),
function(k,g,f,e,c,b,a,d,h,l,n,m,p,t,q){q=q.geoenrichment.dijit.ReportPlayer.PlayerToolbar;var r=k(a,{canRemoveAreas:!1,canMoveAreas:!1,wrapInCards:!1,nls:null,createPresentation:function(a,d,h,l){var m=this,n=this.inherited(arguments);if(a.isSeparator)return n;n.innerHTML="";if("all"===a.value){n.style.cursor="pointer";var g=e.create("div",{"class":"dijitInline esriGEReportPlayerToolbar_checkboxRoot"},n);(new b(g,{mode:"toggle"})).set("checked",this.isCompareAll());e.create("div",{"class":"dijitInline",
innerHTML:a.label},n);n.addEventListener("click",function(){if(m.isCompareAll())m.onStopComparison();else m.onCompareAreasSideBySide()});t.setTooltipToNode(n,this.isCompareAll()?this.nls.compareAreasSideBySideTooltipOff:this.nls.compareAreasSideBySideTooltipOn,{position:["before","after"]});return n}if("addAreas"===a.value)return n.style.cursor="pointer",e.create("div",{"class":"dijitInline esriGESpaceAfterBig esriGEReportPlayerToolbar_addMoreAreasIcon"},n),e.create("div",{"class":"dijitInline",innerHTML:a.label},
n),n.addEventListener("click",function(){m.onAddMoreAreas()}),n;if(a.isAdditional)return n.style.cursor="pointer",a.buttonInfo.imageClass&&e.create("div",{"class":"dijitInline esriGESpaceAfterBig "+a.buttonInfo.imageClass},n),e.create("div",{"class":"dijitInline",innerHTML:a.label},n),n.addEventListener("click",function(b){a.buttonInfo.callback(b);m.onClosePopup()}),a.buttonInfo.tooltip&&(g=e.create("div",{"class":"dijitInline esriGESpaceBeforeBig esriGEInfoIcon"},n),t.setTooltipToNode(g,a.buttonInfo.tooltip,
a.buttonInfo.tooltipParams)),a.buttonInfo.onCreated&&a.buttonInfo.onCreated(n),n;if(a.canSelect){var g=e.create("div",{"class":"dijitInline esriGEReportPlayerToolbar_checkboxRoot"},n),p=new c(g);p.autoToggle=!1;p.set("checked",a.selected);n.addEventListener("click",function(){a.selected=!a.selected;p.set("checked",a.selected);a.isGroup?a.children.forEach(function(b){b.selected=a.selected}):a.parent&&(a.parent.selected=a.parent.children.some(function(a){return a.selected}));m.onVisibilityChanged()})}this.canRemoveAreas&&
a.isHost&&(g=e.create("div",{"class":"esriGEFloatEnd esriGESpaceBeforeBig esriGEReportPlayerToolbar_removeAreaButton"},n),g.addEventListener("click",function(b){b.stopPropagation();m.onRemoveAreas(a.isArea?[a.analysisArea]:a.analysisAreas)}),t.setTooltipToNode(g,a.isGroup?this.nls.removeAreasFromInfographic:this.nls.removeAreaFromInfographic));this.canMoveAreas&&a.isHost&&this.isCompareAll()&&(g=e.create("div",{"class":"esriGEFloatEnd upDownArrowsBlock"},n),0<a.hostIndex&&e.create("div",{"class":"dijitInline upArrow"},
g).addEventListener("click",function(b){b.stopPropagation();m.onMoveUp(a)}),a.hostIndex<this.getNumHostItems()-1&&e.create("div",{"class":"dijitInline downArrow"},g).addEventListener("click",function(b){b.stopPropagation();m.onMoveDown(a)}));g=e.create("div",{"class":"dijitInline",innerHTML:a.label},n);a.parent&&(g.style.paddingLeft="20px");this.wrapInCards&&(a.isArea&&!a.parent?f.add(n,"areaCard_only"):a.isGroup?f.add(n,"areaCard_groupTop"):a.isArea&&f.add(n,a.parent.children.indexOf(a)===a.parent.children.length-
1?"areaCard_groupBottom":"areaCard_groupMiddle"));this.selectPresentation(n,d,a);return n},isCompareAll:function(){return!1},getNumHostItems:function(){return 0},onAddMoreAreas:function(){},onRemoveAreas:function(a){},onVisibilityChanged:function(){},onMoveUp:function(a){},onMoveDown:function(a){},onCompareAreasSideBySide:function(){},onStopComparison:function(){},onClosePopup:function(){}});return k(h,{"class":"dijitInline esriGEOnDemandSelectNoBackground",listClass:"esriGEOnDemandSelectVeryTallList800 esriGEOnDemandSelectSpacedOut esriGEReportPlayerToolbar_areasSelectList",
player:null,canAddMoreAreas:!1,areasSelectButtons:null,comparisonSettingsBlock:null,comparisonSettings:null,_nls:null,buildRendering:function(){var a=this;this.inherited(arguments);this._nls=g.mixin({},q,this.player.nlsMap);this.itemRenderer=new r({nls:this._nls,onAddMoreAreas:function(){a.onAddMoreAreas();a.closePopup()},onRemoveAreas:function(b){var d=2>=a._getNumHostItems();a.onRemoveAreas(b,d);d&&a.closePopup()},isCompareAll:function(){return a.player.viewMode===d.PANELS_IN_STACK_ALL},getNumHostItems:function(){return a._getNumHostItems()},
onVisibilityChanged:function(){var b={};a.get("options").forEach(function(a){a.isArea&&(b[a.analysisArea.index]=a.selected)});a.refresh();a.player.getCurrentReportContainer().setAreasVisibilityState(b,{append:!0})},onMoveUp:function(a){},onMoveDown:function(a){},onCompareAreasSideBySide:function(){a.onCompareAreasSideBySide();a.closePopup()},onStopComparison:function(){var b=-1;a.get("options").some(function(a){if(a.analysisArea&&!a.analysisArea.hidden)return b=a.analysisArea.index,!0});a.onStopComparison(b);
a.closePopup()},onClosePopup:function(){a.closePopup()}})},_buildAdditionalPopupListProperties:function(){var a=this;return{selectionValidator:function(b){return a.player.viewMode!==d.PANELS_IN_STACK_ALL&&!!b&&!b.isSeparator&&!1!==b.enabled}}},buildAreaOptions:function(a){var b=n.groupAreas(a),h=1<b.groupInfos.length&&!b.isOnlyAreasInOnlyGroup;this.itemRenderer.wrapInCards=h;this.itemRenderer.canRemoveAreas=h&&!m.isMobileDevice();this.itemRenderer.canMoveAreas=!1;var c=[],l=0;b.groupInfos.forEach(function(a,
b){var d;a.isRealGroup&&(d={isGroup:!0,isHost:!0,hostIndex:l++,label:a.label,value:"group_"+b,enabled:!1,analysisAreas:a.areas,children:[]},c.push(d));a.areas.forEach(function(a){a={isArea:!0,label:a.shortName||a.name||"",value:a.index,analysisArea:a,parent:d,isHost:!d};a.isHost&&(a.hostIndex=l++);c.push(a);d&&d.children.push(a)})});b={isSeparator:!0};c.push(b);this.player.viewMode!==d.PANELS_IN_SLIDES&&(!m.isMobileDevice()&&1<a.analysisAreas.filter(function(a){return!a.hidden}).length&&c.push({label:this._nls.compareAreasSideBySide,
value:"all"}),this.canAddMoreAreas&&c.push({label:this._nls.addMoreAreas,value:"addAreas"}));this.areasSelectButtons&&this.areasSelectButtons.forEach(function(a){a.isVisible&&!a.isVisible()||c.push({label:a.label,value:a.id,isAdditional:!0,buttonInfo:a})});c[c.length-1]===b&&c.pop();this._updateTreeSelection(c);this.set("options",c);this._updateComparisonSettings()},_getNumHostItems:function(){var a=0;this.get("options").some(function(b){b.isHost&&a++});return a},onPopupListPreBuild:function(){this._updateTreeSelection()},
_updateTreeSelection:function(a){if(this.player.viewMode===d.PANELS_IN_STACK_ALL){var b=this.player.getCurrentReportContainer().getAreasVisibilityState();a=a||this.get("options");a.forEach(function(a){if(a.isGroup||a.isArea)a.canSelect=!0,a.isGroup?(a.children.forEach(function(a){a.selected=b[a.analysisArea.index]}),a.selected=a.children.some(function(a){return a.selected})):a.selected=b[a.analysisArea.index]})}},_updateComparisonSettings:function(){var a=this;this.comparisonSettings&&this.comparisonSettings.destroy();
this.comparisonSettings=null;this.comparisonSettingsBlock&&e.destroy(this.comparisonSettingsBlock);this.comparisonSettingsBlock=null;this.player.viewMode===d.PANELS_IN_STACK_ALL&&(this.comparisonSettingsBlock=e.create("div",{"class":"dijitInline esriGEClickable"},this.domNode.parentNode),e.create("div",{"class":"dijitInline esriGESpaceBeforeBig esriGEIcon16 esriGEReportPlayerToolbar_comparisonSettingsIcon"},this.comparisonSettingsBlock),p.makePopup(function(){a.comparisonSettings||(a.comparisonSettings=
new l({player:a.player,onChange:function(){a.player.getCurrentReportContainer().setComparisonSettings(a.comparisonSettings.getSettings())}}));a.comparisonSettings.setSettings(a.player.getCurrentReportContainer().getComparisonSettings());return a.comparisonSettings},this,this.comparisonSettingsBlock))},onAddMoreAreas:function(){},onRemoveAreas:function(a,b){},onCompareAreasSideBySide:function(){},onStopComparison:function(a){},destroy:function(){this.comparisonSettings&&this.comparisonSettings.destroy();
this.inherited(arguments)}})})},"esri/dijit/geoenrichment/TriStateItem":function(){define("dojo/_base/declare dojo/_base/event dojo/_base/lang dojo/Stateful dojo/on dojo/dom-construct dojo/dom-class ./utils/DeviceUtil".split(" "),function(k,g,f,e,c,b,a,d){return k(e,{domNode:null,checkboxNode:null,checked:!1,disabled:!1,autoToggle:!0,_currentClass:null,_lastChecked:!1,constructor:function(h,l,e){var n=d.isMobileDevice()?"touchstart":"click";l=l||{};var g=l["class"];l["class"]=(g?g+" ":"")+"esriTriStateCheckBoxIcon";
if(g=l.label){if(h instanceof HTMLLabelElement)h.innerHTML="\x26nbsp;"+g;else{var t=l.labelAttrs||{};t.innerHTML="\x26nbsp;"+g;t=b.create("label",t);h&&b.place(t,h);h=t}l=f.mixin({},l);delete l.label;delete l.labelAttrs}this.checkboxNode=b.create("div",l,h,h instanceof HTMLLabelElement?"first":e);this._currentClass=this._composeClass();a.add(this.checkboxNode,this._currentClass);h instanceof HTMLLabelElement?(c(h,n,f.hitch(this,this._onClick)),a.add(h,"esriTriStateCheckBoxLabel")):c(this.checkboxNode,
n,f.hitch(this,this._onClick));this.domNode=g?h:this.checkboxNode},postscript:function(){},_onClick:function(a){this.disabled||(this.autoToggle&&this.toggle(),a.checked=this.checked,this.onClick(g.fix(a)))},onClick:function(a){},toggle:function(){this.set("checked",!this._lastChecked);return this.checked},_checkedSetter:function(a){a!==this.checked&&(this.checked="mixed"===a?a:this._lastChecked=!!a,this._updateClass())},_disabledSetter:function(a){this.disabled=!!a;this._updateClass()},_updateClass:function(){var b=
this._composeClass();b!==this._currentClass&&(a.replace(this.checkboxNode,b,this._currentClass),this._currentClass=b)},_composeClass:function(){var a="esriTriStateCheckBox"+("mixed"==this.checked?"Mixed":this.checked?"Checked":"");return this.disabled?a+"Disabled":a}})})},"esri/dijit/geoenrichment/ToggleButton":function(){define(["dojo/_base/declare","dojo/Stateful","dojo/on","dojo/dom-construct","dojo/dom-class"],function(k,g,f,e,c){return k(g,{domNode:null,checked:!1,disabled:!1,mode:"toggle",constructor:function(b,
a,d){a=a||{};var h=a["class"];this.checked=!!a.checked;this.mode=a.mode||"toggle";this.domNode=e.create("div",{"class":(h?h+" ":"")+"esriGEToggleButton"},b,d);this._updateClass();f(this.domNode,"click",function(a){this.disabled||(a.checked=this.toggle(),this.onClick(a))}.bind(this))},postscript:function(){},_checkedSetter:function(b){this.checked=!!b;this._updateClass()},_modeSetter:function(b){this.mode=b;this._updateClass()},_disabledSetter:function(b){this.disabled=b;this._updateClass()},_updateClass:function(){c[this.checked?
"add":"remove"](this.domNode,"checked");c["toggle"===this.mode?"remove":"add"](this.domNode,"switch");c[this.disabled?"add":"remove"](this.domNode,"disabled")},onClick:function(b){},toggle:function(){this.set("checked",!this.checked);return this.checked}})})},"esri/dijit/geoenrichment/ReportPlayer/toolbar/ComparisonSettings":function(){define("dojo/_base/declare esri/dijit/geoenrichment/TriStateItem dijit/_WidgetBase dijit/_TemplatedMixin esri/dijit/geoenrichment/utils/DomUtil esri/dijit/geoenrichment/utils/NodeLabelEditor esri/dijit/geoenrichment/utils/TooltipUtil dojo/text!../templates/ComparisonSettings.html dojo/i18n!esri/nls/jsapi".split(" "),
function(k,g,f,e,c,b,a,d,h){h=h.geoenrichment.dijit.ReportPlayer.PlayerToolbar;return k([f,e],{templateString:d,nls:h,player:null,showBackgroundImageCheckbox:null,splitPanelsCheckbox:null,postCreate:function(){var b=this;this.inherited(arguments);this.showBackgroundImageCheckbox=new g(this.showBackgroundImageLabel);this.showBackgroundImageCheckbox.onClick=function(){b._onChange()};this.splitPanelsCheckbox=new g(this.splitPanelsLabel);this.splitPanelsCheckbox.onClick=function(){b._update();b._onChange()};
a.setTooltipToNode(this.splitPanelsInfoIcon,h.splitPanelsTooltip);var d=this.player.nlsMap&&this.player.nlsMap.zoomPanelsTooltip||h.zoomPanelsTooltip;c[d?"show":"hide"](this.zoomPanelsInfoIcon);a.setTooltipToNode(this.zoomPanelsInfoIcon,d);this._initZoomControls();this._initZoomSplitControls()},_zoomEditor:null,_zoom:0,_initZoomControls:function(){var a=this;this._zoomEditor=new b({numericOnly:!0,onApply:function(b){a._setZoom(b)},onCancel:function(){a._updateZoomLabel()}});this.zoomLabel.addEventListener("click",
function(){a._zoomEditor.range={min:10,max:500};a._zoomEditor.editNodeLabel(a.zoomLabel,a._zoom)});this.zoomOutButton.addEventListener("click",function(){a._setZoom(Math.max(10,a._zoom-10))});this.zoomInButton.addEventListener("click",function(){a._setZoom(Math.min(500,a._zoom+10))});this.resetButton.addEventListener("click",function(){a._setZoom(100)})},_setZoom:function(a,b){a=Math.round(a);this._zoom!==a&&(this._zoom=a,this._updateZoomLabel(),this._update(),!b&&this._onChange())},_updateZoomLabel:function(){this.zoomLabel.innerHTML=
this._zoom+"%"},_zoomSplitEditor:null,_zoomSplit:0,_initZoomSplitControls:function(){var a=this;this._zoomSplitEditor=new b({numericOnly:!0,onApply:function(b){a._setZoomSplit(b)},onCancel:function(){a._updateZoomSplitLabel()}});this.zoomSplitLabel.addEventListener("click",function(){a._zoomSplitEditor.range={min:10,max:500};a._zoomSplitEditor.editNodeLabel(a.zoomSplitLabel,a._zoomSplit)});this.zoomOutSplitButton.addEventListener("click",function(){a._setZoomSplit(Math.max(10,a._zoomSplit-10))});
this.zoomInSplitButton.addEventListener("click",function(){a._setZoomSplit(Math.min(500,a._zoomSplit+10))});this.resetSplitButton.addEventListener("click",function(){a._setZoomSplit(100)})},_setZoomSplit:function(a,b){a=Math.round(a);this._zoomSplit!==a&&(this._zoomSplit=a,this._updateZoomSplitLabel(),this._update(),!b&&this._onChange())},_updateZoomSplitLabel:function(){this.zoomSplitLabel.innerHTML=this._zoomSplit+"%"},_update:function(){this.resetButton.style.visibility=100===this._zoom?"hidden":
"visible";this.resetSplitButton.style.visibility=100===this._zoomSplit?"hidden":"visible";c.hide([this.zoomBlock,this.zoomSplitBlock]);c.show(this.splitPanelsCheckbox.get("checked")?this.zoomSplitBlock:this.zoomBlock)},setSettings:function(a){this.showBackgroundImageCheckbox.set("checked",!a.hideBackgroundImage);this.splitPanelsCheckbox.set("checked",a.splitPanels);this._setZoom(100*(a.scale||1),!0);this._setZoomSplit(100*(a.scaleSplit||1),!0);this._update()},getSettings:function(){return{hideBackgroundImage:!this.showBackgroundImageCheckbox.get("checked"),
splitPanels:this.splitPanelsCheckbox.get("checked"),scale:this._zoom/100,scaleSplit:this._zoomSplit/100}},_onChange:function(){this._update();this.onChange()},onChange:function(){}})})},"esri/dijit/geoenrichment/utils/NodeLabelEditor":function(){define("dojo/_base/declare dojo/_base/lang dojo/on dojo/keys dojo/dom-construct dojo/dom-geometry dojo/dom-style esri/dijit/geoenrichment/utils/MouseUtil esri/dijit/geoenrichment/utils/ObjectUtil".split(" "),function(k,g,f,e,c,b,a,d,h){return k(null,{_textMemo:null,
_handlers:null,_textBox:null,_node:null,numericOnly:!1,range:null,keepLabelDimensions:!0,constructor:function(a){g.mixin(this,a)},editNodeLabel:function(h,n){var l=this;this._stopEdit();this._node=h;this._textMemo="string"===typeof n||"number"===typeof n?n:h.innerHTML;n=b.position(h).w;h.innerHTML="";this._textBox=c.create("input",{type:"text"},h);this._textBox.name="node-label";this._textBox.value=this._textMemo;this._textBox.focus();this._textBox.select();this.keepLabelDimensions&&a.set(this._textBox,
"width",n+"px");this._handlers=[f(document.body,"keyup",function(a){a.keyCode===e.ESCAPE?l._cancelEdit():a.keyCode===e.ENTER&&l._applyEdit()}),f(document.body,"click",function(){d.isMouseOver(h)||l._cancelEdit()})]},_checkCanApply:function(a){if(!this.numericOnly)return!0;a=h.parseNumber(a);return isNaN(a)||this.range&&void 0!==this.range.min&&this.range.min>a||this.range&&void 0!==this.range.max&&this.range.max<a?!1:!0},_applyEdit:function(){var a=this._textBox.value;this._checkCanApply(a)?(this._node.innerHTML=
a,this._stopEdit(),this.onApply(a)):this._cancelEdit()},_cancelEdit:function(){this._node.innerHTML=this._textMemo;this._stopEdit();this.onCancel()},_stopEdit:function(){this._handlers&&this._handlers.forEach(function(a){a.remove()});this._textMemo=this._handlers=null;c.destroy(this._textBox);this._node=this._textBox=null},onApply:function(a){},onCancel:function(){}})})},"esri/dijit/geoenrichment/utils/ObjectUtil":function(){define(["dojo/number"],function(k){var g={};Math.log10=Math.log10||function(e){return Math.log(e)*
Math.LOG10E};g.populateObject=function(e,c,b){function a(d,h){function c(c){var l=d[c],e=h[c],n=l&&"object"===typeof l;void 0!==l&&(void 0===e?h[c]=l:e&&"object"===typeof e&&n?a(l,e):b&&(n?(e=h[c]={},a(l,e)):h[c]=d[c]))}if(d&&h&&!(Array.isArray(d)&&!Array.isArray(h)||Array.isArray(h)&&!Array.isArray(d)))if(Array.isArray(d))d.forEach(function(a,b){c(b)});else for(var e in d)c(e)}a(c,e);return e};g.filterByPattern=function(e,c){function b(a,h,c){for(var d in a){var l=a[d],e=h[d];if(Array.isArray(l)){var f=
l[0];if(e&&Array.isArray(e)){var g=c[d]=[];e.forEach(function(a){if(a&&"object"===typeof a){var d=Array.isArray(a)?[]:{};b(f,a,d);g.push(d)}})}}else if("object"===typeof l){if(e&&"object"===typeof e){var k=c[d]={};b(l,e,k)}}else void 0!==e&&(c[d]=e)}}var a={};b(c,e,a);return a};g.traverseObject=function(e,c){for(var b in e){var a=e[b];c(a,b,e);a&&"object"===typeof a&&g.traverseObject(a,c)}};g.copyOwnJsonProperties=function(e,c,b){c=c||{};for(var a in e){var d=e[a];e.hasOwnProperty(a)&&"function"!=
typeof d&&(d&&"object"==typeof d&&b&&(d=b(a,d)),void 0!==d&&(c[a]=d))}return c};g.removeUndefinedProperties=function(e){e&&Object.keys(e).forEach(function(c){void 0===e[c]&&delete e[c]});return e};g.getValue=function(e,c){if("string"!==typeof c)return e;c=c.split(".");for(var b=0;b<c.length;b++)e=e&&e[c[b]];return e};g.setValue=function(e,c,b){if("string"===typeof c&&(c=c.split("."),c.length)){for(var a=0;a<c.length-1;a++)e=e&&e[c[a]];e&&(e[c[c.length-1]]=b)}};g.isNumber=function(e){return!isNaN(parseFloat(e))&&
isFinite(e)};g.roundNumber=function(e,c){return"number"!==typeof e?e:parseFloat(e.toFixed(void 0!==c?c:0))};g.getBestPrecision=function(e){return 0===e?0:Math.max(0,Math.round(Math.log10(3E3/Math.abs(e))))};g.getPlaces=function(e,c){function b(b,h){var c=e.indexOf(b,a);if(0>c)return d;b=e.charAt(c+b.length);return!b||0>h.indexOf(b)?d:c-a}e=+e;if(isNaN(e))return-1;e+="";var a=e.indexOf(".")+1,d=a?e.length-a:0;if(2>=d||!c)return d;c=0;if(!+e.substr(0,a-1))for(;"0"===e.charAt(a);)a++,c++,d--;for(var h=
d-1;2<=h;h--){var l=Math.min(b("000000000000000".substr(0,h),"01234"),b("999999999999999".substr(0,h),"56789"));if(l!==d){d=l;break}}return d+c};g.formatNumber=function(e,c){c="number"===typeof c?{places:c}:c||{};var b=c.places,a={};0<=b?a.places=b:b=-1;e=k.format(e,a);if(c.noSeparator){void 0===f&&(f=k.format(9999,{places:0}).replace(/9/g,""));var a=f,d;if(a)for(;0<=(d=e.indexOf(a));)e=e.substr(0,d)+e.substr(d+1)}if(c.preserveTrailingZeroes||0>=b||!e)return e;for(c=e.length;0<b&&"0"==e.charAt(c-
1);)c--,--b||c--;return e.substr(0,c)};g.formatNumberAsCurrency=function(e,c,b){return c?c.split(";")[0>e?1:0].replace("0",g.formatNumber(Math.abs(e),b)):g.formatNumber(e,b)};var f;g.parseNumber=function(e,c,b,a){if(""===e)return"undefined"!==typeof b?b:NaN;if(null==e||"string"!==typeof e&&isNaN(e))return NaN;e=String(e);if(!e.trim())return void 0!==b?b:NaN;b=k.parse(e,{strict:a});isNaN(b)&&e.trim().length&&(b=a?k.parse(e,{strict:a,locale:"en-US"}):Number(e));return isNaN(b)||void 0===c||0>c?b:k.round(b,
c)};g.parsePercentOrCurrency=function(e,c,b,a,d){"string"===typeof e&&(e=e.replace("%",""),c&&(c=c.split(";")[0].replace("0",""),e=e.replace(c,"")));return g.parseNumber(e,b,a,d)};g.compareEqual=function(e,c,b){return void 0===b?e===c:Number(Number(e).toFixed(b))===Number(Number(c).toFixed(b))};return g})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/areas/AnalysisAreaUtil":function(){define(["dojo/_base/lang","esri/geometry/webMercatorUtils","esri/dijit/geoenrichment/utils/CoordinateUtil"],
function(k,g,f){var e={geometryToLatLong:function(c){var b=c.spatialReference.wkid;return b===f.WGS_84_WKID?{STORE_LONG:c.x,STORE_LAT:c.y}:f.isWebMercator(b)?(c=g.xyToLngLat(c.x,c.y),{STORE_LONG:c[0],STORE_LAT:c[1]}):null},populateCombinedAreasInfo:function(c,b){var a={},d={};b.forEach(function(b){b.latitude&&(a[b.latitude]=1);b.longitude&&(d[b.longitude]=1)});c.name=c.name||b.map(function(a){return a.name}).join(", ");c.shortName=c.shortName||b.map(function(a){return a.shortName||a.name}).join(", ");
c.description=c.description||b.map(function(a){return a.description||a.name}).join(", ");c.address=c.address||b.map(function(a){return a.address||a.name}).join(", ");c.latitude=c.latitude||Object.keys(a).join(", ");c.longitude=c.longitude||Object.keys(d).join(", ");return c},groupAreas:function(c){function b(a){var b=a.locationName||a.name;return{isSingleAreaGroup:!0,label:b,hideGroupLabel:b===(a.shortName||a.name),areas:[a]}}var a=c.combinedAreasInfo&&c.combinedAreasInfo.groups||[],d=[],h=[],l={};
c.analysisAreas.forEach(function(e){if(!(c.filter&&!c.filter(e)||e.hidden))if(e.isGrouped){if(!l[e.groupIndex]){var f=a[e.groupIndex],f=l[e.groupIndex]={isRealGroup:!0,label:f.locationName||f.name,areas:[]};h.push(f);d.push(f)}l[e.groupIndex].areas.push(e)}else d.push(b(e))});var e;1===d.length&&d[0].isRealGroup&&(d=d[0].areas.map(b),h.length=0,e=!0);return{groupInfos:d,isOnlyAreasInOnlyGroup:e}},parseSites:function(c){if(c.sites){c.analysisAreas=[];c.sites.forEach(function(a){a.areas.forEach(function(a){c.analysisAreas.push(a)})});
c.combinedAreasInfo={groups:c.sites.map(function(a){var b=k.mixin({},a);delete b.areas;delete b.attributes;delete b.notes;delete b.images;b.indexes=a.areas.map(function(a){return c.analysisAreas.indexOf(a)});return b})};e.populateCombinedAreasInfo(c.combinedAreasInfo,c.sites);if(!c.attachmentsProvider||!c.attachmentsProvider.getAttributesForAreaAt){c.attachmentsProvider={};c.attachmentsProvider.supportsMultipleAreas=1<c.sites.length;var b=c.attachmentsProvider.areaAttachments=[];c.sites.forEach(function(a){a.areas.forEach(function(d){b.push({attributes:a.attributes,
notes:a.notes,images:a.images})})})}delete c.sites}}};return e})},"esri/dijit/geoenrichment/ReportPlayer/toolbar/ZoomSelect":function(){define("dojo/_base/declare dojo/dom-construct esri/dijit/geoenrichment/lists/FlowListDefaultItemRenderer ./Select ./ZoomUtil esri/dijit/geoenrichment/utils/NodeLabelEditor dojo/i18n!esri/nls/jsapi".split(" "),function(k,g,f,e,c,b,a){a=a.geoenrichment.dijit.ReportPlayer.PlayerToolbar;var d=k(f,{createPresentation:function(d,c,e,f){var h=this,l=this.inherited(arguments);
if(d.isCustomZoom){l.innerHTML="";var n=g.create("div",{"class":"esriGELink",innerHTML:a.customZoom},l),m=new b({numericOnly:!0,onApply:function(b){h.onCustomZoomApplied(b);n.innerHTML=a.customZoom},onCancel:function(){n.innerHTML=a.customZoom}});n.addEventListener("click",function(){m.range={min:10,max:1E3};m.editNodeLabel(n,"")})}else this.selectPresentation(l,c);return l},onCustomZoomApplied:function(a){}});return k(e,{listClass:"esriGEOnDemandSelectUnlimitedTallList esriGEOnDemandSelectSpacedOut",
buildRendering:function(){var a=this;this.inherited(arguments);this.itemRenderer=new d({onCustomZoomApplied:function(b){a.set("value",b);a.onChange({value:b});a.closePopup()}})},postCreate:function(){this.inherited(arguments);var a=c.getOptions().slice();a.push({isCustomZoom:!0,enabled:!1});this.set("options",a);this.set("value",100)}})})},"esri/dijit/geoenrichment/ReportPlayer/toolbar/ZoomUtil":function(){define(["dojo/i18n!esri/nls/jsapi"],function(k){var g={};k=k.geoenrichment.dijit.ReportPlayer.PlayerToolbar;
g.FIT_PAGE="fitPage";g.FIT_PAGE_WIDTH="fitPageWidth";g.FIT_PAGE_HEIGHT="fitPageHeight";g.getOptions=function(){var f=[{value:g.FIT_PAGE,label:k.fitPage},{value:g.FIT_PAGE_WIDTH,label:k.fitPageWidth},{value:g.FIT_PAGE_HEIGHT,label:k.fitPageHeight}];[{value:400,label:"400%"},{value:200,label:"200%"},{value:150,label:"150%"},{value:125,label:"125%"},{value:100,label:"100%"},{value:90,label:"90%"},{value:80,label:"80%"},{value:70,label:"70%"},{value:60,label:"60%"},{value:50,label:"50%"}].forEach(function(e){f.push({isCustom:!0,
value:-1,label:""});f.push(e)});f.push({isCustom:!0,value:-1,label:""});return f};g.getClosestZoomAndUpdateOptions=function(f,e){e.forEach(function(a){a.isCustom&&(a.value=-1,a.hidden=!0)});var c=[];e.forEach(function(a){a.isCustom||"number"!==typeof a.value||c.push({option:a,value:a.value,score:f<a.value?f/a.value:a.value/f})});c.sort(function(a,b){return b.score-a.score});var b=c[0];if(1===b.score)return b.value;var a=e.indexOf(b.option);e=e[a+(f>b.value?-1:1)];e.value=f;e.label=Math.round(f)+"%";
e.hidden=!1;return e.value};return g})},"esri/dijit/geoenrichment/ReportPlayer/toolbar/ToolbarArranger":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/dom-style","esri/dijit/geoenrichment/utils/DomUtil"],function(k,g,f,e){return k(null,{showAreaTitle:!1,stretchToolbarNode:null,domNode:null,infographicsSelectDiv:null,areaTitleDiv:null,areaTitleInnerDiv:null,rightSideControlsBlock:null,areasSelectDiv:null,zoomSelectDiv:null,pageSelectDiv:null,commandButtonsContainer:null,constructor:function(c){g.mixin(this,
c)},arrangeControls:function(){e[0<this.infographicsSelectDiv.children.length?"show":"hide"](this.infographicsSelectDiv);e[this.showAreaTitle?"show":"hide"](this.areaTitleDiv);this.domNode.style.width="";this.areaTitleDiv.style.marginLeft="";this.areaTitleInnerDiv.style.maxWidth="";this.rightSideControlsBlock.style.position=this.stretchToolbarNode?"absolute":"static";this.stretchToolbarNode&&(this.domNode.style.width=this.stretchToolbarNode.clientWidth+"px",this._processStretchSpecialCases(this.stretchToolbarNode));
this.syncRightSideVisibility()},_processStretchSpecialCases:function(c){function b(b){return e.isHidden(b)?0:b.clientWidth+a(b)}function a(a){return e.isHidden(a)?0:f.get(a,"marginLeft")+f.get(a,"marginRight")}this.showAreaTitle&&(c=c.clientWidth,c-=b(this.infographicsSelectDiv),c-=b(this.rightSideControlsBlock),c-=b(this.areasSelectDiv),c-=a(this.areaTitleDiv),this.areaTitleInnerDiv.style.maxWidth=c+"px",e.isHidden(this.infographicsSelectDiv)||e.isHidden(this.infographicsSelectDiv)||(this.areaTitleDiv.style.marginLeft=
Math.min(c-this.areaTitleDiv.clientWidth,(this.domNode.clientWidth-this.areaTitleDiv.clientWidth)/2-b(this.infographicsSelectDiv))+"px"))},hasVisibleControls:function(){return[this.infographicsSelectDiv,this.areaTitleDiv,this.areasSelectDiv,this.pageSelectDiv,this.zoomSelectDiv,this.commandButtonsContainer].some(e.isNodeInLayout)},syncRightSideVisibility:function(){e.show(this.rightSideControlsBlock);var c=[this.pageSelectDiv,this.zoomSelectDiv,this.commandButtonsContainer].some(e.isNodeInLayout);
e[c?"show":"hide"](this.rightSideControlsBlock)}})})},"esri/dijit/geoenrichment/utils/InvokeUtil":function(){define(["esri/dijit/geoenrichment/Deferred","esri/dijit/geoenrichment/when"],function(k,g){return{invoke:function(f,e,c,b,a){f.__invokeTimeoutIDs||(f.__invokeTimeoutIDs={});var d=f.__invokeTimeoutIDs[e];if(d){if(null==c||!1===b)return d.dfd.promise;clearTimeout(d.handle)}d||(d=f.__invokeTimeoutIDs[e]={dfd:new k});d.handle=setTimeout(function(){delete f.__invokeTimeoutIDs[e];g(a?f[e].apply(f,
a):f[e](),function(a){d.dfd.resolve(a)},function(a){d.dfd.reject(a)})},c||0);return d.dfd.promise},hasPendingInvoke:function(f,e){return!(!f.__invokeTimeoutIDs||!f.__invokeTimeoutIDs[e])},cancelInvoke:function(f,e){f.__invokeTimeoutIDs&&f.__invokeTimeoutIDs[e]&&(clearTimeout(f.__invokeTimeoutIDs[e].handle),delete f.__invokeTimeoutIDs[e])}}})},"esri/dijit/geoenrichment/ReportPlayer/ReportPlayerViewModel":function(){define("dojo/_base/declare dojo/aspect esri/dijit/geoenrichment/promise/all ./core/layout/LayoutBuilder ./core/themes/ThemeLibrary ./core/themes/ReportThemes ./core/supportClasses/map/layers/locator/LocatorPointsController ./core/supportClasses/map/layers/std/StdPolygonsController ./core/supportClasses/map/layers/thisAreas/ThisAreasHighlightController ./core/supportClasses/EditorUnits ../utils/ColorUtil".split(" "),
function(k,g,f,e,c,b,a,d,h,l,n){return k(null,{isReportPlayerViewModel:!0,isGraphicStyle:!1,layoutBuilder:null,dynamicReportInfo:null,enableDataDrilling:!1,preInitialize:function(){this.layoutBuilder=this.layoutBuilder||new e;return this.layoutBuilder.initCoreComponents()},initialize:function(a,b){this.preInitialize();return this.layoutBuilder[a?"initClassicComponents":"initGraphicComponents"](b)},_animationAllowed:!1,_animationSuspended:!1,isAnimationAllowed:function(){return this._animationAllowed&&
!this._animationSuspended},setAnimationAllowed:function(a){this._animationAllowed=a},setAnimationSuspended:function(a){this._animationSuspended=a},_theme:null,getCurrentTheme:function(a){return a||this._theme},setTheme:function(a){this._theme=a||c.getReportThemeById(b.GRAPHIC)},getTableDefaultStyles:function(a,b){a=this.getCurrentTheme(a).table.overrideStyles;return b?a[b]:a},getChartDefaultStyles:function(a){return this.getCurrentTheme(a).chart},getDocumentDefaultStyles:function(a){return this.getCurrentTheme(a).document},
getInfographicDefaultStyles:function(a){return this.getCurrentTheme(a).infographic},getStaticInfographicDefaultStyles:function(a){return(a=this.getInfographicDefaultStyles(a))&&a.staticInfographic},isLightDocumentTheme:function(a){return n.isLightColor(this.getCurrentTheme(a).document.backgroundColor)},setDynamicReportInfo:function(a){this.dynamicReportInfo=a;this.isGraphicStyle=a.reportObject.isGraphicReport},getDynamicImageFunc:function(a,b,d){},_locatorPointsControllers:null,getLocatorPointsController:function(b,
d){var h=b.calculatorName+"_"+d;this._locatorPointsControllers=this._locatorPointsControllers||{};var c=this._locatorPointsControllers[h];c||(c=this._locatorPointsControllers[h]=new a(b,this.dynamicReportInfo.fieldData,this.dynamicReportInfo.isMultiFeature,d),g.after(c,"destroy",function(){delete this._locatorPointsControllers[h]}.bind(this)));return c},_stdPolygonsControllers:null,getStdPolygonsController:function(a,b){this._stdPolygonsControllers=this._stdPolygonsControllers||{};var h=a+"_"+(b||
0),c=this._stdPolygonsControllers[h];c||(c=this._stdPolygonsControllers[h]=new d(a,this.dynamicReportInfo.fieldData,this.dynamicReportInfo.isMultiFeature,b),g.after(c,"destroy",function(){delete this._stdPolygonsControllers[h]}.bind(this)));return c},loadAllStdFeatures:function(){var a=[],b;for(b in this._stdPolygonsControllers)a.push(this._stdPolygonsControllers[b].loadAllFeatures());return f(a)},_thisAreasHighlightController:null,getThisAreasHighlightController:function(){this._thisAreasHighlightController||
(this._thisAreasHighlightController=new h,g.after(this._thisAreasHighlightController,"destroy",function(){this._thisAreasHighlightController=null}.bind(this)));return this._thisAreasHighlightController},_legendControllers:null,registerLegendController:function(a,b,d){this._legendControllers=this._legendControllers||{};var h=this._legendControllers[b]=this._legendControllers[b]||{};h[d]=a;var c=a.addCallback(function(b,d){if(d)for(var c in h)d=h[c],d!==a&&d.setLegendVisible(b)},"viewModel");return{remove:function(){delete h[d];
c.remove()}}},_benchmarkController:null,_benchmarkDisabled:!1,getBenchmarkController:function(){return!this._benchmarkDisabled&&this._benchmarkController},registerBenchmarkController:function(a){this._benchmarkController&&this._benchmarkController.destroy();this._benchmarkController=a;g.after(this._benchmarkController,"destroy",function(){this._benchmarkController=null}.bind(this))},isBenchmarkedArea:function(a){return this._benchmarkDisabled?!1:"number"===typeof a&&this._benchmarkController&&0<=
this._benchmarkController.getAreaIndex()&&this._benchmarkController.getAreaIndex()!==a},setBenchmarkDisabled:function(a){this._benchmarkDisabled=a},reset:function(){[this._locatorPointsControllers,this._stdPolygonsControllers].forEach(function(a){a&&Object.keys(a).forEach(function(b){(b=a[b])&&b.destroy()})});this._stdPolygonsControllers=this._locatorPointsControllers=null;this._thisAreasHighlightController&&this._thisAreasHighlightController.destroy();this._thisAreasHighlightController=null},canExportToExcel:function(){return!1},
exportToExcel:function(a){},pepareExportToExcelParameters:function(a){},getUnits:function(){return"px"},provideUnits:function(a){return l.provideUnits(a,this.getUnits())},roundForUnits:function(a){return l.round(a,this.getUnits())}})})},"esri/dijit/geoenrichment/ReportPlayer/core/layout/LayoutBuilder":function(){define(["dojo/_base/declare","dojo/_base/lang","esri/dijit/geoenrichment/Deferred","dojo/dom-construct"],function(k,g,f,e){return k(null,{_moduleMap:null,_getModulePaths:function(){return{core:{section:"esri/dijit/geoenrichment/ReportPlayer/core/sections/SectionRenderer",
grid:"esri/dijit/geoenrichment/ReportPlayer/core/grid/AdjustableGrid",image:"esri/dijit/geoenrichment/ReportPlayer/core/annotations/image/ImageRenderer",chart:"esri/dijit/geoenrichment/ReportPlayer/core/charts/ChartRenderer",map:"esri/dijit/geoenrichment/ReportPlayer/core/map/MapRenderer"},classic:{reportContainer:"esri/dijit/geoenrichment/ReportPlayer/core/reportContainer/ReportContainer"},graphicCore:{shape:"esri/dijit/geoenrichment/ReportPlayer/core/annotations/shape/ShapeRenderer",infographic:"esri/dijit/geoenrichment/ReportPlayer/core/infographics/InfographicRenderer"},
graphic_fullPages:{reportContainerGrid:"esri/dijit/geoenrichment/ReportPlayer/core/reportContainerGrid/ReportContainerGrid"},graphic_panelsInSlides:{reportContainerPagination:"esri/dijit/geoenrichment/ReportPlayer/core/reportContainerPagination/ReportContainerPagination",infographicPage:"esri/dijit/geoenrichment/ReportPlayer/core/infographics/InfographicsPage"},graphic_panelsInStack:{reportContainerStack:"esri/dijit/geoenrichment/ReportPlayer/core/reportContainerStack/ReportContainerStack",infographicPageStack:"esri/dijit/geoenrichment/ReportPlayer/core/infographics/InfographicsPageStack"},
graphic_panelsInStackAll:{reportContainerStack:"esri/dijit/geoenrichment/ReportPlayer/core/reportContainerStack/ReportContainerStack",reportContainerStackAll:"esri/dijit/geoenrichment/ReportPlayer/core/reportContainerStack/ReportContainerStackAll",infographicPageStack:"esri/dijit/geoenrichment/ReportPlayer/core/infographics/InfographicsPageStack"},graphic_panelsInRow:{reportContainerStack:"esri/dijit/geoenrichment/ReportPlayer/core/reportContainerStack/ReportContainerStack",infographicPageStack:"esri/dijit/geoenrichment/ReportPlayer/core/infographics/InfographicsPageStack"}}},
initCoreComponents:function(){var c=this._getModulePaths();return this._initPaths(g.mixin({},c.core,c.graphicCore))},initClassicComponents:function(){var c=this._getModulePaths();return this._initPaths(g.mixin({},c.core,c.classic))},initGraphicComponents:function(c){var b=this._getModulePaths();return this._initPaths(g.mixin({},b.core,b.graphicCore,b["graphic_"+c]||b.graphic_fullPages))},_initPaths:function(c){var b=this;this._moduleMap=this._moduleMap||{};var a=[],d;for(d in c)a.push({id:d,path:c[d]});
var h=new f;require(a.map(function(a){return a.path}),function(){for(var d=0;d<arguments.length;d++)b._moduleMap[a[d].id]=arguments[d];h.resolve()});return h.promise},createElement:function(c,b,a,d){switch(c){case "grid":case "reportContainer":case "reportContainerGrid":case "reportContainerPagination":case "reportContainerStack":case "reportContainerStackAll":case "infographicPage":case "infographicPageStack":return new this._moduleMap[c](b,a?e.create("div",null,a,d):void 0);case "section":return this._moduleMap.section.createSection(b,
a,d);case "emptySection":return this._moduleMap.section.createEmptySection(b,a,d);case "image":return this._moduleMap.image.createImageContainer(b);case "shape":return this._moduleMap.shape.createShapeContainer(b);case "chart":return this._moduleMap.chart.createChartPage(b);case "infographic":return this._moduleMap.infographic.createInfographicPage(b);case "map":return this._moduleMap.map.createMapContainer(b)}return!1},getClass:function(c){return this._moduleMap[c]}})})},"esri/dijit/geoenrichment/ReportPlayer/core/themes/ThemeLibrary":function(){define("dojo/_base/lang ./PageBorderStyles ../charts/utils/ChartLineStyles ./ReportThemes ./ThemeUtil esri/dijit/geoenrichment/utils/ObjectUtil dojo/i18n!esri/nls/jsapi".split(" "),
function(k,g,f,e,c,b,a){function d(a){a=a||{};a=a.defaultFontFamilty||"Avenir Next";return{backgroundColor:"#FFFFFF",padding:5,icon:{backgroundColor:"#56a5d8"},highlightedIcon:{backgroundColor:"#D6851A"},iconBarBackground:{backgroundColor:"#AAAAAA",borderColor:"#AAAAAA"},titleLine:{color:"#A8A7A8"},titleStyle:{fontFamily:a,color:"#828282",fontSize:16,backgroundColor:"transparent"},variableLabelStyle:{fontFamily:a,color:"#56a5d8",fontSize:24,backgroundColor:"transparent"},variableLabelStyleHighlighted:{fontFamily:a,
fontSize:24},variableLabelStyleContrast:{fontFamily:a,fontSize:24},variableDescriptionStyle:{fontFamily:a,color:"#828282",fontSize:13,backgroundColor:"transparent"}}}function h(){return{style:g.ALL,lineStyle:"dashed",thickness:1,color:"#b2b2b2"}}function l(a){a=a||{};var b=a.defaultFontFamilty||"Avenir Next",c=a.defaultFontSize||13;return{document:{fontSize:c,fontFamily:b,backgroundImage:{data:null,position:"center",repeat:!1,scale:!0,opacity:1,size:null},border:h()},icon:{backgroundColor:"#56a5d8"},
highlightedIcon:{backgroundColor:"#D6851A"},table:{dataTablePadding:5,tooltip:{color:"#4c4c4c",backgroundColor:"#FFFFFF"},tooltipLink:{color:"#4c4c4c"}},chart:{renderSingleDataSeriesWithSameColor:!0,outlineStyle:f.SOLID,titleStyle:{fontFamily:b,fontSize:16},xAxis:{gridLinesStyle:f.SOLID,axisStyle:{fontFamily:b,fontSize:9},titleStyle:{fontFamily:b,fontSize:c}},yAxis:{gridLinesStyle:f.SOLID,baseLineStyle:f.SOLID,axisStyle:{fontFamily:b,fontSize:9},titleStyle:{fontFamily:b,fontSize:c}},dataLabelsStyle:{fontFamily:b,
fontSize:10},legendStyle:{fontFamily:b,fontSize:10},minMaxLegend:{titleStyle:{fontFamily:b,fontSize:10},minVariableLabelStyle:{fontFamily:b,fontSize:16},maxVariableLabelStyle:{fontFamily:b,fontSize:16}},icon:{backgroundColor:"#56a5d8"},line:{},column:{},bar:{},pie:{},donut:{},ring:{},pictureColumn:{},pictureBar:{},gauge:{dataLabelStyle:{fontFamily:b}},waffle:{dataValueStyle:{fontFamily:b,fontSize:30},dataLabelStyle:{fontFamily:b,fontSize:16}},tooltip:{color:"#4c4c4c",backgroundColor:"#FFFFFF"},tooltipLink:{color:"#4c4c4c"}},
infographic:{staticInfographic:d(a)}}}var n={DEFAULT_FONT_FAMILY_CLASSIC:"Verdana",DEFAULT_FONT_FAMILY_GRAPHIC:"Avenir Next",DEFAULT_FONT_SIZE_CLASSIC:10,DEFAULT_FONT_SIZE_GRAPHIC:13,CHART_DATA_FONT_SIZE:10,defaultStaticInfographic:d(),standardRamps:[{id:e.CLASSIC,colors:["#FFFFFF","#13729F","#DEA429"],additional:{table:{overrideStyles:{Default:{color:"#4C4C4C",backgroundColor:"#FFFFFF"},ReportTitle:{color:"#FFFFFF",backgroundColor:"#00436D"},TableHeader:{color:"#4C4C4C",backgroundColor:"#CCCCCC"},
GreyText:{color:"#AAAAAA",backgroundColor:"#FFFFFF"},BlueText:{color:"#00436D",backgroundColor:"#FFFFFF"},AlternatingRow:{color:"#4C4C4C",backgroundColor:"#EEEEEE"}}},chart:{renderSingleDataSeriesWithSameColor:!1,colors:"#13729F #DEA429 #6A9741 #A75523 #456E35 #D7DF22 #868686 #3C546D #829AB3 #DEDEDE #03406E #B1B1B1".split(" ")}}},{id:e.GRAPHIC,colors:["#FFFFFF","#56A5D8","#D6851A"],additional:{chart:{colors3series:["#56A5D8","#AED6F1","#2874A6"],colors:"#AED6F1 #85C1E9 #5DADE2 #3498DB #2E86C1 #2874A6 #21618C #1B4F72".split(" ")}}},
{id:"red",colors:["#d3d3d3","#8b4513","#ff4500"],additional:{chart:{colors3series:["#8b4513","#F1948A","#E74C3C"],colors:"#8b4513 #F1948A #EC7063 #E74C3C #CB4335 #B03A2E #943126 #78281F".split(" ")}}},{id:"dark",colors:["#6A6A6A","#FFFFFF","#EEEEEE"],additional:{chart:{colors3series:["#FFFFFF","#CACFD2","#A6ACAF"],colors:"#FFFFFF #D7DBDD #CACFD2 #BDC3C7 #A6ACAF #909497 #797D7F #626567 #4d4d4d #3e3e3e #262626".split(" ")}}},{id:"green",colors:["#556b2f","#90ee90","#ffffe0"],additional:{chart:{colors3series:["#E9F7EF",
"#A9DFBF","#27AE60"],colors:"#E9F7EF #A9DFBF #7DCEA0 #52BE80 #27AE60 #229954 #1E8449 #196F3D #145A32".split(" ")}}},{id:"green2",colors:["#FFFFFF","#0B7AC0","#35AC46"],additional:{chart:{colors3series:["#56A5D8","#AED6F1","#2874A6"],colors:"#56A5D8 #AED6F1 #85C1E9 #5DADE2 #3498DB #2E86C1 #2874A6 #21618C #1B4F72".split(" ")}}}]},m={};n.standardRamps.forEach(function(a){var d=k.mixin({},a.additional);d.id=a.id;var h=l({defaultFontFamilty:a.id===e.CLASSIC?"Verdana":"Avenir Next",defaultFontSize:a.id===
e.CLASSIC?10:13});c.applyThemeColorsToTheme({theme:h,colors:a.colors});b.populateObject(h,d,!0);n[a.id]=h;m[a.id]=h});n.TABLE_STYLES="Default ReportTitle TableHeader GreyText BlueText AlternatingRow".split(" ");n.getReportThemeById=function(a){return m[a]};n.isStandardTheme=function(a){return!!m[a]};n.getStandardThemes=function(){return Object.keys(m).map(function(a){return m[a]})};n.getDefaultStaticInfographicSettings=function(){return k.clone(n.defaultStaticInfographic)};n.getDefaultBorderSettings=
function(){return h()};n.getDefaultTheme=function(a){return l(a)};return n})},"esri/dijit/geoenrichment/ReportPlayer/core/themes/PageBorderStyles":function(){define([],function(){var k={NONE:"none",ALL:"all",INNER_ONLY:"innerOnly",OUTER_ONLY:"outerOnly",HORIZONTAL_INNER_ONLY:"horizontalInnerOnly",VERTICAL_INNER_ONLY:"verticalInnerOnly",isSupported:function(g){for(var f in k)if(k[f]===g)return!0;return!1},toSupportedValue:function(g){return k.isSupported(g)?g:k.ALL}};return k})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/ChartLineStyles":function(){define([],
function(){var k={SOLID:"Solid",DASHED:"Dashed",DOTTED:"Dotted",isSupported:function(g){for(var f in k)if(k[f]===g)return!0;return!1},toGFXValue:function(g,f){switch(g){case "Dashed":return 1>f?"LongDash":"Dash";case "Dotted":return 1>f?"Dash":"Dot";default:return"Solid"}}};return k})},"esri/dijit/geoenrichment/ReportPlayer/core/themes/ReportThemes":function(){define([],function(){return{GRAPHIC:"graphic",CLASSIC:"classic",COMPARISON:"comparison"}})},"esri/dijit/geoenrichment/ReportPlayer/core/themes/ThemeUtil":function(){define(["dojo/_base/lang",
"esri/dijit/geoenrichment/utils/ColorUtil","esri/dijit/geoenrichment/utils/ObjectUtil"],function(k,g,f){function e(a){var b=g.isLightColor(a);return g.transform(a,{dv:b?-7:7}).toHex()}var c={getPanelTitleColor:function(a){var b=g.isLightColor(a);return g.transform(a,{dv:b?-50:50}).toHex()},getChartElementBackgroundColor:function(a){var b=g.isLightColor(a);return g.transform(a,{dv:b?-13:13}).toHex()}},b={getThemeColors:function(a){return[a.document.backgroundColor,a.icon.backgroundColor,a.highlightedIcon.backgroundColor]},
generateChartColors:function(a,b,c){c=c||{};var d=c.gradientFactor||1,h=[b,g.transform(b,{dv:-20*d}).toHex(),g.transform(b,{dv:-40*d}).toHex(),g.transform(b,{dv:-50*d}).toHex(),g.transform(b,{dv:-55*d}).toHex(),g.transform(b,{dv:-60*d}).toHex(),g.transform(b,{dv:-65*d}).toHex(),g.transform(b,{dv:-70*d}).toHex()];if(c.numLighterColors)for(var e=0;e<c.numLighterColors;e++)h.unshift(g.transform(b,{dv:20*d*(e+1),ds:-20*(e+1)}).toHex());a&&a!==b&&h.unshift(a);var l={};return h.filter(function(a){return l[a]?
!1:l[a]=!0})},applyThemeColorsToTheme:function(a){var d=a.theme,l=a.colors,n=a.preserveForegroundColor,m=a.chartColors,p=a.colors3series;a=a.preprocessGeneratedThemeFunc;var k=l[0],q=l[1],l=l[2],r=n&&d.chart&&d.chart.dataLabelsStyle&&d.chart.dataLabelsStyle.color||g.getContrastColor(k).toHex(),n=n&&d.document.color||("#FFFFFF"===k.toUpperCase()?"#4C4C4C":r),u=g.isLightColor(k),v=c.getChartElementBackgroundColor(k),w=c.getPanelTitleColor(k),y=g.transform(k,{dv:u?-33:33}).toHex(),A={overrideStyles:{Default:{color:n,
backgroundColor:"transparent"},TableHeader:{color:g.getContrastColor(q,void 0,void 0,200).toHex(),backgroundColor:q},AlternatingRow:{color:n,backgroundColor:g.transform(k,{dv:u?-7:7}).toHex()},ReportTitle:{color:l,backgroundColor:"transparent"},GreyText:{color:y,backgroundColor:"transparent"},BlueText:{color:"#56A5D8",backgroundColor:"transparent"}}},B={lineColor:r,gridLinesColor:r,gridStripesColor:e(k),gridStripesColorAlt:"transparent",axisStyle:{color:r},titleStyle:{color:r}},C={lineColor:r,gridLinesColor:r,
gridStripesColor:e(k),gridStripesColorAlt:"transparent",baseLineColor:r,axisStyle:{color:r},titleStyle:{color:r}},z=g.isLightColor(k),k={document:{color:n,backgroundColor:k,border:{color:y}},icon:{backgroundColor:q},highlightedIcon:{backgroundColor:l},table:A,chart:{backgroundColor:"transparent",outlineColor:void 0,titleStyle:{color:w},dataLabelsAltColor:r,dataLabelsStyle:{color:r},xAxis:B,yAxis:C,legendStyle:{color:r,backgroundColor:"transparent"},minMaxLegend:{titleStyle:{color:r}},comparisonInfo:{lineColor:z?
"#666666":"#BBBBBB"},icon:{backgroundColor:q},ring:{ringBackground:{backgroundColor:v}},gauge:{dataLabelStyle:{color:q},othersColor:v,arrowIndicator:{lineColor:w,backgroundColor:w}},waffle:{dataValueStyle:{color:q},dataLabelStyle:{color:q},othersColor:v},columnBarBackground:{backgroundColor:v}},infographic:{backgroundColor:"transparent",agePyramid:{theme:u?"light":"common",male:{backgroundColor:q},female:{backgroundColor:l}},staticInfographic:{backgroundColor:"transparent",icon:{backgroundColor:q},
highlightedIcon:{backgroundColor:l},iconBarBackground:{},titleLine:{color:g.transform(k,{dv:u?-40:40}).toHex()},titleStyle:{color:w},variableLabelStyle:{color:q},variableLabelStyleHighlighted:{color:l},variableLabelStyleContrast:{color:k},variableDescriptionStyle:{color:g.transform(k,{dv:u?-50:50}).toHex()}}}};a&&a(k);f.populateObject(d,k,!0);d.chart.colors=m&&m.length?m:b.generateChartColors(q,l);d.chart.colors3series=p},applyTextStyleToTheme:function(a,h){function d(a,b){var d=k.mixin({},h);a&&
delete d.color;b||delete d.fontSize;return d}h=b.filterTextStyles(h);var c={document:d(!1,!0),table:{overrideStyles:{Default:d(!1,!0),TableHeader:d(!1,!0),AlternatingRow:d(!1,!0),ReportTitle:d(!1,!0),GreyText:d(!1,!0),BlueText:d(!1,!0)}},chart:{titleStyle:d(),dataLabelsStyle:d(),xAxis:{axisStyle:d(),titleStyle:d()},yAxis:{axisStyle:d(),titleStyle:d()},legendStyle:d(),minMaxLegend:{titleStyle:d(),minVariableLabelStyle:d(!0),maxVariableLabelStyle:d(!0)},gauge:{dataLabelStyle:d()},waffle:{dataValueStyle:d(),
dataLabelStyle:d()}},infographic:{staticInfographic:{titleStyle:d(),variableLabelStyle:d(),variableLabelStyleHighlighted:d(),variableLabelStyleContrast:d(),variableDescriptionStyle:d()}}};f.populateObject(a,c,!0)}},a={fontFamily:1,fontSize:1,fontWeight:1,fontStyle:1,textDecoration:1,color:1};b.filterTextStyles=function(b){var d={},c;for(c in a){var e=b[c];void 0!==e&&(d[c]=e)}return d};return b})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/map/layers/locator/LocatorPointsController":function(){define("dojo/_base/declare dojo/on dijit/Destroyable ../../../../../dataProvider/supportClasses/data/AreaDataUtil ../../MapEventUtil esri/dijit/geoenrichment/utils/DeviceUtil".split(" "),
function(k,g,f,e,c,b){return k(f,{_info:null,_fieldData:null,_isMultiFeature:null,_calcDataArray:null,_currentFeatureIndex:null,_layerNames:null,constructor:function(a,b,h,c){this._info=a;this._fieldData=b;this._isMultiFeature=h;this._currentFeatureIndex=c;this._layerIndexes={};this._layerNames={};this._rendererJsons={};this._mapInfos={};this._graphicLayerInfos={}},_getCalculatorName:function(){return this._info.calculatorName},getVariableObjects:function(){return this._info.variableObjects},getLayerID:function(){return this._info.layerID},
getLayerUrl:function(){return this._info.layerUrl},getLayerName:function(a){return this._layerNames[a]||this._info.layerName},setLayerName:function(a,b){this._layerNames[a]=b},getCalculatorDataArray:function(){if(!this._calcDataArray)if(this._isMultiFeature){var a=e.combineAreaDataObjectCalculators(this._fieldData.areaData,this._getCalculatorName());this._calcDataArray=e.removeDuplicacatedCalcData(a.thisAreas.concat(a.comparisonLevels))}else this._calcDataArray=(a=e.getAreaDataObjectCalculator(this._fieldData.areaData[this._currentFeatureIndex],
this._getCalculatorName()))&&[a.data].concat(a.comparisonLevels);return this._calcDataArray},_rendererJsons:null,getRendererJson:function(a){return this._rendererJsons[a]},setRendererJson:function(a,b){this._rendererJsons[a]=b},_layerIndexes:null,getLayerIndex:function(a){return this._layerIndexes[a]},setLayerIndex:function(a,b){this._layerIndexes[a]=b},_mapInfos:null,getMapInfo:function(a){return this._mapInfos[a]},getMapInfos:function(){var a=[],b;for(b in this._mapInfos)a.push(this._mapInfos[b]);
return a},setMapInfo:function(a,b){this._mapInfos[a]=b},_getPointIndexForCellFunc:null,_getCellForPointAtFunc:null,_highlightedCell:null,setLocatorTableCallbacks:function(a){this._getPointIndexForCellFunc=a.getPointIndexForCellFunc;this._getCellForPointAtFunc=a.getCellForPointAtFunc},registerLocatorTable:function(a){var b=this,h;a.set("highlightRowsOnHover",!0);g(a.domNode,"mouseover,mousemove",function(){var d=a.getOverFieldCell();d&&d!==h&&(h=d,b._highlightGraphicForFieldCell(h))});g(a.domNode,
"mouseout",function(){b._highlightGraphicForFieldCell(null);h=null})},_highlightRowForGraphic:function(a,b){this._highlightedCell&&(this._highlightedCell.parentGrid&&this._highlightedCell.parentGrid.setCellRowHighlighted(this._highlightedCell,!1),this._highlightedCell=null);b&&this._getCellForPointAtFunc&&(a=a.getPointIndexForGraphicFunc(b),(a=this._getCellForPointAtFunc(a))&&a.parentGrid&&(a.parentGrid.setCellRowHighlighted(a,!0),this._highlightedCell=a))},_graphicLayerInfos:null,setLocatorPointsLayer:function(a,
b,h,c){this._unSetInfo(a);b={map:h,graphicsLayer:b,getPointIndexForGraphicFunc:c.getPointIndexForGraphicFunc,getGraphicForPointAtFunc:c.getGraphicForPointAtFunc,setGraphicHighlightedFunc:c.setGraphicHighlightedFunc,layerMouseOverHandle:null,layerMouseOutHandle:null,highlightedGraphic:null,overGraphic:null};this._graphicLayerInfos[a]=b;this._addLayerListeners(b)},_addLayerListeners:function(a){var d=this,h=a.map,e=a.graphicsLayer;a.layerMouseOverHandle=c.onLayerMouseOver(e,h,function(c){c.graphic&&
c.graphic._graphicsLayer===e&&a.overGraphic!==c.graphic&&((a.layerMouseOutHandle&&a.layerMouseOutHandle.remove(),a.layerMouseOutHandle=null,d._removeHighlight(a),a.overGraphic=c.graphic,d._highlightRowForGraphic(a,a.overGraphic),a.setGraphicHighlightedFunc(a.overGraphic,!0),b.isMobileDevice())?h.infoWindow&&(h.infoWindow.setFeatures([a.overGraphic]),h.infoWindow.show(c.mapPoint,{closestFirst:!0})):a.layerMouseOutHandle=g.once(e,"mouse-out",function(b){d._removeHighlight(a,!0)}))})},_highlightGraphicForFieldCell:function(a){for(var b in this._graphicLayerInfos){var h=
this._graphicLayerInfos[b];this._removeHighlight(h);if(a){var c=this._getPointIndexForCellFunc(a);if(c=h.getGraphicForPointAtFunc(c))h.setGraphicHighlightedFunc(c,!0),h.highlightedGraphic=c}}},_removeHighlight:function(a,b){this._highlightRowForGraphic(a,null);a.highlightedGraphic&&(a.setGraphicHighlightedFunc(a.highlightedGraphic,!1),a.highlightedGraphic=null);a.overGraphic&&a.setGraphicHighlightedFunc(a.overGraphic,!1);a.overGraphic=null;!b&&a.map.infoWindow&&a.map.infoWindow.hide()},setPointVisibleAt:function(a,
b){for(var d in this._graphicLayerInfos){var c=this._graphicLayerInfos[d].getGraphicForPointAtFunc(a);if(c)c[b?"show":"hide"]()}},_unSetInfo:function(a){var b=this._graphicLayerInfos[a];delete this._graphicLayerInfos[a];b&&(b.layerMouseOverHandle&&b.layerMouseOverHandle.remove(),b.layerMouseOutHandle&&b.layerMouseOutHandle.remove())},_unSetLayers:function(){Object.keys(this._graphicLayerInfos).forEach(this._unSetInfo.bind(this));this._graphicLayerInfos={}},destroy:function(){this._unSetLayers()}})})},
"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/data/AreaDataUtil":function(){define(["dojo/_base/lang","../../../core/supportClasses/templateJsonUtils/fieldInfo/FieldInfoNameUtil","../../../_devConfig"],function(k,g,f){var e={getAreaDataValue:function(c){function b(a){!1!==u&&(v=a[u]);void 0===v&&(v=a[d])}function a(){if(p)b(p);else{var a=e[n];a&&b(a.data)}}var d=c.fieldName,h=c.fieldData,e=c.areaDataObject,n=c.calculatorName,m=c.featureIndex,p=c.featureAttributes,k=c.ignoreMetadata,
q=c.isMultiFeature;if(!f.showAreaDataUtilUndefinedData&&d){var r=d.indexOf("."),u=!1;-1!==r&&(u=d.substr(r+1));n||-1===r||(n=d.substr(0,r));m=void 0===m?0:Number(m)||0;if((e=c.areaDataObject||h.areaData[m])||p){var v;q&&n===g.AREA_ATTRIBUTES_CALCULATOR_NAME&&!k&&h&&b(h.metadata);void 0===v&&a();if(n)return v;void 0===v&&!k&&h&&b(h.metadata);if(void 0===v&&!p)for(var w in e)if(b(e[w].data),void 0!==v)break;return v}}},getAreaDataObjectCalculator:function(c,b,a){if(!c)return null;var d=c[b];!d&&a&&
(d=c[b]=e.createCalculator());return d},createCalculator:function(c,b){return{data:c||{},comparisonLevels:b||[]}},combineAreaDataObjectCalculators:function(c,b,a){var d=[],h=[];c.forEach(function(a){if(a=e.getAreaDataObjectCalculator(a,b))d.push(a.data),h=h.concat(a.comparisonLevels)});a&&a.removeDuplicates&&(h=e.removeDuplicacatedCalcData(h));return{thisAreas:d,comparisonLevels:h}},removeDuplicacatedCalcData:function(c){if(!c.length)return c;var b=[],a={},d=Object.keys(c[0]);c.forEach(function(h){var c=
function(a){var b="";d.forEach(function(d){b+=a[d]+";"});return b}(h);a[c]||(a[c]=!0,b.push(h))});return b},setAreaDataValue:function(c,b,a,d,h){h=void 0===h?0:Number(h)||0;e.setAreaDataObjectValue(c,b,a[h],d)},setAreaDataObjectValue:function(c,b,a,d){a&&d&&null!==b&&void 0!==b&&(e.getAreaDataObjectCalculator(a,d,!0).data[c]=b)},mergeAreaData:function(c,b){b.forEach(function(a,b){(b=c[b])&&e.mergeAreaDataObjects(b,a)})},mergeAreaDataObjects:function(c,b){for(var a in c){var d=c[a],h=b[a];h?d.comparisonLevels.length!==
h.comparisonLevels.length?console.log("Error: can't merge calculators with different comparison levels!"):(k.mixin(h.data,d.data),d.comparisonLevels.forEach(function(a,b){k.mixin(h.comparisonLevels[b],a)})):b[a]=d}console.log("AreaDataUtil.js merging area data \x3d\x3e areaData");console.log(b)}};return e})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/templateJsonUtils/fieldInfo/FieldInfoNameUtil":function(){define(["esri/dijit/geoenrichment/utils/MaskUtil","./FieldLibrary"],function(k,
g){var f={SCRIPT_PREFIX:"",DEFAULT_SCRIPT_NAME:"Custom",TOTAL_SCRIPT_NAME:"Total",AVG_SCRIPT_NAME:"Average",SCRIPT_PREFIX_RE:/^SCRIPT_/i,FIRST_SYMBOL_IS_NUMBER_RE:/^[0-9]/,DATA_COLLECTIONS_CALCULATOR_NAME:"dataCollectionsCalculator",MAPS_CALCULATOR_NAME:"mapsCalculator",UNITED_MAPS_CALCULATOR_NAME:"unitedMapsCalculator",AREA_ATTRIBUTES_CALCULATOR_NAME:"headers",ENRICHED_DATA_NO_LEVELS:"enrichFieldData_noLevels",SCRIPTS_CALCULATOR_NAME:"scripts",createFieldNameFromSource:function(e,c){if(!e)return"";
var b="";e.isSiteAttribute?b=e.attribute.name:e.isChartAttribute?b=e.id:e.isWebMap?b=e.webMapFieldName||e.fieldName:(e=(e.fullName||e).replace(/_|\.|\s/g,""),c=c||"n",e+="n"===c?"":"_"+c,f.FIRST_SYMBOL_IS_NUMBER_RE.test(e)&&(e="_"+e),b=e.toUpperCase());return f._validateName(b)},createFieldNameFromScript:function(e){e=e.name;f.SCRIPT_PREFIX_RE.test(e)&&(e=e.replace(f.SCRIPT_PREFIX_RE,""));return f._validateName(f.SCRIPT_PREFIX+e.replace(/\.|-/g,""))},_validateName:function(e){return f._checkXMLValidName(f._maskUnicodeInName(e))},
_XML_MASK_NAME_RE:/(_X)(\d\d\d\d)/i,_checkXMLValidName:function(e){return f._XML_MASK_NAME_RE.test(e)?e.replace(f._XML_MASK_NAME_RE,"$1_$2"):e},_XML_UNICODE_RE:/&#x|;/ig,_maskUnicodeInName:function(e){return k.maskWithUnicodeXML(e).replace(f._XML_UNICODE_RE,"")},renderScriptName:function(e){return e.replace(f.SCRIPT_PREFIX_RE,"")},provideQualifiedFieldInfoTemplateName:function(e,c){e&&(e.templateName=c?c+"."+e.name:e.isWebMap?f.AREA_ATTRIBUTES_CALCULATOR_NAME+"."+e.name:e.isSiteAttribute?f.AREA_ATTRIBUTES_CALCULATOR_NAME+
"."+e.name:f.DATA_COLLECTIONS_CALCULATOR_NAME+"."+e.name)},getCalculatorName:function(e){return e&&e.templateName&&e.templateName.substr(0,e.templateName.indexOf("."))},isAreaAttributesFieldInfo:function(e){return f.getCalculatorName(e)===f.AREA_ATTRIBUTES_CALCULATOR_NAME},updateCalculatorName:function(e,c){e&&(e.hasVariable||e.script)&&(e.templateName=c+e.templateName.substr(e.templateName.indexOf(".")))},refreshNameAndTemplateName:function(e){e.statefulName&&e.fullName&&(e.name=f.createFieldNameFromSource(e,
e.statefulName.charAt(0)),e.templateName=e.templateName.substr(0,e.templateName.lastIndexOf(".")+1)+e.name)},getFieldInfoAlias:function(e){return e?e.script?e.script.alias:e.hasVariable?e.alias:g.getFieldLabel(e.name):null}};return f})},"esri/dijit/geoenrichment/utils/MaskUtil":function(){define([],function(){function k(g,f){return"string"!==typeof g?g:String(g).replace(/[^\x20-\x7f]/g,function(e){e=e.charCodeAt(0).toString(16).toUpperCase();return f(e)})}return{maskWithUnicode:function(g){return k(g,
function(f){return"\\u000".substr(0,6-f.length)+f})},maskWithUnicodeXML:function(g){return k(g,function(f){return"\x26#x000".substr(0,7-f.length)+f+";"})},removeUnicode:function(g,f){return k(g,function(e){return f||""})},removeXMLMasks:function(g,f){return g.replace(/&#x.*?;/g,f||"")}}})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/templateJsonUtils/fieldInfo/FieldLibrary":function(){define(["dojo/string","dojo/i18n!esri/nls/jsapi"],function(k,g){var f=g.geoenrichment.dijit.ReportPlayer.FieldInfoLabels;
g=g.geoenrichment.dijit.ReportPlayer.FieldInfoPreview;f={_SPECIAL_HEADER_FIELDS_NAME_MAP:{SITE_NAME:"SiteName",STORE_ADDR:"SiteAddr",AREA_DESC2:"SiteDesc",STORE_LAT:"Latitude",STORE_LONG:"Longitude",AREA_ID:"AreaID",AREA_DESC:"AreaDesc",STORE_ID:"StoreID",RING:"Ring",STORE_NAME:"StoreName",GROUPCOUNT:"SummaryCount"},_ADDITIONAL_HEADER_FIELDS_MAP:{SITENOTE:"SiteNote",SITENOTE2:"SiteNote2",SITENOTE3:"SiteNote3",SITENOTE4:"SiteNote4",SITENOTE5:"SiteNote5",SITENOTE6:"SiteNote6",SITENOTE7:"SiteNote7",
SITENOTE8:"SiteNote8",SITENOTE9:"SiteNote9",SITENOTE10:"SiteNote10",SITENOTES:"SiteNotes",CHART_AREA_NAME:"ChartAreaName",CHART_SERIES_NAME:"ChartSeriesName",CHART_POINT_NAME:"ChartVariableName",CHART_POINT_VALUE:"ChartVariableValue"},_REPORT_VAR_FIELDS_MAP:{REPORTNAME:"Title",REPORTTITLE2:"Subtitle",CURRPAGE:"Page",COPYRIGHT:"Copyright",TRIALURLTEXT:"TrialUrlText",PHONENUMBER:"PhoneNumber",PRODUCTURL:"ProductUrl",PRODUCTLABEL:"ProductLabel",SOURCE:"Source",CENSUSYEAR:"CensusYear",CURRENTYEAR:"CurrentYear",
FUTUREYEAR:"FutureYear",LATITUDELABEL:"LatitudeLabel",LONGITUDELABEL:"LongitudeLabel",PAGEFORMAT:"PageFormat",BANDFROM0TO1UNIT2:"BandFrom0To1Unit2",RADIUS0UNIT1:"Radius0Unit1",AREADELIMITER:"AreaDelimiter",BANDREGIONFROM0TO1:"BandRegionFrom0To1",ET_AL:"ET_AL",LINEBUFFERSEGMENTFROM0TO1UNIT2RADIUS:"LineBufferSegmentFrom0To1Unit2Radius",LINEBUFFERRADIUS0UNIT1RADIUS:"LineBufferRadius0Unit1Radius",RINGVALUE0UNIT1RADIUS:"RingValue0Unit1Radius",RINGSVALUES0UNIT1RADII:"RingsValues0Unit1Radii",RINGBUFFERBANDFROM0TO1UNIT2RADIUS:"RingBufferBandFrom0To1Unit2Radius",
DRIVETIMEBANDFROM0TO1UNIT2RADIUS:"DriveTimeBandFrom0To1Unit2Radius",RINGBUFFERBANDSBANDS0UNIT1RADII:"RingBufferBandsBands0Unit1Radii",RINGBUFFERBANDRING0UNIT1RADIUS:"RingBufferBandRing0Unit1Radius",DRIVETIMEBANDBAND0UNIT1RADIUS:"DriveTimeBandBand0Unit1Radius",DRIVETIMESRINGS0UNIT1RADII:"DriveTimesRings0Unit1Radii",DRIVETIMERING0UNIT1RADIUS:"DriveTimeRing0Unit1Radius",DRIVEDISTANCEVALUE0UNIT1RADIUS:"DriveDistanceValue0Unit1Radius",DRIVEDISTANCESRINGS0UNIT1RADII:"DriveDistancesRings0Unit1Radii",DRIVEDISTANCERING0UNIT1RADIUS:"DriveDistanceRing0Unit1Radius"},
_SPECIAL_HEADER_FIELDS_NAME_MAP_BACK:{},_ADDITIONAL_HEADER_FIELDS_MAP_BACK:{},_REPORT_VAR_FIELDS_MAP_BACK:{},_PREVIEW:{Title:g.fieldPreviewTitle,Title_graphic:g.fieldPreviewTitleGraphic,Subtitle:g.fieldPreviewSubtitle,Date:g.fieldPreviewDate,Page:g.fieldPreviewPage,Count:g.fieldPreviewLocationsCount,Copyright:g.fieldPreviewCopyright,TrialUrlText:g.fieldPreviewTrialUrlText,PhoneNumber:g.fieldPreviewPhoneNumber,ProductUrl:g.fieldPreviewProductUrl,ProductLabel:g.fieldPreviewProductLabel,Source:g.fieldPreviewSource,
SITE_NAME:g.fieldPreviewSiteName,SITE_NAME_multi:g.fieldPreviewSiteNameMulti,STORE_LAT:g.fieldPreviewLat,STORE_LONG:g.fieldPreviewLong,AREA_DESC2:g.fieldPreviewAreaDesc2,STORE_ADDR:g.fieldPreviewStoreAddr,AREA_DESC:g.fieldPreviewAreaDesc,CHART_AREA_NAME:g.fieldPreview_chartArea,CHART_SERIES_NAME:g.fieldPreview_seriesName,CHART_POINT_NAME:g.fieldPreview_pointName},_LABELS:{CHART_AREA_NAME:f.chartAreaName,CHART_SERIES_NAME:f.chartSeriesName,CHART_POINT_NAME:f.chartPointName,CHART_POINT_VALUE:f.chartPointValue},
DATE_FIELD_NAME:"Date",DATE_FIELD_ALIAS:"Date",DATE_FIELD_DEFAULT_FORMAT:"d-MMMM dd, yyyy",GROUPCOUNT_FIELD_NAME:"SummaryCount",GROUPCOUNT_FIELD_ALIAS:"SummaryCount",SITENOTES_FIELD_NAME:"SiteNotes",SITENOTES_FIELD_ALIAS:"SiteNotes",init:function(){for(var e in this._SPECIAL_HEADER_FIELDS_NAME_MAP)this._SPECIAL_HEADER_FIELDS_NAME_MAP_BACK[this._SPECIAL_HEADER_FIELDS_NAME_MAP[e].toUpperCase()]=e;for(e in this._ADDITIONAL_HEADER_FIELDS_MAP)this._ADDITIONAL_HEADER_FIELDS_MAP_BACK[this._ADDITIONAL_HEADER_FIELDS_MAP[e].toUpperCase()]=
e;for(e in this._REPORT_VAR_FIELDS_MAP)this._REPORT_VAR_FIELDS_MAP_BACK[this._REPORT_VAR_FIELDS_MAP[e].toUpperCase()]=e},templateToUIHeader:function(e){e=e&&this.trimTemplateHeaderName(e).toUpperCase();return this._SPECIAL_HEADER_FIELDS_NAME_MAP[e]||this._ADDITIONAL_HEADER_FIELDS_MAP[e]},qualifyTemplateHeaderName:function(e){return e&&0!==e.indexOf("headers.")?"headers."+e:e},trimTemplateHeaderName:function(e){if(!e)return e;0===e.indexOf("headers.")&&(e=e.substr(e.indexOf(".")+1));return e},templateToUIReportVar:function(e){e=
e&&e.toUpperCase();return this._REPORT_VAR_FIELDS_MAP[e]},uiToTemplate:function(e){e=e&&e.toUpperCase();return this._SPECIAL_HEADER_FIELDS_NAME_MAP_BACK[e]||this._ADDITIONAL_HEADER_FIELDS_MAP_BACK[e]||this._REPORT_VAR_FIELDS_MAP_BACK[e]},getPreview:function(e,c,b){e=this.trimTemplateHeaderName(e);c&&"Title"===e&&(e+="_graphic");b&&"SITE_NAME"===e&&(e+="_multi");return"SiteNotes"===e?g.fieldPreviewSiteNotes:0===e.indexOf("SiteNote")?k.substitute(g.fieldPreviewSiteNote,{index:e.replace("SiteNote","")||
1}):this._PREVIEW[e]},hasField:function(e){return!!(this.uiToTemplate(e)||this.templateToUIHeader(e)||this.templateToUIReportVar(e))},isAdditionalHeadersField:function(e){e=e&&this.trimTemplateHeaderName(e).toUpperCase();return this._ADDITIONAL_HEADER_FIELDS_MAP[e]},isChartAttribute:function(e){return this.isAdditionalHeadersField(e)&&-1!==e.toUpperCase().indexOf("CHART_")},getSiteNoteFieldNameAt:function(e){return"SiteNote"+(!e||1>=Number(e)?"":e)},getFieldLabel:function(e){e=e&&this.trimTemplateHeaderName(e).toUpperCase();
return this._LABELS[e]},getReportVarSelfTagsMap:function(){return{Page:"currPage",Title:"reportName",Subtitle:"reportTitle2"}},getReportVarTextTagsMap:function(){var e=this.getReportVarSelfTagsMap(),c={},b;for(b in this._REPORT_VAR_FIELDS_MAP){var a=this._REPORT_VAR_FIELDS_MAP[b];e[a]||(c[a]=a)}return c}};f.init();return f})},"esri/dijit/geoenrichment/ReportPlayer/_devConfig":function(){define([],function(){return{logData:!0,showAreaDataUtilUndefinedData:!1,createPlayerCommand:{saveDataJsonAsTextFile:!1,
useTestBuild:!1,configUrl:"https://laci2.esri.com/jenkins/job/report-player-jsapi-pr/lastSuccessfulBuild/artifact/release/reportPlayer/config.js",baseUrl:"https://laci2.esri.com/jenkins/job/report-player-jsapi-pr/lastSuccessfulBuild/artifact/release",mainUrl:"https://laci2.esri.com/jenkins/job/report-player-jsapi-pr/lastSuccessfulBuild/artifact/release/dojo/dojo.js",esriDijitCssUrl:"https://js.arcgis.com/3.31/dijit/themes/claro/claro.css",esriCssUrl:"https://laci2.esri.com/jenkins/job/report-player-jsapi-pr/lastSuccessfulBuild/artifact/release/reportPlayer/reportPlayer.css"},
createPDFCommand:{removeUnicodeChars:!1},preview:{bigValues:!1},charts:{enableEffects:!1},table:{printGridRefresh:!1},emulateErrors:{playerError:!1,contentErrors:!1,themeParseError:!1,metadataParseError:!1,layoutParseError:0,reportContainerRenderError:!1,createReportError:!1,createReportNaN:!1,createReportNull:!1,getMapItemError:!1,emptyDataProviderResponse:!1,emptyTemplateJson:!1}}})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/map/MapEventUtil":function(){define(["dojo/on","dojo/sniff",
"esri/dijit/geoenrichment/utils/DeviceUtil"],function(k,g,f){return{onLayerMouseOver:function(e,c,b){var a=f.isMobileDevice();e=a?e:g("touch")?c:e;a=a?"mouse-over":g("touch")?"mouse-down, mouse-move":"mouse-move";return k(e,a,b)}}})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/map/layers/std/StdPolygonsController":function(){define("dojo/_base/declare esri/dijit/geoenrichment/Deferred dojo/on esri/dijit/geoenrichment/promise/all dijit/Destroyable ../../MapEventUtil ../../../../../dataProvider/supportClasses/data/AreaDataUtil esri/dijit/geoenrichment/ReportPlayer/countryConfig".split(" "),
function(k,g,f,e,c,b,a,d){return k(c,{_calculatorName:null,_fieldData:null,_isMultiFeature:null,_currentFeatureIndex:null,_hasRegisteredLayers:!1,_hasRegisteredInfographics:!1,constructor:function(a,b,d,c){this._calculatorName=a;this._fieldData=b;this._isMultiFeature=d;this._currentFeatureIndex=c;this._layerIndexes={};this._rendererJsons={};this._labelRendererJsons={};this._mapInfos={};this._graphicLayerInfos={};this._pendingLayerInfos={}},_rendererJsons:null,_labelRendererJsons:null,getRendererJson:function(a){return this._rendererJsons[a]},
getLabelRendererJson:function(a){return this._labelRendererJsons[a]},setRendererJson:function(a,b){this._rendererJsons[a]=b},setLabelRendererJson:function(a,b){this._labelRendererJsons[a]=b},_layerIndexes:null,getLayerIndex:function(a,b){var c=d.getGeographiesModel().getLevels(),h=-1;c.some(function(a,d){if(a.id===b)return h=d,!0});return this._layerIndexes[a]+h/c.length},setLayerIndex:function(a,b){this._layerIndexes[a]=b},_mapInfos:null,getMapInfo:function(a){return this._mapInfos[a]},getMapInfos:function(){var a=
[],b;for(b in this._mapInfos)a.push(this._mapInfos[b]);return a},setMapInfo:function(a,b){this._mapInfos[a]=b},_attributeFields:null,getAttributeFields:function(){return this._attributeFields},setAttributeFields:function(a){this._attributeFields=a},_shownFeatureAttributes:null,_featuresChangedHandlers:null,getShownFeatureAttributes:function(){return this._shownFeatureAttributes},setShownFeaturesChangedListener:function(a){var b=this;this._featuresChangedHandlers=this._featuresChangedHandlers||[];
this._featuresChangedHandlers.push(a);return{remove:function(){var d=b._featuresChangedHandlers;d&&d.splice(d.indexOf(a),1)}}},setShownFeatureAttributes:function(a){this._shownFeatureAttributes=a;this._featuresChangedHandlers&&this._featuresChangedHandlers.forEach(function(a){a()})},_allFeatureAttributes:null,_loadAllFeaturesHandlers:null,getAllFeatureAttributes:function(){return this._allFeatureAttributes||[]},setAllFeatureAttributes:function(a){this._allFeatureAttributes=a},setLoadAllFeaturesListener:function(a){var b=
this;this._loadAllFeaturesHandlers=this._loadAllFeaturesHandlers||[];this._loadAllFeaturesHandlers.push(a);return{remove:function(){var d=b._loadAllFeaturesHandlers;d&&d.splice(d.indexOf(a),1)}}},loadAllFeatures:function(){return this._loadAllFeaturesHandlers&&e(this._loadAllFeaturesHandlers.map(function(a){return a()}))},saveGeometryInCalculatorData:function(b,d){var c;c=(c=this._isMultiFeature?a.combineAreaDataObjectCalculators(this._fieldData.areaData,this._calculatorName):a.getAreaDataObjectCalculator(this._fieldData.areaData[this._currentFeatureIndex],
this._calculatorName))&&c.comparisonLevels||[];var h;c.some(function(a){if(a.StdGeographyLevel&&a.StdGeographyLevel===b.StdGeographyLevel&&a.StdGeographyID===b.StdGeographyID)return h=a,!0});h&&(h[d]=b[d])},_highlightInfographicForAttributesFunc:null,_registerInfographicDfd:null,registerInfographic:function(a){this._highlightInfographicForAttributesFunc=a.highlightInfographicForAttributes;this._registerInfographicDfd=new g;this._hasRegisteredLayers&&this._registerInfographicDfd.resolve();this._hasRegisteredInfographics||
(this._hasRegisteredInfographics=!0,this._doRegisterLayers());return this._registerInfographicDfd.promise},_graphicLayerInfos:null,_pendingLayerInfos:null,setStdPolygonsLayer:function(a,b,d,c){this._unSetInfo(a);this._pendingLayerInfos[a]={map:d,graphicsLayer:b,getGraphicForAttributesFunc:c.getGraphicForAttributesFunc,setGraphicHighlightedFunc:c.setGraphicHighlightedFunc,layerMouseOverHandle:null,layerMouseOutHandle:null,highlightedGraphic:null};this._hasRegisteredInfographics&&this._doRegisterLayers();
this._hasRegisteredLayers||(this._hasRegisteredLayers=!0,this._registerInfographicDfd&&this._registerInfographicDfd.resolve())},_doRegisterLayers:function(){for(var a in this._pendingLayerInfos){var b=this._pendingLayerInfos[a];this._graphicLayerInfos[a]=b;this._addLayerListeners(b)}this._pendingLayerInfos={}},_addLayerListeners:function(a){var d=this,c=a.graphicsLayer,h;a.layerMouseOverHandle=b.onLayerMouseOver(c,a.map,function(b){b.graphic&&b.graphic._graphicsLayer===c&&h!==b.graphic&&(a.layerMouseOutHandle&&
a.layerMouseOutHandle.remove(),a.layerMouseOutHandle=null,h&&a.setGraphicHighlightedFunc(h,!1),h=b.graphic,d._highlightInfographicForAttributesFunc(h.attributes),a.setGraphicHighlightedFunc(h,!0),a.layerMouseOutHandle=f.once(c,"mouse-out",function(b){d._highlightInfographicForAttributesFunc(null);h&&a.setGraphicHighlightedFunc(h,!1);h=null}))})},highlightGraphicForAttributes:function(a){for(var b in this._graphicLayerInfos){var d=this._graphicLayerInfos[b];d.highlightedGraphic&&(d.setGraphicHighlightedFunc(d.highlightedGraphic,
!1),d.highlightedGraphic=null);if(a){var c=d.getGraphicForAttributesFunc(a);c&&(d.setGraphicHighlightedFunc(c,!0),d.highlightedGraphic=c)}}},_unSetInfo:function(a){var b=this._graphicLayerInfos[a];delete this._graphicLayerInfos[a];b&&(b.layerMouseOverHandle&&b.layerMouseOverHandle.remove(),b.layerMouseOutHandle&&b.layerMouseOutHandle.remove())},_unSetLayers:function(){Object.keys(this._graphicLayerInfos).forEach(this._unSetInfo.bind(this));this._graphicLayerInfos={}},destroy:function(){this._unSetLayers()}})})},
"esri/dijit/geoenrichment/ReportPlayer/countryConfig":function(){define(["./dataProvider/supportClasses/stdGeographies/StdGeographiesModel"],function(k){function g(){if(!e||!e.hierarchies)return"census";var a=e.hierarchies[0].ID;if(1==e.hierarchies.length)return a;if(e.defaultDatasetID)for(var b in e.hierarchies){var d=e.hierarchies[b];if(d.datasets&&d.datasets.some(function(a){return a==e.defaultDatasetID})){a=d.ID;break}}return a}var f={},e;f.getCurrentCountry=function(){return e};f.getCountryID=
function(){return e&&e.id};f.getCurrencySymbol=function(){return e&&e.currencySymbol||"$"};f.getCurrencyFormat=function(){if(e&&e.currencyFormat)return e.currencyFormat;var a=f.getCurrencySymbol();return a+"0;-"+a+"0"};f.setCountry=function(a){e=a};var c,b;f.getSingleUnits=function(){return c};f.getPluralUnits=function(){return b};f.setSingleAndPluralUnits=function(a,d){c=a;b=d};var a;f.getHierarchyID=function(){return a};f.setHierarchyID=function(b){a=b||g()};var d;f.getGeographiesModel=function(){return d};
f.setGeographiesModel=function(a){d=a};f.reset=function(){d=b=c=a=e=null};f.toJson=function(){return{country:{id:f.getCountryID(),currencySymbol:f.getCurrencySymbol(),currencyFormat:f.getCurrencyFormat()},hierarchy:a,geographiesModel:d&&d.toJson()}};f.fromJson=function(b){b&&(e=b.country,a=b.hierarchy,d=b.geographiesModel&&new k(b.geographiesModel))};return f})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/stdGeographies/StdGeographiesModel":function(){define(["dojo/_base/declare"],
function(k){return k(null,{_levelsCache:null,_levels:null,constructor:function(g){this._initWithLevels(g.levels)},_initWithLevels:function(g){this._levels=g;this._levelsCache={};this._levels.forEach(function(f){delete f.description;this._levelsCache[f.id]=f;f.adminLevel&&(this._levelsCache[f.adminLevel]=f)},this)},getLevels:function(g){return g?this._levels.filter(function(f){return!f.isWholeCountry}):this._levels.slice()},getLevel:function(g){return this._levelsCache[g]},getLevelPluralName:function(g){return(g=
this.getLevel(g))?g.name||g.pluralName:null},toJson:function(){return{levels:this._levels}}})})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/map/layers/thisAreas/ThisAreasHighlightController":function(){define(["dojo/_base/declare","esri/dijit/geoenrichment/Deferred","dojo/on","dijit/Destroyable","../../MapEventUtil"],function(k,g,f,e,c){return k(e,{_hasRegisteredLayers:!1,_hasRegisteredTables:!1,constructor:function(b){this._graphicLayerInfos={};this._registerTableDfds=[];this._highlightTableForAreaIndexFuncs=
[];this._pendingLayerInfos={}},_highlightTableForAreaIndexFuncs:null,_registerTableDfds:null,registerTable:function(b){this._highlightTableForAreaIndexFuncs.push(b.highlightTableForAreaIndex);b=new g;this._registerTableDfds.push(b);this._hasRegisteredLayers&&this._doRegisterTables();this._hasRegisteredTables||(this._hasRegisteredTables=!0,this._doRegisterLayers());return b.promise},_doRegisterTables:function(){this._registerTableDfds.forEach(function(b){b.resolve()});this._registerTableDfds.length=
0},_graphicLayerInfos:null,_pendingLayerInfos:null,setThisAreaLayer:function(b,a,d,c){this._unSetInfo(b);this._pendingLayerInfos[b]={graphicsLayer:a,areaIndex:c.thisAreaIndex,getGraphicForAreaIndexFunc:c.getGraphicForAreaIndexFunc,setGraphicHighlightedFunc:c.setGraphicHighlightedFunc,layerMouseOverHandle:null,layerMouseOutHandle:null,highlightedGraphic:null,map:d};this._hasRegisteredTables&&this._doRegisterLayers();this._hasRegisteredLayers||(this._hasRegisteredLayers=!0,this._doRegisterTables())},
_doRegisterLayers:function(){for(var b in this._pendingLayerInfos){var a=this._pendingLayerInfos[b];this._graphicLayerInfos[b]=a;this._addLayerListeners(a)}this._pendingLayerInfos={}},_addLayerListeners:function(b){var a=this,d=b.graphicsLayer,h;b.layerMouseOverHandle=c.onLayerMouseOver(d,b.map,function(c){c.graphic&&c.graphic._graphicsLayer===d&&h!==c.graphic&&(b.layerMouseOutHandle&&b.layerMouseOutHandle.remove(),b.layerMouseOutHandle=null,h&&b.setGraphicHighlightedFunc(h,!1),h=c.graphic,a._highlightTableForAreaIndexFuncs.forEach(function(a){a(b.areaIndex)}),
b.setGraphicHighlightedFunc(h,!0),b.layerMouseOutHandle=f.once(d,"mouse-out",function(d){a._highlightTableForAreaIndexFuncs.forEach(function(a){a(null)});h&&b.setGraphicHighlightedFunc(h,!1);h=null}))})},highlightGraphicForAreaIndex:function(b){for(var a in this._graphicLayerInfos){var d=this._graphicLayerInfos[a];d.highlightedGraphic&&(d.setGraphicHighlightedFunc(d.highlightedGraphic,!1),d.highlightedGraphic=null);var c=d.getGraphicForAreaIndexFunc(b);c&&(d.setGraphicHighlightedFunc(c,!0),d.highlightedGraphic=
c)}},_unSetInfo:function(b){var a=this._graphicLayerInfos[b];delete this._graphicLayerInfos[b];a&&(a.layerMouseOverHandle&&a.layerMouseOverHandle.remove(),a.layerMouseOutHandle&&a.layerMouseOutHandle.remove())},_unSetLayers:function(){Object.keys(this._graphicLayerInfos).forEach(this._unSetInfo.bind(this));this._graphicLayerInfos={}},destroy:function(){this._unSetLayers()}})})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/EditorUnits":function(){define(["esri/dijit/geoenrichment/utils/ObjectUtil",
"dojo/i18n!esri/nls/jsapi"],function(k,g){g=g.geoenrichment.dijit.ReportPlayer.units;var f={},e=["px","pt","mm","cm","in"],c={px:0,pt:1,mm:1,cm:2,"in":2};f.getSupportedUnits=function(){return e};f.getShortName=function(b){return g.shortNames[b]};f.getLongName=function(b){return g.longNames[b]};f.getLongNameWithUnits=function(b){return g.longNamesWithUnits[b]};f.getPlaces=function(b){return c[b]||0};f.round=function(b,a){return k.roundNumber(b,f.getPlaces(a))};f.provideUnits=function(b,a){return b.replace("${units}",
f.getShortName(a))};return f})},"esri/dijit/geoenrichment/ReportPlayer/DataProviderGE":function(){define("dojo/_base/declare dojo/_base/lang esri/dijit/geoenrichment/promise/all esri/dijit/geoenrichment/when esri/kernel ./dataProvider/_CommandSupport ./dataProvider/_SerializationSupport ./dataProvider/_ServerSerializationSupport ./dataProvider/supportClasses/areas/AnalysisAreaUtil ./dataProvider/supportClasses/areas/AnalysisAreaJsonUtil ./dataProvider/supportClasses/areas/AreasPreprocessor ./dataProvider/supportClasses/CustomReportsManager ./dataProvider/supportClasses/TemplateJsonLoader ./dataProvider/supportClasses/ReportDataProcessor ./dataProvider/supportClasses/InfographicOptionsProvider ./dataProvider/supportClasses/GEUtil ./dataProvider/supportClasses/attachments/DefaultAttachmentsStore ./dataProvider/supportClasses/attachments/CustomAttachmentsStore ./dataProvider/supportClasses/PortalManager ./dataProvider/supportClasses/data/VariablesUtil ./dataProvider/commands/mapToImage/MapToURLUtil ./core/themes/ThemeLibrary ./core/themes/ReportThemes esri/dijit/geoenrichment/ReportPlayer/countryConfig esri/dijit/geoenrichment/utils/ProjectionUtil esri/dijit/geoenrichment/utils/UrlUtil".split(" "),
function(k,g,f,e,c,b,a,d,h,l,n,m,p,t,q,r,u,v,w,y,A,B,C,z,E,G){return k([b,a,d],{analysisAreasLimit:-1,cacheTemplates:!0,printMapTaskUrl:null,resetReportItemsCache:!0,_infographicOptionsProvider:null,constructor:function(a){g.mixin(this,a);this._infographicOptionsProvider=new q},_getAttachmentsStore:function(a){return(new u(a)).initialize()},getCustomReports:function(a){return m.getCustomReports(a)},_currentContext:null,getReportData:function(a,b){var d=this,c=b&&b.progressCallback||function(){},k=
g.mixin({},a);k.portalUrl=G.getPortalUrl(k.portalUrl);h.parseSites(k);z.reset();k.hierarchy||k.analysisAreas.some(function(a){if(a.geographies&&a.geographies[0].hierarchy)return k.hierarchy=a.geographies[0].hierarchy,!0});d.resetReportItemsCache&&m.resetCache();d._currentContext=k;k.analysisAreas=l.areasFromJson(k.analysisAreas);k.combinedAreasInfo=k.combinedAreasInfo&&l.combinedAreasInfoFromJson(k.combinedAreasInfo)||{};h.populateCombinedAreasInfo(k.combinedAreasInfo,k.analysisAreas);k.fieldData=
{specialTradeAreaCalculatorName:null,runReportTaskIDs:null,metadata:{},areaData:[],errors:[],reportInfo:null};return f([e(m.tryFindReportIdByAlias(k),function(a){k.reportID=a||k.reportID}),this._discoverPortal(k),function(){return k.variables&&e(y.preprocessVariables(k.variables,k.portalUrl),function(a){k.variables=a})}()]).then(function(){return e(n.preprocessAreas(k,{analysisAreasLimit:d.analysisAreasLimit}),function(){c(.25);setTimeout(function(){d._onCreateReportStarted()});var a=k.attachmentsProvider?
v(k.attachmentsProvider):d._getAttachmentsStore(k.analysisAreas),b={initGE:r.initialize(),countryInfo:r.getCountryInfo(k.countryID),infographicOptions:d._infographicOptionsProvider.getInfographicOptions(k),attachmentsStore:a};k.reportID?(b.reportObject=m.getCustomReportByID(k),b.templateJsonInfo=p.getTemplateJsonByID(k,d.cacheTemplates),b.runReportResult=t.runReportAndGetData(k,a)):k.variables&&(b.reportObject=m.getFakeCustomReportByContext(k),b.templateJsonInfo=p.createTemplateJsonFromVariables(k),
b.runReportResult=t.runReportFromVariables(k));return f(b).then(function(a){var b=a.reportObject,d=a.infographicOptions,h=a.attachmentsStore,l=a.templateJsonInfo.templateJson,f=a.templateJsonInfo.templateVariableProvider,g=a.runReportResult;c(.75);if(!l||!b||!k.fieldData)return null;z.setCountry(a.countryInfo.country);z.setHierarchyID(k.hierarchy);z.setGeographiesModel(a.countryInfo.geographiesModels[z.getHierarchyID()]);l.theme||(l.theme=B.getReportThemeById(b.isGraphicReport?C.GRAPHIC:C.CLASSIC));
var n={isMultiFeature:b.isMultiFeature&&1<k.analysisAreas.length,reportTitle:k.reportTitle||b.title,templateJson:l,reportObject:b,fieldData:k.fieldData,analysisAreas:k.analysisAreas,combinedAreasInfo:k.combinedAreasInfo,reverseAnalysisAreasOnMap:k.reverseAnalysisAreasOnMap,infographicOptions:d,attachmentsStore:h,geClient:r.getClient(),templateVariableProvider:f,customLogo:k.customLogo,config:{portalUrl:k.portalUrl,geoenrichmentUrl:k.geoenrichmentUrl,geometryServiceUrl:k.geometryServiceUrl,printMapTaskUrl:k.printMapTaskUrl,
countryID:k.countryID,hierarchy:k.hierarchy,reportID:k.reportID,variables:k.variables}};return e(t.applyRunReportAndGetDataResults(g,n),function(){c(1);return n})})})})},_discoverPortal:function(a){var b=this;return w.getPortalInfo(a.portalUrl).then(function(d){a.geoenrichmentUrl=a.geoenrichmentUrl||d.portal.helperServices.geoenrichment.url;var h=c.id.findCredential(a.portalUrl),h=h&&h.token;r.setGeoenrichmentUrl(a.geoenrichmentUrl,h);b._infographicOptionsProvider.setServerUrl(a.geoenrichmentUrl,
h);a.geometryServiceUrl=a.geometryServiceUrl||d.portal.helperServices.geometry.url;E.setGeometryServiceUrl(a.geometryServiceUrl);a.printMapTaskUrl=a.printMapTaskUrl||d.portal.helperServices.printTask.url;A.setPrintMapTaskUrl(a.printMapTaskUrl)})},reportDataToSingleAreaReportData:function(a,b){var d=b.currentFeatureIndex||0,c=g.mixin({},a.fieldData);c.areaData=[c.areaData[d]];var h=[g.mixin({},a.analysisAreas[d])];n.removeGroupInfo(h);var e=a.infographicOptions&&this._infographicOptionsProvider.getInfographicOptionsFromJson(a.infographicOptions.toJsonAt(d)),
l=a.attachmentsStore;return{isMultiFeature:!1,reportTitle:b.reportTitle,templateJson:b.templateJson,reportObject:a.reportObject,fieldData:c,analysisAreas:h,combinedAreasInfo:null,reverseAnalysisAreasOnMap:!1,infographicOptions:e,attachmentsStore:l&&{getImages:function(){l.supportsMultipleAreas&&l.setCurrentAnalysisAreaIndex(d);return l.getImages()},getAttributes:function(){l.supportsMultipleAreas&&l.setCurrentAnalysisAreaIndex(d);return l.getAttributes()},getNotes:function(){l.supportsMultipleAreas&&
l.setCurrentAnalysisAreaIndex(d);return l.getNotes()}},geClient:a.geClient,templateVariableProvider:a.templateVariableProvider,config:a.config}},_getCurrentContext:function(){return this._currentContext},_onCreateReportStarted:function(){}})})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/_CommandSupport":function(){define("require dojo/_base/declare dojo/_base/lang esri/dijit/geoenrichment/Deferred esri/dijit/geoenrichment/when ../PlayerCommands ./supportClasses/GEUtil esri/dijit/geoenrichment/ReportPlayer/config".split(" "),
function(k,g,f,e,c,b,a,d){var h={};return g(null,{_commands:null,_commandIndex:0,_initCommandsPromise:null,constructor:function(){this._commands={}},_initCommands:function(){var l=this;if(this._initCommandsPromise)return c(this._initCommandsPromise);var f=new e;if(d.modules.exportCommands)k(["./commands/CreateHTMLCommand","./commands/CreatePDFCommand","./commands/CreateImageCommand","./commands/PrintReportCommand","./commands/CreatePlayerCommand"],function(d,c,e,l,g){h[b.HTML]=d;h[b.PDF]=c;h[b.IMAGE]=
e;h[b.PRINT]=l;h[b.DYNAMIC_HTML]=g;a.getInitPromise().then(f.resolve)});else return f.resolve();f.promise.then(function(){l._initCommandsPromise=!0});return this._initCommandsPromise=f.promise},registerCommand:function(a,b,d){function c(d){if(!d.isBrowserSupported||d.isBrowserSupported())e._commands[a]||(e._commands[a]={index:e._commandIndex++,id:a,label:b||d.label,command:d})}var e=this;if(d)c(d);else return this._initCommands().then(function(){var b=h[a];b&&c(new b)})},getCommands:function(){return this._initCommands().then(function(){var d=
[],h=this._commands[b.PDF],e;for(e in this._commands)d.push(this._commands[e]);d.sort(function(a,b){return a.index-b.index});return(e=this._getCurrentContext())&&e.geoenrichmentUrl&&h?c(a.hasCapability("FormatInfographics"),function(a){a||(d=d.filter(function(a){return a!==h}));return d}):c(d)}.bind(this))},getCommandById:function(a){return this._commands[a]&&this._commands[a].command},executeCommand:function(a,b,d,c){return this._initCommands().then(function(){d=f.mixin({printMapTaskUrl:this.printMapTaskUrl},
d);return this._commands[a]&&this._commands[a].command&&this._commands[a].command.execute(b,d||{},c)}.bind(this))},executeCommandOnData:function(a,b,d,c){return this._initCommands().then(function(){d=f.mixin({printMapTaskUrl:this.printMapTaskUrl},d);return this._commands[a]&&this._commands[a].command&&this._commands[a].command.executeOnData(this,b,d||{},c)}.bind(this))}})})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/GEUtil":function(){define("dojo/_base/declare dojo/_base/lang esri/dijit/geoenrichment/Deferred esri/dijit/geoenrichment/when esri/dijit/geoenrichment/promise/all dojox/uuid/generateRandomUuid esri/kernel esri/request esri/urlUtils esri/dijit/geoenrichment/utils/requests/FileContent esri/dijit/geoenrichment/utils/requests/UniversalClient esri/dijit/geoenrichment/utils/UrlUtil ./stdGeographies/StdGeographiesModel".split(" "),
function(k,g,f,e,c,b,a,d,h,l,n,m,p){function t(b){return y?y:(b=b&&a.id.findCredential(b)||a.id.credentials[0])&&b.token}function q(a,b){var d=h.urlToObject(a);b=g.mixin({f:"json",token:t(a),langCode:dojo.locale},d.query||{},b);for(var c in b)a=b[c],a instanceof l||a&&"object"===typeof a&&(b[c]=JSON.stringify("function"===typeof a.toJson?a.toJson():a));return{url:d.path,taskParams:b}}function r(a){B||(B=new u(w));return!a||B.initialized?B:B.initialize()}var u=k(null,{url:null,_geInfo:null,_capabilities:null,
_supportedOperations:null,constructor:function(a){this._capabilities={};this._supportedOperations={};this.url=a},_initDfd:null,initialized:!1,initialize:function(){var a=this;if(this._initDfd)return this._initDfd.promise;this._initDfd=new f;n.requestPublicFirst(q(this.url).url+"/Geoenrichment",{content:{f:"json"},handleAs:"json"},{retryOnAnyError:!0}).then(function(b){a.initWithJson(b)});return this._initDfd.promise},initWithJson:function(a){this._geInfo=a;this._capabilities={};this._supportedOperations=
{};a.capabilities&&a.capabilities.forEach(function(a){this._capabilities[a.toLowerCase()]=!0},this);a.supportedOperations&&a.supportedOperations.forEach(function(a){this._supportedOperations[a.toLowerCase()]=!0},this);this._initDfd=this._initDfd||new f;this._initDfd.resolve();this.initialized=!0},hasCapability:function(a){return!!this._capabilities[a.toLowerCase()]},addCapability:function(a){this._capabilities[a.toLowerCase()]=!0},supportsOperation:function(a){return!!this._supportedOperations[a.toLowerCase()]},
enrich:function(a){a=q(this.url,a);a.taskParams.AddDerivativeVariables="all";return d({url:a.url+"/Geoenrichment/Enrich",content:a.taskParams,handleAs:"json"}).then(function(a){return a.results[0].value.FeatureSet||[]})},stdGeographyQuery:function(a){a=q(this.url,a);return d({url:a.url+"/StandardGeographyQuery/execute",content:a.taskParams,handleAs:"json"}).then(function(a){return a.results[0].value.features||[]})},getDataCollections:function(a,b,c){c=q(this.url,c);return d({url:c.url+"/Geoenrichment/DataCollections/"+
a+(b?"/"+b:""),content:c.taskParams,handleAs:"json"}).then(function(a){return a.DataCollections})},_contriesCache:{},getCountries:function(){var a=q(this.url);return d({url:a.url+"/Geoenrichment/Countries",content:a.taskParams,handleAs:"json"}).then(function(a){return a.countries})},getCountryInfo:function(a){var b=this;if(!this._contriesCache[a]){var h=q(this.url);this._contriesCache[a]=d({url:h.url+"/Geoenrichment/Countries/"+a,content:h.taskParams,handleAs:"json"}).then(function(d){var h=d.countries[0],
l={};return c(h.hierarchies.map(function(d){return e(b._getStdGeographyModel(a,d.ID),function(a){l[d.ID]=a})})).then(function(){return{country:h,geographiesModels:l}})})}return this._contriesCache[a]},_stdModelCache:null,_getStdGeographyModel:function(a,b){this._stdModelCache=this._stdModelCache||{};var c=a+b;if(!this._stdModelCache[c]){var h=q(this.url);this._stdModelCache[c]=d({url:h.url+"/Geoenrichment/StandardGeographyLevels/"+a+"/"+b,content:h.taskParams,handleAs:"json"}).then(function(d){return new p({countryID:a,
hierarchyID:b,levels:d.geographyLevels[0].hierarchies[0].levels})})}return this._stdModelCache[c]},formatReport:function(a){a=q(this.url,a);return n.request({url:a.url,urlSuffix:"Geoenrichment/FormatReport"},{handleAs:"bin",content:a.taskParams}).then(function(a){return a&&a.data&&"text/plain"===a.data.type?null:a})},getReports:function(a){var b=q(this.url);return d({url:b.url+"/Geoenrichment/reports/"+a,content:b.taskParams,handleAs:"json"}).then(function(a){return a.reports})},_tasksHash:{},createReport:function(a){var d=
q(this.url,a),c=b();this._tasksHash[c]={taskName:"createReport",taskParams:g.clone(a)};return n.request({url:d.url,urlSuffix:"Geoenrichment/createReport"},{handleAs:"xml"===a.format?"text":"bin",content:d.taskParams}).then(function(a){return{taskID:c,result:a}})},consumeCredits:function(a){if(a=this._tasksHash[a])return a=g.clone(a),delete a.taskParams.forStorage,this[a.taskName](a.taskParams)},_dataLayersCache:{},getLayerInfos:function(a){this._dataLayersCache[a]||(this._dataLayersCache[a]=this._getLayerInfos(a));
return this._dataLayersCache[a]},_getLayerInfos:function(a){var b=q(this.url);return d({url:b.url+"/Geoenrichment/DataLayers/"+a,content:b.taskParams,handleAs:"json"}).then(function(a){return a&&a.layers||[]}).otherwise(function(a){console.log(a);return[]})},getLayerInfo:function(a,b){var d=a+"_"+b;this._dataLayersCache[d]||(this._dataLayersCache[d]=this._getLayerInfo(a,b));return this._dataLayersCache[d]},_getLayerInfo:function(a,b){var c=q(this.url);return d({url:c.url+"/Geoenrichment/DataLayers/"+
a+"/"+b,content:c.taskParams,handleAs:"json"}).then(function(a){return a&&a.layer}).otherwise(function(a){console.log(a);return null})}}),v={},w,y,A=new f;v.setGeoenrichmentUrl=function(a,b){(w=a||w)&&m.registerCORS(w);y=b||y;!A.promise.isFulfilled()&&A.resolve()};v.canMakeRequests=function(){return!!w};v.getInitPromise=function(){return A.promise};v.GEClient=u;var B;v.getClient=function(){return r()};v.initialize=function(){return r(!0)};v.initWithJson=function(a,b){v.setGeoenrichmentUrl(a);r().initWithJson(b)};
v.enrich=function(a){return r().enrich(a)};v.stdGeographyQuery=function(a){return r().stdGeographyQuery(a)};v.getDataCollections=function(a,b,d){return r().getDataCollections(a,b,d)};v.formatReport=function(a){return r().formatReport(a)};v.createReport=function(a){return r().createReport(a)};v.consumeCredits=function(a){return r().consumeCredits(a)};v.getLayerInfos=function(a){return r().getLayerInfos(a)};v.hasCapability=function(a){return e(r(!0),function(){return B&&B.hasCapability(a)})};v.addCapability=
function(a){return r().addCapability(a)};v.supportsOperation=function(a){return e(r(!0),function(){return B&&B.supportsOperation(a)})};v.getCountryInfo=function(a){return r().getCountryInfo(a)};return v})},"dojox/uuid/generateRandomUuid":function(){define(["./_base"],function(){dojox.uuid.generateRandomUuid=function(){function k(){for(var b=Math.floor(Math.random()%1*Math.pow(2,32)).toString(16);8>b.length;)b="0"+b;return b}var g=k(),f=k(),f=f.substring(0,4)+"-4"+f.substring(5,8),e=k(),e="8"+e.substring(1,
4)+"-"+e.substring(4,8),c=k();return(g+"-"+f+"-"+e+c).toLowerCase()};return dojox.uuid.generateRandomUuid})},"dojox/uuid/_base":function(){define(["dojo/_base/kernel","dojo/_base/lang"],function(k){k.getObject("uuid",!0,dojox);dojox.uuid.NIL_UUID="00000000-0000-0000-0000-000000000000";dojox.uuid.version={UNKNOWN:0,TIME_BASED:1,DCE_SECURITY:2,NAME_BASED_MD5:3,RANDOM:4,NAME_BASED_SHA1:5};dojox.uuid.variant={NCS:"0",DCE:"10",MICROSOFT:"110",UNKNOWN:"111"};dojox.uuid.assert=function(g,f){if(!g)throw f||
(f="An assert statement failed.\nThe method dojox.uuid.assert() was called with a 'false' value.\n"),Error(f);};dojox.uuid.generateNilUuid=function(){return dojox.uuid.NIL_UUID};dojox.uuid.isValid=function(g){g=g.toString();var f=k.isString(g)&&36==g.length&&g==g.toLowerCase();if(f){g=g.split("-");var f=5==g.length&&8==g[0].length&&4==g[1].length&&4==g[2].length&&4==g[3].length&&12==g[4].length,e;for(e in g)var c=parseInt(g[e],16),f=f&&isFinite(c)}return f};dojox.uuid.getVariant=function(g){if(!dojox.uuid._ourVariantLookupTable){var f=
dojox.uuid.variant,e=[];e[0]=f.NCS;e[1]=f.NCS;e[2]=f.NCS;e[3]=f.NCS;e[4]=f.NCS;e[5]=f.NCS;e[6]=f.NCS;e[7]=f.NCS;e[8]=f.DCE;e[9]=f.DCE;e[10]=f.DCE;e[11]=f.DCE;e[12]=f.MICROSOFT;e[13]=f.MICROSOFT;e[14]=f.UNKNOWN;e[15]=f.UNKNOWN;dojox.uuid._ourVariantLookupTable=e}g=g.toString();g=g.charAt(19);g=parseInt(g,16);dojox.uuid.assert(0<=g&&16>=g);return dojox.uuid._ourVariantLookupTable[g]};dojox.uuid.getVersion=function(g){dojox.uuid.assert(dojox.uuid.getVariant(g)==dojox.uuid.variant.DCE,"dojox.uuid.getVersion() was not passed a DCE Variant UUID.");
g=g.toString();g=g.charAt(14);return parseInt(g,16)};dojox.uuid.getNode=function(g){dojox.uuid.assert(dojox.uuid.getVersion(g)==dojox.uuid.version.TIME_BASED,"dojox.uuid.getNode() was not passed a TIME_BASED UUID.");g=g.toString();return g.split("-")[4]};dojox.uuid.getTimestamp=function(g,f){dojox.uuid.assert(dojox.uuid.getVersion(g)==dojox.uuid.version.TIME_BASED,"dojox.uuid.getTimestamp() was not passed a TIME_BASED UUID.");g=g.toString();f||(f=null);switch(f){case "string":case String:return dojox.uuid.getTimestamp(g,
Date).toUTCString();case "hex":var e=g.split("-");g=e[0];f=e[1];e=e[2];e=e.slice(1);g=e+f+g;dojox.uuid.assert(15==g.length);return g;case null:case "date":case Date:return e=g.split("-"),g=parseInt(e[0],16),f=parseInt(e[1],16),e=(parseInt(e[2],16)&4095)<<16,e=4294967296*(e+f),e+=g,new Date(e/1E4-122192928E5);default:dojox.uuid.assert(!1,"dojox.uuid.getTimestamp was not passed a valid returnType: "+f)}};return dojox.uuid})},"esri/dijit/geoenrichment/utils/requests/FileContent":function(){define(["dojo/_base/declare",
"esri/dijit/geoenrichment/utils/DataUtil"],function(k,g){function f(c){return c?/^image\//.test(c)?"base64":/^text\//.test(c)?"text":/application\/json/.test(c)?"json":"bin":"bin"}var e=k(null,{data:null,filename:null,contentType:"application/octet-stream",contentTransferEncoding:"binary",constructor:function(c,b,a){this.data=c;b&&(this.contentType=b);a&&(this.contentTransferEncoding=a)},getBase64Data:function(){return this.data?"base64"==this.contentTransferEncoding?this.data:g.base64FromByteSource(this.data):
null},toString:function(){return this.filename||"\x3cunknown\x3e"}});e.fromArrayBuffer=function(c,b){return new e(g.binaryStringFromByteSource(c),b)};e.fromBlob=function(c,b){return g.arrayBufferFromBlob(c).then(function(a){return new e(g.binaryStringFromByteSource(a),b||c.type)})};e.fromFileData=function(c,b,a){a=a||g.getContentType(c);if("object"==typeof b&&window.ArrayBuffer&&(b instanceof ArrayBuffer||b.buffer instanceof ArrayBuffer))b=g.binaryStringFromByteSource(b.buffer||b);else{var d=f(a);
"json"==d&&"object"==typeof b&&(b=JSON.stringify(b));if("string"!=typeof b)throw Error("Wrong file data.");switch(d){case "base64":b=atob(b);break;case "text":case "json":b=unescape(encodeURIComponent(b))}}b=new e(b,a);b.filename=c;return b};e.getContentConversionType=f;return e})},"esri/dijit/geoenrichment/utils/DataUtil":function(){define(["esri/dijit/geoenrichment/Deferred","esri/dijit/geoenrichment/when"],function(k,g){function f(a){return"string"==typeof a?{source:a,getLength:function(){return this.source.length},
getByte:function(a){return this.source.charCodeAt(a)&255}}:window.ArrayBuffer&&a instanceof ArrayBuffer?{source:new Uint8Array(a),getLength:function(){return this.source.byteLength},getByte:function(a){return this.source[a]}}:a}function e(a){for(var b=a.length,c=new Uint8Array(a.length),e=0;e<b;e++)c[e]=a.charCodeAt(e);return c}function c(a,b){a=new Uint8Array(a);b=Math.min(b,a.byteLength);for(var d="",c=0;c<b;c++)d+=String.fromCharCode(a[c]);return d}var b={arrayBufferFromBlob:function(a){var b=
new k,c=new FileReader;c.onloadend=function(){c.error?b.reject(c.error):b.resolve(c.result)};c.readAsArrayBuffer(a);return b.promise},arrayBuffersToBlob:function(a,b){return new Blob(a,{type:b||"application/octet-stream"})},binaryStringFromByteSource:function(a){if("string"==typeof a)return a;a=f(a);for(var b=a.getLength(),c=b%4,b=b-c,e="",g=0,m,p,k,q;g<b;)m=a.getByte(g++),p=a.getByte(g++),k=a.getByte(g++),q=a.getByte(g++),e+=String.fromCharCode(m,p,k,q);1==c?e+=String.fromCharCode(a.getByte(g)):
2==c?e+=String.fromCharCode(a.getByte(g),a.getByte(g+1)):3==c&&(e+=String.fromCharCode(a.getByte(g),a.getByte(g+1),a.getByte(g+2)));return e},base64FromByteSource:function(a){a=f(a);for(var b=a.getLength(),c=b%3,b=b-c,e,g,m,p,k="",q=0;q<b;q+=3)p=a.getByte(q)<<16|a.getByte(q+1)<<8|a.getByte(q+2),e=p>>18&63,g=p>>12&63,m=p>>6&63,p&=63,k+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[e]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[g]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[m]+
"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[p];1==c?(p=a.getByte(q),k+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[p>>2&63]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[p<<4&63]+"\x3d\x3d"):2==c&&(p=a.getByte(q)<<8|a.getByte(q+1),k+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[p>>10&63]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[p>>4&63]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[p<<
2&63]+"\x3d");return k},base64FromJson:function(a){return btoa(unescape(encodeURIComponent("string"===typeof a?a:JSON.stringify(a))))}};b.binaryStringToByteArray=e;b.base64ToByteArray=function(a){return e(atob(a))};b.getFirstBytes=function(a,b){var d;if("string"==typeof a)d=a.substr(0,b);else if(window.ArrayBuffer&&a instanceof ArrayBuffer)d=c(a,b);else if(window.Blob&&a instanceof Blob){d=new k;var e=new FileReader;e.onloadend=function(){e.error?d.resolve(""):d.resolve(c(e.result,b))};e.readAsArrayBuffer(a.slice(0,
b))}return g(d||"")};b.isBase64=function(a){return a&&0==a.length%4&&/^[ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+\/]+$/.test(a.replace(/={0,2}$/,""))};b.getContentType=function(a){a=b.getFileExtension(a);if(null===a)return null;switch(a){case "png":return"image/png";case "jpg":case "jpeg":return"image/jpeg";case "gif":return"image/gif";case "json":return"application/json";case "txt":return"text/plain";case "xml":return"text/xml";default:return null}};b.getFileExtension=function(a){var b=
a.lastIndexOf(".")+1;return b?a.substr(b).toLowerCase():null};return b})},"esri/dijit/geoenrichment/utils/requests/UniversalClient":function(){define("dojo/_base/lang esri/dijit/geoenrichment/Deferred dojo/request/xhr dojo/io-query dojo/sniff esri/dijit/geoenrichment/when esri/kernel esri/config esri/lang esri/urlUtils ../UrlUtil ./BinaryData ./FileContent ./MultipartDataBuilder ./ErrorUtil".split(" "),function(k,g,f,e,c,b,a,d,h,l,n,m,p,t,q){function r(a,b){if(b)this.reject(b);else{b=a.xhr;var d=
b.getResponseHeader&&b.getResponseHeader("Content-Type");a.status=b.status;a.data=new m(b.response||b.responseBody||b.responseText,d);this.resolve(a)}}var u=0,v=c("safari"),w=function(a){"string"===typeof a?this.url=a:"object"===typeof a&&k.mixin(this,a)};w.prototype={url:null,preventCache:null,usePost:!1,timeout:0,multipartThreshold:0,useCommonAuth:!1,useProxy:!1,allowSSL:null,send:function(a,b){return this.sendUrlRequest(this.prepareUrlRequest(a,b),"UniversalClient.send")},prepareUrlRequest:function(b,
c){"string"===typeof b?b={urlSuffix:b}:b||(b={});c||(c={});var f=b.url||this.url;b=b.urlSuffix;f||(f=b,b=null);if(!f)throw Error("URL is missing.");var g=l.urlToObject(f),f=n.combine(g.path,b);b=g.query||{};"object"===typeof c.content&&(b=k.mixin(b,c.content));g=c.requireSSL;!0!==g&&!1===this.allowSSL&&(g=!1);!1!==g&&!0===this.allowSSL&&/^https/i.test(window.location.protocol)&&(g=!0);if(a.id){var m=a.id.findCredential(f);!m&&this.useCommonAuth&&(m="string"==typeof this.useCommonAuth?a.id.findCredential(this.useCommonAuth):
a.id.credentials[0]);m&&(b.token||!1===b.token||(b.token=m.token),m.ssl&&!1!==g&&(g=!0))}!0===g&&(f=n.toHttpsUrl(f));!1===b.token&&delete b.token;var q=c.handleAs||"json";"json"===q&&(b.f="json");var m=(c.sendAs||(c.usePost||this.usePost||b.token?"post":"get")).toLowerCase(),g="multipart"==m?!0:c.sendAs||c.sizeLimit?!1:null,r=0,w;for(w in b){var y=b[w];if(y instanceof p)g=!0;else{var B=0,A=w.length;"object"===typeof y?c.allowMultipleValues&&Array.isArray(y)?b[w]=y.map(function(a){a="object"===typeof a?
JSON.stringify(a):a;B+=A+a+2;return a}):(b[w]=JSON.stringify(y),B+=A+b[w].length+2):B=A+(y?y.length:0)+2;!g&&0<this.multipartThreshold&&(r+=B)}}!1!==g&&0<this.multipartThreshold&&r>this.multipartThreshold&&(g=!0);if(c.useProxy||!l.hasSameOrigin(f,window.location.href)&&this.useProxy&&!c.hasOwnProperty("useProxy")){var I=n.getProxyUrl();I&&(f=I+"?"+f)}else l.getProxyRule(f)&&(f=l.getProxyRule(f).proxyUrl+"?"+f);w=(w=c.hasOwnProperty("preventCache")?c.preventCache:this.preventCache)||null===w&&I||v?
"_ts\x3d"+(new Date).getTime()+u++:"";I={handleAs:q};if(q=Number(h.isDefined(c.timeout)?c.timeout:this.timeout))I.timeout=q;q="get"!==m||g;m=g?null:e.objectToQuery(b);q||(q=m.length+f.length+w.length+1>=d.defaults.io.postLength);I.method=q?"POST":"GET";I.headers={"X-Requested-With":null};I.headers["Content-Type"]="undefined"!==typeof c.contentType?c.contentType:"application/x-www-form-urlencoded; charset\x3dutf-8";g?(g=new t,g.addVariables(b),g.build(I)):q?I.data=m:m&&(f+="?"+m,w&&(f+="\x26"+w),w=
null);!m&&w&&(f+="?"+w);return{url:f,options:I,sizeLimit:c.sizeLimit}},sendUrlRequest:function(a,d){var c="string"===typeof a.options.data?a.options.data.length:null;if(a.sizeLimit&&c&&("function"===typeof a.sizeLimit?a.sizeLimit(c):c>a.sizeLimit))return(new g).reject(Error("SIZE_LIMIT_EXCEEDED"));d=d||"UniversalClient.sendUrlRequest";var h=a.deferred||new g;if(c="bin"===a.options.handleAs)a.options.handleAs="blob";var e=f(a.url,a.options,!0);c&&(e.handleResponse=r);var l=this;e.then(function(c){c=
"json"===a.options.handleAs&&c&&q.parseError(c)||c;if(c instanceof Error){var e;!0===l.useCommonAuth&&498===c.code&&(e=w.handleInvalidTokenError(c));b(e)["finally"](function(){h.reject(c)})}else h.resolve(l._makeResponse(d,c))},function(a){h.reject(q.makeError(a))});return h.promise},requestToUrl:function(a){if(a.options.headers&&a.options.headers["Content-Type"]&&0==a.options.headers["Content-Type"].indexOf("multipart/form-data"))return null;var b=a.url;if(a=a.options.data){if(b.length+a.length>=
d.defaults.io.postLength)return null;b+="?"+a}return b},_makeResponse:function(a,b){return b}};w.makeError=q.makeError;w.handleInvalidTokenError=function(a){};var y=new w({useCommonAuth:!0,allowSSL:!0});w.request=function(a,b){return y.send(a,b).otherwise(function(d){var c=b&&b.content&&b.content.token;if(498!==d.code||null!=c)return(new g).reject(d);b=k.mixin({},b);b.content=k.mixin({},b.content);b.content.token=!1;return y.send(a,b)})};w.requestPublicFirst=function(a,b,d){var c=k.mixin({},b);c.content=
k.mixin({},b.content);c.content.token=!1;return y.send(a,c).otherwise(function(c){return d&&d.retryOnAnyError||499===c.code||403===c.code?y.send(a,b):(new g).reject(c)})};return w})},"esri/dijit/geoenrichment/utils/requests/BinaryData":function(){define(["dojo/_base/declare"],function(k){return k(null,{data:null,type:null,constructor:function(g,f){this.type=f||g&&g.type||null;this.data=g}})})},"esri/dijit/geoenrichment/utils/requests/MultipartDataBuilder":function(){define(["dojo/_base/declare","dojo/request/util",
"esri/lang","./FileContent"],function(k,g,f,e){var c=k(null,{data:null,constructor:function(a){this.data=a}}),b=g.parseArgs;g.parseArgs=function(a,h,e){h.data&&h.data instanceof c&&(h.data=h.data.data,e=!0);return b(a,h,e)};var a=g.deepCreate;g.deepCreate=function(b,h){return h instanceof c?new c(h.data):a(b,h)};return k(null,{addVariables:function(a){for(var b in a)this.addVariable(b,a[b])},addVariable:function(a,b){f.isDefined(b)&&(b instanceof e?this._writeFileContent(a,b):this._writeVariable(a,
b.toString()))},build:function(a){this._writeBoundary(!0);a.data=new c(this._prepareBinaryData());var b=a.headers||{};b["Content-Type"]="multipart/form-data; boundary\x3d"+this._dataProvider.boundary;a.headers=b;this._dataProvider=null},_prepareBinaryData:function(){var a=this._dataProvider.buffer;if(!window.Uint8Array)return a;for(var b=a.length,c=new Uint8Array(new ArrayBuffer(b)),e=0;e<b;e++)c[e]=a.charCodeAt(e);return c},_dataProvider:null,_getDataProvider:function(){if(!this._dataProvider){for(var a=
"",b=0;32>b;b++)a+=String.fromCharCode(Math.floor(97+25*Math.random()));this._dataProvider={buffer:"",boundary:a}}return this._dataProvider},_writeVariable:function(a,b){this._writeBoundary();this._writeContentDisposition(a);this._writeLineBreak();this._writeData(this._toUTF8(b));this._writeLineBreak()},_writeFileContent:function(a,b){this._writeBoundary();this._writeContentDisposition(a,b.filename);b.contentType&&(this._writeData("Content-Type: "+b.contentType),this._writeLineBreak());b.contentTransferEncoding&&
(this._writeData("Content-Transfer-Encoding: "+b.contentTransferEncoding),this._writeLineBreak());this._writeLineBreak();this._writeData(b.data);this._writeLineBreak()},_writeBoundary:function(a){this._writeDoubleDash();this._writeData(this._getDataProvider().boundary);a?this._writeDoubleDash():this._writeLineBreak()},_writeContentDisposition:function(a,b){b=b?'"; filename\x3d"'+this._toUTF8(b.replace(/"/g,"'")):"";this._writeData('Content-Disposition: form-data; name\x3d"'+this._toUTF8(a)+b+'"');
this._writeLineBreak()},_writeDoubleDash:function(){this._writeData("--")},_writeLineBreak:function(){this._writeData("\r\n")},_writeData:function(a){this._getDataProvider().buffer+=a},_toUTF8:function(a){return unescape(encodeURIComponent(a))}})})},"esri/dijit/geoenrichment/utils/requests/ErrorUtil":function(){define(["esri/dijit/geoenrichment/Deferred","esri/dijit/geoenrichment/when","require"],function(k,g,f){function e(b){var a=new k;f(["./DataResource"],function(d){g((new d(b)).getFileContent(),
a.resolve,a.reject)});return a.promise}var c={getErrorFromBin:function(b){var a=/^text\/|^application\/json/;return b&&b.type&&!a.test(b.type)?null:g(b&&e(b),function(b){if(b){if(b.hasOwnProperty("contentType")&&!a.test(b.contentType))return null;try{var d=JSON.parse(decodeURIComponent(escape(b.data))),e=c.parseError(d);if(e)return e;if(d.messages&&d.messages.length){var f=d.messages[0];if("esriJobMessageTypeError"==f.type)return Error(f.description)}}catch(m){}}return Error("Binary data error.")})},
parseError:function(b){var a;b.error?a=c.makeError(b.error):"error"===b.status&&(a=c.makeError(b));a&&a.code&&null==a.httpCode&&(a.httpCode=a.code);return a},makeError:function(b){null==b?b=Error():"string"===typeof b&&(b={message:b});if(!(b instanceof Error)&&"object"===typeof b){var a=b;b=Error();a.code&&(b.code=a.code);a.message&&(b.message=a.message);a.details&&(b.details=a.details)}b.log=dojoConfig.isDebug;return b}};return c})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/_SerializationSupport":function(){define("require dojo/_base/declare dojo/_base/lang esri/dijit/geoenrichment/Deferred esri/dijit/geoenrichment/when esri/dijit/geoenrichment/promise/all ./supportClasses/areas/AnalysisAreaJsonUtil ./supportClasses/areas/AnalysisAreaUtil ./supportClasses/PortalManager ../core/infographics/InfographicTypes ../core/supportClasses/templateJsonUtils/query/TemplateJsonQueryUtil esri/dijit/geoenrichment/ReportPlayer/countryConfig esri/dijit/geoenrichment/ReportPlayer/_devConfig".split(" "),
function(k,g,f,e,c,b,a,d,h,l,n,m,p){function t(){var a=new e;k("./supportClasses/attachments/AttachmentsStoreSerializer ./supportClasses/GEUtil ../core/supportClasses/templateJsonUtils/TemplateJsonSerializer ../core/supportClasses/templateJsonUtils/TemplateJsonAnalyzer ../core/infographics/utils/InfographicJsonUtil ../core/conversion/portalToEditorUtils/variables/PlayerVariableProvider ../core/infographics/InfographicTypes ./commands/mapToImage/MapToURLUtil esri/dijit/geoenrichment/utils/ProjectionUtil".split(" "),
function(b,d,c,h,e,f,g,n,m){q=b;r=d;u=c;v=e;w=f;l=g;y=n;A=m;a.resolve()});return a.promise}var q,r,u,v,w,y,A;return g(null,{reportDataToJson:function(b,d){var h=this;d=d||{};var e=!1;n.processTemplateFieldInfos(b.templateJson,function(a){a.isInfographic&&a.infographicJson.type===l.ATTACHMENTS&&(e=!0)});return t().then(function(){return c(null,function(){return c(b.attachmentsStore&&q.getAttachmentsStoreJson(b.attachmentsStore,{numAreas:b.analysisAreas.length,saveImages:e}),function(c){var e=f.mixin({},
b.config);!1!==d.forceFixedDataMode&&delete e.geoenrichmentUrl;c={isMultiFeature:b.isMultiFeature,reportTitle:b.reportTitle,templateJson:u.serialize(b.templateJson),reportObject:h._prepareReportObjectJson(b.reportObject),fieldData:b.fieldData,analysisAreas:a.areasToJson(b.analysisAreas),combinedAreasInfo:b.combinedAreasInfo&&a.combinedAreasInfoToJson(b.combinedAreasInfo),reverseAnalysisAreasOnMap:b.reverseAnalysisAreasOnMap,infographicOptions:b.infographicOptions&&b.infographicOptions.toJson(),attachmentsStore:c,
templateVariableProvider:b.templateVariableProvider&&b.templateVariableProvider.toJson(),config:e,countryConfig:m.toJson(),mapImageInfos:d.mapImageInfos,customLogo:b.customLogo};p.logData&&(console.log("_SerializationSupport.js \x3d\x3e reportDataJson"),console.log(c));return c})})})},_prepareReportObjectJson:function(a){var b={},d;for(d in a)a[d]&&"object"!==typeof a[d]&&(b[d]=a[d]);return b},_enrichInfographicVariables:function(a,d){var h=a.infographicOptions;return c(h.getOptions().getItems(h.countryID),
function(){var c=[];d.forEach(function(b){b.isInfographic&&b.variables&&a.analysisAreas.forEach(function(a,d){h.setCurrentAnalysisAreaIndex(d);var f=new e;a=h.createGeoenrichment({currentFeatureIndex:d});a.onDone=function(){f.resolve()};a.country=h.countryID;d=l.supportsComparison(b.type);a.setGeoLevels(d?v.getSubLevels(b):null,d?v.getHighestLevel(b):null);a.setVariables(b.variables);a.setStudyArea(h.studyArea);c.push(f.promise)})});return b(c)})},reportDataFromJson:function(b){var e=this;return t().then(function(){var l=
b.fieldData;l.featureData&&(l.areaData=l.featureData.map(function(a){return{mainCalculator:{data:a}}}),delete l.featureData);var f={isMultiFeature:b.isMultiFeature,reportTitle:b.reportTitle,templateJson:u.deserialize(b.templateJson),reportObject:b.reportObject,fieldData:l,analysisAreas:a.areasFromJson(b.analysisAreas),combinedAreasInfo:b.combinedAreasInfo&&a.combinedAreasInfoFromJson(b.combinedAreasInfo)||{},reverseAnalysisAreasOnMap:b.reverseAnalysisAreasOnMap,infographicOptions:b.infographicOptions&&
e._infographicOptionsProvider.getInfographicOptionsFromJson(b.infographicOptions),attachmentsStore:b.attachmentsStore&&q.getAttachmentsStoreFromJson(b.attachmentsStore),templateVariableProvider:b.templateVariableProvider&&new w(b.templateVariableProvider),config:b.config||{},mapImageInfos:b.mapImageInfos,customLogo:b.customLogo};d.populateCombinedAreasInfo(f.combinedAreasInfo,f.analysisAreas);r.setGeoenrichmentUrl(null);l=!1;f.config.geometryServiceUrl?A.setGeometryServiceUrl(f.config.geometryServiceUrl):
l=!0;f.config.printMapTaskUrl?y.setPrintMapTaskUrl(f.config.printMapTaskUrl):l=!0;m.fromJson(b.countryConfig);return c(l&&h.tryConfigureServicesFromAGOLPublic()).then(function(){return f})})}})})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/areas/AnalysisAreaJsonUtil":function(){define(["esri/graphic","esri/dijit/PopupTemplate"],function(k,g){function f(b,a){if(!b)return null;b.getLayer()&&(b=new k(b.geometry,b.symbol,b.attributes,b.infoTemplate));b=b.toJson();a&&delete b.infoTemplate;
return b}function e(b){if(!b)return null;if(b instanceof k)return b;var a=b.infoTemplate&&new g(b.infoTemplate);delete b.infoTemplate;b=new k(b);a&&b.setInfoTemplate(a);return b}function c(b){var a={},d;for(d in b){var c=b[d];if("string"===typeof c||"number"===typeof c&&!isNaN(c))a[d]=c}return a}return{areasToJson:function(b,a){var d=a&&a.excludeInfoTemplate;return b.map(function(a){var b=c(a);b.feature=f(a.feature,d);b.location=a.location&&f(a.location,d);b.additionalFeatures=a.additionalFeatures&&
a.additionalFeatures.map(function(a){return f(a,d)});b.geographies=a.geographies;b.buffer=a.buffer;b.featureServiceQueryInfos=a.featureServiceQueryInfos;return b})},combinedAreasInfoToJson:function(b){var a=c(b);a.groups=b.groups&&b.groups.map(function(a){var b=c(a);b.indexes=a.indexes.slice();b.location=a.location&&f(a.location);b.additionalFeatures=a.additionalFeatures&&a.additionalFeatures.map(f);return b});return a},areasFromJson:function(b){return b.map(function(a){var b=c(a);b.feature=e(a.feature);
b.location=a.location&&e(a.location);b.additionalFeatures=a.additionalFeatures&&a.additionalFeatures.map(e);b.geographies=a.geographies;b.buffer=a.buffer;b.featureServiceQueryInfos=a.featureServiceQueryInfos;return b})},combinedAreasInfoFromJson:function(b){var a=c(b);a.groups=b.groups&&b.groups.map(function(a){var b=c(a);b.indexes=a.indexes.slice();b.location=a.location&&e(a.location);b.additionalFeatures=a.additionalFeatures&&a.additionalFeatures.map(e);return b});return a}}})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/PortalManager":function(){define(["esri/dijit/geoenrichment/when",
"esri/arcgis/Portal","../../../utils/requests/UniversalClient","../commands/mapToImage/MapToURLUtil","../../../utils/ProjectionUtil"],function(k,g,f,e,c){var b={_cache:{},getPortalInfo:function(a){if(!b._cache[a]){var d=new g.Portal(a);b._cache[a]=k(d.signIn(),function(a){return{user:a,portal:d}})}return b._cache[a]},tryConfigureServicesFromAGOLPublic:function(){return f.requestPublicFirst("https://www.arcgis.com/sharing/rest/portals/self",{},{retryOnAnyError:!1}).then(function(a){if(a=a&&a.helperServices)a.geometry&&
c.setGeometryServiceUrl(a.geometry.url),a.printTask&&e.setPrintMapTaskUrl(a.printTask.url)}).otherwise(function(a){console.log(a)})}};return b})},"esri/arcgis/Portal":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/kernel dojo/_base/Deferred dojo/_base/array dojo/_base/sniff require ../kernel ../lang ../request ../urlUtils ../Evented ../IdentityManager".split(" "),function(k,g,f,e,c,b,a,d,h,l,n,m){var p={options:{disableIdentityLookup:!0},requestParams:{f:"json"}},t=function(a){function b(b){a[b]||
(a[b]=function(){var d=arguments;return e.when(a,function(a){Array.prototype.unshift.call(d,a.results||a);return t(c[b].apply(c,d))})})}if(!a)return a;a.then&&(a=g.delegate(a));a.total||(a.total=e.when(a,function(a){return h.isDefined(a.total)?a.total:a.length||0}));b("forEach");b("filter");b("map");b("some");b("every");return a},q={useSSL:function(a,b){var d=p&&p.self||{};if(d&&!d.isPortal)return-1!==a.indexOf("https:")||d.allSSL?b.replace("http:","https:"):b;var c=q.getLocation(b);return-1<d.portalHostname.toLowerCase().indexOf(c.hostname.toLowerCase())&&
c.port&&"80"!==c.port&&"443"!==c.port?(b=c.pathname,b=0===b.indexOf("/")?b:"/"+b,d.allSSL||-1<a.indexOf("https:")?"https://"+c.hostname+(d.httpsPort&&"443"!==d.httpsPort?":"+d.httpsPort:"")+b+c.search:"http://"+c.hostname+(d.httpPort&&"80"!==d.httpPort?":"+d.httpPort:"")+b+c.search):-1!==a.indexOf("https:")||d.allSSL?b.replace("http:","https:"):b},formatUrl:function(a){var b=p.currentToken;return-1!==a.indexOf("null")?null:q.useSSL(window.location.protocol,b?a+(-1!==a.indexOf("?")?"\x26":"?")+("token\x3d"+
b):a)},getLocation:function(a){var b=document.createElement("a");b.href=a;return{protocol:b.protocol,hostname:b.hostname,port:b.port,pathname:b.pathname,search:b.search,hash:b.hash,host:b.host}},resultsToTypedArray:function(a,b,d){d=d?d.listings||d.notifications||d.userInvitations||d.tags||d.items||d.groups||d.comments||d.provisions||d.results||d:[];return c.map(d,function(d){d=g.mixin(d,b||{});return a?new a(d):d})},clearFieldsFromObject:function(a,b){var d,c=a.length;if(g.isArray(a))for(d=0;d<c;d++)delete b[a[d]];
else for(d in a)delete b[d];return b},requestToTypedArray:function(a,b,d,c,h){return t(q.request(a,b,d).then(g.partial(q.resultsToTypedArray,c,h)))},request:function(a,b,d){var c;b&&b.portal&&delete b.portal;b&&b.form&&(c=b.form,delete b.form);b=g.mixin(g.mixin({},b||{}),p.requestParams);d=g.mixin(d||{},p.options);return l({url:q.useSSL(window.location.protocol,a.url||a),content:b,callbackParamName:"callback",timeout:d&&d.timeout||0,form:c},d)},formatQueryParams:function(a,b,d){a=g.mixin(g.mixin({},
a),g.isString(b)?{q:b}:b||{});a.q=!d&&p.extraQuery?"("+a.q+")"+p.extraQuery:a.q;return a}},r=k([],{declaredClass:"esri.arcgis.PortalComment",constructor:function(a){g.mixin(this,a);this.url=this.item.itemUrl+"/comments/"+this.id;this.created=this.created?new Date(this.created):null}}),u=k([],{declaredClass:"esri.arcgis.PortalRating",constructor:function(a){g.mixin(this,a);this.url=this.item.itemUrl+"/rating";this.created=this.created?new Date(this.created):null}}),v=k([],{declaredClass:"esri.arcgis.PortalItem",
constructor:function(a){g.mixin(this,a);this.folderId=this.ownerFolder||this.folderId;this.itemUrl=(this.portal&&this.portal.portalUrl)+"content/items/"+this.id;this.userItemUrl=this.hasOwnProperty("ownerFolder")?this.itemUrl.replace("/content/","/content/users/"+this.owner+(this.folderId?"/"+this.folderId:"")+"/"):null;this.itemDataUrl=q.formatUrl(this.itemUrl+"/data");this.thumbnailUrl=q.formatUrl(this.itemUrl+"/info/"+this.thumbnail);this.displayName=this._getDisplayName();this.iconUrl=this._getIconUrl();
this.isPremiumContent=this._getIsPremiumContent();this.created=this.created?new Date(this.created):null;this.uploaded=this.uploaded?new Date(this.uploaded):null;this.modified=this.modified?new Date(this.modified):null},getTypeInfo:function(){var a=this.type;return{source:-1<c.indexOf(this.typeKeywords||[],"ArcGIS Server")||"Feature Collection"===a?a:null,displayName:this.displayName,iconUrl:this.iconUrl,isPremiumContent:this.isPremiumContent,premiumIconUrl:this._getPremiumIconUrl()}},addComment:function(a){var b=
g.isString(a)?{comment:a}:a;return q.request(this.itemUrl+"/addComment",b,{usePost:!0}).then(g.hitch(this,function(a){return new r(g.mixin(b,{id:a.commentId,item:this}))}))},updateComment:function(a){if(a&&a.url&&a.comment)return q.request(a.url+"/update",{comment:a.comment},{usePost:!0}).then(function(b){a.id=b.commentId;return a});throw Error();},getComments:function(){return q.requestToTypedArray(this.itemUrl+"/comments",null,null,r,{item:this})},deleteComment:function(a){if(a&&a.url)return q.request(a.url+
"/delete",null,{usePost:!0});throw Error();},addRating:function(a){var b=g.isObject(a)?a:{rating:parseFloat(a)};return q.request(this.itemUrl+"/addRating",b,{usePost:!0}).then(g.hitch(this,function(a){return new u(g.mixin(b,{id:a.ratingId,item:this}))}))},getRating:function(){return q.request(this.itemUrl+"/rating").then(g.hitch(this,function(a){return new u(g.mixin(a,{item:this}))}))},deleteRating:function(){return q.request(this.itemUrl+"/deleteRating",null,{usePost:!0})},_getDisplayName:function(){var a=
this.type,b=this.typeKeywords||[],d=a;"Feature Service"===a||"Feature Collection"===a?d=-1<c.indexOf(b,"Table")?"Table":-1<c.indexOf(b,"Route Layer")?"Route Layer":-1<c.indexOf(b,"Markup")?"Markup":"Feature Layer":"Image Service"===a?d=-1<c.indexOf(b,"Elevation 3D Layer")?"Elevation Layer":-1<c.indexOf(b,"Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":"Scene Service"===a?d="Scene Layer":"Scene Package"===a?d="Scene Layer Package":"Stream Service"===a?d="Feature Layer":"Geoprocessing Service"===
a&&this.portal&&this.portal.isPortal?d=-1<c.indexOf(b,"Web Tool")?"Tool":"Geoprocessing Service":"Geocoding Service"===a?d="Locator":"Microsoft Powerpoint"===a?d="Microsoft PowerPoint":"GeoJson"===a?this.type=d="GeoJSON":"Globe Service"===a?d="Globe Layer":"Vector Tile Service"===a?d="Tile Layer":"netCDF"===a?d="NetCDF":"Map Service"===a?d=-1===c.indexOf(b,"Spatiotemporal")&&(-1<c.indexOf(b,"Hosted Service")||-1<c.indexOf(b,"Tiled"))&&-1===c.indexOf(b,"Relational")?"Tile Layer":"Map Image Layer":
a&&-1<a.toLowerCase().indexOf("add in")?d=a.replace(/(add in)/ig,"Add-In"):"datastore catalog service"===a?d="Big Data File Share":"Compact Tile Package"===a?d="Tile Package (tpkx)":"Raster function template"===a&&(d="Raster Function Template");return d},_getIconUrl:function(){var b=this.type&&this.type.toLowerCase()||"",d=this.typeKeywords||[],h=!1,e=!1,l=!1,f=!1,g=!1,e=!1;0<b.indexOf("service")||"feature collection"===b||"kml"===b||"wms"===b||"wmts"===b||"wfs"===b?(h=-1<c.indexOf(d,"Hosted Service"),
"feature service"===b||"feature collection"===b||"kml"===b||"wfs"===b?(f=-1<c.indexOf(d,"Table"),e=-1<c.indexOf(d,"Route Layer"),l=-1<c.indexOf(d,"Markup"),b=(g=-1!==c.indexOf(d,"Spatiotemporal"))&&f?"spatiotemporaltable":f?"table":e?"routelayer":l?"markup":g?"spatiotemporal":h?"featureshosted":"features"):"map service"===b||"wms"===b||"wmts"===b?(g=-1!==c.indexOf(d,"Spatiotemporal"),e=-1!==c.indexOf(d,"Relational"),b=g||e?"mapimages":h||-1<c.indexOf(d,"Tiled")||"wmts"===b?"maptiles":"mapimages"):
b="scene service"===b?-1<c.indexOf(d,"Line")?"sceneweblayerline":-1<c.indexOf(d,"3DObject")?"sceneweblayermultipatch":-1<c.indexOf(d,"Point")?"sceneweblayerpoint":-1<c.indexOf(d,"IntegratedMesh")?"sceneweblayermesh":-1<c.indexOf(d,"PointCloud")?"sceneweblayerpointcloud":-1<c.indexOf(d,"Polygon")?"sceneweblayerpolygon":-1<c.indexOf(d,"Building")?"sceneweblayerbuilding":"sceneweblayer":"image service"===b?-1<c.indexOf(d,"Elevation 3D Layer")?"elevationlayer":-1<c.indexOf(d,"Tiled Imagery")?"tiledimagerylayer":
"imagery":"stream service"===b?"streamlayer":"vector tile service"===b?"vectortile":"datastore catalog service"===b?"datastorecollection":"geocoding service"===b?"geocodeservice":"geoprocessing service"===b?-1<c.indexOf(d,"Web Tool")&&this.portal&&this.portal.isPortal?"tool":"layers":"layers"):b="web map"===b||"cityengine web scene"===b?"maps":"web scene"===b?-1<c.indexOf(d,"ViewingMode-Local")?"webscenelocal":"websceneglobal":"web mapping application"===b||"mobile application"===b||"application"===
b||"operation view"===b||"desktop application"===b?"apps":"map document"===b||"map package"===b||"published map"===b||"scene document"===b||"globe document"===b||"basemap package"===b||"mobile basemap package"===b||"mobile map package"===b||"project package"===b||"project template"===b||"pro map"===b||"layout"===b||"layer"===b&&-1<c.indexOf(d,"ArcGIS Pro")||"explorer map"===b&&c.indexOf(d,"Explorer Document")?"mapsgray":"service definition"===b||"csv"===b||"shapefile"===b||"cad drawing"===b||"geojson"===
b||"360 vr experience"===b||"netcdf"===b||"administrative report"===b?"datafiles":"explorer add in"===b||"desktop add in"===b||"windows viewer add in"===b||"windows viewer configuration"===b?"appsgray":"arcgis pro add in"===b||"arcgis pro configuration"===b?"addindesktop":"rule package"===b||"file geodatabase"===b||"sqlite geodatabase"===b||"csv collection"===b||"kml collection"===b||"windows mobile package"===b||"map template"===b||"desktop application template"===b||"gml"===b||"arcpad package"===
b||"code sample"===b||"form"===b||"document link"===b||"operations dashboard add in"===b||"rules package"===b||"image"===b||"workflow manager package"===b||"explorer map"===b&&-1<c.indexOf(d,"Explorer Mapping Application")||-1<c.indexOf(d,"Document")?"datafilesgray":"network analysis service"===b||"geoprocessing service"===b||"geodata service"===b||"geometry service"===b||"geoprocessing package"===b||"locator package"===b||"geoprocessing sample"===b||"workflow manager service"===b?"toolsgray":"layer"===
b||"layer package"===b||"explorer layer"===b?"layersgray":"scene package"===b?"scenepackage":"mobile scene package"===b?"mobilescenepackage":"tile package"===b||"compact tile package"===b?"tilepackage":"task file"===b?"taskfile":"report template"===b?"report-template":"statistical data collection"===b?"statisticaldatacollection":"insights workbook"===b?"workbook":"insights model"===b?"insightsmodel":"insights page"===b?"insightspage":"insights theme"===b?"insightstheme":"hub initiative"===b?"hubinitiative":
"hub page"===b?"hubpage":"hub site application"===b?"hubsite":"relational database connection"===b?"relationaldatabaseconnection":"big data file share"===b?"datastorecollection":"image collection"===b?"imagecollection":"desktop style"===b?"desktopstyle":"style"===b?"style":"dashboard"===b?"dashboard":"raster function template"===b?"rasterprocessingtemplate":"vector tile package"===b?"vectortilepackage":"ortho mapping project"===b?"orthomappingproject":"ortho mapping template"===b?"orthomappingtemplate":
"solution"===b?"solutions":"geopackage"===b?"geopackage":"deep learning package"===b?"deeplearningpackage":"real time analytic"===b?"realtimeanalytics":"big data analytic"===b?"bigdataanalytics":"feed"===b?"feed":"excalibur imagery project"===b?"excaliburimageryproject":"notebook"===b?"notebook":"storymap"===b?"storymap":"survey123 add in"===b?"survey123addin":"mission"===b?"mission":"mission report"===b?"missionreport":"quickcapture project"===b?"quickcaptureproject":"pro report"===b?"proreport":
"urban model"===b?"urbanmodel":"web experience"===b?"experiencebuilder":"web experience template"===b?"webexperiencetemplate":"workflow"===b?"workflow":"kernel gateway connection"===b?"kernelgatewayconnection":"insights script"===b?"insightsscript":"hub initiative template"===b?"hubinitiativetemplate":"storymap theme"===b?"storymaptheme":"maps";return b?a.toUrl("../css/images/item_type_icons/"+b+"16.png"):null},_getIsPremiumContent:function(){var a=this.typeKeywords,b=!1;if(-1<c.indexOf(a,"Requires Subscription")||
-1<c.indexOf(a,"Requires Credits"))b=!0;return b},_getPremiumIconUrl:function(){var b=this.typeKeywords,d;this.isPremiumContent&&(d=-1<c.indexOf(b,"Requires Credits")?"premiumcredits":"premiumitem");return d?a.toUrl("../css/images/item_type_icons/"+d+"16.png"):null},getThumbnailUrl:function(a){var b=this.thumbnailUrl;b&&a&&(b+=(-1===b.indexOf("?")?"?":"\x26")+"w\x3d"+a);return b}}),w=k([],{declaredClass:"esri.arcgis.PortalListing",constructor:function(a){g.mixin(this,a);this.id=this.itemId;this.url=
(this.portal&&this.portal.portalUrl)+"content/"+(this.userItemUrl?"items/":"listings/")+this.itemId;this.commentsUrl=this.url+"/comments";this.created=this.created?new Date(this.created):null;this.banner=this.banner?q.formatUrl(this.url+"/info/"+this.banner):"";this.thumbnail=this.thumbnail?q.formatUrl(this.url+"/info/"+this.thumbnail):"";this.largeThumbnail=this.largeThumbnail?q.formatUrl(this.url+"/info/"+this.largeThumbnail):"";this.avgRating=this.avgRating||0;this.numRatings=this.numRatings||
0;this.numComments=this.numComments||0;this.listingProperties=this.listingProperties||{priceDesc:"",creditsPerTransaction:0,licenseType:"free",trialSupported:!1,trialDuration:0,listingAccess:"private"};for(var b in this.listingProperties)this[b]&&(this.listingProperties[b]=this[b]);this.properties=this.properties||{systemRequirements:"",termsAndConditions:"",version:"1.0"};this.screenshots=c.map(this.screenshots,g.hitch(this,function(a){return q.formatUrl(this.url+"/info/"+a)}));this.vendorName=this.vendor.name;
this.vendor.thumbnail=this.vendor.thumbnail?this.userItemUrl?q.formatUrl(this.portal.portalUrl+"/portals/self/resources/"+this.vendor.thumbnail):q.formatUrl(this.url+"/vendorinfo/"+this.vendor.thumbnail):""},getComments:function(){return q.requestToTypedArray(this.commentsUrl,null,null,r,{item:this})},getVendor:function(){return this.vendor}}),y=k([],{declaredClass:"esri.arcgis.PortalProvision",constructor:function(a){g.mixin(this,a);this.created=this.created?new Date(this.created):null;this.startDate=
this.startDate?new Date(this.startDate):null;this.endDate=this.endDate&&-1!==this.endDate?new Date(this.endDate):null;this.listing=a.listing?new w(g.mixin(a.listing,{portal:this.portal})):null}}),A=k([],{declaredClass:"esri.arcgis.PortalGroup",constructor:function(a){g.mixin(this,a);this.url=(this.portal&&this.portal.portalUrl)+"community/groups/"+this.id;this.thumbnailUrl=q.formatUrl(this.url+"/info/"+this.thumbnail);this.modified=this.modified?new Date(this.modified):null;this.created=this.created?
new Date(this.created):null},getMembers:function(){return q.request(this.url+"/users")},queryItems:function(a,b){a=q.formatQueryParams({},a,b);a.q="group:"+this.id+(a.q?" "+a.q:"");return this.portal.queryItems(a)},getThumbnailUrl:function(a){var b=this.thumbnailUrl;b&&a&&(b+=(-1===b.indexOf("?")?"?":"\x26")+"w\x3d"+a);return b}}),B=k([],{declaredClass:"esri.arcgis.PortalFolder",constructor:function(a){g.mixin(this,a);this.url=(this.portal&&this.portal.portalUrl)+"content/users/"+this.username+"/"+
this.id;this.created=this.created?new Date(this.created):null},getItems:function(){return q.requestToTypedArray(this.url,null,null,v,{portal:this.portal,folderId:this.id})}}),C=k([],{declaredClass:"esri.arcgis.PortalUser",constructor:function(a){g.mixin(this,a);this.url=(this.portal&&this.portal.portalUrl)+"community/users/"+this.username;this.userContentUrl=(this.portal&&this.portal.portalUrl)+"content/users/"+this.username;this.thumbnailUrl=this.thumbnail?q.formatUrl(this.url+"/info/"+this.thumbnail):
null;this.modified=this.modified?new Date(this.modified):null;this.created=this.created?new Date(this.created):null},getGroups:function(){return t(q.request(this.url).then(g.hitch(this,function(a){return q.resultsToTypedArray(A,{portal:this.portal},a.groups)})))},getNotifications:function(){return q.requestToTypedArray(this.url+"/notifications",null,null,null,{portal:this.portal})},getGroupInvitations:function(){return q.requestToTypedArray(this.url+"/invitations",null,null,null,{portal:this.portal})},
getTags:function(){return q.requestToTypedArray(this.url+"/tags",null,null,null,{portal:this.portal})},getFolders:function(){return t(this.getContent(null,{num:1}).then(function(a){return a.folders}))},getItems:function(a){return t(this.getContent(a).then(function(a){return a.items}))},getItem:function(a){return q.request(this.portal.portalUrl+"content/items/"+a).then(g.hitch(this,function(a){return new v(g.mixin(a,{portal:this.portal}))}))},getContent:function(a,b){var d=this.url.replace("/community/",
"/content/")+(a?"/"+a:"");return q.request(d,b).then(g.hitch(this,function(b){b.folders=q.resultsToTypedArray(B,{portal:this.portal},b.folders);b.items=q.resultsToTypedArray(v,{portal:this.portal,folderId:a},b.items);return b}))},getThumbnailUrl:function(a){var b=this.thumbnailUrl;b&&a&&(b+=(-1===b.indexOf("?")?"?":"\x26")+"w\x3d"+a);return b}});k={Portal:k([m],{declaredClass:"esri.arcgis.Portal",onLoad:function(){},onError:function(){},constructor:function(a){a=g.isObject(a)?a:{url:a};this.registerConnectEvents();
p={options:{disableIdentityLookup:!0},requestParams:{f:"json"}};a.self?(p.self=a.self,g.mixin(this,{url:a.url||n.getProtocolForWebResource()+"//"+(a.self.urlKey?a.self.urlKey+"."+a.self.customBaseUrl:a.self.portalHostname)}),this.portalUrl=-1!==this.url.indexOf("/sharing")?this.url+"/":this.url+"/sharing/rest/",a=a.self.user?this.signIn():this.init(this.url)):(a.url&&g.mixin(this,{url:a.url}),a=this.init(this.url));a.then(g.hitch(this,function(){this.emit("ready",this);this.onLoad(this)}))},init:function(a,
b){a=(a||this.portalUrl).replace(/\/+$/,"");this.portalUrl=-1!==a.indexOf("/sharing")?a+"/":a+"/sharing/rest/";return this._getSelf(this.portalUrl).then(g.hitch(this,function(a){p.self=g.mixin({},a);(a=a.user)&&b&&(p.currentToken=b&&b.token,p.loggedInUser=new C(g.mixin(a,{portal:this,credential:b})));p.self.id&&!1===p.self.canSearchPublic&&(p.extraQuery=" AND orgid:"+p.self.id);g.mixin(this,p.self);this.thumbnailUrl=q.formatUrl(this.portalUrl+"portals/self/resources/"+this.thumbnail);this.isOrganization=
this.access&&this.access.length?!0:!1;this.created=this.created?new Date(this.created):null;this.modified=this.modified?new Date(this.modified):null;return this}),g.hitch(this,function(a){this.onError(a);throw a;}))},signIn:function(){var a=new e,b=g.hitch(this,function(){this._onSignIn().then(g.hitch(this,function(){a.resolve(p.loggedInUser)}),g.hitch(this,function(b){a.reject(b)}))});if(p&&p.self)p&&p.loggedInUser?setTimeout(function(){a.resolve(p.loggedInUser)},0):b();else this.on("load",g.hitch(this,
function(){b()}));return a},signOut:function(){p.loggedInUser.credential&&p.loggedInUser.credential.destroy();p.loggedInUser=null;p.options.disableIdentityLookup=!0;q.clearFieldsFromObject(p.self,this);p.self=null;return this.init(this.url)},getPortalUser:function(){return p.loggedInUser},addResource:function(a,b){return q.request(this.portalUrl+"portals/self/addResource",{key:a,text:b},{usePost:!0})},update:function(a){return q.request(this.portalUrl+"portals/self/update",a,{usePost:!0})},queryGroups:function(a,
b){return this._queryPortal(this.portalUrl+"community/groups",q.formatQueryParams({},a,b),A)},queryItems:function(a,b){return this._queryPortal(this.portalUrl+"search",q.formatQueryParams({},a,b),v)},queryListings:function(a){a=q.formatQueryParams({},a,!0);var b="";a.q&&-1<a.q.toLowerCase().indexOf("mylistings:true")?(a.q=a.q.toLowerCase().replace("mylistings:true",""),b="?mylistings\x3dtrue"):a.q||(a.q='""');return this._queryPortal(this.portalUrl+"content/listings"+b,a,w)},queryCustomerList:function(a,
b){a=q.formatQueryParams({},a,!0);return this._queryPortal(this.portalUrl+"portals/self/customersList",a)},getProvisions:function(){return this.getCustomers().then(g.hitch(this,function(a){return a.purchases}))},getInterests:function(){return this.getCustomers().then(g.hitch(this,function(a){return a.interests}))},getTrials:function(){return this.getCustomers().then(g.hitch(this,function(a){return a.trials}))},getCustomers:function(a){return q.request(this.portalUrl+"portals/self/customers",{status:a||
"all"})},getMyPurchases:function(){return this.getPurchases().then(function(a){return a.purchases})},getMyInterests:function(){return this.getPurchases().then(function(a){return a.interests})},getPurchases:function(){return q.request(this.portalUrl+"portals/self/purchases").then(g.hitch(this,function(a){a.interests=c.map(a.interests,function(a){return g.mixin(a.provision,{listing:a.listing})});a.purchases=c.map(a.purchases,function(a){return g.mixin(a.provision,{listing:a.listing})});a.trials=c.map(a.trials,
function(a){return g.mixin(a.provision,{listing:a.listing})});a.interests=q.resultsToTypedArray(y,{portal:this},a.interests);a.trials=q.resultsToTypedArray(y,{portal:this},a.trials);a.purchases=q.resultsToTypedArray(y,{portal:this},a.purchases);return a}))},queryUsers:function(a,b){return this._queryPortal(this.portalUrl+"community/users",q.formatQueryParams({sortField:"username"},a,b),C)},_onSignIn:function(){p.options.disableIdentityLookup=!1;p.self=null;return d.id.getCredential(this.portalUrl).then(g.hitch(this,
"init",this.url)).then(function(){return p.loggedInUser},g.hitch(this,function(a){p.options.disableIdentityLookup=!0;this.onError(a);throw a;}))},_getSelf:function(a){var b;a+="portals/self";p.self?(b=new e,setTimeout(function(){b.resolve(p.self)},0)):b=q.request(a,{culture:f.locale});return b},_queryPortal:function(a,b,d){var c=g.mixin({num:10,start:0,sortField:"title",sortOrder:"asc"},b),h=["start","query","num","nextStart"];a=q.request(a,c).then(g.hitch(this,function(a){a.results=q.resultsToTypedArray(d,
{portal:this},a);a.queryParams=g.mixin({},c);a.nextQueryParams=g.mixin(c,{start:a.nextStart});return q.clearFieldsFromObject(h,a)}));a=g.delegate(a);a.queryParams=g.mixin({},c);a.nextQueryParams=e.when(a,function(a){return a.nextQueryParams});return t(a)}}),PortalFolder:B,PortalGroup:A,PortalItem:v,PortalUser:C,PortalComment:r,PortalRating:u,PortalUtil:q,PortalResult:t,PortalListing:w};b("extend-esri")&&g.mixin(g.getObject("arcgis",!0,d),k);return k})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/commands/mapToImage/MapToURLUtil":function(){define("require dojo/_base/declare esri/dijit/geoenrichment/Deferred esri/dijit/geoenrichment/when esri/dijit/geoenrichment/promise/all dojo/dom-style esri/dijit/geoenrichment/utils/DataUtil esri/dijit/geoenrichment/utils/ImageInfoUtil esri/dijit/geoenrichment/utils/RegExpUtil esri/dijit/geoenrichment/utils/UrlUtil".split(" "),
function(k,g,f,e,c,b,a,d,h,l){function n(){var b=new f;k("esri/tasks/PrintTask esri/tasks/PrintParameters esri/tasks/PrintTemplate esri/layers/GraphicsLayer ./DotDensityToImageUtil ./LegendToLayerUtil".split(" "),function(d,c,e,l,n,k){p=c;t=e;q=l;r=n;u=k;m=g(d,{returnJson:!1,mapName:null,_execute:function(){this.returnJson&&(this.printGp.submitJob=this.printGp.execute=function(b,d){b="data:application/json;base64,"+a.base64FromJson(b.Web_Map_as_JSON);d([{value:{url:b}}]);return(new f).resolve()});
return this.inherited(arguments)},_getPrintDefinition:function(a,b){var d=this.inherited(arguments);this.returnJson&&this.mapName&&(d.title=this.mapName);console.log(d);return d},_createOperationalLayers:function(a,b){var d=this.inherited(arguments);if(b.__legendLayerId){var c=d.filter(function(a){return a.id===b.__legendLayerId})[0];d.splice(d.indexOf(c),1);d.push(c)}return d},_createFeatureCollection:function(a,b,d,c){var e=this.inherited(arguments);this.returnJson&&e&&("esri.layers.FeatureLayer"===
a.declaredClass||"esri.layers.StreamLayer"===a.declaredClass||"esri.layers.GraphicsLayer"===a.declaredClass)&&e.featureCollection.layers.forEach(function(b){b.layerDefinition.name=a.arcgisProps&&a.arcgisProps.title||a._titleForLegend||a.name||a.id;b.layerDefinition.name=h.decodeXML(b.layerDefinition.name);b.layerDefinition.objectIdField="OBJECTID";b.layerDefinition.fields=[{name:"OBJECTID",type:"esriFieldTypeOID"}];var d={OBJECTID:1},c=/[^\w]/g,e;b.featureSet.features.forEach(function(a,l){a.attributes=
a.attributes||{};a.attributes.OBJECTID=l+1+"";a.attributes.__nameField||(a.attributes.Name=h.decodeXML(a.attributes.Name||b.layerDefinition.name),e="Name");l=a.attributes.__fieldAliases;for(var f in a.attributes)if(0!==f.indexOf("__")){var g=f,n=a.attributes[f];"string"===typeof n&&(n=h.decodeXML(n));var m=l&&l[f];(m=m&&m.replace(c,"_"))&&void 0===a.attributes[m]&&(a.attributes[m]=n,g=m);a.attributes.__nameField===f&&(e=g);d[f]||(d[f]=1,b.layerDefinition.fields.push({name:g,type:"string"===typeof n?
"esriFieldTypeString":"esriFieldTypeDouble"}))}});b.layerDefinition.displayField=e});return e}});b.resolve()});return b.promise}var m,p,t,q,r,u,v,w={setPrintMapTaskUrl:function(a){v=a;l.registerCORS(a)},mapToURL:function(a,b,d,c){var h=w._getUrlForMap(a);if(h)return h;h=n().then(function(){return w._replaceDotDensityLayersWithPictureMarkers(a).then(function(h){return e(b&&u.legendToGraphicsLayer(b,a,d),function(b){b&&a.addLayer(b);return e(w._runPrintTask(a,d,b,c),function(d){b&&a.removeLayer(b);
w._rollbackReplacing(a,h);var c=new f;setTimeout(function(){c.resolve(d.url)},100);return c.promise})})})});w._putUrlToCache(a,h);return h},_replaceDotDensityLayersWithPictureMarkers:function(a){var b=[];for(i=0;i<a.graphicsLayerIds.length;i++)layer=a.getLayer(a.graphicsLayerIds[i]),layer.loaded&&layer.visible&&r.isDotDensity(layer)&&b.push(w._createGraphicsLayerFromDotDensityLayer(i,layer,a));return c(b)},_createGraphicsLayerFromDotDensityLayer:function(a,b,d){return r.createPictureMarkersFromDotDensityLayer(b,
d.extent,d).then(function(c){if(!c)return null;var h=new q;c.map(function(a){h.add(a)});d.addLayer(h,a);b.visible=!1;return{addedLayer:h,hiddenLayer:b}}).otherwise(function(a){console.log(a);return null})},_runPrintTask:function(a,d,c,h){function l(){var e=new m(v);e.returnJson=h&&h.replaceWithJson;e.mapName=h&&h.mapName;var l=new p;l.map=a;var f=new t;f.exportOptions={width:3.125*b.get(d,"width"),height:3.125*b.get(d,"height"),dpi:300};f.format="png32";f.showAttribution=!1;f.forceFeatureAttributes=
!0;f.__legendLayerId=c&&c.id;l.template=f;return e.execute(l)}return e(l(),function(a){return a},function(a){console.log(a);return e(l(),function(a){return a},function(a){console.log(a);return l()})})},_rollbackReplacing:function(a,b){b.forEach(function(b){b&&b.addedLayer&&a.removeLayer(b.addedLayer);b&&b.hiddenLayer&&(b.hiddenLayer.visible=!0)})},urlToSrc:function(a,b){return b&&b.saveImagesAsDataUrl?d.getRemoteImageDataUrl(a,{sizeLimit:1500}):a}},y,A=0;w.enableCaching=function(){y={}};w.clearCaching=
function(){y=null};w._putUrlToCache=function(a,b){y&&b&&(a.__mapToImageUtilKey=A++,y[a.__mapToImageUtilKey]=b)};w._getUrlForMap=function(a){return y&&y[a.__mapToImageUtilKey]};return w})},"esri/dijit/geoenrichment/utils/ImageInfoUtil":function(){define(["dojo/_base/lang","esri/dijit/geoenrichment/when","./ImageUtil","./UrlUtil"],function(k,g,f,e){var c=/^data:/i,b={_infoCache:{},getImageInfo:function(a,d,c){var h=c&&c.sizeLimit||1E5;b._infoCache[a]||(b._infoCache[a]=f.imageFromUrl(a,c).then(function(d){var c=
f.imageToDataURL(d),h={dataUrl:c,contentType:f.getContentType(c),width:d.width,height:d.height};setTimeout(function(){b._infoCache[a]=h});return h}));return g(b._infoCache[a],function(a){a=k.mixin({},a);d&&(a.filename=d&&d.replace(/\.\w+$/,".png").toLowerCase());return function(a){return g(b._processDataUrl(a,h),function(b){if(b&&b.dataUrl){var d=k.mixin({},a);d.dataUrl=b.dataUrl;d.width*=b.factor;d.height*=b.factor;return g(d)}return g(a)})}(a)})},ensureDataUrlForRemoveImage:function(a,d){return!a||
c.test(a)?a:b.getRemoteImageDataUrl(a,d)},getRemoteImageDataUrl:function(a,d){function c(d,c){return b.getImageInfo(d?m+"?"+a:a,null,{crossOrigin:c}).then(function(a){return g(b._processDataUrl(a,f),function(a){return a&&a.dataUrl||a})})}function l(){console.log("Failed to get data for URL: "+a);return a}var f=d&&d.sizeLimit||1E5,m=e.getProxyUrl();return c(!1,"anonymous").otherwise(function(){return c(!1,null)}).otherwise(function(){return m?c(!0,"anonymous"):l()}).otherwise(function(){return c(!0,
null)}).otherwise(l)},_processDataUrl:function(a,b){var d=Math.max(a.width,a.height);if(d<=b)return a.dataUrl;var c=b/d;return g(f.scaleImage(a.dataUrl,{factor:c}),function(a){return{dataUrl:a,factor:c}})}};return b})},"esri/dijit/geoenrichment/utils/ImageUtil":function(){define(["esri/dijit/geoenrichment/Deferred","esri/dijit/geoenrichment/when","./UrlUtil"],function(k,g,f){var e={base64DataToDataURL:function(c,b){if(/^data:image/.test(c))return c;b||(b=atob(c.substr(0,16)),b=e.getImageContentType(b));
return"data:"+(b||"image/png")+";base64,"+c},getImageContentType:function(c){if("\u00ff\u00d8\u00ff"===c.substr(0,3)&&"JFIF"===c.substr(6,4))return"image/jpeg";if("\u0089PNG\r\n\u001a\n"===c.substr(0,8))return"image/png";if("GIF89a"===c.substr(0,6)||"GIF87a"===c.substr(0,6))return"image/gif"},base64DataFromDataURL:function(c){0==c.indexOf("data:")&&(c=c.substr(c.indexOf(",")+1));return c},getBase64DataIndex:function(c){c=0==c.indexOf("data:")?c.indexOf(";base64,"):-1;return 0<c?c+8:0},getContentType:function(c){var b=
e.getBase64DataIndex(c);return b?c.substring(5,b-8):null},checkBase64FileSize:function(c,b){return e.getBase64FileSize(c)<=b},getBase64FileSize:function(c){return.75*c.length},imageToDataURL:function(c,b){b=b||{};var a=document.createElement("canvas"),d=a.getContext("2d");a.width=b.width||c.width;a.height=b.height||c.height;var h=b.opacity;null!=h&&!isNaN(h)&&0<=h&&1>h&&(d.globalAlpha=+h,b.format="image/png");(h=b.pos)?d.drawImage(c,h.x||0,h.y||0):d.drawImage(c,0,0,a.width,a.height);return a.toDataURL(b.format)},
imageFromUrl:function(c,b){var a=new k,d=new Image;0!==c.indexOf("data:")&&b&&b.crossOrigin&&d.setAttribute("crossOrigin",b.crossOrigin);d.onload=function(){if(d.width&&d.height)a.resolve(d);else{var c=Error("Error of reading an image from URL.");b&&b.ignoreError?a.resolve(null):a.reject(c)}d.onload=d.onerror=null};d.onerror=function(c){b&&b.ignoreError?a.resolve(null):a.reject(c);d.onload=d.onerror=null};c=require.toUrl(c);/^http:/i.test(c)&&/^https/i.test(window.location.protocol)&&(c=f.toHttpsUrl(c));
d.src=c;return a.promise},scaleImage:function(c,b){if("string"===typeof c)var a=e.base64DataToDataURL(c),d=e.getContentType(a),a=e.imageFromUrl(a);return g(a||c).then(function(a){var c=1,h=a.width,f=a.height;if(b.factor)c=b.factor;else if(b.maxDim)c=b.maxDim/Math.max(h,f);else if(b.imageDim){var g=b.imageDim.w,k=b.imageDim.h;b.imageDim.preserveRatio?(c=Math.min(g/h,k/f),b.imageDim.reduceOnly&&1<c&&(c=1)):b.imageDim.reduceOnly?(h=Math.min(h,g),f=Math.min(f,k)):(h=g,f=k)}return e.imageToDataURL(a,{width:h*
c,height:f*c,format:b.format||d,opacity:b.opacity})})},getImageViewType:function(c,b){return 1E3<=b?(c/=b,.025>=Math.abs(c-2)?"360":2<c?"pano":null):null}};return e})},"esri/dijit/geoenrichment/utils/ProjectionUtil":function(){define("dojo/_base/lang esri/dijit/geoenrichment/Deferred esri/SpatialReference esri/geometry/jsonUtils esri/dijit/geoenrichment/utils/CoordinateUtil esri/dijit/geoenrichment/utils/PolygonUtil esri/dijit/geoenrichment/utils/UrlUtil esri/dijit/geoenrichment/utils/requests/UniversalClient esri/dijit/geoenrichment/utils/requests/EveryRequest".split(" "),
function(k,g,f,e,c,b,a,d,h){function l(a){return a&&a.spatialReference||a instanceof f&&a||a&&new f(a)||new f(c.WEB_MERCATOR_WKID)}function n(a,b){var d=[];try{for(var h=0;h<a.length;h++)d.push(c.toSpatialReference(a[h],b))}catch(B){console.log(B)}return(new g).resolve(d)}function m(a,d){function c(a){n.push(function(){return p(g,a,f,d)})}var l=a[0],f=e.getJsonType(l),g={outSR:d.wkid||d.toJson(),inSR:l.spatialReference.wkid||l.spatialReference.toJson()},n=[],m=0,k=[];1==a.length?k.push(l):a.forEach(function(a){var d=
b.getNumberOfPoints(a);m+=d;if(1E4<m){var h=[];k.length?(h.push(a),m=d):(k.push(a),m=0);c(k);k=h}else k.push(a)});k.length&&c(k);return h(n,{stopOnError:!0}).then(function(a){for(var b=a[0],d=1;d<a.length;d++)b=b.concat(a[d]);return b},function(a){console.log(a);return[]})}function p(a,b,c,h){a.geometries=t(b);return d.requestPublicFirst({url:u,urlSuffix:"project"},{content:a}).then(function(a){return q(a.geometries,c,h)})}function t(a){var b=a.map(function(a){a=a.toJson();delete a.spatialReference;
return a});return{geometryType:e.getJsonType(a[0]),geometries:b}}function q(a,b,d){var c=e.getGeometryType(b),h={spatialReference:d.toJson()};return a.map(function(a){return new c(k.mixin(a,h))})}var r={},u;r.setGeometryServiceUrl=function(b){u=b;a.registerCORS(b)};r.getSpatialReference=l;r.projectGeometries=function(a,b){var d=l(b);b=Array.isArray(a)?a:[a];if(!b.length)return(new g).resolve(a);var h={},e=b.slice(),f=0;b=b.filter(function(a,b){if(a.spatialReference&&a.spatialReference.wkid!==d.wkid)return h[b]=
f++,!0});return b.length?(c.testSpatialReferenceWKID(d)&&c.testSpatialReferenceWKID(b[0].spatialReference)?n(b,d):m(b,d)).then(function(b){e.forEach(function(a,d){void 0!==h[d]&&(e[d]=b[h[d]])});return Array.isArray(a)?e:e[0]}):(new g).resolve(a)};r.unionGeometries=function(a){var b=l(a[0].spatialReference);a={sr:b.wkid||b.toJson(),geometries:t(a)};return d.requestPublicFirst({url:u,urlSuffix:"union"},{content:a}).then(function(a){return q([a.geometry],a.geometryType,b)[0]})};return r})},"esri/dijit/geoenrichment/utils/PolygonUtil":function(){define([],
function(){var k={getNumberOfPoints:function(g){if(!g)return 0;Array.isArray(g)||(g=[g]);var f=0;g.forEach(function(e){f+=k.getGeometryPointCount(e.geometry||e)});return f},getGeometryPointCount:function(g){if(!g)return 0;var f=0,e=g.rings||g.paths;!e&&g.points&&(e=[g.points]);e?e.forEach(function(c){f+=c&&c.length||0}):f+="x"in g?1:2;return f}};return k})},"esri/dijit/geoenrichment/utils/requests/EveryRequest":function(){define(["dojo/_base/declare","esri/dijit/geoenrichment/Deferred","esri/dijit/geoenrichment/when"],
function(k,g,f){var e=k(null,{requests:null,results:null,requestCount:0,chunkSize:0,stopOnError:!1,onProgress:null,index:0,completeCount:0,executeCount:0,isExecuting:!1,dfd:null,constructor:function(c,b,a,d,h){this.requests=c;this.results=b;this.requestCount=this.requests.length;this.chunkSize=Math.max(a,0);this.stopOnError=d;this.onProgress=h},execute:function(){this.isExecuting=!0;for(this.dfd=new g;this.tryStartNextRequest(););return this.dfd.promise},tryStartNextRequest:function(){if(!this.isExecuting)return!1;
if(this.index==this.requestCount&&!this.executeCount)return this.isExecuting=!1,this.dfd.resolve(this.results),!1;if(this.index==this.requestCount||this.executeCount==this.chunkSize)return!1;var c=this.requests[this.index++];this.executeCount++;var b=c.request;"function"===typeof b&&(b=b());var a=this,d=!0;f(b,function(b){a.processResult(b,c.key,b instanceof Error,d)},function(b){a.processResult(b,c.key,!0,d)});d=!1;return!0},processResult:function(c,b,a,d){if(this.isExecuting)if(a&&this.stopOnError)this.isExecuting=
!1,this.onProgress&&this.onProgress(1),this.dfd.reject(c);else if(this.results[b]=c,this.completeCount++,this.executeCount--,this.onProgress&&this.onProgress(this.completeCount/this.requestCount),!d)for(;this.tryStartNextRequest(););}});return function(c,b){var a=!1,d=10,h=null;"boolean"===typeof b?a=b:b&&("number"===typeof b.chunkSize&&(d=b.chunkSize),"boolean"===typeof b.stopOnError&&(a=b.stopOnError),"function"===typeof b.onProgress&&(h=b.onProgress));var l,f=[];if(Array.isArray(c))l=[],c.forEach(function(a,
b){f.push({key:b,request:a})});else for(var g in c)l={},f.push({key:g,request:c[g]});return(new e(f,l,d,a,h)).execute()}})},"esri/dijit/geoenrichment/ReportPlayer/core/infographics/InfographicTypes":function(){define(["dojo/_base/lang"],function(k){var g={STATIC:"static",ATTACHMENTS:"attachments",AREA_DETAILS:"areaDetails",INTERESTING_FACTS:"interestingFacts",LOCATOR_TABLE:"locatorTable",COMPARISON_TABLE:"comparisonTable"},f={AGE_PYRAMID:"AgePyramid",ONE_VAR:"OneVar",RELATED_VARS:"RelatedVariables",
TAPESTRY:"Tapestry",PRIZM5:"Prizm5"},e={},c;for(c in f)e[f[c]]=!0;k.mixin(g,f);var b={};for(c in g)b[g[c]]=!0;g.isDynamic=function(a){return e[a]};g.isSupported=function(a){return b[a]};g.isTableLike=function(a){return a===g.AREA_DETAILS||a===g.LOCATOR_TABLE||a===g.COMPARISON_TABLE};g.fixTapestryNameToWidget=function(a){return"TapestryNEW"===a?"Tapestry":a};g.fixTapestryNameToData=function(a){return"Tapestry"===a?"TapestryNEW":a};g.supportsMultiFeature=function(a){return a===g.COMPARISON_TABLE||a===
g.LOCATOR_TABLE||a===g.ATTACHMENTS||a===g.AREA_DETAILS};g.supportsComparison=function(a){return a===g.ONE_VAR||a===g.AGE_PYRAMID||a===g.RELATED_VARS||a===g.COMPARISON_TABLE};g.isDynamicWithFiltering=function(a){return a===g.ONE_VAR||a===g.AGE_PYRAMID||a===g.RELATED_VARS};return g})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/templateJsonUtils/query/TemplateJsonQueryUtil":function(){define(["./_SectionJsonCollector","../../../infographics/InfographicTypes"],function(k,g){var f={},e=
{process:function(c,b,a,d,h){var l=d;d=function(a,b,d){a&&l.apply(this,arguments)};h={processLevel:b,objJson:a,processFunc:d,ignoreComparisonCalculators:h&&h.ignoreComparisonCalculators};c!==b||"field"===c&&"field"===b?"document"===c?e._processTemplateJson(a,h):"section"===c?e._processSectionJson(a,h):"table"===c?e._processTableJson(a,h,null):"tableRow"===c?e._processTableDataObj(a,h,null):"field"===c&&e._processFieldInfo(a,h,null):d(a)},_processTemplateJson:function(c,b){c.sectionsTables?c.sectionsTables.forEach(function(a){e._processTableJson(a,
b)}):k.collectSectionJsons(c,{saveParentInfo:!1,processFieldInfoFunc:function(a){"field"===b.processLevel&&b.processFunc(a)}}).forEach(function(a){e._processSectionJson(a,b)})},_processSectionJson:function(c,b){"section"===b.processLevel&&b.processFunc(c);c.stack&&c.stack.forEach(function(a){"sectionElement"===b.processLevel&&b.processFunc(a);"table"===a.id&&e._processTableJson(a,b)})},_processTableJson:function(c,b,a){"table"===b.processLevel&&b.processFunc(c);c.data.data.forEach(function(d){"tableRow"===
b.processLevel&&b.processFunc(d,a);e._processTableDataObj(d,b,a)});c.backgroundSectionJson&&e._processSectionJson(c.backgroundSectionJson,b);c.foregroundSectionJson&&e._processSectionJson(c.foregroundSectionJson,b);c.backgroundFloatingTablesSectionJson&&e._processSectionJson(c.backgroundFloatingTablesSectionJson,b);c.foregroundFloatingTablesSectionJson&&e._processSectionJson(c.foregroundFloatingTablesSectionJson,b)},_processTableDataObj:function(c,b,a){if(c.fieldInfos)for(var d in c.fieldInfos)e._processFieldInfo(c.fieldInfos[d],
b,a,"tableCell")},_processFieldInfo:function(c,b,a,d){if(c){"field"!==b.processLevel||b.skipVariables&&(c.hasVariable||c.script)||b.processFunc(c,a,d);c.triggerJson&&c.triggerJson.fieldInfo&&c.templateName!==c.triggerJson.fieldInfo.templateName&&e._processFieldInfo(c.triggerJson.fieldInfo,b,c,"trigger");c.dataDrillingPanelInfo&&e._processSectionJson(c.dataDrillingPanelInfo.sectionJson,b);c.tooltipInfo&&c.tooltipInfo.fieldInfo&&e._processFieldInfo(c.tooltipInfo.fieldInfo,b,c,"fieldTooltip");c.linkFieldInfo&&
e._processFieldInfo(c.linkFieldInfo,b,c,"linkFieldInfo");if(c.isRichText)for(var h in c.richTextJson.fieldInfos)e._processFieldInfo(c.richTextJson.fieldInfos[h],b,c,"richTextPart");c.isInfographic&&e._processInfographicFieldInfo(c,b);c.isChart&&e._processChartFieldInfo(c,b);c.isReportSection&&c.sectionJson&&e._processSectionJson(c.sectionJson,b)}},_processInfographicFieldInfo:function(c,b){var a=c.infographicJson;switch(a.type){case g.STATIC:a.header&&e._processTableJson(a.header,b,c);a.variableTables&&
a.variableTables.forEach(function(a){a.variable&&e._processFieldInfo(a.variable.fieldInfo,b,c,"staticInfographicVariable");a.description&&a.description.fieldInfo&&e._processFieldInfo(a.description.fieldInfo,b,c,"staticInfographicDescription")});if(a.dataDrilling)for(var d in a.dataDrilling){var h=a.dataDrilling[d];h&&h.sectionJson&&e._processSectionJson(h.sectionJson,b)}break;case g.AGE_PYRAMID:case g.TAPESTRY:case g.PRIZM5:case g.RELATED_VARS:case g.ONE_VAR:!b.ignoreComparisonCalculators&&a.fieldInfos&&
a.fieldInfos.forEach(function(a){e._processFieldInfo(a,b,c,"dynamicInfographicVariable")});break;case g.AREA_DETAILS:a.titleSectionJson&&e._processSectionJson(a.titleSectionJson,b,c);a.attributesSectionJson&&e._processSectionJson(a.attributesSectionJson,b,c);a.notesSectionJson&&e._processSectionJson(a.notesSectionJson,b,c);break;case g.LOCATOR_TABLE:a.titleSectionJson&&e._processSectionJson(a.titleSectionJson,b);e._processSectionJson(a.headerSectionJson,b);e._processSectionJson(a.dataSectionJson,
b);a.summarySectionJson&&e._processSectionJson(a.summarySectionJson,b);a.summaryFooterSectionJson&&e._processSectionJson(a.summaryFooterSectionJson,b);break;case g.COMPARISON_TABLE:a.titleSectionJson&&e._processSectionJson(a.titleSectionJson,b),b.ignoreComparisonCalculators||e._processSectionJson(a.dataSectionJson,b)}},_processChartFieldInfo:function(c,b){var a=c.chartJson.visualProperties;a.chartIcons&&a.chartIcons.forEach(function(a){e._processFieldInfo(a,b,c,"chartIcon")});a.floatingIcons&&a.floatingIcons.forEach(function(a){e._processTableJson(a,
b,c,"floatingIcon")});a.floatingTexts&&a.floatingTexts.forEach(function(a){e._processTableJson(a,b,c,"floatingText")});b.ignoreComparisonCalculators&&c.chartJson.comparisonInfo&&(b=Object.assign({},b),b.skipVariables=!0);a.tooltip&&a.tooltip.fieldInfo&&e._processFieldInfo(a.tooltip.fieldInfo,b,c,"chartTooltip");c.chartJson.dataDrillingPanelInfo&&e._processSectionJson(c.chartJson.dataDrillingPanelInfo.sectionJson,b);c.chartJson.seriesItems.forEach(function(a){a.points.forEach(function(a){e._processFieldInfo(a.fieldInfo,
b,c,"chartPointField");a.iconFieldInfo&&e._processFieldInfo(a.iconFieldInfo,b,c,"chartPointIcon");a.captionFieldInfo&&e._processFieldInfo(a.captionFieldInfo,b,c,"chartPointCaption")})})}};f.DOCUMENT="document";f.SECTION="section";f.TABLE="table";f.SECTION_ELEMENT="sectionElement";f.TABLE_ROW="tableRow";f.FIELD="field";f.process=e.process;f.processTemplateFieldInfos=function(c,b,a){e.process("document","field",c,b,a)};f.processSectionFieldInfos=function(c,b,a){e.process("section","field",c,b,a)};f.processSectionElements=
function(c,b){e.process("document","sectionElement",c,b)};f.processTableFieldInfos=function(c,b,a){e.process("table","field",c,b,a)};f.processChartFieldInfos=function(c,b){c.seriesItems.forEach(function(a){a.points.forEach(function(a){a.fieldInfo&&b(a.fieldInfo,"series")})});var a=c.visualProperties.tooltip;if(a&&a.fieldInfo&&a.fieldInfo.isRichText)for(var d in a.fieldInfo.richTextJson.fieldInfos)b(a.fieldInfo.richTextJson.fieldInfos[d],"tooltip");c.dataDrillingPanelInfo&&f.processSectionFieldInfos(c.dataDrillingPanelInfo.sectionJson,
function(a){b(a,"dataDrilling")})};f.hasMultiFeatureChart=function(c){var b=!1;f.processTemplateFieldInfos(c,function(a){a.isChart&&(b=b||a.chartJson&&!!a.chartJson.isMultiFeatureChart)});return b};f.hasComparisonInfographicTable=function(c){var b=!1;f.processTemplateFieldInfos(c,function(a){a.isInfographic&&(b=b||a.infographicJson&&a.infographicJson.type===g.COMPARISON_TABLE)});return b};f.isGraphicReport=function(c){return!!c.sectionsTables};f.hasDynamicColumns=function(c){return f._checkTableAttributes(c,
function(b){return 0<b.dynamicColumns})};f.hasDynamicRows=function(c){return f._checkTableAttributes(c,function(b){return 0<b.dynamicRows})};f._checkTableAttributes=function(c,b){var a;f.isGraphicReport(c)?f.processTemplateFieldInfos(c,function(d){d.isReportSection&&d.sectionJson&&d.sectionJson.stack&&d.sectionJson.stack.some(function(d){if("table"===d.id&&d.attributes&&b(d.attributes))return a=!0})}):a=f.collectSectionJsons(c).some(function(a){return a.stack&&a.stack.some(function(a){return"table"===
a.id&&a.attributes&&b(a.attributes)})});return a};f.hasMultiFeatureSections=function(c){return f.isGraphicReport(c)?f.hasMultiFeatureChart(c)||f.hasDynamicColumns(c)||f.hasComparisonInfographicTable(c):!1};f.calcNumberOfMaps=function(c,b){var a=0;f.collectSectionJsons(c).forEach(function(d){a+=f.calcNumberOfMapsInSectionJson(d,b)});return a};f.calcNumberOfMapsInSectionJson=function(c,b){var a=0;c.stack&&c.stack.forEach(function(d){d.isMap&&(b&&b(d),a++)});f.processSectionFieldInfos(c,function(d){d.isMap&&
(b&&b(d.mapJson),a++)});return a};f.calcNumberOfMapsInTableJson=function(c){var b=0;f.processTableFieldInfos(c,function(a){a.isReportSection&&(b+=f.calcNumberOfMapsInSectionJson(a.sectionJson))});return b};f.collectSectionJsons=k.collectSectionJsons;f.getParentBox=k.getParentBox;f.setParentBox=k.setParentBox;f.getParentStyle=k.getParentStyle;return f})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/templateJsonUtils/query/_SectionJsonCollector":function(){define(["dojo/_base/lang","esri/dijit/geoenrichment/utils/MathUtil",
"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/GridDataUtil","../../tableJson/TableJsonUtil"],function(k,g,f,e){var c={},b={provideParentInfo:function(b,d,c,e,f,g){a.collectStatistics(d);var h;a:{switch(f){case "floating":h=d.style.left+g.left;break a;case "page":h=a.calcX(d,c,e)+g.left;break a}h=void 0}a:{switch(f){case "floating":f=d.style.top+g.top;break a;case "page":f=a.calcY(d,c,e)+g.top;break a}f=void 0}b._parentBox={x:h,y:f,w:a.calcFullWidth(d,c,e),h:a.calcFullHeight(d,c,e)};d=
e.field;c.style.fields=c.style.fields||{};c=(c.style.fields[d]=c.style.fields[d]||{}).backgroundColor;b._parentStyle={backgroundColor:c}},sanitize:function(b){a.sanitize(b)}},a={collectStatistics:function(b){if(!b._measureInfo){var d={},c={},h;b.data.columns.forEach(function(a){h&&(c[h.field]=a);h=a;d[a.field]=a});var e={},f={},g={},k={},u={},v={};b.data.data.forEach(function(d,c){b.data.columns.forEach(function(b,h){var l=u[h]||0,n=v[c]||0,m=a._getDataHeight(d,b.field);b=a._getFieldWidth(d,b);l+=
m;n+=b;u[h]=l;v[c]=n;m=h+"_"+c;f[m]=l;e[m]=n;g[m]=e[h-1+"_"+c]||0;k[m]=f[h+"_"+(c-1)]||0})});b._measureInfo={xPositions:g,yPositions:k,columnsHash:d,nextColumnHash:c}}},calcX:function(a,b,d){d=a.data.columns.indexOf(d);b=a.data.data.indexOf(b);return a._measureInfo.xPositions[d+"_"+b]||0},calcY:function(a,b,d){d=a.data.columns.indexOf(d);b=a.data.data.indexOf(b);return a._measureInfo.yPositions[d+"_"+b]||0},calcFullWidth:function(b,d,c){c=c.field;var h=a._getFieldWidth(d,b._measureInfo.columnsHash[c]),
e=d.columnSpans&&d.columnSpans[c]||1;if(1<e)for(var f,l=0;l<e-1;l++)f=b._measureInfo.nextColumnHash[f?f.field:c],h+=a._getFieldWidth(d,f);return h},_getFieldWidth:function(a,b){a.style.fields=a.style.fields||{};return(a.style.fields[b.field]=a.style.fields[b.field]||{}).width||b.style.width},calcFullHeight:function(b,d,c){c=c.field;var h=b.data.data.indexOf(d),e=a._getDataHeight(d,c);d=d.rowSpans&&d.rowSpans[c]||1;if(1<d)for(var f=h+1,l=0;l<d-1;l++)h=b.data.data[f++],e+=a._getDataHeight(h,c);return e},
_getDataHeight:function(a,b){a.style.fields=a.style.fields||{};return(a.style.fields[b]=a.style.fields[b]||{}).height||a.style.height},sanitize:function(a){delete a._measureInfo}},d={getIntersectingTableJsonsBehind:function(a,b,d,c,p){function h(a){var c=a.data.data[0].fieldInfos[a.data.columns[0].field];return f.isTextLikeCell(c)||f.isShapeCell(c)||f.isImageCell(c)?g.checkRectsIntersect([d,{x:a.style.left+b.left,y:a.style.top+b.top,w:e.getTableWidth(a),h:e.getTableHeight(a)}]):!1}function l(a){return g.checkRectsIntersect([d,
{x:a.style.left+b.left,y:a.style.top+b.top,w:a.style.width,h:a.style.height}])}var n=[],m=[];a.backgroundFloatingTablesSectionJson&&a.backgroundFloatingTablesSectionJson.stack.forEach(function(a,b){if(-1===c||p||c!==b)if("table"===a.id&&h(a)||"img"===a.id&&l(a))-1===c||p||c>b?n.push(a):m.push(a)});a.foregroundFloatingTablesSectionJson&&a.foregroundFloatingTablesSectionJson.stack.forEach(function(a,b){if(p&&c===b)return!0;if("table"===a.id&&h(a)||"img"===a.id&&l(a))p&&c>b?n.push(a):m.push(a)});return{elementJsonsBehind:n,
elementJsonsAbove:m}}};c.collectSectionJsons=function(a,b){b=b||{};var d=[];if(!a)return[];if(a.sections)return a.sections;if(!a.sectionsTables)return[];b.processSectionJson=b.processSectionJson||function(){};a.sectionsTables.forEach(function(h,e){var f={addBackground:function(){!1!==b.backgroundForeground&&h.backgroundSectionJson&&h.backgroundSectionJson.stack&&d.push(h.backgroundSectionJson)},addBackgroundTables:function(f){var l=[];!1!==b.floatingTables&&h.backgroundFloatingTablesSectionJson&&
h.backgroundFloatingTablesSectionJson.stack.forEach(function(d,e){"table"===d.id&&c._processTableJson(d,l,"floating",a.documentOptions,b,h,e,!1)});f&&l.reverse();l.forEach(function(a){b.processSectionJson(a,{pageIndex:e,source:"foreground",floatingIndex:a.__floatingIndex});delete a.__floatingIndex});d=d.concat(l)},addInGridSections:function(){var f=[];c._processTableJson(h,f,"page",a.documentOptions,b,h);f.forEach(function(a){b.processSectionJson(a,{pageIndex:e,source:"grid",index:a.__inGridIndex});
delete a.__inGridIndex});d=d.concat(f)},addForegroundTables:function(f){var l=[];!1!==b.floatingTables&&h.foregroundFloatingTablesSectionJson&&h.foregroundFloatingTablesSectionJson.stack.forEach(function(d,e){"table"===d.id&&c._processTableJson(d,l,"floating",a.documentOptions,b,h,e,!0)});f&&l.reverse();l.forEach(function(a){b.processSectionJson(a,{pageIndex:e,source:"foreground",floatingIndex:a.__floatingIndex});delete a.__floatingIndex});d=d.concat(l)},addForeground:function(){!1!==b.backgroundForeground&&
h.foregroundSectionJson&&h.foregroundSectionJson.stack&&d.push(h.foregroundSectionJson)}};b.topFirst?(f.addForeground(),f.addForegroundTables(!0),f.addInGridSections(),f.addBackgroundTables(!0),f.addBackground()):(f.addBackground(),f.addBackgroundTables(),f.addInGridSections(),f.addForegroundTables(),f.addForeground())});return d};c._processTableJson=function(a,c,e,f,g,t,q,r){a.data.data.forEach(function(h,l){h.fieldInfos&&a.data.columns.forEach(function(n,m){var p=h.fieldInfos[n.field];if(p&&p.sectionJson&&
p.sectionJson.stack){g.processFieldInfoFunc&&g.processFieldInfoFunc(p);(!1!==g.saveParentInfo||g.populateWithFloatingElementsBehind)&&b.provideParentInfo(p.sectionJson,a,h,n,e,f);if(g.populateWithFloatingElementsBehind){n=function(a){a=k.clone(a);a.isContextFloatingElement=!0;a.style.left=a.style.left+f.left-u._parentBox.x;if("table"===a.id)a.style.top=a.style.top+f.top-u._parentBox.y;else if("img"===a.id||"map"===a.id)a.style.top=a.style.top+f.top-u._parentBox.y;return a};var u=k.clone(p.sectionJson),
v;"page"===e?v=d.getIntersectingTableJsonsBehind(t,f,u._parentBox,-1,void 0):"floating"===e&&(v=d.getIntersectingTableJsonsBehind(t,f,u._parentBox,q,r));p=v.elementJsonsBehind.map(n);v=v.elementJsonsAbove.map(n);u.stack=p.concat(u.stack);u.stack=u.stack.concat(v);c.push(u)}else c.push(p.sectionJson);v=c[c.length-1];"page"===e?v.__inGridIndex=l*a.data.columns.length+m:v.__floatingIndex=q}})});b.sanitize(a)};c.getParentBox=function(a){return a&&a._parentBox};c.setParentBox=function(a,b){a._parentBox=
b};c.getParentStyle=function(a){return a&&a._parentStyle};return c})},"esri/dijit/geoenrichment/utils/MathUtil":function(){define([],function(){function k(b){return Array.isArray(b)?b:[b.x,b.y]}function g(b){return Array.isArray(b)?b:[b.x,b.y,b.x+b.w,b.y+b.h]}function f(b){return Array.isArray(b)?{x:b[0],y:b[1],w:b[2]-b[0],h:b[3]-b[1]}:b}function e(b){return[[b[0],b[1]],[b[2],b[1]],[b[2],b[3]],[b[0],b[3]],[b[0]+(b[2]-b[0])/2,b[1]+(b[3]-b[1])/2]]}var c={rotatePointAroundPoint:function(b,a,d){d=c.degToRad(d);
var h=k(b),e=k(a);a=Math.cos(d)*(e[0]-h[0])-Math.sin(d)*(e[1]-h[1])+h[0];d=Math.sin(d)*(e[0]-h[0])+Math.cos(d)*(e[1]-h[1])+h[1];return Array.isArray(b)?[a,d]:{x:a,y:d}},degToRad:function(b){return b*Math.PI/180},radToDeg:function(b){return 180*b/Math.PI},cosDeg:function(b){return Math.cos(c.degToRad(b))},sinDeg:function(b){return Math.sin(c.degToRad(b))},angleTo180_180Range:function(b){b=(b+180)%360;0>b&&(b=360+b);return b-180},angleTo0_360Range:function(b){b%=360;0>b&&(b=360+b);return b},calcVectorLength:function(b){var a=
b[0]-b[2];b=b[1]-b[3];return Math.sqrt(a*a+b*b)},addPointToVector:function(b,a){a=k(a);b=b.slice();b[0]+=a[0];b[1]+=a[1];b[2]+=a[0];b[3]+=a[1];return b},subtractPointFromVector:function(b,a){a=k(a);b=b.slice();b[0]-=a[0];b[1]-=a[1];b[2]-=a[0];b[3]-=a[1];return b},putVectorToOrigin:function(b){return c.subtractPointFromVector(b,[b[0],b[1]])},normalizeVector:function(b){b=c.putVectorToOrigin(b);var a=c.calcVectorLength(b);b[2]/=a;b[3]/=a;return b},calcDotProduct:function(b,a){b=c.putVectorToOrigin(b);
a=c.putVectorToOrigin(a);return b[2]*a[2]+b[3]*a[3]},calcAngleBetweenVectors:function(b,a){b=c.normalizeVector(b);a=c.normalizeVector(a);return Math.acos(c.calcDotProduct(b,a))},addLengthToVector:function(b,a){var d=c.calcVectorLength(b),h=[b[0],b[1]];b=c.normalizeVector(b);b[2]*=d+a;b[3]*=d+a;return c.addPointToVector(b,h)},rotateVectorAroundPoint:function(b,a,d){a=k(a);var h=c.rotatePointAroundPoint(a,[b[0],b[1]],d);b=c.rotatePointAroundPoint(a,[b[2],b[3]],d);return[h[0],h[1],b[0],b[1]]},toLineABC:function(b){var a=
b[3]-b[1],d=b[0]-b[2];return[a,d,-a*b[0]-d*b[1]]},intersect2Lines:function(b,a){var d=c.toLineABC(b),h=c.toLineABC(a);a=d[0];b=d[1];var d=d[2],e=h[0],f=h[1],h=h[2],g=a*f-e*b;return 0===g?null:[(h*b-d*f)/g,(e*d-a*h)/g]},intersectLineWithRect:function(b,a){function d(d,h){(d=c.intersect2Lines(b,[d[0],d[1],h[0],h[1]]))&&c.isPointInRect(a,d)&&p.push(d)}var h=e(a),f=h[0],g=h[1],m=h[2],h=h[3],p=[];d(f,g);d(g,m);d(m,h);d(h,f);if(2!==p.length)return null;f=[p[0][0],p[0][1],p[1][0],p[1][1]];return c.calcVectorLength(f)?
f:null},isPointInRect:function(b,a){b=g(b);a=k(a);var d=b[2]-b[0],c=b[3]-b[1];return!(a[0]<b[0]||a[0]>b[0]+d||a[1]<b[1]||a[1]>b[1]+c)},isRectInRect:function(b,a){return c.checkRectsIntersect([b,a])&&e(g(b)).every(function(b){return c.isPointInRect(a,b)})},checkRectsIntersect:function(b){b=b.map(g);return b.every(function(a){var d=e(a);return b.every(function(b){return a===b?!0:d.some(function(a){return c.isPointInRect(b,a)})||e(b).some(function(b){return c.isPointInRect(a,b)})})})},getRotatedRectBox:function(b,
a){var d=!Array.isArray(b);b=g(b);var h=e(b);b=h[0];var l=h[1],n=h[2],m=h[3],h=h[4];b=c.rotatePointAroundPoint(h,b,a);l=c.rotatePointAroundPoint(h,l,a);n=c.rotatePointAroundPoint(h,n,a);m=c.rotatePointAroundPoint(h,m,a);b=c.getPointsExtent([b,l,n,m]);return d?f(b):b},uniteRects:function(b){var a=!Array.isArray(b[0]);b=b.map(g);var d=[];b.forEach(function(a){d=d.concat(e(a))});b=c.getPointsExtent(d);return a?f(b):b},getPointsExtent:function(b){var a=!Array.isArray(b[0]),d=Infinity,c=-Infinity,e=Infinity,
g=-Infinity;b.forEach(function(a){a=k(a);d=Math.min(d,a[0]);c=Math.max(c,a[0]);e=Math.min(e,a[1]);g=Math.max(g,a[1])});b=[d,e,c,g];return a?f(b):b}};return c})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/GridDataUtil":function(){define(["dojo/_base/lang","../../supportClasses/templateJsonUtils/fieldInfo/FieldLibrary","esri/dijit/geoenrichment/utils/FieldUtil","esri/dijit/geoenrichment/utils/ObjectUtil","esri/dijit/geoenrichment/ReportPlayer/countryConfig"],function(k,g,f,e,c){var b=
{getFieldCellValue:function(a){return a.gridData&&a.gridData[a.column.field]},setFieldCellContent:function(a,b){a.set("value",b);a.gridData[a.column.field]=b},clearFieldInfo:function(a,d){a.fieldInfos&&delete a.fieldInfos[d];a[d]="";b.setNumericDataValue(void 0,a,d)},getNumericCellValue:function(a){return b.getNumericDataValue(a.gridData,a.column.field)},setNumericCellValue:function(a,d){return b.setNumericDataValue(d,a.gridData,a.column.field)},getNumericDataValue:function(a,b){return a&&b&&a[b+
"_numeric"]},setNumericDataValue:function(a,b,c){b[c+"_numeric"]=a},getRenderedValue:function(a,d,h){var f={parentGrid:a,gridData:d,column:h};a=a._getCellRenderer().getRenderedContent(f);if(a.isUnavailableData)return{};var g;"number"!==typeof a.value||isNaN(a.value)?"string"===typeof a.formattedValue&&(f=e.parsePercentOrCurrency(a.formattedValue,c.getCurrencyFormat()),isNaN(f)||(g=f)):g=a.value;"number"!==typeof g&&(g=b.getNumericDataValue(d,h.field));return{numericValue:g,formattedValue:a.formattedValue}},
isEmptyCell:function(a){return!a.get("value")&&!a.gridData[a.column.field]&&!b.getFieldInfo(a)},hasSpans:function(a){return b.getColumnSpan(a)||b.getRowSpan(a)},getColumnSpan:function(a){return a&&a.gridData&&a.gridData.columnSpans&&a.gridData.columnSpans[a.column.field]},getRowSpan:function(a){return a&&a.gridData&&a.gridData.rowSpans&&a.gridData.rowSpans[a.column.field]},getDataColumnSpan:function(a,b){return a&&a.columnSpans&&a.columnSpans[b]},getDataRowSpan:function(a,b){return a&&a.rowSpans&&
a.rowSpans[b]},getFieldInfo:function(a){return a&&a.gridData&&a.column&&a.gridData.fieldInfos&&a.gridData.fieldInfos[a.column.field]},getGridFirstFieldInfo:function(a){return b.getFieldInfo(a.getFirstCell())},setFieldInfo:function(a,b){a.gridData&&(a.gridData.fieldInfos[a.column.field]=b)},provideFieldInfo:function(a){b.setFieldInfo(a,b.getFieldInfo(a)||{});return b.getFieldInfo(a)},getPreservableSettings:function(a){return{triggerJson:b.getConditionalFormatting(a),dataDrilling:b.getDataDrilling(a),
tooltipInfo:b.getTooltipInfo(a)}},setPreservableSettings:function(a,d){b.setConditionalFormatting(a,d&&d.triggerJson);b.setDataDrilling(a,d&&d.dataDrilling);b.setTooltipInfo(a,d&&d.tooltipInfo)},getCellStyle:function(a,d){if(!a||!a.gridData||!a.column)return null;var c=a.gridData.style&&a.gridData.style.fields&&a.gridData.style.fields[a.column.field];!c&&d&&(c={},b.setCellStyle(a,c));return c},getCellThemeStyle:function(a){return a&&a.gridData&&a.column?a.gridData.themeStyle&&a.gridData.themeStyle.fields[a.column.field]:
null},setCellStyle:function(a,b){var d=a.gridData.style=a.gridData.style||{};d.fields=d.fields||{};d.fields[a.column.field]=b},updateCellStyle:function(a,d){a=b.getCellStyle(a,!0);k.mixin(a,d)},copyFieldStyle:function(a,d,c){a=b.getCellStyle(a);d=b.getCellStyle(d,!0);for(var h in c)void 0!==a[h]&&(d[h]=a[h])},getFieldCellUrl:function(a){if(a.gridData&&a.gridData.urls&&a.column)return a.gridData.urls[a.column.field]},setFieldCellUrl:function(a,b){a.gridData&&a.column&&(a.gridData.urls=a.gridData.urls||
{},void 0===b?delete a.gridData.urls[a.column.field]:a.gridData.urls[a.column.field]=b)},getConditionalFormatting:function(a){return(a=b._toFieldInfo(a))&&a.triggerJson},setConditionalFormatting:function(a,d){var c=b.getFieldInfo(a);c.triggerJson=null;if(d){if(a=b.isVariableLikeFieldCell(a))d.fieldInfo=c;d.fieldInfo===c&&(d.fieldInfo=k.clone(d.fieldInfo),delete d.fieldInfo.triggerJson,a&&(delete d.fieldInfo.tooltipInfo,delete d.fieldInfo.dataDrillingPanelInfo))}c.triggerJson=d},getDataDrilling:function(a){return(a=
b.getSourceFieldInfo(a))&&a.dataDrillingPanelInfo},setDataDrilling:function(a,d){if(a=b.getSourceFieldInfo(a))a.dataDrillingPanelInfo=d},getTooltipInfo:function(a){return(a=b.getSourceFieldInfo(a))&&a.tooltipInfo},setTooltipInfo:function(a,d){if(a=b.getSourceFieldInfo(a))a.tooltipInfo=d},getSourceFieldInfo:function(a){var d=b._toFieldInfo(a);a=b.getConditionalFormatting(a);return d&&d.isImage?a&&a.fieldInfo:d},_toFieldInfo:function(a){return a?a.gridData?b.getFieldInfo(a):"object"===typeof a&&a:null},
isReportSectionCell:function(a){a=b._toFieldInfo(a);return!(!a||!a.isReportSection)},isInfographicCell:function(a){a=b._toFieldInfo(a);return!(!a||!a.isInfographic)},isChartCell:function(a){a=b._toFieldInfo(a);return!(!a||!a.isChart)},isMapCell:function(a){a=b._toFieldInfo(a);return!(!a||!a.isMap)},isImageCell:function(a){a=b._toFieldInfo(a);return!(!a||!a.isImage)},isImageTriggerCell:function(a){a=b._toFieldInfo(a);return!!(a&&a.isImage&&a.triggerJson)},getImageTriggerFieldInfo:function(a){return(a=
b._toFieldInfo(a))&&a.isImage&&a.triggerJson?a.triggerJson.fieldInfo:null},isShapeCell:function(a){a=b._toFieldInfo(a);return!(!a||!a.isShape)},isEmptyShapeCell:function(a){a=(a=b._toFieldInfo(a))&&a.shapeJson;return!(!a||a.g&&a.g.length)},isPlaceholderShapeCell:function(a){a=(a=b._toFieldInfo(a))&&a.shapeJson;return!(!a||!a.isPlaceholder)},isTextLikeCell:function(a){return!b._toFieldInfo(a)||b.isRichTextCell(a)||b.isVariableLikeFieldCell(a)||b.isSpecialFieldCell(a)},isRichTextCell:function(a){a=
b._toFieldInfo(a);return!(!a||!a.isRichText)},isVariableLikeFieldCell:function(a){a=b._toFieldInfo(a);return!(!a||!a.hasVariable&&!a.script&&"headers.CHART_POINT_VALUE"!==a.name)},isVariableFieldCell:function(a){a=b._toFieldInfo(a);return!(!a||!a.hasVariable)},isScriptFieldCell:function(a){a=b._toFieldInfo(a);return!(!a||!a.script)},isUneditableScript:function(a){a=b._toFieldInfo(a);return!!(a&&a.script&&a.script.isUneditableScript)},isNumericVariableFieldCell:function(a){return(a=b._toFieldInfo(a))?
a.hasVariable&&f.isNumericField(a)||a.script&&!a.script.isUneditableScript&&"String"!==a.script.type||"headers.CHART_POINT_VALUE"===a.name?!0:!1:!1},isCalculatableNumericVariableFieldCell:function(a){return b.isNumericVariableFieldCell(a)},isStringVariableFieldCell:function(a){a=b._toFieldInfo(a);return!(!a||!(a.hasVariable&&"esriFieldTypeString"===a.type||a.script&&"String"===a.script.type))},isSpecialFieldCell:function(a){var d=b._toFieldInfo(a);return d&&("headers.CHART_POINT_VALUE"===d.name||
!b.isVariableLikeFieldCell(a)&&g.hasField(d.name))}};return b})},"esri/dijit/geoenrichment/utils/FieldUtil":function(){define([],function(){function k(c){return("string"===typeof c?c:c&&c.type)||""}var g={isNumericField:function(c){switch(k(c)){case "esriFieldTypeSmallInteger":case "esriFieldTypeInteger":return"i";case "esriFieldTypeSingle":case "esriFieldTypeDouble":return"f"}return!1},isStringField:function(c){return"esriFieldTypeString"==k(c)||!1},isDateField:function(c){return"esriFieldTypeDate"==
k(c)||!1}},f=/DISTANCE$/;g.isDistanceField=function(c){return f.test(k(c))};var e=/^(SHAPE__Area|SHAPE__Length)$/i;g.canShowField=function(c,b){if(!c||!c.name||"esriFieldTypeOID"===c.type)return!1;if("esriFieldTypeDate"===c.type)return"d";var a=g.isNumericField(c)||g.isStringField(c);if("f"===a&&!1===c.editable&&e.test(c.name))return null;void 0===b&&(b=/^(OBJECTID|OID|FID)$/i);return b&&b.test(c.name)?!1:!0===a?"s":a};g.createFieldInfo=function(c){var b=g.canShowField(c);c={fieldName:c.name,label:c.alias||
c.name,isEditable:!!c.editable,visible:!!b};switch(b){case "i":c.format={places:0,digitSeparator:!0};break;case "f":c.format={digitSeparator:!0};break;case "s":c.stringFieldOption="textbox"}return c};return g})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/tableJson/TableJsonUtil":function(){define(["dojo/_base/lang","../templateJsonUtils/fieldInfo/FieldInfoBuilder","../templateJsonUtils/fieldInfo/FieldLibrary","../../grid/coreUtils/GridDataUtil","esri/dijit/geoenrichment/ReportPlayer/core/sections/SectionTypes"],
function(k,g,f,e,c){var b={createTable:function(a){var b=a.numColumns,c=a.numRows,e=a.width,f=a.widths,m=a.style,p=a.attributes&&a.attributes.fixedColumns,t=a.attributes&&a.attributes.dynamicColumns;if(e)if(f)f=f.map(function(a){return e*Number(a.replace("%",""))/100});else for(var q=e/b,f=[],r=0;r<b;r++)f.push(q);if(f)e||isNaN(Number(f[0]))||(e=0,f.forEach(function(a){e+=a}));else for(q=Number(100/b).toFixed(3)+"%",f=[],r=0;r<b;r++)f.push(q);q=[];for(r=0;r<b;r++)q.push({field:"field"+r,style:{width:f[r]}});
for(var f=[],u=!0,v=a.height?a.height/c:a.rowHeight||15.07,w=0;w<c;w++){for(var y={style:{height:v,fields:{}},fieldInfos:{}},r=0;r<b;r++){var A="field"+r;!1!==a.useDefaultTheme&&(y.style.fields[A]=k.mixin({horizontalAlign:0===r?"left":"right",overrideStyle:0===w?1<c?!1!==a.useDefaultHeaderTheme?"TableHeader":"Default":void 0:u?"AlternatingRow":"Default"},a.cellParams));t&&r>=p&&0===w&&(y.fieldInfos[A]=g.createFieldInfoFromSpecialFieldName("AREA_DESC"));a.processTableCell&&a.processTableCell(y,A,w,
r,a)}f.push(y);u=!u}return{id:"table",attributes:k.mixin({},a.attributes),style:k.mixin({width:e||772.33},m),data:{columns:q,data:f}}},createSingleCellTable:function(a){a=a||{};var d=b.createTable({numColumns:1,numRows:1,attributes:a.attributes,useDefaultTheme:!1});b.modifyTableJson(d,0,0,a);return d},modifyTableJson:function(a,b,c,e){b=a.data.data[b];c=a.data.columns[c];var d=c.field;e.text&&(b[d]=e.text);e.fieldInfo&&(b.fieldInfos[d]=e.fieldInfo);e.cellStyle&&(b.style.fields[d]=e.cellStyle);e.columnSpan&&
(b.columnSpans=b.columnSpans||{},b.columnSpans[d]=e.columnSpan);e.rowSpan&&(b.rowSpans=b.rowSpans||{},b.rowSpans[d]=e.rowSpan);b.themeStyle=e.themeStyle;e.width&&(a.style.width=e.width,c.style.width=e.width);e.height&&(b.style.height=e.height);void 0!==e.left&&(a.style.left=e.left);void 0!==e.top&&(a.style.top=e.top)},getTableWidth:function(a){return a.style.width},getTableHeight:function(a){var b=0;a.data.data.forEach(function(a){b+=a.style?a.style.height:0});return b},calcTableBox:function(a){return{x:a.style.left||
0,y:a.style.top||0,w:b.getTableWidth(a),h:b.getTableHeight(a)}},createDetailsSection:function(a){return{type:c.DETAILS,stack:[b.createTable(a)]}},createDetailsSectionForFieldInfos:function(a,d){return{type:c.DETAILS,stack:[function(){var c=b.createTable(k.mixin({numColumns:2,numRows:a.length+1},d));c.data.data.forEach(function(b,d){0===d?b.field0=a[0].hasVariable?a[0].fieldCategory:"":(d=a[d-1],b.field0=d.script?d.script.alias:d.hasVariable?d.alias:f.getFieldLabel(d.name)||"",b.fieldInfos.field1=
d)});b.provideSpaceAfter(c);return c}()]}},createDetailsSectionForFieldInfoGroups:function(a,d){return{type:c.DETAILS,stack:[function(){var c=b.createTable(k.mixin({numColumns:a.length+1,numRows:a[0].length+1},d));c.data.data.forEach(function(b,d){c.data.columns.forEach(function(c,h){0!==h&&(0===d?b[c.field]=a[h-1][0].fieldCategory||"":(h=a[h-1][d-1],b.field0=b.field0||(h.script?h.script.alias:h.alias),b.fieldInfos[c.field]=h))})});b.provideSpaceAfter(c);return c}()]}},provideSpaceAfter:function(a,
b){a.style.spaceAfter=Math.max(b||0,90-15.07*a.data.data.length)},applyDefaultStyling:function(a){var b=!0;a.data.data.forEach(function(d,c){a.data.columns.forEach(function(a){d.style.fields[a.field].overrideStyle=0===c?"TableHeader":b?"AlternatingRow":void 0});b=!b})},setTableHeaderStyle:function(a){if(a.style)for(var b in a.style.fields)(a.style.fields[b]=a.style.fields[b]||{}).overrideStyle="TableHeader"},DEFAULT_ROW_HEIGHT:15.07,isEmptyTable:function(a){return a.isGrid?!a.columns||!a.columns.length||
!a.store||!a.store.data.length:a.data?!a.data.columns||!a.data.columns.length||!a.data.data||!a.data.data.length:!1},isSingleCelledTable:function(a){return a.isGrid?a.store&&1===a.store.data.length&&a.columns&&1===a.columns.length:a.data?1===a.data.columns.length||1===a.data.data.length:!1},isMultiDataTable:function(a){return a.isGrid?1<a.columns.length||2<a.store.data.length:a.data?1<a.data.columns.length||2<a.data.data.length:!1},getTableSubtype:function(a){if(!b.isSingleCelledTable(a))return null;
a=a.isGrid?a.store.data[0].fieldInfos&&a.store.data[0].fieldInfos[a.columns[0].field]:a.data.data[0].fieldInfos&&a.data.data[0].fieldInfos[a.data.columns[0].field];return e.isTextLikeCell(a)?"isTextLike":a.isImage?a.triggerJson?"isImage.hasConditionalStyling":"isImage":a.isShape?"isShape":null},tableJsonHasInfographic:function(a){return!!b.getTableJsonInfographic(a)},getTableJsonInfographic:function(a){var b;a.data.data.some(function(a){if(a.fieldInfos)for(var d in a.fieldInfos){var c=a.fieldInfos[d];
if(c&&c.isInfographic)return b=c.infographicJson,!0}});return b},getTableJsonFirstFieldInfo:function(a){return a.data.data[0].fieldInfos[a.data.columns[0].field]},tableJsonHasChart:function(a){return a.data.data.some(function(a){if(a.fieldInfos)for(var b in a.fieldInfos){var d=a.fieldInfos[b];if(d&&d.isChart)return!0}})}};return b})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/templateJsonUtils/fieldInfo/FieldInfoBuilder":function(){define(["./utils","dojo/i18n!esri/nls/jsapi"],function(k,
g){function f(a){Object.keys(a).forEach(function(b){var d=a[b];void 0!==d&&null!==d||delete a[b]})}g=g.geoenrichment.dijit.ReportPlayer.ReportPlayer;var e={NUMBER:"n/",createFieldInfoFromCalculator:function(a,b,c){if(!a)return null;a=(b="function"===typeof a.getDescriptionWithType?a:null)?b.variable:a;var d=c&&c.format,h=c&&c.autoformatCurrency,e=c&&c.additionalText,g=c&&c.calculatorName,l=c&&c.defaultDistanceUnits;c=c&&c.summaryType;var r=b&&b.getToggleGroup&&b.getToggleGroup();c={alias:b?b.getDescriptionWithType()||
b.getAliasWithType():a.description||a.alias,hasVariable:!0,variableID:a.id,fullName:a.fullName,fieldCategory:a.fieldCategory,vintage:a.vintage,type:a.type,statefulName:r?r.value:"n/"+a.fullName,summaryType:c};b=b?b.getCalcType().charAt(0):"n";c.name=k.name.createFieldNameFromSource(a,b);d?k.format.setFieldInfoFormat(c,d):(c.decimals=a.precision,c.showCurrency=!(!h||"n"!==b||!a.units||"CURRENCY"!==a.units.toUpperCase()),c.showPercent=!c.showCurrency&&("p"===b||"n"===b&&a.units&&"PCT"===a.units.toUpperCase()),
c.useThousandsSeparator=!0);a.isWebMap&&(c.isWebMap=!0,c.webMapFieldName=a.fieldName,c.webMapField=a.field,c.webMapId=a.webMapId,c.layerUrl=a.layerUrl,!d&&a.fieldInfo&&a.fieldInfo.format&&(c.decimals=a.fieldInfo.format.places,c.useThousandsSeparator=!1!==a.fieldInfo.format.digitSeparator));a.customDataCollection&&(c.isCustomDataCollection=!0,c.customDataCollectionId=a.customDataCollection.id,c.customDataCollectionUrl=a.customDataCollection.url,c.customDataCollectionPortalUrl=a.customDataCollection.portalUrl);
a.isSiteAttribute&&(c.isSiteAttribute=!0,c.attribute=a.attribute,c.type=a.attribute.type,!d&&0<a.attribute.places&&(c.decimals=a.attribute.places));a.isDataLayerAttribute&&(c.isDataLayerAttribute=!0,c.layerID=a.layerID,c.layerUrl=a.layerUrl,c.layerName=a.layerName,c.attribute=a.attribute,c.type=a.attribute.type,!d&&0<a.attribute.decimals&&(c.decimals=a.attribute.decimals),"DISTANCE"===a.attribute.name&&(c.units=a.attribute.units||l||"esriMiles"));"string"===typeof e&&(c.additionalText=e);c.usedFields=
a.usedFields;c.expressionText=a.expressionText;k.name.provideQualifiedFieldInfoTemplateName(c,g);f(c);return c},fieldInfoToVariable:function(a){if(!a.hasVariable)return null;var b={id:a.variableID,fullName:a.fullName,fieldCategory:a.fieldCategory,vintage:a.vintage,type:a.type,precision:a.decimals,usedFields:a.usedFields,expressionText:a.expressionText};a.isWebMap&&(b.isWebMap=!0,b.fieldName=a.webMapFieldName,b.field=a.webMapField,b.webMapId=a.webMapId,b.layerUrl=a.layerUrl);a.isSiteAttribute&&(b.isSiteAttribute=
!0,b.attribute=a.attribute);return b},createFieldInfoFromScript:function(a,b){var d=b&&b.format,c=b&&b.additionalText;b=b&&b.calculatorName;a=a||{};a.name=a.name||k.name.DEFAULT_SCRIPT_NAME;a.alias=a.alias||g.scriptNameDefault;a.decimals=Number(a.decimals)||0;var h={};h.name=k.name.createFieldNameFromScript(a);k.name.provideQualifiedFieldInfoTemplateName(h,b);h.script=a;d?k.format.setFieldInfoFormat(h,d):(h.decimals=Number(a.decimals),h.showCurrency=!1,h.showPercent=!1,h.useThousandsSeparator=!0);
"string"===typeof c&&(h.additionalText=c);f(h);return h},createFieldInfoFromImage:function(a,b){return{isImage:!0,imageJson:a,triggerJson:b}},createFieldInfoFromMap:function(a){return{isMap:!0,mapJson:a}},createFieldInfoFromShape:function(a){return{isShape:!0,shapeJson:a}},createFieldInfoFromChart:function(a){return{isChart:!0,chartJson:a}},createFieldInfoFromInfographic:function(a){return{isInfographic:!0,infographicJson:a}},createFieldInfoFromSection:function(a){return{isReportSection:!0,sectionJson:a}},
createFieldInfoFromMissingVariable:function(a,b){return{name:a&&a.substr(a.indexOf(".")+1),templateName:a,isMissing:!0,alias:b}},createFieldInfoForUnsupportedContent:function(){return{isUnsupportedContent:!0}}},c=/^\[\w+\]$/,b=/\[\w+\]/;e.createFieldInfoFromLabel=function(a,h){if("string"!==typeof a)return null;a=a.trim();var d=c.test(a);if(!h||d){if(!d)return null;a=a.replace(/\[|\]/g,"").toUpperCase();return e.createFieldInfoFromSpecialFieldName(k.fields.uiToTemplate(a))}return b.test(a)?k.richText.createFieldInfoFromRenderedXMLString(a):
null};e.createFieldInfoFromSpecialFieldName=function(a,b){if("string"!==typeof a)return null;var d;a=k.fields.trimTemplateHeaderName(a);a=a.toUpperCase();"GROUPCOUNT"===a?d={name:k.fields.GROUPCOUNT_FIELD_NAME,alias:k.fields.GROUPCOUNT_FIELD_ALIAS}:"CURRDATE"===a?d={name:k.fields.DATE_FIELD_NAME,alias:k.fields.DATE_FIELD_ALIAS,format:b||k.fields.DATE_FIELD_DEFAULT_FORMAT}:"SITENOTES"===a?d={name:k.fields.qualifyTemplateHeaderName(k.fields.SITENOTES_FIELD_NAME),alias:k.fields.SITENOTES_FIELD_ALIAS,
type:"esriFieldTypeString"}:0===a.indexOf("SITENOTE")&&(d=k.fields.getSiteNoteFieldNameAt(a.replace("SITENOTE","")),d={name:k.fields.qualifyTemplateHeaderName(d),alias:d,type:"esriFieldTypeString"});if(d)return d;var c=k.fields.templateToUIHeader(a);c?(d={name:k.fields.qualifyTemplateHeaderName(a),alias:c,type:"esriFieldTypeString"},k.fields.isChartAttribute(a)&&(d.isChartAttribute=!0),"CHART_POINT_VALUE"===a&&(d.type="esriFieldTypeDouble",d.decimals=0,d.useThousandsSeparator=!0,b&&k.format.setFieldInfoFormat(d,
b))):(b=k.fields.templateToUIReportVar(a))&&(d={name:b,alias:b,type:"esriFieldTypeString"});d&&(d.templateName=d.name);return d};var a=/_P$/i;e.isFieldInfoInPercentState=function(b){return b?b.statefulName&&("p"===b.statefulName.charAt(0)||a.test(b.statefulName))||b.alias&&-1!==b.alias.indexOf("(%)"):!1};return e})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/templateJsonUtils/fieldInfo/utils":function(){define(["esri/dijit/geoenrichment/Deferred","require"],function(k,g){var f={},
e;f.init=function(){if(e)return e.promise;e=new k;g("./FieldInfoBuilder ./FieldInfoFormatUtil ./FieldInfoNameUtil ./FieldInfoRenderer ./RichTextJsonUtil ./FieldLibrary".split(" "),function(c,b,a,d,h,g){f.builder=c;f.format=b;f.name=a;f.renderer=d;f.richText=h;f.fields=g;e.resolve()});return e.promise};f.init();return f})},"esri/dijit/geoenrichment/ReportPlayer/core/sections/SectionTypes":function(){define([],function(){return{PAGE_HEADER:"PageHeader",DETAILS_HEADER:"DetailsHeader",DETAILS:"Details",
GROUP:"Group",PAGE_FOOTER:"PageFooter",REPORT_FOOTER:"ReportFooter",DATA_SOURCE:"DataSource",EMPTY:"empty",INFOGRAPHIC_HEADER:"InfographicHeader",INFOGRAPHIC_VARIABLE:"InfographicVariable",INFOGRAPHIC_BACKGROUND:"InfographicBackground",INFOGRAPHIC_FOREGROUND:"InfographicForeground",INFOGRAPHIC_ATTRIBUTES:"InfographicAttributes",INFOGRAPHIC_NOTES:"InfographicNotes",INFOGRAPHIC_SUMMARY:"InfographicSummary",INFOGRAPHIC_SUMMARY_FOOTER:"InfographicSummaryFooter",TABLE_BACKGROUND:"TableBackground",TABLE_FOREGROUND:"TableForeground",
TABLE_BACKGROUND_FLOATING_PANELS:"BackgroundFloatingPanels",TABLE_FOREGROUND_FLOATING_PANELS:"ForegroundFloatingPanels",TABLE_FLOATING_PANELS:"FloatingPanels"}})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/_ServerSerializationSupport":function(){define("dojo/_base/declare dojo/_base/lang esri/dijit/geoenrichment/when esri/dijit/geoenrichment/utils/ImageUtil ./supportClasses/ReportDataProcessor ./supportClasses/tasks/parsers/DataXMLParser ./supportClasses/areas/AnalysisAreaUtil ./supportClasses/areas/AnalysisAreaJsonUtil ./supportClasses/areas/AreasPreprocessor ./supportClasses/GEUtil ../core/supportClasses/ReportTemplateTypes ../core/conversion/PortalToEditorConverter ../core/supportClasses/templateJsonUtils/query/TemplateJsonQueryUtil ./supportClasses/attachments/AttachmentsStoreSerializer ../core/supportClasses/templateJsonUtils/TemplateJsonSerializer ../core/conversion/portalToEditorUtils/variables/PlayerVariableProvider ../core/conversion/portalToEditorUtils/metadata/MetadataFromDataBuilder ../countryConfig".split(" "),
function(k,g,f,e,c,b,a,d,h,l,n,m,p,t,q,r,u,v){return k(null,{reportDataToServerData:function(a){return null},reportDataFromServerData:function(k,y){function w(a,b){z.some(function(a){return"metadata.xml"===a.name})||z.push({name:"metadata.xml",data:u.recoverMetadataFromAreaData(a.areaData,b)})}function B(a,b){k.sites=[];var d={};a.areaData.forEach(function(a){var b=a.headers&&a.headers.data||{};a={name:b.SITE_NAME||b.STORE_NAME||b.AREA_DESC,shortName:b.AREA_DESC,address:b.STORE_ADDR,description:b.AREA_DESC2,
latitude:b.STORE_LAT,longitude:b.STORE_LONG};b=b.STORE_ID||"default";"number"!==typeof d[b]&&(d[b]=k.sites.length,k.sites.push(g.mixin({areas:[]},a)));k.sites[d[b]].areas.push(g.mixin({feature:{attributes:{}}},a))});a.reportInfo.sites&&a.reportInfo.sites.forEach(function(a,d){d=k.sites[d];d.attributes=a.attributes;d.notes=a.notes;d.images=a.images;d.images&&d.images.forEach(function(a){function d(a){return(a=b[a])&&e.base64DataToDataURL(a,"image/png")}a.url=d(a.url);a.thumbnail=d(a.thumbnail)})})}
var C=this;v.reset();var z=k.reportItem.resources,E;if(!Array.isArray(z)){var G=z,z=[],F;for(F in G)z.push({name:F,data:G[F]})}z.forEach(function(a){"theme.css"===a.name&&(a.name="theme.css.txt")});var D=z.filter(function(a){return"report.xml"===a.name})[0],H=z.filter(function(a){return"data.xml"===a.name})[0],J=function(){var a=/.*\.(png|jpg|jpeg)$/i,d=/.*\.(json)$/i,c={},h={};z.forEach(function(b){a.test(b.name)&&(c[b.name]=b.data,"logo.png"===b.name&&(E=e.base64DataToDataURL(b.data,"image/png")));
if(d.test(b.name)){if(-1!==b.data.indexOf("mapOptions")&&-1!==b.data.indexOf("ComparisonResultsLayer.")){var f=JSON.parse(b.data);f.operationalLayers.filter(function(a){a.featureCollection&&a.featureCollection.layers&&(a.featureCollection.layers=a.featureCollection.layers.filter(function(a){return a.id&&0===a.id.indexOf("ComparisonResultsLayer.")?!1:!0}));return!0});b.data=JSON.stringify(f)}h[b.name]=b.data}});var f={},g=D.data.match(/<section[^<>]*query=".+?".*?>/g);g&&g.forEach(function(a){a=a.replace(/.*?query="/,
"");a=a.replace(/".*/,"");f[a]=1});var l={},g=b.parse(H.data,function(a,b,d){return(a=h[b])?(l[d]=1,a):c[b]||b});w(g,{map:l,locator:f});B(g,c);return g}(),K=new r;return f(function(a){var b=D.data.indexOf("\x3csection"),d={isGraphicReport:D.data.indexOf("\x3ctable")<b,isMultiFeature:!1,defaultComparisonZoom:null,type:n.STANDARD,portalJson:{files:z}};return f(m.provideEditorJson(d,{variableProvider:a}),function(){d.templateJson=q.deserialize(d.templateJson);d.isMultiFeature=p.hasMultiFeatureSections(d.templateJson);
delete d.portalJson;return d})}(K),function(b){a.parseSites(k);var e=d.areasFromJson(k.analysisAreas),g=k.combinedAreasInfo&&d.combinedAreasInfoFromJson(k.combinedAreasInfo)||{},m=k.attachmentsProvider&&t.getAttachmentsStoreFromJson(k.attachmentsProvider),n=C._infographicOptionsProvider.getInfographicOptions({analysisAreas:e}),p={isMultiFeature:b.isMultiFeature&&1<e.length,reportTitle:null,templateJson:b.templateJson,reportObject:b,fieldData:{specialTradeAreaCalculatorName:null,runReportTaskIDs:null,
metadata:{},areaData:[],errors:[],reportInfo:null},analysisAreas:e,combinedAreasInfo:g,reverseAnalysisAreasOnMap:!0,infographicOptions:n,attachmentsStore:m,templateVariableProvider:K,customLogo:E,config:{}};a.populateCombinedAreasInfo(p.combinedAreasInfo,p.analysisAreas);h.provideAreasIndexes(p);l.setGeoenrichmentUrl(null);y&&y.forEach(function(a){switch(a){case "Maps":l.addCapability("FormatInfographicsMaps");break;case "ImageUrls":l.addCapability("FormatInfographicsImageUrls")}});return f(c.applyRunReportAndGetDataResults(J,
p)).then(function(){return p})})}})})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/ReportDataProcessor":function(){define("esri/dijit/geoenrichment/when esri/dijit/geoenrichment/promise/all esri/dijit/geoenrichment/Deferred ./tasks/EnrichAreasTask ./tasks/RunReportTask ./data/AreaCalculatorsUtil ./data/VariablesUtil ./CustomReportsManager ./stdGeographies/StdGeographiesModel esri/dijit/geoenrichment/utils/DateUtil ../../core/supportClasses/templateJsonUtils/fieldInfo/FieldLibrary ../../core/supportClasses/templateJsonUtils/fieldInfo/FieldInfoNameUtil ../../core/supportClasses/templateJsonUtils/query/TemplateJsonQueryUtil ../../core/supportClasses/templateJsonUtils/TemplateJsonAnalyzer ../../core/infographics/utils/InfographicJsonUtil ../../config ../../countryConfig".split(" "),
function(k,g,f,e,c,b,a,d,h,l,n,m,p,t,q,r,u){return{runReportAndGetData:function(a,b){return g([d.getCustomReportByID(a),b]).then(function(b){var d=b[0];b=b[1];return(new c).execute({portalUrl:a.portalUrl,analysisAreas:a.analysisAreas,countryID:a.countryID,hierarchy:a.hierarchy,report:{reportID:d.reportID,portalUrl:d.templateData.getPortalUrl(!0),modified:d.modified,isMultiFeature:d.isMultiFeature},attachmentsStore:b,cacheResult:r.runReportTask.cacheResult}).then(function(a){return{taskIDs:a.taskIDs,
areaData:a.areaData,reportInfo:a.reportInfo}},function(b){a.fieldData.errors.push(b);return(new f).reject(b)})})},runReportFromVariables:function(d){var c={};d.variables.fullNames.forEach(function(a){var b=m.createFieldNameFromSource(a);c[a.substr(a.indexOf(".")+1)]=b});return(new e).enrichAreas({portalUrl:d.portalUrl,analysisAreas:d.analysisAreas,countryID:d.countryID,hierarchy:d.hierarchy,fields:a.convertForEnrich(d.variables),comparisonLevels:d.comparisonLevels||q.getDefaultLevels()}).then(function(a){var h=
d.analysisAreas.map(function(){return{}});b.addEnrichFeatures(a,c,m.DATA_COLLECTIONS_CALCULATOR_NAME,h);return{areaData:h}},function(a){d.fieldData.errors.push(a);return(new f).reject(a)})},applyRunReportAndGetDataResults:function(a,b){if(a&&a.areaData){var d=b.templateJson;b.fieldData.specialTradeAreaCalculatorName=d.metadata.specialTradeAreaCalculatorName;delete d.metadata;b.fieldData.runReportTaskIDs=a.taskIDs;b.fieldData.areaData=a.areaData;(b.fieldData.reportInfo=a.reportInfo)&&this._populateReportDataFromReportInfo(a.reportInfo,
b);this._reportDataFromAreas(b.analysisAreas,b.fieldData.areaData);this._reportDataFromReport(b.reportObject,b.fieldData,b.combinedAreasInfo);return this._populateReportDataFromAttachmentsStore(b)}},_populateReportDataFromReportInfo:function(a,b){b.reportTitle=b.reportObject.title=b.reportTitle||a.Title||"";a.country&&!u.getCurrentCountry()&&(u.setCountry(a.country),u.setHierarchyID(null));a.stdLevels&&!u.getGeographiesModel()&&u.setGeographiesModel(new h({levels:a.stdLevels}));if(r.updateVariableInfoFromDataXml||
r.isPlayerOnServer){var d=a.variables;p.processTemplateFieldInfos(b.templateJson,function(a){if(a.hasVariable&&a.variableID&&a.templateName){var c=a.templateName.indexOf("."),h=a.templateName.substr(0,c),c=a.templateName.substr(c+1);(h=d[h]&&d[h][c])&&h.alias&&(a.alias=h.alias,a=b.templateVariableProvider.get(a.templateName))&&(a.alias=h.alias,h.vintage&&(a.vintage=h.vintage),h.source&&(a.source=h.source))}})}a=t.collectVariablesStats(b.templateJson);if(a=b.templateVariableProvider.getVariablesDataVintageDescription({usedVariablesCache:a}))b.reportObject.dataVintageDescription=
a},_populateReportDataFromAttachmentsStore:function(a){var d=a.attachmentsStore,c=[];a.analysisAreas.forEach(function(h,e){d.supportsMultipleAreas&&d.setCurrentAnalysisAreaIndex(e);0===e&&c.push(k(d.getNotes(),function(b){b&&b.length&&(a.fieldData.metadata[n.SITENOTES_FIELD_NAME]=b.map(function(a){return a.text}).join("\x3cbr/\x3e\x3cbr/\x3e"),b.forEach(function(b,d){a.fieldData.metadata[n.getSiteNoteFieldNameAt(d+1)]=b.text}))}));c.push(k(d.getAttributes(),function(d){if(!d||!d.length)return null;
var c={attributes:{}};d.forEach(function(a){c.attributes[a.name]=a});(d=a.fieldData.areaData[e])&&b.addFeatureAttributesCalculator(c,d)}))});return g(c)},_reportDataFromAreas:function(a,d){a.forEach(function(a,c){if(c=d[c])b.addFeatureAttributesCalculator(a.feature,c),b.addAreaInfoCalculator(a,c)})},_reportDataFromReport:function(a,b,d){var c=b.metadata;a&&!c.Title&&(c.Title=a.title);c.Subtitle=b.reportInfo&&b.reportInfo.Subtitle||"";c.Source=a.dataVintageDescription||"Esri";c.Date=l.getReportFooterDate();
c.Copyright="\u00a9 "+l.getFullYear()+" Esri";c.ProductLabel="";c.ProductUrl="";c.PhoneNumber="";c.TrialUrlText="";a.isMultiFeature&&(c.SITE_NAME=d.locationName||d.name,c.STORE_NAME=d.locationName||d.name,c.AREA_DESC2=d.description||d.name,c.STORE_ADDR=d.address)}}})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/tasks/EnrichAreasTask":function(){define("dojo/_base/declare dojo/_base/lang esri/dijit/geoenrichment/when esri/dijit/geoenrichment/promise/all esri/kernel esri/SpatialReference esri/tasks/FeatureSet esri/geometry/Point ../GEUtil ../areas/AnalysisAreaUtil ../attachments/AttributesUtil ../../../core/supportClasses/map/Projector ../../../countryConfig esri/dijit/geoenrichment/utils/CoordinateUtil".split(" "),
function(k,g,f,e,c,b,a,d,h,l,n,m,p,t){function q(a){return(a=a&&c.id.findCredential(a)||c.id.credentials[0])&&a.token}return k(null,{enrichAreas:function(a){var b={};return f(this._analysisAreasToStudyAreas(a.analysisAreas,a.countryID,a.comparisonLevels),function(d){b.studyAreas=d;a.report?b.analysisVariables=[{itemid:a.report.reportID,url:a.report.portalUrl,token:q(a.portalUrl),outFields:["*"]}]:a.fields&&(b.analysisVariables=a.fields);return this._doRunTask(b,a,"enrich")}.bind(this)).then(this._handleFeatureSetsRequest.bind(this))},
createReport:function(a){var b={f:"bin",format:"xml",reportfields:{}};b.report={itemid:a.report.reportID,url:a.report.portalUrl,token:q(a.portalUrl)};return f(this._analysisAreasToStudyAreas(a.analysisAreas,a.countryID,null,a.getAttributes),function(d){b.studyAreas=d;return this._doRunTask(b,a,"createReport")}.bind(this))},_analysisAreasToStudyAreas:function(a,b,d,c){var h=this;d=d&&d.map(function(a){return{layer:a}});return e(a.map(function(a,f){var l;a.geographies&&a.geographies.length?(l=h._studyAreaFromGeographies(a.geographies,
b,!0),a.feature&&a.feature.attributes&&(l.attributes=g.mixin({},l.attributes,a.feature.attributes))):l={attributes:g.mixin({},a.feature.attributes),geometry:a.feature.geometry.toJson()};d&&(l.comparisonLevels=d);return e([h._getStorePointForArea(a),c&&c(a)]).then(function(a){var b=a[0];a=a[1];l.attributes=l.attributes||{};b&&(l.attributes.STORE_LAT=l.attributes.STORE_LAT||b.STORE_LAT,l.attributes.STORE_LONG=l.attributes.STORE_LONG||b.STORE_LONG);l.attributes.STORE_ID=f+"";a&&a.forEach(function(a){l.attributes[a.name]=
n.formatAttributeValueForStudyArea(a)});return l})}))},_getStorePointForArea:function(a){if(a=a.location&&a.location.geometry||a.buffer&&a.buffer.point){a=a instanceof d?a:new d(a);var c=l.geometryToLatLong(a);return c?c:f(m.projectGeometries(a,new b(t.WGS_84_WKID)),function(a){return l.geometryToLatLong(a)})}},createFeatureForGeographies:function(a,b){return this._createFeaturesForGeographies(a,b,!0).then(function(a){return a[0]})},createFeaturesForGeographies:function(a,b){return this._createFeaturesForGeographies(a,
b,!1)},_createFeaturesForGeographies:function(a,d,c){a={returnGeometry:!0,outSR:d.outSR||new b(t.WEB_MERCATOR_WKID),studyAreas:c?[this._studyAreaFromGeographies(a,d.countryID,!0,d.generalizationLevel)]:a.map(function(a){return this._studyAreaFromGeographies([a],d.countryID,!1,d.generalizationLevel)},this),dataCollections:["GlobalIntersect"]};return this._doRunTask(a,d,"enrich").then(this._handleFeatureSetsRequest.bind(this))},_studyAreaFromGeographies:function(a,b,d,c){var h={sourceCountry:b,layer:null,
ids:null},e=null,f=[],l;a.forEach(function(a){if(!a||!a.id)throw Error("Wrong geography.");var b=a.levelId;if(b)if(!e)e=b;else if(d&&e!==b)throw Error("Geographies have different level IDs.");f.push(a.id);a.sourceCountry&&(h.sourceCountry=a.sourceCountry);a.hierarchy&&(h.hierarchy=a.hierarchy);a.attributes&&(l=g.mixin(l||{},a.attributes))});h.layer=e;h.ids=d?[f.join(",")]:f;h.attributes=l;h.generalizationlevel=c;return h},createFeaturesForBuffer:function(a,d){d=d||{};var c={bufferUnits:a.units,bufferRadii:a.radii||
[a.radius],areaType:a.areaType||"RingBuffer"};"NetworkServiceArea"===c.areaType&&(c.travelMode=a.travelMode,c.networkOptions=a.networkOptions);a=a.point||a.polyline;c={returnGeometry:!0,outSR:d.outSR||a.spatialReference||new b(t.WEB_MERCATOR_WKID),dataCollections:["GlobalIntersect"],studyAreasOptions:c,studyAreas:[{geometry:a.toJson?a.toJson():a}]};return this._doRunTask(c,d,"enrich").then(this._handleFeatureSetsRequest.bind(this))},createFeaturesForBuffers:function(a,b){var d={},c=[];a.forEach(function(a){var b;
b=a.point||a.polyline;b=JSON.stringify(b.toJson?b.toJson():b)+";"+a.units+";"+a.areaType+";"+a.travelMode+";"+JSON.stringify(a.networkOptions);var h=d[b];h||(h=d[b]=g.clone(a),delete h.radius,h.radii=[],c.push(h));a.radii?h.radii=h.radii.concat(a.radii):h.radii.push(a.radius)});return e(c.map(function(a){return this.createFeaturesForBuffer(a,b)},this)).then(function(a){var b=[];a.forEach(function(a){b=b.concat(a)});return b})},_doRunTask:function(a,b,d){a=g.mixin({useData:{sourceCountry:b.countryID,
hierarchy:b.hierarchy||p.getHierarchyID()},forStorage:!1},a);return h[d](a)},_handleFeatureSetsRequest:function(b){return(new a(b[0])).features}})})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/attachments/AttributesUtil":function(){define(["dojo/_base/lang","esri/layers/CodedValueDomain","esri/dijit/geoenrichment/utils/DateUtil","esri/dijit/geoenrichment/utils/ObjectUtil"],function(k,g,f,e){var c={composeAttributesFromFieldInfos:function(b,a){return b&&b.filter(function(a){return a.visible}).map(function(b){var d=
b.fieldName,c=b.label,e=b.format&&b.format.places,f=b.format&&b.format.digitSeparator,g=b.format&&b.format.dateFormat,k=a[b.fieldName];b=(b=b.format)&&b.dateFormat?"esriFieldTypeDate":b&&void 0!==b.places?0<b.places?"esriFieldTypeDouble":"esriFieldTypeInteger":"esriFieldTypeString";return{name:d,alias:c,places:e,digitSeparator:f,dateFormat:g,value:k,type:b,domain:null,length:void 0}})},formatAttributeValue:function(b,a){a=a||{};var d=a.hasOwnProperty("unavailableDataValue")?a.unavailableDataValue:
"";if(!b||null===b.value||void 0===b.value)return d;if(!a.skipFormattedValue&&b.formattedValue&&b.formattedValue!==d)return b.formattedValue;var c=b.domain&&"codedValue"===b.domain.type?new g(b.domain):null;c?(a=c.getName(b.value))||(a=b.value+""):"esriFieldTypeString"===b.type?a=b.value:"esriFieldTypeDate"===b.type?a=f.formatDateShort(b.value):(a=a.format,a=e.formatNumber(b.value,{places:a&&void 0!==a.decimals?a.decimals:b.places,noSeparator:a&&void 0!==a.useThousandsSeparator?!a.useThousandsSeparator:
!1===b.digitSeparator,preserveTrailingZeroes:!0}));return null===a||void 0===a?d:a},formatAttributeValueForStudyArea:function(b){var a;b&&null!==b.value&&void 0!==b.value||(a=!0);a||(a=b.domain&&"codedValue"===b.domain.type||"esriFieldTypeDate"===b.type);return a?c.formatAttributeValue(b):b.value},attributeToJson:function(b){return{name:b.name,alias:b.alias,type:b.type,value:b.value,domain:b.domain&&(b.domain.toJson?b.domain.toJson():k.clone(b.domain)),places:b.places,digitSeparator:b.digitSeparator,
dateFormat:b.dateFormat,length:b.length}},attributeFromJson:function(b){return{name:b.name,alias:b.alias,type:b.type,value:b.value,domain:b.domain,places:b.places,digitSeparator:b.digitSeparator,dateFormat:b.dateFormat,length:b.length}}};return c})},"esri/dijit/geoenrichment/utils/DateUtil":function(){define(["dojo/date/locale","esri/moment"],function(k,g){var f={formatDate:function(e,c){return(e=f.objectToDate(e))?k.format(e,c):""},formatMoment:function(e,c){return(e=f.objectToTime(e))?g(e).format(c):
""},formatDateShort:function(e){return f.formatMoment(e,"L")},formatDateTimeShort:function(e){return f.formatMoment(e,"L LT")},formatLiveTime:function(e){var c=f.formatMoment(e,"l, LT").replace(/\d\d\d\d/,function(b){return b.substr(2)});return c?c+" "+f.formatDate(e,{datePattern:"ZZZZ",selector:"date"}):""},formatTypicalTime:function(e){return f.formatMoment(e,"ddd LT")},parseDateShort:function(e){return(e=+g(e,"L"))?new Date(e):null},getReportFooterDate:function(e){return k.format(e||new Date,{datePattern:"MMMM d, yyyy",
selector:"date"})},getFullYear:function(){return(new Date).getFullYear()},objectToTime:function(e){if(!e)return null;e="string"===typeof e?new Date(e):e;return e.getTime?e.getTime():Number(e)||null},objectToDate:function(e){return e?e.getTime?e:new Date(e):null}};return f})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/map/Projector":function(){define(["dojo/_base/declare","esri/dijit/geoenrichment/Deferred","esri/dijit/geoenrichment/when","esri/dijit/geoenrichment/promise/all","esri/dijit/geoenrichment/utils/ProjectionUtil"],
function(k,g,f,e,c){function b(a,b){return c.projectGeometries(a,b)}k=k(null,{_pendingInfos:null,_isBusy:!1,constructor:function(){this._pendingInfos=[]},addForProjection:function(a,b){if(this._isBusy)throw Error("Can't interrupt the current projection process.");a=a&&a.geometry||a;var d=new g;this._pendingInfos.push({geom:a,mapOrSR:b,dfd:d,index:this._pendingInfos.length});return d.promise},project:function(){function a(a){var d=g[a];return f(b(d.geoms,d.mapOrSR),function(a){a.forEach(function(a,
b){b=d.indexMap[b];m[b]=a;h[b].resolve(a)})})}var d=this;if(this._isBusy)throw Error("Can't interrupt the current projection process.");this._isBusy=!0;var h=[],g={};this._pendingInfos.forEach(function(a){h.push(a.dfd);var b=a.geom.type+";"+a.geom.spatialReference.wkid+";"+c.getSpatialReference(a.mapOrSR).wkid,b=g[b]=g[b]||{geoms:[],indexMap:{},mapOrSR:a.mapOrSR};b.geoms.push(a.geom);b.indexMap[b.geoms.length-1]=a.index});this._pendingInfos.length=0;var n=[],m=[],k;for(k in g)n.push(a(k));return e(n).then(function(){d._isBusy=
!1;return m})}});k.needProject=function(a,b){a=a&&a.geometry||a;return a.spatialReference&&a.spatialReference.wkid!==c.getSpatialReference(b).wkid};k.projectGeometries=b;return k})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/tasks/RunReportTask":function(){define("dojo/_base/declare dojo/_base/lang esri/dijit/geoenrichment/promise/all esri/dijit/geoenrichment/Deferred esri/dijit/geoenrichment/when ./parsers/DataXMLParser ./EnrichAreasTask ../areas/AnalysisAreaJsonUtil esri/dijit/geoenrichment/utils/ArrayUtil esri/dijit/geoenrichment/ReportPlayer/config esri/dijit/geoenrichment/ReportPlayer/_devConfig".split(" "),
function(k,g,f,e,c,b,a,d,h,l,n){var m={_cache:{},_buildKey:function(a){return[a.countryID,a.hierarchy,JSON.stringify(d.areasToJson(a.analysisAreas,{excludeInfoTemplate:!0})),a.report.reportID,a.report.portalUrl,a.report.modified].join("_")},getCopy:function(a){a=this._buildKey(a);return(a=this._cache[a])&&g.clone(a)},copyAndPut:function(a,b){a=this._buildKey(a);this._cache[a]=b&&g.clone(b)},getResults:function(){var a=[],b;for(b in this._cache)a.push(this._cache[b]);return a}},p={execute:function(d){var k=
d.cacheResult&&m.getCopy(d);if(k)return c(k);var k=h.splitArrayToBunches(d.analysisAreas,10),p;return f(k.map(function(h){function f(){var f=g.mixin({},d,{analysisAreas:h});f.getAttributes=function(a){if(!d.attachmentsStore)return null;if(!d.attachmentsStore.supportsMultipleAreas&&p)return p;d.attachmentsStore.supportsMultipleAreas&&d.attachmentsStore.setCurrentAnalysisAreaIndex(d.analysisAreas.indexOf(a));return c(d.attachmentsStore.getAttributes(),function(a){p=p||a;return a})};return(new a).createReport(f).then(function(a){var d=
a&&a.taskID;a=a&&a.result;try{n.emulateErrors.createReportError&&(a={error:{message:"Error test: something crashed on the server!"}});var c;a&&"object"===typeof a&&(c=a.error);if(!c&&"string"===typeof a&&-1!==a.indexOf("{"))try{var h=JSON.parse(a);c=h&&h.error}catch(E){}if(c)if(l.runReportTask.ignoreErrors)a=[];else return(new e).reject(c);var f=b.parse(a);return{taskID:d,areaData:f.areaData,reportInfo:f.reportInfo,originalXML:a,error:c}}catch(E){return(new e).reject(E)}})}return c(f(),function(a){return!a||
a.error?l.runReportTask.secondAttempt?f():a:a},function(a){return l.runReportTask.secondAttempt?f():(new e).reject(a)})})).then(function(a){var b={taskIDs:[],areaData:[],reportInfo:null,originalXMLs:[],errors:[]};a.forEach(function(a){b.taskIDs.push(a.taskID);b.originalXMLs.push(a.originalXML);a.error&&b.errors.push(a.error);b.areaData=b.areaData.concat(a.areaData);b.reportInfo=a.reportInfo});d.cacheResult&&!b.errors.length&&m.copyAndPut(d,b);return b})}};k=k(null,{execute:function(a){console.log("Creating a new report...");
return p.execute(a)}});k.CreateReportResultCache=m;return k})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/tasks/parsers/DataXMLParser":function(){define("esri/units esri/dijit/geoenrichment/utils/FieldUtil esri/dijit/geoenrichment/utils/JsonXmlConverter ../../data/AreaDataUtil ../../../../core/supportClasses/DocumentOptions ./AttrUtil esri/dijit/geoenrichment/ReportPlayer/config esri/dijit/geoenrichment/ReportPlayer/_devConfig".split(" "),function(k,g,f,e,c,b,a,d){function h(a){return a.innerHTML?
a.innerHTML:a.tags&&a.tags.length&&a.tags[0].text||""}function l(a){var b={Title:null,Subtitle:null,country:null,hierarchyId:null,exportSettings:null};a.tags&&a.tags.forEach(function(a){"ReportTitle"===a.name&&(b.Title=h(a));"ReportTitle2"===a.name&&(b.Subtitle=h(a));if("CurrencyFormat"===a.name){a=h(a);var d=a.split(";")[0].replace("0","").trim();b.country={id:null,currencySymbol:d,currencyFormat:a}}else if("ReportLayout"===a.name){var e=b.exportSettings={};a.tags.forEach(function(a){if("Options"===
a.name&&a.attributes)e.addHeader=!!a.attributes.header,e.addDataSource=!!a.attributes.dataSource,e.addFooter=!!a.attributes.footer;else if("Page"===a.name&&a.attributes){e.pageSettings={};var b=a.attributes;if(b.width&&b.height&&b.units){a=Number(b.width);var d=Number(b.height);if(b=b.units===k.MILLIMETERS?"mm":b.units===k.CENTIMETERS?"cm":b.units===k.INCHES?"in":b.units===k.POINTS?"pt":null)e.pageSettings.pagesize=c.combineCustomSizeString(a,d,b)}else b.size&&b.orientation&&(e.pageSettings.pagesize=
b.size.toLowerCase(),e.pageSettings.orientation=b.orientation.toLowerCase())}})}});return b}function n(a){function b(a){c.sites=a.tags.map(function(a){var b={attributes:null,notes:null,images:null};a.tags&&a.tags.forEach(function(a){"Attributes"===a.name&&a.tags&&(b.attributes=a.tags.map(function(a){return{name:a.attributes.Name,alias:a.attributes.Alias,type:a.attributes.Type,value:g.isNumericField(a.attributes.Type)?Number(a.attributes.Value):a.attributes.Value}}));"Notes"===a.name&&a.tags&&(b.notes=
a.tags.map(function(a){return{text:a.attributes.Text}}));"Images"===a.name&&a.tags&&(b.images=a.tags.map(function(a){return{url:a.attributes.Source,thumbnail:a.attributes.Thumbnail,description:a.attributes.Description,imageViewType:null}}))});return b})}function d(a){var b;c.stdLevels=a.tags.map(function(a,d){b=b||a.attributes.Id.substr(0,a.attributes.Id.indexOf("."));return{id:a.attributes.Id,name:a.attributes.Caption,isWholeCountry:a.attributes.IsWholeCountry||0===d}});"US"===b&&(c.countrId="US");
"CAN"===b&&(c.countrId="CA")}var c={sites:null,stdLevels:null,countrId:null};a.tags.forEach(function(a){"StudyAreas"===a.name?b(a):"StandardGeographyLevels"===a.name&&d(a)});return c}function m(c,f){function g(c){if(c=function(c){var e={},g,l,p;c.tags.forEach(function(a){var b=h(a),m=b,n=k[c.name][a.name];"string"===(n&&n.type)?b=String(b):(b=Number(b),isNaN(b)&&(b=m),d.emulateErrors.createReportNaN&&(b=NaN),d.emulateErrors.createReportNull&&(b=null));f&&(b=f(a.name,b,c.name));void 0===e[a.name]&&
(e[a.name]=b);"AREA_ID"===a.name&&(g=b);"IDFNDFIELD"===a.name&&(l=b);"STORE_ID"===a.name&&(p=b)});g=g||l;if(!g&&!p)return null;var q;!g&&p&&(q=Number(p));g&&void 0===m[g]&&(m[g]=n++);b.cleanUpAttrs(e,a.isPlayerOnServer?{STORE_ID:1}:null);return{name:c.name,attrs:e,areaIndex:void 0!==q?q:m[g]}}(c)){var g=l[c.areaIndex]=l[c.areaIndex]||{};g[c.name]?g[c.name].comparisonLevels.push(c.attrs):g[c.name]=e.createCalculator(c.attrs)}}var l=[],m={},n=0,k;c.tags[0].tags.forEach(function(a){"xs:schema"===a.name?
k=p.parseSchema(a):g(a)});return{areaData:l,schemaParseResult:k}}var p={parseSchema:function(a){var b={};a.tags.forEach(function(a){"xs:element"===a.name&&a.attributes&&"ReportData"===a.attributes.name&&f.queryJson(a,"xs:element").filter(function(a){return!!a.tags}).forEach(function(a){var d=b[a.attributes.name]={};f.queryJson(a,"xs:element").forEach(function(a){d[a.attributes.name]={type:"xs:string"===a.attributes.type?"string":"number",alias:a.attributes["msdata:Caption"]||"",vintage:a.attributes["msdata:Vintage"]||
"",source:a.attributes["msdata:Source"]||""}})})});return b}};return{parse:function(a,b){return this._parseDataXmlJson(f.parseXml(a,{saveInnerHTML:!0}),b)},_parseDataXmlJson:function(a,b){if(!a||!a.tags||2>a.tags.length)return[];var c,h,e,f;a.tags.forEach(function(a){"ReportInfo"===a.name?c=l(a):"ReportArea"===a.name?h=n(a):"ReportData"===a.name&&(a=m(a,b),f=a.areaData,e=a.schemaParseResult)});d.logData&&(console.log("DataXMLPareser.js \x3d\x3e areaData:"),console.log(f));h&&(c.country.id=h.countrId,
c.sites=h.sites,c.stdLevels=h.stdLevels);c.variables=e;return{reportInfo:c,areaData:f}}}})},"esri/dijit/geoenrichment/utils/JsonXmlConverter":function(){define(["dojo/_base/declare","./RegExpUtil"],function(k,g){function f(b,c,e,f){return d(e,f)+"\x3c"+b+(c?a(c):"")+"\x3e"+(f?"\n":"")}function e(a,b,c){return d(b,c)+"\x3c/"+a+"\x3e"+(c?"\n":"")}function c(b,c,e,f){return d(e,f)+"\x3c"+b+(c?a(c):"")+" /\x3e"+(f?"\n":"")}function b(a,b,c){a=g.encodeXML(a,!1);return d(b,c)+a+(c?"\n":"")}function a(a){var b=
"",d;for(d in a){var c=a[d];Array.isArray(c)&&(c=c.join(";"));void 0===c||null===c||""===c||"number"===typeof c&&isNaN(c)||(b+=" "+d+'\x3d"'+g.encodeXML(c,!0)+'"')}return b}function d(a,b){if(!b)return"";b="";for(var d=0;d<a;d++)b+="     ";return b}return k(null,{parseJson:function(a,d){function h(a,d){a.text||"#text"===a.name?l+=b(a.text,d,g):a.name&&(a.tags&&a.tags.length?(l+=f(a.name,a.attributes,d,g),a.tags&&a.tags.forEach(function(a){h(a,d+1)}),l+=e(a.name,d,g)):l+=c(a.name,a.attributes,d,g))}
var g=d&&d.prettify,l="";d&&d.addDocumentOptions&&(l+='\x3c?xml version\x3d"1.0" encoding\x3d"utf-8"?\x3e');h(a,0);return l=decodeURIComponent(encodeURIComponent(l).replace("%19",""))},parseXml:function(a,b){function d(a,e){a.name=e.nodeName;b.saveInnerHTML&&(a.innerHTML=e.innerHTML);if(e.attributes&&e.attributes.length){a.attributes={};for(var f=0;f<e.attributes.length;f++){var l=e.attributes[f],m=l.value;if(!0===m||"true"===m)m=!0;else if(!1===m||"false"===m)m=!1;else if(c&&m){var n=Number(m);isNaN(n)||
(m=n)}a.attributes[l.nodeName]=m}}if(e.childNodes&&e.childNodes.length)for(a.tags=[],f=0;f<e.childNodes.length;f++){if(m=l=e.childNodes[f],"#text"!==m.nodeName||(h?m.nodeValue.trim():m.nodeValue))m={},a.tags.push(m),d(m,l)}else"#text"===e.nodeName&&(delete a.name,a.text=g.decodeXML(e.nodeValue))}b=b||{};var c=b.parseNumbers,h=b.ignoreWhiteSpacedTextNodes,h=void 0===h?!0:h,e={},f;a=(new DOMParser).parseFromString(a,"text/xml").childNodes;for(var l=0;l<a.length;l++)if(1===a[l].nodeType){f=a[l];break}f&&
d(e,f);return e},queryTopJson:function(a,b){return this.queryJson(a,b,!0)},queryJson:function(a,b,d){function c(a,e){a.tags&&a.tags.forEach(function(a){(b.test?b.test(a.name):a.name===b)&&h.push(a);d&&0===e||c(a,e+1)})}var h=[];c(a,0);return h},traverseJson:function(a,b){function d(a){c||(!0===b(a)?c=!0:a.tags&&a.tags.forEach(d))}var c=!1;d(a)},getInnerHTML:function(a){return a.innerHTML?a.innerHTML.trim():this.parseJson(a).replace(/^<[^<]*>/,"").replace(/<\/[^<]*>$/,"").trim()},_IS_RICH_RE:/<.+>.*<\/.+>|<br\s*\/>|<\/br>/,
_UNRICH_RE:/<.*?>/g,isRichText:function(a){return(a=String(a))&&this._IS_RICH_RE.test(a)},unrichHTML:function(a){if(!a)return"";a=g.decodeXML(String(a).trim()).replace(this._UNRICH_RE,"");0===a.indexOf("\x3c")&&-1!==a.indexOf("\x3e")&&(a="");return a}})()})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/DocumentOptions":function(){define(["dojo/_base/lang","esri/dijit/geoenrichment/utils/PageUnitsConverter","../themes/ThemeLibrary"],function(k,g,f){var e={},c={a:[[841,1189],[594,841],
[420,594],[297,420],[210,297],[148,210],[105,148],[74,105],[52,74],[37,52],[26,37]],b:[[1E3,1414],[707,1E3],[500,707],[353,500],[250,353],[176,250],[125,176],[88,125],[62,88],[44,62],[31,44]],c:[[917,1297],[648,917],[458,648],[324,458],[229,324],[162,229],[114,162],[81,114],[57,81],[40,57],[28,40]],letter:[216,279],legal:[216,356],tabloid:[279,432],ledger:[432,279]};e.PAPER_SIZES=c;var b={};"a3 a4 a5 b4 b5 c4 c5 letter legal tabloid ledger".split(" ").forEach(function(a){var d;d=2===a.length?c[a[0]][a[1]]:
c[a];b[a]={portrait:{w:g.mmToIn(d[0]),h:g.mmToIn(d[1])},landscape:{w:g.mmToIn(d[1]),h:g.mmToIn(d[0])}}});e.SIZE_TYPE_TO_DIM_HASH=b;e.hasStandardSize=function(a){return b[a]};e.getSupportedPageSizes=function(){var a=[],b;for(b in c)1===b.length?c[b].forEach(function(d,c){a.push(b+c)}):a.push(b);return a};e.getPageDim=function(a,d,c){b[a]?a=b[a][d||"portrait"]:(a=a.split("x"),a={w:g.ptToIn(Number(a[0])),h:g.ptToIn(Number(a[1]))});c&&(a=k.clone(a),g.roundNDigitsObj(a,c.places));return a};e.getPageBox=
function(a){if(!a)return null;var b=e.getPageDim(a.pagesize,a.orientation),c=g.inToPx(b.w),b=g.inToPx(b.h);return{w:c,h:b,contentW:c-(a.left||0)-(a.right||0),contentH:b-(a.top||0)-(a.bottom||0)}};e.combineCustomSizeString=function(a,b,c){return g.convert(a,c,"pt",5)+"x"+g.convert(b,c,"pt",5)};e.getDefaultDocumentOptions=function(a){return k.mixin({pagesize:"letter",orientation:"portrait",left:21.07,right:22.6,top:19.2,bottom:9.6,align:"left",lineSpacing:1.493,fontSize:10,fontFamily:f.DEFAULT_FONT_FAMILY_CLASSIC},
a)};e.getDefaultDocumentOptionsGraphicReport=function(a){return k.mixin({pagesize:"letter",orientation:"landscape",left:21.07,right:22.6,top:19.2,bottom:9.6,align:"left",lineSpacing:1.493,fontSize:10,fontFamily:f.DEFAULT_FONT_FAMILY_GRAPHIC},a)};e.getClosestStandrdSizes=function(a,d){function c(a){var b=a.w/f.w;a=a.h/f.h;return Math.max(1-(1<b?1/b:b),1-(1<a?1/a:a))}d=void 0===d?.4:d;var f=e.getPageDim(a.pagesize,a.orientation);a=[];for(var g in b){var m=b[g];a.push({pagesize:g,orientation:"portrait",
score:c(m.portrait)});a.push({pagesize:g,orientation:"landscape",score:c(m.landscape)})}a=a.filter(function(a){return a.score<=d});a.sort(function(a,b){return a.score-b.score});return a};e.tryGetStandardPageSize=function(a,b){function d(a){var d="portrait"===b?1:0;return a["portrait"===b?0:1]===f&&a[d]===m}if(e.SIZE_TYPE_TO_DIM_HASH[a])return a;var c=a.split("x"),f=g.convert(Number(c[0]),"pt","mm",0),m=g.convert(Number(c[1]),"pt","mm",0),k,t;for(t in e.PAPER_SIZES)if(c=e.PAPER_SIZES[t],1===t.length){if(c.some(function(a,
b){if(d(a))return k=t+b,!0}))break}else if(d(c)){k=t;break}return k||a};return e})},"esri/dijit/geoenrichment/utils/PageUnitsConverter":function(){define(["dojo/_base/lang"],function(k){function g(c,b,a){a&&(c=k.mixin({},c));for(var d in c){var h=c[d];null!==h&&""!==h&&"boolean"!=typeof h&&("object"==typeof h?c[d]=g(h,b,a):(h=Number(h),isNaN(h)||(c[d]=b(h))))}return c}var f={},e="px pt mm cm in twip".split(" ");e.forEach(function(c){e.forEach(function(b){if(c!==b){var a=c+"To"+b.charAt(0).toUpperCase()+
b.substr(1);f[a]=function(a,h){return f.convert(a,c,b,void 0!==h?h:5)}}})});f.convert=function(c,b,a,d){c=Number(c)||0;switch(b){case "in":c*=72;break;case "px":c*=.75;break;case "mm":c=c/25.4*72;break;case "cm":c=c/2.54*72;break;case "twip":c/=20}switch(a){case "in":c/=72;break;case "px":c/=.75;break;case "mm":c=c/72*25.4;break;case "cm":c=c/72*2.54;break;case "twip":c=Math.round(20*c)}void 0!==d&&(c=f.roundNDigits(c,d));return c};f.pxToPtObj=function(c,b){return g(c,f.pxToPt,!b)};f.ptToPxObj=function(c,
b){return g(c,f.ptToPx,!b)};f.roundNDigits=function(c,b){return Number(Number(c).toFixed(b))};f.roundNDigitsObj=function(c,b){for(var a in c){var d=c[a];"object"==typeof d?f.roundNDigitsObj(d,b):c[a]=f.roundNDigits(d,b)}};return f})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/tasks/parsers/AttrUtil":function(){define([],function(){var k={},g="ID OBJECTID AREA_ID STORE_ID HasData aggregationMethod sourceCountry radiusIndex".split(" ");k.cleanUpAttrs=function(f,e){f&&g.forEach(function(c){e&&
e[c]||delete f[c]})};return k})},"esri/dijit/geoenrichment/utils/ArrayUtil":function(){define(["dojo/_base/array"],function(k){var g={},f={}.toString();g.arraysEqual=function(e,c){if(!e&&!c)return!0;if(!e||!c||e.length!==c.length)return!1;for(var b=0;b<e.length;b++)if(e[b]!==c[b])return!1;return!0};g.composeIdentityFunction=function(e,c){var b="function"===typeof e?e:e?function(a){return a[e]}:function(a){return a};return function(a){return(a=b(a))&&a.toString?a.toString():c&&void 0===a?a:String(a)}};
g.removeDuplicates=function(e,c){var b=[],a={};c=g.composeIdentityFunction(c,!0);k.forEach(e,function(d,h){var e=c(d);e===f&&(void 0===d["__ArrayUtil.js_uniqueKey__"]&&(d["__ArrayUtil.js_uniqueKey__"]="__ArrayUtil.js_uniqueKey__"+h),e=d["__ArrayUtil.js_uniqueKey__"]);void 0===e||e in a||(a[e]=d,b.push(d))});return b};g.splitArrayToBunches=function(e,c){c=c||100;for(var b=[],a,d=0,h=e.length;d<h;d++)a&&a.length!==c||(a=[],b.push(a)),a.push(e[d]);return b};return g})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/data/AreaCalculatorsUtil":function(){define(["./AreaDataUtil",
"../../../core/supportClasses/templateJsonUtils/fieldInfo/FieldInfoNameUtil","../tasks/parsers/FeatureSetParser"],function(k,g,f){return{addFeatureAttributesCalculator:function(e,c,b){b=b||g.AREA_ATTRIBUTES_CALCULATOR_NAME;for(var a in e.attributes)k.setAreaDataObjectValue(a,e.attributes[a],c,b)},addAreaInfoCalculator:function(e,c,b){b=b||g.AREA_ATTRIBUTES_CALCULATOR_NAME;k.setAreaDataObjectValue("SITE_NAME",e.locationName||e.name,c,b);k.setAreaDataObjectValue("STORE_NAME",e.locationName||e.name,
c,b);k.setAreaDataObjectValue("AREA_DESC",e.shortName||e.name,c,b);k.setAreaDataObjectValue("AREA_DESC2",e.description||e.name,c,b);k.setAreaDataObjectValue("AREA_DESC3",e.description||e.name,c,b);k.setAreaDataObjectValue("STORE_ADDR",e.address||"",c,b);k.setAreaDataObjectValue("STORE_LAT",e.latitude||"",c,b);k.setAreaDataObjectValue("STORE_LONG",e.longitude||"",c,b)},addEnrichFeatures:function(e,c,b,a){var d={},h={},l;for(l in c)d[l.toLowerCase()]=c[l],h[l.toUpperCase()]=c[l];e=f.parse(e,b||g.ENRICHED_DATA_NO_LEVELS,
function(a){return c[a]||d[a.toLowerCase()]||h[a.toUpperCase()]});k.mergeAreaData(e,a)}}})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/tasks/parsers/FeatureSetParser":function(){define(["./AttrUtil"],function(k){var g={ID_FIELDS:["ID","AREA_ID","IDFNDFIELD"],KNOWN_ATTRIBUTES:{StdGeographyLevel:1,StdGeographyName:1,StdGeographyID:1},parse:function(f,e,c){if(!f)return[];f=f.features||f;if(!f.length)return[];var b=[],a={},d=0;f.forEach(function(h){var f=h.attributes[g.ID_FIELDS[0]]||
h.attributes[g.ID_FIELDS[1]];if(f){void 0===a[f]&&(a[f]=d++);var n={},m;for(m in h.attributes){var p=g.KNOWN_ATTRIBUTES[m]?m:c?c(m):m;p&&(n[p]=h.attributes[m])}k.cleanUpAttrs(n);h={name:e,attrs:n,areaIndex:a[f]}}else h=null;h&&(f=b[h.areaIndex]=b[h.areaIndex]||{},f[h.name]?f[h.name].comparisonLevels.push(h.attrs):f[h.name]={data:h.attrs,comparisonLevels:[]})});console.log("FeatureSetPareser.js \x3d\x3e areaData:");console.log(b);return b}};return g})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/data/VariablesUtil":function(){define(["../dataCollections/DataCollectionsLoader"],
function(k){var g={preprocessVariables:function(f,e){var c=g.convertForEnrich(g._splitVariables(f)).filter(function(b){return b.itemid});return k.loadCustomDataVariables(c,{forceLowerCase:!0,portalUrl:e}).then(function(b){return g._splitVariables(f,b)})},_splitVariables:function(f,e){var c=[],b={};f.forEach(function(a){"string"===typeof a?c.push(a.toLowerCase()):a&&a.outFields&&a.outFields.forEach(function(d,h){h=a.itemid+"."+d;h=h.toLowerCase();c.push(h);b[h]={itemid:a.itemid,url:a.url,token:a.token,
variable:e?e.fullNameToVariableCache[h]:{id:d}}})});return{fullNames:c,customDataMapping:b}},convertForEnrich:function(f){var e={},c=[];f.fullNames.forEach(function(b){var a=f.customDataMapping[b];a?(b=e[a.itemid],b||(b={itemid:a.itemid,url:a.url,token:a.token,outFields:[]},b.url||delete b.url,b.token||delete b.token),b.outFields.push(a.variable.id),e[b.itemid]||(e[b.itemid]=b,c.push(b))):c.push(b)});return c}};return g})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/dataCollections/DataCollectionsLoader":function(){define(["esri/dijit/geoenrichment/promise/all",
"../GEUtil","../ReportTemplateData","esri/dijit/geoenrichment/utils/JsonXmlConverter","esri/dijit/geoenrichment/utils/UrlUtil"],function(k,g,f,e,c){return{_cache:{},canLoad:function(){return g.canMakeRequests()},loadVariables:function(b){var a="*"===b.outFields,d=a?["*"]:b.outFields,c=b.countryID+";"+b.hierarchy+";"+d.join(";")+";"+!!b.forceLowerCase;this._cache[c]||(a||(d=d.slice(),-1===d.indexOf("id")&&d.push("id")),this._cache[c]=g.getDataCollections(b.countryID,b.hierarchy,{f:"json",outFields:a?
"*":JSON.stringify(d),suppressNullValues:!0,AddDerivativeVariables:"all"}).then(function(c){var h={dataCollections:c,idToVariableCache:{},fullNameToVariableCache:{}};c.forEach(function(c){c.data.forEach(function(e){function f(a){return b.forceLowerCase?a.toLowerCase():a}function g(b){if(a)return Object.keys(b).length;var c=0;d.forEach(function(a){void 0!==b[a]&&c++});return c}var l=h.idToVariableCache[f(e.id)];if(!l||g(e)>g(l))h.idToVariableCache[f(e.id)]=e;h.fullNameToVariableCache[f(c.dataCollectionID+
"."+e.id)]=e})});return h}));return this._cache[c]},loadCustomDataVariables:function(b,a){a=a||{};var d={idToVariableCache:{},fullNameToVariableCache:{}};return k(b.map(function(b){var h=c.combineMulti([b.url||a.portalUrl,"sharing/rest/content/items",b.itemid,"resources/metadata.xml"]);return f.loadResource(h,b.token||c.getToken(a.portalUrl)).then(function(c){var h=e.parseXml(c.data);c=[];var f=e.queryJson(h,"Fields")[0];f&&(c=c.concat(e.queryJson(f,"Field")));(h=e.queryJson(h,"CalculatedFields")[0])&&
(c=c.concat(e.queryJson(h,"Script")));c.forEach(function(c){function h(b){return a.forceLowerCase?b.toLowerCase():b}c=c.attributes;c={id:c.Name,fullName:b.itemid+"."+c.Name,alias:c.Alias,description:c.Alias,type:"esriFieldType"+c.Type,precision:c.Precision?Number(c.Precision):void 0,vintage:c.Vintage};d.idToVariableCache[h(c.id)]=c;d.fullNameToVariableCache[h(c.fullName)]=c})})})).then(function(){return d})}}})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/ReportTemplateData":function(){define("dojo/_base/declare dojo/_base/lang dojo/request/xhr esri/dijit/geoenrichment/promise/all esri/kernel esri/request esri/urlUtils esri/dijit/geoenrichment/utils/DataUtil esri/dijit/geoenrichment/utils/PortalUtil esri/dijit/geoenrichment/utils/UrlUtil esri/dijit/geoenrichment/utils/requests/FileContent esri/dijit/geoenrichment/utils/requests/UniversalClient".split(" "),
function(k,g,f,e,c,b,a,d,h,l,n,m){function p(b,c){var h=b.substr(b.lastIndexOf("/")+1),e=a.getProxyRule(b);return f(e&&e.proxyUrl?e.proxyUrl+"?"+b:b,{method:"POST",handleAs:"arraybuffer",data:"token\x3d"+c,headers:{"X-Requested-With":null,"Content-Type":"application/x-www-form-urlencoded; charset\x3dutf-8"}}).then(function(a){var b=!/\.xml$|\.txt$|\.json$/i.test(h);return{name:h,data:b?d.base64FromByteSource(a):decodeURIComponent(escape(d.binaryStringFromByteSource(a)))}})}k=k(null,{id:null,_portalUrl:null,
_baseUrl:null,constructor:function(a,b){this.id=a.id;this._portalUrl=b;this._baseUrl=l.combine(this._portalUrl,"sharing/rest")},getFiles:function(){var a=this;return this._getResources().then(function(b){var d=[];b.map(function(b){b=b.resource;"thumbnail.png"!==b&&d.push(a.getFileByName(b))});return e(d)})},getFileByName:function(a){return p(this.getItemResourceUrl(a,!1),this._getToken())},getItemResourceUrl:function(a,b){a=this._baseUrl+"/"+this._contentItemPath(this.id+"/resources/"+a);return b?
l.addQueryPart(a,"token\x3d"+this._getToken()):a},updateFile:function(a,b){var d=this;return m.request({url:this._baseUrl,urlSuffix:"content/items/"+this.id}).then(function(c){var h=n.fromFileData(a,b);return m.request({url:d._baseUrl,urlSuffix:"content/users/"+c.owner+"/"+c.ownerFolder+"/items/"+d.id+"/updateResources"},{content:{file:h,filename:a}})})},_contentItemPath:function(a){return"content/items/"+a},_getToken:function(){var a=c.id.findCredential(this._portalUrl)||c.id.credentials[0];return a&&
a.token},_getResources:function(){var a=this;return h.query(function(d){return b({url:a._baseUrl+"/"+a._contentItemPath(a.id+"/resources"),content:g.mixin({f:"json",token:a._getToken()},d),handleAs:"json"},{usePost:!0})},null,"resources").then(function(a){return a.resources})},getPortalUrl:function(a){return a?/[^:]+:\/\/(.+)$/i.exec(this._portalUrl)[1]:this._portalUrl}});k.loadResource=p;return k})},"esri/dijit/geoenrichment/utils/PortalUtil":function(){define(["dojo/_base/lang","esri/kernel","esri/request",
"./requests/EveryRequest"],function(k,g,f,e){var c={query:function(b,a,d,c){a=a||{};d=d||"results";c=c||100;var h="number"===typeof a.num?a.num:-1,f=a.num=0>h||a.num>c?c:a.num;a.start=a.start||1;return b(a).then(function(c){var g=c[d],l=c.total-a.start+1;0<=h&&l>h&&(l=h);l-=f;if(0>=l)return c;a.num=f;for(var m=[];0<l;)a.start+=f,m.push(b.bind(null,k.mixin({},a))),l-=f;return e(m,{stopOnError:!0}).then(function(a){a.forEach(function(a){Array.prototype.push.apply(g,a[d])});return c})})},queryCommon:function(b,
a){return c.query(function(d){var c=g.id.findCredential(b)||g.id.credentials[0];return f({url:b,content:k.mixin({f:"json",token:c.token},a,d),handleAs:"json"},{usePost:!0})}).then(function(a){return a.results})}};return c})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/CustomReportsManager":function(){define("dojo/_base/declare dojo/_base/lang esri/dijit/geoenrichment/Deferred esri/dijit/geoenrichment/when ./PortalManager ./ReportTemplateData ./StandardGraphicReportTemplates esri/dijit/geoenrichment/utils/PortalUtil esri/dijit/geoenrichment/utils/PortalQueryUtil esri/dijit/geoenrichment/utils/UrlUtil ../../config ../../countryConfig".split(" "),
function(k,g,f,e,c,b,a,d,h,l,n,m){var p=k(null,{cache:null,constructor:function(){this.cache={}}});k={TEMPLATE_TYPE:"Report Template",PLAYER_STANDARD_INFOGRAPHIC_TYPEKEYWORD:"esriReportPlayerStandardInfographic",GALLERY_INFOGRAPHIC_TYPEKEYWORD:"esriWebGalleryInfographicReport",MOBILE_INFOGRAPHIC_TYPEKEYWORD:"esriMobileFactsInfographicReport",GALLERY_INFOGRAPHIC_USER:"esri_reports",_reportsCache:null,resetCache:function(){this._reportsCache=new p},getCustomReports:function(a){var b=this,f=l.getPortalUrl(a.portalUrl);
return e(c.getPortalInfo(f),function(c){var e=c.user.username,e={q:h.combineQueryString({type:"Report Template",typeKeywords:a.typeKeywords,owner:!a.publicOnly&&e}),sortField:"modified",sortOrder:"desc"};return d.queryCommon(l.combine(f,"sharing/rest/search"),e).then(function(d){d=d.map(function(d){return b.prepareCustomReportFromItem(d,c.portal.url,a)});return b._getCountryReports(d,a.countryID)})})},_getCountryReports:function(a,b){return a&&("*"===b?a:a.filter(function(a){return!a.countries||a.countries.split(",").some(function(a){return b===
a.trim()})}))},prepareCustomReportFromItem:function(a,d,c){function h(a){return"string"===typeof a?"true"===a:!!a}var e=g.mixin({},a.properties||a.details);e.isGraphicReport=h(e.isGraphicReport);e.isMultiFeature=h(e.isMultiFeature);e.reportID=a.id;d={title:a.title,templateData:d&&new b(a,d),modified:a.modified instanceof Date?a.modified.getTime():a.modified};c&&c.attachItemProperty&&(d[c.attachItemProperty]=a);g.mixin(d,e);return d},getCustomReportByID:function(a){var b=this,d=this._reportsCache.cache[a.reportID];
if(d)return d;d=l.getPortalUrl(a.portalUrl);return this._reportsCache.cache[a.reportID]=e(c.getPortalInfo(d),function(d){return d.user.getItem(a.reportID).then(function(c){return c&&b.prepareCustomReportFromItem(c,d.portal.url,a)})}).otherwise(function(d){delete b._reportsCache.cache[a.reportID];return a.ignoreError?null:(new f).reject(d)})},tryFindReportIdByAlias:function(b){var d=this,c=a.aliasToID(b.countryID,b.reportID);if(!c)return null;var h=l.getPortalUrl(b.portalUrl);return e(this.getCustomReportByID({reportID:c,
portalUrl:h,ignoreError:!0,attachItemProperty:b.attachItemProperty}),function(a){return a?a&&(b.returnObject?a:a.reportID):e(d.getCustomReports({portalUrl:h,countryID:b.countryID,typeKeywords:"esriReportPlayerStandardInfographic",publicOnly:!0,attachItemProperty:b.attachItemProperty}),function(a){function d(a){a=a.split(".");return Number((Number(a[0])+Number(a[1])/100).toFixed(2))}var c=d(n.jsapiVersion),h,e,f=-Infinity,g=Infinity;a.forEach(function(a){if(a.playerAlias===b.reportID){var l=d(a.jsapiVersion);
c>=l&&l>f&&(f=l,h=a);c<l&&l<g&&(g=l,e=a)}});a=h||e;b.strictVersionCheck&&a&&a.jsapiVersion!==n.jsapiVersion&&(a=null);return a&&(b.returnObject?a:a.reportID)})})},itemUpdated:function(a){delete this._reportsCache.cache[a]},getFakeCustomReportByContext:function(a){return{title:"Generic template",type:"esriReportTemplateStandard",coverage:a.countryID,countries:a.countryID,hierarchy:a.hierarchy||m.getHierarchyID(),isGraphicReport:!0,isMultiFeature:!1,reportID:null}}};k.resetCache();return k})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/StandardGraphicReportTemplates":function(){define(["dojo/_base/lang",
"../../config","dojo/i18n!esri/nls/jsapi"],function(k,g,f){function e(){return a?a:a={"3.25":{"US.census":[{id:"e2a6868f979f4e37896b631581ae4918",alias:"demographic-summary"},{id:"88420f4a98bb45cbacacbad67e23266e",alias:"key-facts"},{id:"efb6bee0a80d4801887ec4cf73aa67fc",alias:"marketing-profile"},{id:"12867e4a89d5461fbbe3b9c6c181993a",alias:"at-risk-population"},{id:"6637be1fbddf4e948fbd09ce6a7a7888",alias:"portrait-property-flyer"},{id:"02c1124e916847249aa91b9ce48c2552",alias:"skyscraper"},{id:"3afd4c5089584b089af5b0037d74a9d1",
alias:"transportation-to-work"},{id:"a696eae378974ed5a63510fa70bed011",alias:"health-care"},{id:"c931fc6ebdb440189a8bc6bd34115807",alias:"executive-summary-call-outs"},{id:"96096c8afa4847dea936942b1f89acb5",alias:"tapestry-profile"},{id:"7a20b92b48cc4e63bf7ba956295de948",alias:"nearby-restaurants"}],"CA.census":[{id:"6c467040a8a64c33972045cf091bca5b",alias:"key-facts"}],"*.census":[{id:"11c4cec3c0d34c4aa51cd8877e2db4ef",alias:"key-facts"}]},"3.26":{"US.census":[{id:"a5161c2ca50d44429daf2bf9dbe73eb5",
alias:"demographic-summary"},{id:"693269bfbf6c4851901a3c9c56550294",alias:"key-facts"},{id:"aceee34210e748ba95cb9cae21e196b9",alias:"marketing-profile"},{id:"a7936c5ce77c4d698140db21ab1a7858",alias:"at-risk-population"},{id:"8d42e32b12154bc580af89483c208d56",alias:"portrait-property-flyer"},{id:"7be44b15e29847a383906aac5699cf00",alias:"skyscraper"},{id:"537230b385fb45d9a8d6e59265e36fbf",alias:"transportation-to-work"},{id:"89c6ff4d96de4acaa024b7a408f186b0",alias:"health-care"},{id:"0fa71e0a74294e7b8265e4cd507c7d17",
alias:"executive-summary-call-outs"},{id:"f2754d21223a491798dbc0ef2c71858f",alias:"tapestry-profile"},{id:"866e6a839ee348dfae5a8ee9bdafbfc0",alias:"nearby-restaurants"},{id:"f808dfceddd149ff85a9d8825d4e5a5f",alias:"multi-ring-comparison"}],"CA.census":[{id:"f982018306a34cc58756ce0ed78c6b0c",alias:"key-facts"},{id:"c47fa8d040364abe80d288bb606da576",alias:"multi-ring-comparison"}],"*.census":[{id:"3813621424fc4443af1dcecab65be89c",alias:"key-facts"},{id:"dd1fa81faaf94541831cae16788393ab",alias:"multi-ring-comparison"}]},
"3.27":{"US.census":[{id:"3c6959a7c7c4450f9bdcc7063c9023d5",alias:"demographic-summary"},{id:"4cc0a5e007d946d5909524fcf80bc666",alias:"key-facts"},{id:"fb9b9a501c974540a52ab6d1027a8bcc",alias:"marketing-profile"},{id:"b0f05d5926d6444da40d6bf0c5c9846e",alias:"at-risk-population"},{id:"5cf609b26ce24633a2edc58d7ebeb3fd",alias:"portrait-property-flyer"},{id:"686d7af60bcb410db051ec8465889231",alias:"skyscraper"},{id:"a79a099ab7be4c34a9b0b28831b1aa9c",alias:"transportation-to-work"},{id:"6f64bb63647246dcb5d268fc301614f6",
alias:"health-care"},{id:"99e919a7e9fd4fa2b55779f0dc118da8",alias:"executive-summary-call-outs"},{id:"f32b961757f347e2976ba011ee20cb13",alias:"tapestry-profile"},{id:"a266260cc3ec46c1b66c86f263feb8e4",alias:"nearby-restaurants"},{id:"dab290529fd44063a2d83e03a8dc49eb",alias:"multi-ring-comparison"},{id:"1499719e83754c81ae1477223c0dde39",alias:"property-details"},{id:"9c441f80f80348c8b5b747e2cf2a2ccd",alias:"employment-overview"},{id:"bb59cd9292ec47a0928900c5fb9c17b8",alias:"office-market-profile"},
{id:"6f75892c4a5f4f5ba3d0edb4d8a0b13b",alias:"health-care-and-insurance"},{id:"a7524b019e1f482493e43f32ab9568a0",alias:"demographic-profile"},{id:"45d528a3865547bb89792d4517db2e7a",alias:"commute-profile"},{id:"acf5c12b54b64550ad7f582c9c97ed28",alias:"target-market-summary"},{id:"489d923d29d44c2681171a590fb37742",alias:"coronavirus-impact-planning"}],"CA.census":[{id:"91d1e8c9d0ea482b9947dfe4bdfbe0ba",alias:"key-facts"},{id:"e05eb227df9b4ceba0ace202b1d0c1e2",alias:"multi-ring-comparison"}],"NL.NLD_4orange":[{id:"77e9461032b24e47b6c6b643cf02381f",
alias:"housing-profile"},{id:"b80fd38e5f43448da530521832e0dfba",alias:"insurance-profile"},{id:"d36520d68d8e449c9f300be0e800f698",alias:"media-profile"},{id:"bad567fdf36e48e9a5108b66c96bf0ae",alias:"personicx-segmentation"},{id:"5726fe6cad4c491a863eff64e538231c",alias:"spending-profile"}],"JP.EsriJapan":[{id:"e4bd37bb10c74798a3600ca7484846ac",alias:"base-demographic-profile"},{id:"a5d7db5138644a9e95d9af1b40b31bb9",alias:"demographic-comparison-profile"},{id:"205b45f626f84650a1ca948be4f97411",alias:"future-population-profile"},
{id:"ee12a9d9a2e04fb6b93628f075719bc9",alias:"population-households-profile"},{id:"3f857a2a8d14488abfcec383197e5a0b",alias:"consumer-spending-profile"},{id:"77369125467c4c9a8f3b9a628eda3347",alias:"base-demographic-profile-ja"},{id:"08abfdb8b8174846bd3723f094a88d86",alias:"demographic-comparison-profile-ja"},{id:"e5db2ced023d4c53a0ef9fe231d7fd15",alias:"future-population-profile-ja"},{id:"4c55f8ddb53345298e59bccfeb45e489",alias:"population-households-profile-ja"},{id:"24c8ef9a8c5d45c78791a84445eed29d",
alias:"consumer-spending-profile-ja"}],"DE.DEU_Nexiga":[{id:"7aa819f9816a494ab28ab7604553f488",alias:"base-demographic-profile"},{id:"710051b492c3481a83e01bd6bf3dd3bf",alias:"household-profile"}],"ES.ESP_AIS":[{id:"3d046bf33ce04b598afd391a0dd195c9",alias:"base-demographic-profile"}],"PR.PRI_ACS_2020":[{id:"d8b9f282034d47db808175fef56a15e2",alias:"at-risk-population"},{id:"eab5646a29324a6282db3b8ca47bf2b3",alias:"commute-profile"},{id:"ed6b5a0736aa4e04862a1a4307c608cc",alias:"demographic-summary"},
{id:"a4c64a9006544751ad18ce75a401112e",alias:"health-care-and-insurance"},{id:"96d00aefd766428394d6ee6698a56591",alias:"coronavirus-impact-planning"}],"*.census":[{id:"365d52e6bac147a68a12eee229eb9b6b",alias:"key-facts"},{id:"0f7d2ba850fa40579cae1342001d80d7",alias:"multi-ring-comparison"}]},"3.28":{"US.census":[{id:"45cb423066194f5f98c6f4ff81124db3",alias:"demographic-summary"},{id:"98d5848a944b4787b2ca038256c7878d",alias:"key-facts"},{id:"879849b937ec4eb0bef31ff2861251f2",alias:"marketing-profile"},
{id:"456d7a22adc8439a93d4164ed3846243",alias:"at-risk-population"},{id:"c7e01c953c7e4b70a46ca6408c3ed000",alias:"portrait-property-flyer"},{id:"34330a47546f412d9d09632347da11d3",alias:"skyscraper"},{id:"d349b23334454274ab2a7a20a0a9a55d",alias:"transportation-to-work"},{id:"02086fe6b92b4ff5a9a7a8d172540fc9",alias:"health-care"},{id:"5d8b51e2b27b4832b193d9932bc6f862",alias:"executive-summary-call-outs"},{id:"1b07c48d4b58423990023b43150d7e99",alias:"tapestry-profile"},{id:"c21dd81cd9064649a4bb454530f12790",
alias:"nearby-restaurants"},{id:"4d8c102ca7324d09931cfe65ab3a1168",alias:"multi-area-comparison"},{id:"9ed3b5dba02d4b46a3e063c8405fd0cc",alias:"property-details"},{id:"db0606e41ee7485f88122069e74a9b6b",alias:"employment-overview"},{id:"2a43c204c1dd4a758087372d7d7d786b",alias:"office-market-profile"},{id:"f59a3621583d44bbafa14035c2ae3947",alias:"health-care-and-insurance"},{id:"ad58f06a480c4b16aadcff789f543cca",alias:"demographic-profile"},{id:"bd7390ab31dc485489733d22475db0ed",alias:"commute-profile"},
{id:"38eab30d7e6840da869fee264ca9fc40",alias:"target-market-summary"},{id:"03b420681f6a466fb14e254669583244",alias:"coronavirus-impact-planning"}],"CA.census":[{id:"6c0a945e91d44640a08776e5bed1b297",alias:"key-facts"},{id:"7464708f379b463c8eec8aed1315989f",alias:"multi-area-comparison"},{id:"425150e63a5346659721bfc0be94511b",alias:"prizm-profile"}],"NL.NLD_4orange":[{id:"e602295128e34ea2b2b50a1aa04253bf",alias:"housing-profile"},{id:"3d0f7e63256b43a59fcf037502380685",alias:"insurance-profile"},{id:"fbc685a8837945eb82cde447acfda982",
alias:"media-profile"},{id:"da063bf765e341708fad9eeec07b09c7",alias:"personicx-segmentation"},{id:"5003049227804e5cba6ad3bfdbf2dba7",alias:"spending-profile"}],"JP.EsriJapan":[{id:"bd9685651f484488ba24c2838a6a9000",alias:"base-demographic-profile"},{id:"f36b1cc0b9d84ea4b4db1742e875ff80",alias:"demographic-comparison-profile"},{id:"99a48ec44af94af290ab0e6d691a31c7",alias:"future-population-profile"},{id:"b29af5c2e6754f61ba38ad3128668095",alias:"population-households-profile"},{id:"d568dd78527c462e83eb68cb9ca02f09",
alias:"consumer-spending-profile"},{id:"a29c9143bd044dad9475e6b6ee292e46",alias:"base-demographic-profile-ja"},{id:"3bb56ea4c4bd4a2aaa124e2e3a0fad60",alias:"demographic-comparison-profile-ja"},{id:"28ef1772bd884db5ae8885731318e503",alias:"future-population-profile-ja"},{id:"7896c8adf89e4f47ab6e0acc7759a1cd",alias:"population-households-profile-ja"},{id:"6c28a650baaa40cda26f4fb372b14d0f",alias:"consumer-spending-profile-ja"}],"DE.DEU_Nexiga":[{id:"31cf6eac0339433f8b4b5f8b62e47554",alias:"base-demographic-profile"},
{id:"ccf6bc8472ae4ca8852fec621197fec3",alias:"household-profile"}],"ES.ESP_AIS":[{id:"5b60de05c1694a78b6b6ce8e10a48cd4",alias:"base-demographic-profile"}],"PR.PRI_ACS_2020":[{id:"f1d79448541642648293f4b75d7b595a",alias:"at-risk-population"},{id:"7943a0c2f1ca4cad967bb0bfeb8af3a4",alias:"commute-profile"},{id:"ef0579311aac4d14a771389f23263445",alias:"demographic-summary"},{id:"4edd44657989475493ca92a69e80f08c",alias:"health-care-and-insurance"},{id:"c440f0c671264732b16c39f6326a5987",alias:"coronavirus-impact-planning"}],
"*.census":[{id:"5886dbf41f984a0a8ec4eb4b5e231584",alias:"key-facts"},{id:"41727f86773c4cf2a37fd99446ea83fc",alias:"multi-area-comparison"}]},"3.29":{"US.census":[{id:"368e2bf603fb42c4aa3dac0fce50cdf8",alias:"demographic-summary"},{id:"a32be4a9e51d4affa4cc1ddc812cb629",alias:"key-facts"},{id:"df985e2579004a3292c3d00615d53c39",alias:"marketing-profile"},{id:"8c56287427f84ae8b59142fc5bf1df4c",alias:"at-risk-population"},{id:"d95e40c3c93d480ab4d1d0b0adbbc5d4",alias:"portrait-property-flyer"},{id:"f989f9b820cd44d390187402447051b4",
alias:"skyscraper"},{id:"0d322ac073584079a8cd6a1bda981fe7",alias:"transportation-to-work"},{id:"2b9f186425844ec390584b739ffca026",alias:"health-care"},{id:"3e9ccce6cca64e70be19ed789de5f290",alias:"executive-summary-call-outs"},{id:"2a812da4de404ceba3969472d32c42e7",alias:"tapestry-profile"},{id:"2cc25f7b5f194012b39c90b5f9bdb8d3",alias:"nearby-restaurants"},{id:"72d1e9e4cdf94bf9a2020f8214bef9ca",alias:"multi-area-comparison"},{id:"27034d31ab124b9bbe4e63b7df2a0d90",alias:"property-details"},{id:"4a59e329df06480eaa534513eb15f465",
alias:"employment-overview"},{id:"d4fe343c4d6f4bea840a715f5b033d2d",alias:"office-market-profile"},{id:"cb2224cc9cb24ce288da729f0650ebf0",alias:"health-care-and-insurance"},{id:"484825ed241c49d58eaf718d46772051",alias:"demographic-profile"},{id:"afee0a2eb16e46cc9bc61b5d82133249",alias:"commute-profile"},{id:"1d32fabd95b446e99049aa0a04f5508e",alias:"target-market-summary"},{id:"783847f3f03f402d855985b45a8bf2df",alias:"population-trends"},{id:"83aef26e61ca41da9b269c06cc418d79",alias:"coronavirus-impact-planning"}],
"CA.census":[{id:"73f1c835b1624ff0b29a6a364f7ba6dc",alias:"key-facts"},{id:"84b05aed2d2f478eb6bb1e4749811cf1",alias:"multi-area-comparison"},{id:"ea0737e1e7554c5caf2be381c28369cc",alias:"prizm-profile"}],"NL.NLD_4orange":[{id:"3d8cb941742d4fffbaca48c65b4bd5b5",alias:"housing-profile"},{id:"f126395e7bcc494899cfc1a13a34be1f",alias:"insurance-profile"},{id:"8da901e5729e457683f2e4f7081b1bda",alias:"media-profile"},{id:"f9ba90b373a245e1b8fd14a027cf1ba5",alias:"personicx-segmentation"},{id:"81fc53b93a0c4269848ce2ae22ec19e2",
alias:"spending-profile"}],"JP.EsriJapan":[{id:"79b2394ea50d44f3b4c1b4bdabed6cc2",alias:"base-demographic-profile"},{id:"9e824283a8954639ab0c0ac237b9e14d",alias:"demographic-comparison-profile"},{id:"f5812c2f542644368c0ff34eef7b731c",alias:"future-population-profile"},{id:"b51d7dde64c34a9796418c1788a6762d",alias:"population-households-profile"},{id:"48a993403d30431784b7bf47a06e4261",alias:"consumer-spending-profile"},{id:"531c59f55de646d5a78fef6c903a678f",alias:"base-demographic-profile-ja"},{id:"cf553f2090a64662a1f9efa8a355964c",
alias:"demographic-comparison-profile-ja"},{id:"321150c8ac1049fc9cd253cb12c0b0bc",alias:"future-population-profile-ja"},{id:"e0d6dea7667c47b49f159c207fc311e9",alias:"population-households-profile-ja"},{id:"ba5f50bd617e4519a9322ec24b9cd5b1",alias:"consumer-spending-profile-ja"}],"DE.DEU_Nexiga":[{id:"60ec4173caac4f87a831447d5bf7b450",alias:"base-demographic-profile"},{id:"98d3d99aadba47a8ab53b0dcd4eebf22",alias:"household-profile"}],"ES.ESP_AIS":[{id:"3978b02fbc354acca14d4e959fa5b531",alias:"base-demographic-profile"}],
"PR.PRI_ACS_2020":[{id:"e2141ddd911c4aadb403db1e858edb51",alias:"at-risk-population"},{id:"78360505668743e0a39ac0d085612dfa",alias:"commute-profile"},{id:"f296deceb6204f85853ac85e98ba3552",alias:"demographic-summary"},{id:"8a1c4d55a77c4cf9805cec380727fc5a",alias:"health-care-and-insurance"},{id:"8dd9de996ba0491d82a2ee8f01cd55b0",alias:"coronavirus-impact-planning"}],"*.census":[{id:"5645a1d6023c4d8a9d02943ad57a7ab2",alias:"key-facts"},{id:"e29f56b6d67447e08a45d08981db987c",alias:"multi-area-comparison"}]},
"3.30":{"US.census":[{id:"981382ffe90c40bbb60318b1ce338ba4",alias:"demographic-summary"},{id:"f62dec6c9750496796fdc0619c4c107f",alias:"key-facts"},{id:"f737236a8b644f1597a4457862fa169c",alias:"marketing-profile"},{id:"4746caa1254e4d93af121ce74e9aa8d6",alias:"at-risk-population"},{id:"0bcd882dd7a34fd39ace173243534df0",alias:"portrait-property-flyer"},{id:"4a340b8e642945f6bb7a381d07fb26b6",alias:"skyscraper"},{id:"3e2a42b2d03e42cf91e9727f67273ec3",alias:"transportation-to-work"},{id:"c26e9577d48b4499a07b75215c97c394",
alias:"health-care"},{id:"cbc348e601104d0c9bbe971c0297142a",alias:"executive-summary-call-outs"},{id:"d65aaa42b9824864b40eb1a75f2e4cbd",alias:"tapestry-profile"},{id:"d6242e8dd02142bdb98b85f094d5cd9b",alias:"nearby-restaurants"},{id:"aed9e00873fa4010881daaa90e7e8d71",alias:"multi-area-comparison"},{id:"eb0e0df0856e43cdb874f96945c566ac",alias:"property-details"},{id:"e29ebec17c2c4f42a1a929c40163bb90",alias:"employment-overview"},{id:"b84d0f0f5c69461ea52ce2702f7327d6",alias:"office-market-profile"},
{id:"5eba537af36e4490869917ee888bacc4",alias:"health-care-and-insurance"},{id:"afb01a3f91374f65ba4c6be9229f2c15",alias:"demographic-profile"},{id:"8074d1bbbfed4858bb24400a0c7bf224",alias:"commute-profile"},{id:"33621d85b1df4547851c904aaa7d44d2",alias:"target-market-summary"},{id:"440170eaae5240e79abbb0bb7de22b27",alias:"population-trends"},{id:"0576deee38714cc69357de9675ab39ae",alias:"coronavirus-impact-planning"}],"CA.census":[{id:"e054928366604fc7b401dcb4a343cd4c",alias:"key-facts"},{id:"986bc92490234c2697d5771b9771166e",
alias:"multi-area-comparison"},{id:"52233708250449bc84f906d86616cace",alias:"prizm-profile"}],"NL.NLD_4orange":[{id:"22a86d0f982d4b10934f32129f2674f9",alias:"housing-profile"},{id:"9811b2babd5f4283822782867476b92c",alias:"insurance-profile"},{id:"59957cc0524344449fc6035053bb6c4a",alias:"media-profile"},{id:"2511035fed0140b8a7eb7ec7240e41eb",alias:"personicx-segmentation"},{id:"defc390648e543508be22704f1db659c",alias:"spending-profile"}],"JP.EsriJapan":[{id:"91a180442f614c4d96fb40e33aa30948",alias:"base-demographic-profile"},
{id:"e7415b6c9ff74922850851eac65ddbc6",alias:"demographic-comparison-profile"},{id:"12e9eb63e4834d3681e15196bfc64642",alias:"future-population-profile"},{id:"291cc1bc2cee455483c96f50e5916f1d",alias:"population-households-profile"},{id:"217c72b7d0534ebc81658c71917c3e15",alias:"consumer-spending-profile"},{id:"48d5baf8e5574abda8fd776219fa0eb6",alias:"base-demographic-profile-ja"},{id:"01a7a0cbacf948b3b715e4f6c55aa5f2",alias:"demographic-comparison-profile-ja"},{id:"0317412d6fb541c9b4067923e314cad3",
alias:"future-population-profile-ja"},{id:"0c826ce1e2de415aa2f7af3e615b1fe8",alias:"population-households-profile-ja"},{id:"201211e23758432db4a841dae8ba9428",alias:"consumer-spending-profile-ja"}],"DE.DEU_Nexiga":[{id:"ec6477ce41fa464fb38a360cad0d3da3",alias:"base-demographic-profile"},{id:"e53b2c145f544efaa7d7b4e802c3d747",alias:"household-profile"}],"ES.ESP_AIS":[{id:"4483924cb42043ec85486c58e61a99ef",alias:"base-demographic-profile"}],"PR.PRI_ACS_2020":[{id:"7e3b955c4d904624b4cea5d015e693a0",alias:"at-risk-population"},
{id:"8927492627124fd0845de8c0dc02bd3f",alias:"commute-profile"},{id:"a308a300f3b4482ea57b4ea4a54ea5ef",alias:"demographic-summary"},{id:"5800acd3784e4a6d88e3228e1af1164f",alias:"health-care-and-insurance"},{id:"d40e2ba95fec40c6ad68ceddde4e160b",alias:"coronavirus-impact-planning"}],"*.census":[{id:"b9d1ca815d9a4a3ab35196ec299f0917",alias:"key-facts"},{id:"6f6d601c2eef4bd1a87baa2652e7bb0b",alias:"multi-area-comparison"}]},"3.31":{"US.census":[{id:"784d0b69c02c4cac862b89b0e44cd8fb",alias:"demographic-summary"},
{id:"f1bb3a222fab470dbb96a79a51496b2b",alias:"key-facts"},{id:"1780d5b264734757b86e4655d779b213",alias:"at-risk-population"},{id:"8c34121585894e91a50c493c360912f0",alias:"skyscraper"},{id:"1c314d9d06844d44b408caba6099b56b",alias:"executive-summary-call-outs"},{id:"4ee838a250084c9bad84f094895c793c",alias:"tapestry-profile"},{id:"dfba27ac04694513aee257cdd185c8c2",alias:"nearby-restaurants"},{id:"d7cfb836282747199cf0febea42627cc",alias:"multi-area-comparison"},{id:"3a34213116a340a0bbd0d463025444a2",
alias:"property-details"},{id:"b277b8572469425fa54c5506c3dbcdf3",alias:"employment-overview"},{id:"eaf35c41f5714f48a1aa61fcbd6ae05f",alias:"office-market-profile"},{id:"688f86931cc345f796154717dc6d0a15",alias:"health-care-and-insurance"},{id:"cb4edb43a1ae473ca651388b5c3fa54f",alias:"demographic-profile"},{id:"49224c10d4ac4c7ab0f8e016165ce235",alias:"commute-profile"},{id:"db67445e4dfa4b6c8c1e5fd30b229c92",alias:"target-market-summary"},{id:"6c9360bfec9041ddba0f03440cb446ca",alias:"population-trends"},
{id:"2ae07567c78847abacb14773ffe9dede",alias:"coronavirus-impact-planning"}],"CA.census":[{id:"0704defc6960439ea5b9c484af15eb4c",alias:"key-facts"},{id:"ee01fe05db964878bc6fb627e55dc9b1",alias:"multi-area-comparison"},{id:"a426bb6d944a46658640aee2ba480866",alias:"prizm-profile"}],"NL.NLD_4orange":[{id:"710037ca0f024ec5abbe4cf9fecad23f",alias:"housing-profile"},{id:"83bc643ea48344c892a8e9636e3677dd",alias:"insurance-profile"},{id:"53f63e3a9e854a8fa5e2c0222df6f848",alias:"media-profile"},{id:"ca9d66bf4bf940918129d0d5c97e0b50",
alias:"personicx-segmentation"},{id:"ab19f90750fd469aa702f961b12eaee8",alias:"spending-profile"}],"JP.EsriJapan":[{id:"7f7c37e8f1fa4ab18b88368c12058eff",alias:"base-demographic-profile"},{id:"25a71f196b7e4db182be346264b442dd",alias:"demographic-comparison-profile"},{id:"e1075eaada7744a59ecabfc445dcd877",alias:"future-population-profile"},{id:"8e2746d993584a7d94d0e66ca6dabdaa",alias:"population-households-profile"},{id:"bc9b91d7ae2c41a5bdece1d322ef6b88",alias:"consumer-spending-profile"},{id:"4f4736d5b2f842faaee83c57417c56b6",
alias:"base-demographic-profile-ja"},{id:"bc400448bf3347619349cb7d4ccb3d87",alias:"demographic-comparison-profile-ja"},{id:"00ad3ad05e384d7ea764b356a950356d",alias:"future-population-profile-ja"},{id:"db94d6af598f48778c4471f9fa0d6e4f",alias:"population-households-profile-ja"},{id:"c5f602a9d6714dd6bd6a2b720eced874",alias:"consumer-spending-profile-ja"}],"DE.DEU_Nexiga":[{id:"b0cd9df36d0747ecac2bc34f055f5583",alias:"base-demographic-profile"},{id:"1751ab1998db4e6fb79f484069605cfd",alias:"household-profile"}],
"ES.ESP_AIS":[{id:"3d17356c9a5549dbaa4096365e7eb703",alias:"base-demographic-profile"}],"PR.PRI_ACS_2020":[{id:"7923818907d248ff8dcd7a5941e89b57",alias:"at-risk-population"},{id:"c0b28d710379405eac4ecb6a64d817b4",alias:"commute-profile"},{id:"4b64ec164a3d4830ae8a4cedf067f55a",alias:"demographic-summary"},{id:"5e47986d4c4644a29a28c92c077919f2",alias:"health-care-and-insurance"},{id:"11c43309216b4d4a8fbd9a03cbcc22ec",alias:"coronavirus-impact-planning"}],"*.census":[{id:"f2d46b136acc46e2a2220388ddc43be0",
alias:"key-facts"},{id:"228155af0095410c961cc82f33cdcf49",alias:"multi-area-comparison"}]},"3.32":{"US.census":[{id:"2ff58abf55554be4b19006c1e607afaa",alias:"demographic-summary"},{id:"a19b321e3adc441886e706bb9704005c",alias:"key-facts"},{id:"f1e3b0c93e1d44e299eb0b752f93b7db",alias:"at-risk-population"},{id:"3bbc96da4ca142c7b80b082b0f986110",alias:"skyscraper"},{id:"1302184a2f584b86943b6c51d40acace",alias:"executive-summary-call-outs"},{id:"58035dcee74b4875bcd951b9174155d1",alias:"tapestry-profile"},
{id:"4da5867dfda046ddb4b82ab01b7cb568",alias:"nearby-restaurants"},{id:"4498b9e35665480cafe3985f788ca61d",alias:"multi-area-comparison"},{id:"83a11d5f38f84e709ff1e24786e963b4",alias:"property-details"},{id:"0a0354d2d0d842d8bd8e05d40545fc5b",alias:"employment-overview"},{id:"400924aa9d5f4bee8b9dd0c0af21dfbb",alias:"office-market-profile"},{id:"0a502ea9be8a43fdb6cd2fb5ff7503bc",alias:"health-care-and-insurance"},{id:"6147ac21718149a69ce15831f12181ed",alias:"demographic-profile"},{id:"4cdaddd947064ca690ebc06eec06ea57",
alias:"commute-profile"},{id:"a8fe08a9c5114260a2a6f7ca436d36f6",alias:"target-market-summary"},{id:"34a17e1fceb646228e94089ec5e0890f",alias:"population-trends"},{id:"eb5d984d78364a6596cd97e0bf7901a5",alias:"coronavirus-impact-planning"}],"CA.census":[{id:"5f6e17f3729145959fb38ed2cd508970",alias:"key-facts"},{id:"c86709cbd72043708e09e4a641adfbd0",alias:"multi-area-comparison"},{id:"bd9e3a17678843d4b1fa0716af91c231",alias:"prizm-profile"}],"NL.NLD_4orange":[{id:"470686f333d140c7b516294465eea037",alias:"housing-profile"},
{id:"ab11f2f11ea3439197769a8189451bea",alias:"insurance-profile"},{id:"f0e6736d0f364d4b88ea613746e57c81",alias:"media-profile"},{id:"bfe0814bc0604a8faa48d01b026ef7a5",alias:"personicx-segmentation"},{id:"bd1d4c7be5ad41ae909267b5e9c5f2dc",alias:"spending-profile"}],"JP.EsriJapan":[{id:"b9dcbb9f31fd4be7bd96a2f89ce66a1c",alias:"base-demographic-profile"},{id:"830ddad066c14c0dad27367a1b2ef132",alias:"demographic-comparison-profile"},{id:"7574f89d591f432da6ffdb94dcfdac52",alias:"future-population-profile"},
{id:"ec8785d4c9cb446394e07fa7dd8451fd",alias:"population-households-profile"},{id:"9ac85d73187548b2bb0d0b4a73f88199",alias:"consumer-spending-profile"},{id:"e99eee823684452fbe564fe42dac9535",alias:"base-demographic-profile-ja"},{id:"8598d6a8550d46aebd3fd598ceaefae7",alias:"demographic-comparison-profile-ja"},{id:"fdf81ddffb374e3f898006ffa59e259e",alias:"future-population-profile-ja"},{id:"f2468c2fef314427bd0865b460ef554f",alias:"population-households-profile-ja"},{id:"a96f28fb67024109b7c33161f3c9b308",
alias:"consumer-spending-profile-ja"}],"DE.DEU_Nexiga":[{id:"40a5ba79d1204e78ac6deaa633ccd59b",alias:"base-demographic-profile"},{id:"2e647098c613476bbd92b1e07331cb86",alias:"household-profile"}],"ES.ESP_AIS":[{id:"7d82cae4b3fc4575bab56ec82f51c368",alias:"base-demographic-profile"}],"PR.PRI_ACS_2020":[{id:"aa65005b75ba4e158afe63baa4bc5fe2",alias:"at-risk-population"},{id:"292a269a813e4d7797baf88a76c11a8c",alias:"commute-profile"},{id:"b1d50628f2484689b9e39d49fc2e16a0",alias:"demographic-summary"},
{id:"64839b7a81be45e287e805afc145652e",alias:"health-care-and-insurance"},{id:"44be3c42b70c4aee840fdeb4656b7922",alias:"coronavirus-impact-planning"}],"*.census":[{id:"ce57630d5cc24759809dd54bc1f82c91",alias:"key-facts"},{id:"c48ee0f58c8645bf8d689eb0db2d2936",alias:"multi-area-comparison"}]},"3.33":{"US.census":[{id:"55689c3ee7c1490e83accae002a8d164",alias:"demographic-summary"},{id:"173e40bebc9d426a8e4680242acafea4",alias:"key-facts"},{id:"218eba57314e476ba16d1d5d40bb0182",alias:"at-risk-population"},
{id:"3d470c82d8664e34b5026675596a7a87",alias:"skyscraper"},{id:"b9381f481f9f417f9647e0a2c8686979",alias:"executive-summary-call-outs"},{id:"d2800b578d1c4dd38ac95ce36882d881",alias:"tapestry-profile"},{id:"d9d8109c537943a78a24d65110291b43",alias:"nearby-restaurants"},{id:"2e835e58629a4f1e8192a729792b638f",alias:"multi-area-comparison"},{id:"6f3c32ed18834a4ea34b200e32ad7c33",alias:"property-details"},{id:"6b1267be3fcb401bbcb49afd221713cf",alias:"employment-overview"},{id:"67e6efc15cb142c2a7cc30a48a59c769",
alias:"office-market-profile"},{id:"9d8b447adc634228b24deb315107c0f0",alias:"health-care-and-insurance"},{id:"e45f96db738140869981b7443b6e2658",alias:"demographic-profile"},{id:"88d896eada3340dc8f8f1a2406bd48f9",alias:"commute-profile"},{id:"61492956f89a43ee86d245fca92858a2",alias:"target-market-summary"},{id:"91de69dede414856892dfdd94d2c4bab",alias:"population-trends"},{id:"ee9c6fdc902e4ea09509e4d1bf1582b5",alias:"coronavirus-impact-planning"}],"CA.census":[{id:"dfb663da790248fe89504c662c42aae3",
alias:"key-facts"},{id:"9873fcafe7194fcf9dffa8bbb8e001a1",alias:"multi-area-comparison"},{id:"4766ad797ef84968be4b4d0d54b98416",alias:"prizm-profile"}],"NL.NLD_4orange":[{id:"2212ff30c72143e6bcd9b8f26b01c47f",alias:"housing-profile"},{id:"c5efcef364ac4d8f82a6d54010ff75c7",alias:"insurance-profile"},{id:"e00894c000a94c42aefce551fe4e48c2",alias:"media-profile"},{id:"9d1da1c80e93407cb94589cee43a0f5a",alias:"personicx-segmentation"},{id:"578199262aa646bf8b0713f3f2160af6",alias:"spending-profile"}],"JP.EsriJapan":[{id:"00bd747c0e48477d8df692848560a8a2",
alias:"base-demographic-profile"},{id:"8ac4bd99dd1848dc98967419ab8d299c",alias:"demographic-comparison-profile"},{id:"88f94b5e3b6d414d913957b46e9f8394",alias:"future-population-profile"},{id:"41864cea64f3432a90006eb9a1f97608",alias:"population-households-profile"},{id:"44333ddcda38473d9a24010ed387eda7",alias:"consumer-spending-profile"},{id:"c35ebbeffb3b47fc9bbe3fc6283aaa7b",alias:"base-demographic-profile-ja"},{id:"6c8a565d12954927b83daaad81409a25",alias:"demographic-comparison-profile-ja"},{id:"fcba5d5750514c9c93b2cb5222609d98",
alias:"future-population-profile-ja"},{id:"7ad858351b6b4268b791b6cc24bf4e0f",alias:"population-households-profile-ja"},{id:"7d94fec6df6b4bff9ad14f5b711f18c6",alias:"consumer-spending-profile-ja"}],"DE.DEU_Nexiga":[{id:"571f323738c44d5a8b85d6d1e78d9c52",alias:"base-demographic-profile"},{id:"ef7624e051b6407488d8ad59b7979fc4",alias:"household-profile"}],"ES.ESP_AIS":[{id:"46e9329c7b2042fa84dfc1444f7decc0",alias:"base-demographic-profile"}],"PR.PRI_ACS_2020":[{id:"0cb7ba4d407640ff967829ae7dd39396",alias:"at-risk-population"},
{id:"7598826f28124abf9134801a607d56ce",alias:"commute-profile"},{id:"848c5cc8a4284065a0055b047a106adf",alias:"demographic-summary"},{id:"ecfc8db522004ea6848667e43589efd9",alias:"health-care-and-insurance"},{id:"4685d4c6c51e4ef392bdab89c0af8979",alias:"coronavirus-impact-planning"}],"*.census":[{id:"e4d3d1675d0044089f98a0f85ea16c8b",alias:"key-facts"},{id:"33b6e27f43644811b8a58f15c0832a67",alias:"multi-area-comparison"}]}}}function c(a){a=a||g.jsapiVersion;var b={};a=e()[a];for(var d in a){var c={};
a[d].forEach(function(a){c[a.alias]=a.id});var h=d.substr(0,d.indexOf("."));b[h]=c}return b}function b(a,b){b=c(b);return k.mixin({},b["*"],b[a])}f=f.geoenrichment.dijit.ReportPlayer.StandardTemplates;var a,d={"demographic-summary":f.demographicSummary,"key-facts":f.keyFacts,"marketing-profile":f.marketingProfile,"at-risk-population":f.atRiskPopulation,"portrait-property-flyer":f.portraitPropertyFlyer,skyscraper:f.skyscraper,"transportation-to-work":f.transportationToWork,"health-care":f.healthCare,
"executive-summary-call-outs":f.executiveSummaryCallOuts,"tapestry-profile":f.tapestryProfile,"nearby-restaurants":f.nearbyRestaurants,"multi-area-comparison":f.multiAreaComparison,"property-details":f.propertyDetails,"employment-overview":f.employmentOverview,"office-market-profile":f.officeMarketProfile,"health-care-and-insurance":f.healthCareAndInsuranceStatistics,"demographic-profile":f.demographicProfile,"commute-profile":f.commuteProfile,"target-market-summary":f.targetMarketSummary,"population-trends":f.populationTrends,
"coronavirus-impact-planning":f.coronavirusImpactPlanning,"prizm-profile":f.prizmProfile,"housing-profile":f.housingProfile,"insurance-profile":f.insuranceProfile,"media-profile":f.mediaProfile,"personicx-segmentation":f.personicxSegmentation,"spending-profile":f.spendingProfile,"base-demographic-profile":f.baseDemographicProfile,"demographic-comparison-profile":f.demographicComparisonProfile,"future-population-profile":f.futurePopulationProfile,"population-households-profile":f.populationHouseholdsProfile,
"consumer-spending-profile":f.consumerSpendingProfile,"base-demographic-profile-ja":"\u57fa\u672c\u7d71\u8a08\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb","demographic-comparison-profile-ja":"\u4eba\u53e3\u7d71\u8a08\u6bd4\u8f03\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb","future-population-profile-ja":"\u5c06\u6765\u4eba\u53e3\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb","population-households-profile-ja":"\u4eba\u53e3\u30fb\u4e16\u5e2f\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb","consumer-spending-profile-ja":"\u6d88\u8cbb\u984d\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb",
"household-profile":f.householdProfile},h={portalUrl:"http://www.arcgis.com",user:"esri_reports",query:"http://www.arcgis.com/home/search.html?q\x3downer%3Aesri_reports",aliasToID:function(a,d,c){return b(a,c)[d]},aliasToLabel:function(a){return d[a]},getAliases:function(a,d){a=Object.keys(b(a,d));a.sort(function(a,b){return a.localeCompare(b)});return a},getListOptions:function(a,b){return h.getAliases(a,b).map(function(c){return{value:h.aliasToID(a,c,b),label:d[c]}})},getSupportedCountries:function(a){return Object.keys(c(a)).map(function(a){return"*"===
a?"AU":a})},getLibrary:function(){var a=k.clone(e()),b;for(b in a){var d=a[b];d["AU.census"]=d["*.census"];delete d["*.census"]}return a}};return h})},"esri/dijit/geoenrichment/utils/PortalQueryUtil":function(){define([],function(){var k={combineQueryString:function(g){var f="";g.type&&(f+='type:"'+g.type+'"');g.typeKeywords?f=Array.isArray(g.typeKeywords[0])?f+(" typekeywords:("+g.typeKeywords.map(function(e){return k.combineTypeKeywords(e)}).join(" OR ")+")"):f+(" typekeywords:"+k.combineTypeKeywords(g.typeKeywords,
g.typeKeywordsNot)):g.typeKeywordsNot&&(f+=" typekeywords:"+k.combineTypeKeywords(null,g.typeKeywordsNot));g.owner&&(f+=" owner:"+g.owner);g.isShared&&(f+=g.orgId?" ((orgid:"+g.orgId+' AND access:"public") OR access:"shared" OR access:"org")':' (access:"shared" OR access:"org")');g.ownerNot&&(f+=" NOT owner:"+g.ownerNot);return f},combineTypeKeywords:function(g,f){g=g?k._combineArray(g):"";return f?(f=k._combineArray(f),"("+g+" NOT "+f+")"):g},_combineArray:function(g){return"string"===typeof g?"("===
g.charAt(0)||'"'===g.charAt(0)?g:'"'+g+'"':1===g.length?'"'+g[0]+'"':"("+g.map(function(f){return'"'+f+'"'}).join(" ")+")"}};return k})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/templateJsonUtils/TemplateJsonAnalyzer":function(){define(["./query/TemplateJsonQueryUtil"],function(k){return{collectVariablesStats:function(g){var f={};k.processTemplateFieldInfos(g,function(e){e.infographicJson&&e.infographicJson.variables?e.infographicJson.variables.forEach(function(c){f[c]=1}):e.hasVariable&&
(e.usedMapTos?e.usedMapTos.forEach(function(c){f[c]=1}):e.fullName&&(f[e.fullName]=1))});return f}}})},"esri/dijit/geoenrichment/ReportPlayer/core/infographics/utils/InfographicJsonUtil":function(){define(["esri/dijit/geoenrichment/config","esri/dijit/geoenrichment/utils/ArrayUtil"],function(k,g){var f={getDefaultLevels:function(){var e=k.levels.slice();e.push(k.highestLevel);return e},getLevels:function(e){e=e.levels&&e.levels.length?e.levels:f.getDefaultLevels();return g.removeDuplicates(e)},getSubLevels:function(e){e=
f.getLevels(e);e.pop();return e},getHighestLevel:function(e){e=f.getLevels(e);return e[e.length-1]},setLevels:function(e,c){c=g.removeDuplicates(c||[]);e.levels=c.length?c:f.getDefaultLevels()},getDataDrilling:function(e,c){"string"!==typeof c&&(c=(c=e.variableTables&&e.variableTables[c])&&c.variable.fieldInfo&&c.variable.fieldInfo.templateName);return e.dataDrilling&&e.dataDrilling[c]},setDataDrilling:function(e,c,b){c&&(e.dataDrilling=e.dataDrilling||{},b?e.dataDrilling[c]=b:delete e.dataDrilling[c])},
validateDataDrilling:function(e){var c=e.dataDrilling;if(c){var b={};e.variableTables.forEach(function(a){a.variable&&a.variable.fieldInfo&&a.variable.fieldInfo.templateName&&(b[a.variable.fieldInfo.templateName]=!0)});Object.keys(c).forEach(function(a){b[a]||delete c[a]})}},analyzeVariables:function(e){e=e.fieldInfos?e.fieldInfos.map(function(a){return a.fullName}):e.variables;if(1===e.length&&-1!==e[0].indexOf(".*"))return{dataCollectionID:e[0].substr(0,e[0].indexOf("."))};var c={},b,a;e.forEach(function(d,
h){c[d.substr(0,d.indexOf("."))]=1;b=d.substr(d.indexOf(".")+1);a=d});return{dataCollectionID:1===Object.keys(c).length?Object.keys(c)[0]:null,variableID:1===e.length?b:null,fullName:1===e.length?a:null}}};return f})},"esri/dijit/geoenrichment/config":function(){define(["esri/urlUtils"],function(k){k=k.getProtocolForWebResource();return{portalUrl:k+"//arcgis.com",server:k+"//geoenrich.arcgis.com/arcgis/rest/services/World/GeoenrichmentServer",levels:["Admin3","Admin2"],highestLevel:"Admin1",locatorUrl:k+
"//geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer",addressFormat:"${Address}, ${City}, ${Region} ${Postal}"}})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/areas/AreasPreprocessor":function(){define("dojo/_base/lang esri/dijit/geoenrichment/when esri/dijit/geoenrichment/promise/all dojo/string esri/graphic esri/symbols/jsonUtils ./FeatureNameUtil ../tasks/EnrichAreasTask esri/dijit/geoenrichment/utils/GeometryUtil esri/dijit/geoenrichment/ReportPlayer/config dojo/i18n!esri/nls/jsapi".split(" "),
function(k,g,f,e,c,b,a,d,h,l,n){var m={preprocessAreas:function(b,d){d=d||{};b.analysisAreas=b.analysisAreas.filter(function(a){return a.feature&&a.feature.geometry&&"polygon"===a.feature.geometry.type||a.geographies&&a.geographies.length||a.buffer});-1!==d.analysisAreasLimit&&(d.analysisAreasLimit=d.analysisAreasLimit||20,b.analysisAreas.length=Math.min(b.analysisAreas.length,d.analysisAreasLimit));m.provideAreasIndexes(b);b.analysisAreas.forEach(function(a){a.feature&&!a.feature.attributes&&(a.feature.attributes=
{})});b.analysisAreas.forEach(function(b){b.name=b.name||b.shortName;if(!b.name&&b.feature){var d=a.guessFeatureName(b.feature);d&&(b.name=b.shortName=d)}});return g(p.generalize(b.analysisAreas),function(){return f([t.provideGeographyFeatures(b),q.provideBufferFeatures(b)])})},provideAreasIndexes:function(a){var b=a.combinedAreasInfo.groups,d=b&&b.length;a.analysisAreas.forEach(function(a,c){a.index=c;b&&(b.forEach(function(b,d){-1!==b.indexes.indexOf(c)&&(a.isGrouped=!0,a.groupIndex=d)}),"number"!==
typeof a.groupIndex&&(a.isGrouped=!1,a.groupIndex=d++))})},removeGroupInfo:function(a){a.forEach(function(a){delete a.isGrouped;delete a.groupIndex})}},p={generalize:function(a){var b=[],d=[];a.forEach(function(a,c){!a.feature||a.geographies&&a.geographies.length||(b.push(a.feature),d.push(c))});return g(function(a){function b(a){var b=0;a.geometry.rings.forEach(function(a){b+=a.length});return b}var d,e,f=h.needGeneralizeGeometry(a,l.generalization.factor,l.generalization.maxVerticesInAllFeatures,
l.generalization.numVerticesPerFeature),m;f&&(d=!0,e=[],a=a.map(function(a){e.push(b(a));return new c(a.geometry,a.symbol,a.attributes)}),m=h.generalizeGeometry(a,f,l.generalization.numVerticesPerFeature,!0));return g(m,function(){d&&(console.log("Generalize features:"),a.forEach(function(a,d){console.log("#"+d+" "+e[d]+" \x3d\x3e "+b(a))}));return a})}(b),function(b){d.forEach(function(d){a[d].feature=b.shift()})})}},t={provideGeographyFeatures:function(a){return f(a.analysisAreas.map(function(c){if(!c.feature&&
c.geographies&&c.geographies.length)return(new d).createFeatureForGeographies(c.geographies,{countryID:a.countryID,hierarchy:a.hierarchy}).then(function(a){c.feature=a;c.name=c.name||c.feature.attributes.StdGeographyName;c.description=c.description||n.geoenrichment.dijit.ReportPlayer.ReportPlayer.geography;c.address=c.address||c.name;c.geographies[0].attributes&&k.mixin(c.feature.attributes,c.geographies[0].attributes);if(a=c.geographies[0].symbol)a=a.toJson?a:b.fromJson(a),c.feature.setSymbol(a)})}))}},
q={provideBufferFeatures:function(a){var b=this,c=a.analysisAreas.filter(function(a){return!a.feature&&a.buffer}),h=c.map(function(a){return a.buffer});return(new d).createFeaturesForBuffers(h,{countryID:a.countryID}).then(function(a){a.forEach(function(a,d){d=c[d];d.feature=a;b._applyBufferParamsToArea(d)})})},_applyBufferParamsToArea:function(a){var d=a.buffer;if(!a.name){var c=n.geoenrichment.dijit.bufferTitle.pointRing;c[d.units]&&(a.name=e.substitute(c[d.units],{radius:d.radius}))}a.description=
a.description||"Ring";d.attributes&&k.mixin(a.feature.attributes,d.attributes);if(d=d.symbol)d=d.toJson?d:b.fromJson(d),a.feature.setSymbol(d)}};return m})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/areas/FeatureNameUtil":function(){define([],function(){return{_nameScores:[/^name$/i,/^title$/i,/(^name)|(name$)/i,/(^title)|(title$)/i],guessFeatureName:function(k){var g=Object.keys(k.attributes),f;this._nameScores.some(function(e){return g.some(function(c){if(e.test(c))return f=
c,!0})});return k.attributes[f]||""}}})},"esri/dijit/geoenrichment/utils/GeometryUtil":function(){define("dojo/_base/lang esri/dijit/geoenrichment/Deferred esri/geometry/Polygon esri/workers/WorkerClient ./PolygonUtil ./GeometryUtil_base".split(" "),function(k,g,f,e,c,b){function a(a,b,d){var c=new g,h=new e("./mutableWorker",function(){h.importScripts(["../dijit/geoenrichment/utils/GeometryUtil_worker","../dijit/geoenrichment/utils/GeometryUtil_base"]).then(function(){h.postMessage({rings:a,maxAllowableOffset:d}).then(function(a){var d=
a.rings;b.forEach(function(a){for(var b=a.source.length=0;b<a.count;b++)a.source.push(d.shift())});c.resolve();h.terminate()})})},!0);return c.promise}var d=k.mixin({},b);d.calculateMaxAllowableOffset=function(a,b){void 0===b&&(b=1);return a.extent.getWidth()/a.width*b};d.getNumberOfPoints=c.getNumberOfPoints;d.needGeneralizeGeometry=function(a,b,c,e){if(!a||!b)return!1;e=e||(c?c/10:500);c=c||5E3;Array.isArray(a)||(a=[a]);var h=0>b,f=0,g=Math.abs(b)/100,l=0,m=0,n;a.forEach(function(a){a=a.geometry||
a;if(!a.rings||!a.getExtent)return!1;var e=a.getExtent();if(e=e.getWidth()*e.getHeight())e=Math.sqrt(e),a=d.getNumberOfPoints(a),l+=a,m=Math.max(m,a),h&&(f=Math.max(f,e*g)),n||(n=h?l>c:a*b>4*e)});return n&&m>e?f||b:0};d.generalizeGeometry=function(b,c,e,g){if(!b||!c||0>c)return!1;e=e||500;Array.isArray(b)||(b=[b]);var h=[],l=[];b.map(function(a){var b=a.geometry||a;if(b!=a&&b.rings){a.geometry=new f;a.geometry.setSpatialReference(b.spatialReference);var c=a.geometry.rings}c&&b.rings.forEach(function(a){c.push(a.slice())});
d.getNumberOfPoints(b)>e&&(a=c||b.rings,h=h.concat(a),l.push({source:a,count:a.length}))});if(g&&window.Worker)return a(h,l,c);h.forEach(function(a){(new d.RingInfo(a)).generalize(c,.8)})};return d})},"esri/workers/WorkerClient":function(){define("dojo/Evented dojo/_base/declare dojo/Deferred dojo/_base/lang dojo/request ../sniff ../kernel ../urlUtils require".split(" "),function(k,g,f,e,c,b,a,d,h){var l=window.Blob||window.webkitBlob||window.mozBlob,n=window.URL||window.webkitURL||window.mozURL;
k=g([k],{declaredClass:"esri.workers.WorkerClient",worker:null,returnDeferreds:!1,_queue:null,constructor:function(a,d,c){this._isIE=b("ie");this.returnDeferreds=!!c;this._queue={};this._acceptMessage=e.hitch(this,this._acceptMessage);this._errorMessage=e.hitch(this,this._errorMessage);a&&this.setWorker(a,e.hitch(this,function(a){this.worker=a;d(a)}))},setWorker:function(a,b){if(a instanceof Array){var c=a;a=c.shift()}var h=this._getUrl(a),h=d.normalize(h);a=!d.hasSameOrigin(h,location.href);var f;
if(!1===h)return console.log("Can not resolve worker path"),!1;this.worker&&(f=this.worker,f.removeEventListener("message",this._acceptMessage,!1),f.removeEventListener("error",this._errorMessage,!1),f.terminate(),f=null);if(a){a=this._getUrl("./mutableWorker",!0);try{this._getRemoteText(a,e.hitch(this,function(a){a=n.createObjectURL(new l([a],{type:"text/javascript"}));b(this._createWorker(a,h))}))}catch(u){try{a=d.getProxyUrl(a).path+"?"+encodeURI(a),this._useProxy=!0,b(this._createWorker(a,c))}catch(v){return console.log("Can not create worker"),
!1}}}else setTimeout(e.hitch(this,function(){b(this._createWorker(h,c))}),0)},_createWorker:function(a,b){a=new Worker(a);a.addEventListener("message",this._acceptMessage,!1);a.addEventListener("error",this._errorMessage,!1);this.worker=a;b&&this.importScripts(b);return a},postMessage:function(a,b){if(a instanceof Array||"object"!=typeof a)a={data:a};var d=Math.floor(64E9*Math.random()).toString(36);a.msgId=d;d=this._queue[d]=new f;this.worker?(b?this.worker.postMessage(a,b):this.worker.postMessage(a),
this.emit("start-message",{target:this,message:a})):d.reject({message:"No worker was set."});return this.returnDeferreds?d:d.promise||d},terminate:function(){var a=Object.keys(this._queue);this.worker&&this.worker.terminate();for(var b=a.length-1;0<=b;b--)this._queue[a[b]].cancel("terminated"),delete this._queue[a[b]]},addWorkerCallback:function(a,b){var d=this._getUrl(a,!0);!1===d?(b=new f,b.reject({message:"Could not load text from "+a})):(b=this.postMessage({action:"add-callback",url:d,cbName:b||
"main"}),b.then(e.hitch(this,function(a){a.target=this;this.emit("callback-added",a)})));return b},importScripts:function(a){Array.isArray(a)||(a=[a]);a=a.map(function(a){a=this._getUrl(a,!0);this._useProxy&&!d.hasSameOrigin(a,location.href)&&(a=d.getProxyUrl(a).path+"?"+encodeURI(a));return a},this);a=this.postMessage({action:"import-script",url:a});a.then(e.hitch(this,function(a){a.target=this;this.emit("scripts-imported",a)}));return a},_acceptMessage:function(a){var b=a.data,d=b.msgId;if(b.status&&
"debug"==b.status)console[b.showAs||"debug"](b);else if(d&&d in this._queue){var c=this._queue[d];"progress"==b.status?c.progress(a.data):("error"==b.status?c.reject(a.data):c.resolve(a.data),delete this._queue[d])}this.emit("message",{message:a.data,event:a,target:this})},_errorMessage:function(a){this.onerror||this.onError?this.onerror?this.onerror(a):this.onError(a):console.log("Worker Error: "+a.message+"\nIn "+a.filename+" on "+a.lineno)},_getUrl:function(a,b){if(!a)return console.error("can not resolve empty path"),
!1;a.match(/\.js$/)||(a+=".js");a=h.toUrl(a);return b?d.getAbsoluteUrl(a):a},_getRemoteText:function(a,b){(a=this._getUrl(a))&&c.get(a,{sync:!1,handleAs:"text",headers:{"X-Requested-With":"","Content-Type":"text/plain"}}).then(function(a){b(a)})},_startBlobWorker:function(){var a=this._xdSource;a||(a=this._getUrl("./mutableWorker"),a=new l(["if(!self._mutable){importScripts('"+a+"');}"],{type:"text/javascript"}),a=this._xdSource=n.createObjectURL(a));try{return new Worker(a)}catch(p){return console.log(p.message),
!1}}});b("extend-esri")&&e.setObject("workers.WorkerClient",k,a);return k})},"esri/dijit/geoenrichment/utils/GeometryUtil_base":function(){(function(k){function g(a,b){var d=a.length;if(3>d)return 0;b||(b=a[0]);var c=b[0];b=b[1];for(var e=a[d-1],d=e[0]-c,h=e[1]-b,f=0,g=0,k=a.length;g<k;g++)var e=a[g],u=e[0]-c,e=e[1]-b,f=f+(u*h-d*e),d=u,h=e;return f/2}var f={};f.calculateRingArea=g;f.calculateRingCentroid=function(a,b){var d=a.length;if(!d)return null;b||(b=a[0]);var c=b[0];b=b[1];var e=0,h=0,f=0;
if(2<d)for(var g=a[d-1],d=g[0]-c,k=g[1]-b,u=0,v=a.length;u<v;u++)var g=a[u],w=g[0]-c,g=g[1]-b,y=w*k-d*g,e=e+y,h=h+(d+w)*y,f=f+(k+g)*y,d=w,k=g;0==e?h=f=0:(h/=3*e,f/=3*e);return[c+h,b+f]};f.INTERIOR=1;f.EXTERIOR=-1;f.BOUNDARY=0;f.createRingInfo=function(a,c){return new b(a,c)};f.createSegmentCoordinates=function(b){return new a(null,0,0,b)};var e=function(a){return function(){for(var b in a){var d=a[b];this[b]="function"===typeof d?d.bind(this):d}a.ctr.bind(this).apply(this,arguments)}},c=e({xmin:null,
ymin:null,xmax:null,ymax:null,spatialReference:null,ctr:function(a,b,c,e,f){this.xmin=a;this.ymin=b;this.xmax=c;this.ymax=e;this.spatialReference=f},printOut:function(){console.log([this.xmin,this.xmax,this.ymin,this.ymax].join(" "))}}),b=e({ring:null,origin:null,area:0,clockwise:!1,extent:null,_coords:null,ctr:function(a,b){this.ring=a;this.origin=b;a=this.ring.length-1;if(!(0>a)){if(!a)a++;else if(this.ring[a][0]!=this.ring[0][0]||this.ring[a][1]!=this.ring[0][1])a++,this.ring.push(this.ring[0].slice());
var d=0,e=0;b=!b;this.extent=new c(this.ring[0][0],this.ring[0][1],this.ring[0][0],this.ring[0][1]);for(var h=0;h<a;h++){var f=this.ring[h],k=f[0];b&&(d+=k);k<this.extent.xmin?this.extent.xmin=k:k>this.extent.xmax&&(this.extent.xmax=k);k=f[1];b&&(e+=k);k<this.extent.ymin?this.extent.ymin=k:k>this.extent.ymax&&(this.extent.ymax=k)}b&&(this.origin=[d/a,e/a]);this.area=g(this.ring,this.origin);0>=this.area?this.area=-this.area:this.clockwise=!0}},setDirection:function(a){this.clockwise==!a&&(this.ring.reverse(),
this.clockwise=!this.clockwise,this._coords=null)},testPoint:function(a,b){a=this.getRingCoordinates(b).testPoint(a[0]-this.origin[0],a[1]-this.origin[1]);return this.clockwise?a:-a},generalize:function(a,b,c){function d(d,c,e){w=d;y=c;if(e||C<v)v=a,A=w-k,B=y-k,C=Math.sqrt(A*A+B*B),C>a*b?(A/=C,B/=C):C=0;v*=b}function e(){if(!C)return!0;var a=h.dx,b=h.dy,d=Math.sqrt(a*a+b*b);return d-a*A-b*B>=.9*d}b=b||.75;var h=this.getRingCoordinates(a),f=h.xs,l=h.ys,k=f[0],u=l[0],v,w,y,A,B,C=0,z=f.length-1;d(f[z],
l[z],!0);for(var E=this,G=this.clockwise?function(a){E.ring.splice(a,1)}:function(a){E.ring.splice(-a-1,1)};0<z--&&4<f.length;){var F=f[z],D=l[z];h.setSegment(k,u,F,D)&&h.testPointOnTouch(w,y,v)&&e()?(f.splice(z+1,1),l.splice(z+1,1),G(z+1),d(F,D)):(k=w,u=y,d(F,D,!0))}this._coords=null;c&&(this.area=g(this.ring,this.origin),this.clockwise||(this.area=-this.area))},getRingCoordinates:function(b,c){if(c)return new a(this.ring,c[0],c[1],b,this.extent,this.clockwise);this._coords&&this._coords.eps==b||
(this._coords=new a(this.ring,this.origin[0],this.origin[1],b,this.extent,this.clockwise));return this._coords}});f.RingInfo=b;var a=e({xs:null,ys:null,extent:null,eps:NaN,dx:null,dy:null,_sx:null,_sy:null,ctr:function(a,b,e,f,g,k){this.xs=[];this.ys=[];a||(a=[]);void 0===b&&(b=0);void 0===e&&(e=0);void 0===f&&(f=0);this.eps=Math.max(f,0);g&&(f=this.eps/2,this.extent=new c(g.xmin-b-f,g.ymin-e-f,g.xmax-b+f,g.ymax-e+f));var d=a.length-1;if(!(0>d))for(g=d?a[d][0]==a[0][0]&&a[d][1]==a[0][1]?d:d+1:1,f=
k?1:-1,k=k?0:d;g--;k+=f)d=a[k],this.xs.push(d[0]-b),this.ys.push(d[1]-e)},testPoint:function(a,b){if(!this._pointBelongsToExtent(a,b))return-1;var d=this.xs.length,c=!1;this.dy=this.ys[0]-this.ys[d-1];if(0==this.dy){for(c=d;1<c--&&(this.dy=this.ys[c]-this.ys[c-1],0==this.dy););if(0==this.dy)return 0}for(var c=0<this.dy,e=0,h=this.xs[0],f=this.ys[0],g,k,u=1;u<=d;u++,h=g,f=k)if(k=u==d?0:u,g=this.xs[k],k=this.ys[k],this.setSegment(h,f,g,k)){var v=f-b,w=k-b,y=!1;0>v&&(v=-v,w=-w,y=!0);if(!(v>this.eps&&
w>this.eps)){if(this.testPointOnTouch(a,b,this.eps))return 0;0==v?0!==w&&(0>w&&(c=!c),a<h&&c&&e++):0==w?c=y:0>w&&a<h+this.dx/this.dy*(b-f)&&e++}}return 0!=e%2?1:-1},testPointOnTouch:function(a,b,c){var d=this.findIntersectionDelta(a,b,a-this.dy,b+this.dx);a=this._sx+d*this.dx-a;b=this._sy+d*this.dy-b;return a*a+b*b<=c*c},_pointBelongsToExtent:function(a,b){return a>=this.extent.xmin&&a<=this.extent.xmax&&b>=this.extent.ymin&&b<=this.extent.ymax},setSegment:function(a,b,c,e){this._sx=a;this.dx=c-a;
this._sy=b;this.dy=e-b;return 0!=this.dx||0!=this.dy},findIntersectionDelta:function(a,b,c,e,f){void 0===f&&(f=!0);c-=a;e-=b;var d=this.dy*c-this.dx*e;if(0==d)return 0;var h=a-this._sx,g=b-this._sy,l=g*c-h*e,h=f?0:g*this.dx-h*this.dy;0>d&&(d=-d,l=-l,h=-h);return f||(h=0>h?0:h<d?h/d:1,this.testPointOnTouch(a+h*c,b+h*e,this.eps))?0>=l?0:l<d?l/d:1:-1},addPointOfSegmentAt:function(a){this.xs.push(this._sx+a*this.dx);this.ys.push(this._sy+a*this.dy)}});f.RingCoordinates=a;k.document?define(function(){return f}):
k.GeometryUtil_base=f})(this)},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/ReportTemplateTypes":function(){define([],function(){return{STANDARD:"esriReportTemplateStandard",MULTICOLUMN:"esriReportTemplateMultiColumn",MAP:"esriReportTemplateMapReport",FUSION:"esriReportTemplateFusion"}})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/PortalToEditorConverter":function(){define("esri/dijit/geoenrichment/when ./portalToEditorUtils/layout/LayoutParser ./portalToEditorUtils/metadata/MetadataParser ./portalToEditorUtils/ImageCollector ./portalToEditorUtils/parsers/Parsers ./portalToEditorUtils/variables/PlayerVariableProvider ../supportClasses/DefaultStyles ../supportClasses/images/ImageDataHolder ../themes/conversion/CssParser esri/dijit/geoenrichment/utils/async/AsyncQueue esri/dijit/geoenrichment/utils/DelayUtil".split(" "),
function(k,g,f,e,c,b,a,d,h,l,n){return{provideEditorJson:function(m,p){function t(){function a(a,b,d){return k(p.preProcessFile&&p.preProcessFile(a,b,q),function(c){if(!1!==c)return k(d&&d(),function(){return p.postProcessFile&&p.postProcessFile(a,b,q)})})}if(r&&r.files&&r.files){var b=p.filesToProcess||["theme.css.txt","metadata.xml","report.xml"],e={"theme.css.txt":function(b){return a(b,"theme.css.txt",function(){q.theme=h.fromCssText(b.data,p)})},"metadata.xml":function(b){return a(b,"metadata.xml",
function(){return f.parseMetadataXML(b,q,p)})},"report.xml":function(b){return a(b,"report.xml",function(){return g.parseReportXML({report:m,parsers:c,file:b,templateJson:q,variableProvider:p.variableProvider,useVariableProviderToCollectOnly:p.useVariableProviderToCollectOnly,tableDefaultStyles:p.tableDefaultStyles,processFileName:v,putImageData:function(a,b){a=v(a);b=b||u[a];d.putImageData(a,b);return b},log:w,queryMetaDataFunc:function(a){return p.queryMetaDataFunc&&p.queryMetaDataFunc(a,q)},postProcessChartJson:function(a,
b){p.postProcessChartJson&&p.postProcessChartJson(q,a,b)},postProcessMapJson:function(a,b){p.postProcessMapJson&&p.postProcessMapJson(q,a,b)},postProcessInfographicJson:function(a,b){p.postProcessInfographicJson&&p.postProcessInfographicJson(q,a,b)},postProcessTableInSection:function(a,b){p.postProcessTableInSection&&p.postProcessTableInSection(q,a,b)}})})},generic:function(b,d){return a(b,d)}},t=new l;b.forEach(function(a){var b=r.files.filter(function(b){return b.name===a})[0],d=b&&(e[a]||e.generic);
d&&t.add(function(){return k(n.delay(50),function(){return d(b,a)}).otherwise(function(a){q.metadata.parseErrors.push(a);console.log(a)})})});return t.getPromise()}}p=p||{};p.variableProvider=p.variableProvider||new b;p.tableDefaultStyles=p.tableDefaultStyles||new a;var q={documentOptions:{},metadata:{specialTradeAreaCalculatorName:null,parseErrors:[],mapImageInfosHash:{},comparisonCalculatorsHash:{},locatorCalculatorsHash:{}},theme:null},r=m.portalJson,u={};p.getImageData=function(a){return u[v(a)]};
var v=function(a){return a?a.toLowerCase():""},w=p.log||function(a){};return k(c.initialize(),function(){return k(e.collectImageResources(r,u,v),function(){for(var a in u)d.putImageData(a,u[a]);return k(t(),function(){q.metadata.parseErrors.length||(m.templateJson=q)})})})}}})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/layout/LayoutParser":function(){define(["esri/dijit/geoenrichment/utils/JsonXmlConverter","./GraphicReportSectionsParser","./ClassicReportSectionsParser"],
function(k,g,f){return{parseReportXML:function(e){e.log(e.file.data);var c=k.parseXml(e.file.data);e.parsers.getParser("document").parseDocument(c,e);e.report.isGraphicReport?(e.templateJson.sectionsTables=[],g.parseSectionsGraphic(c,e)):(e.templateJson.sections=[],f.parseSectionsClassic(c,e))}}})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/layout/GraphicReportSectionsParser":function(){define(["esri/dijit/geoenrichment/utils/JsonXmlConverter"],function(k){return{parseSectionsGraphic:function(g,
f){k.queryTopJson(g,"table").forEach(function(e){try{f.templateJson.sectionsTables.push(f.parsers.getParser("section").parseTable(e,f,{fixTableWidthsForPage:!0}))}catch(c){console.log(c)}})}}})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/layout/ClassicReportSectionsParser":function(){define(["esri/dijit/geoenrichment/utils/JsonXmlConverter"],function(k){return{parseSectionsClassic:function(g,f){k.queryTopJson(g,"section").forEach(function(e){f.templateJson.sections.push(f.parsers.getParser("section").parseSection(e,
f,{fixTableWidthsForPage:!0}))});this._splitSections(f)},_splitSections:function(g){g=g.templateJson;var f=[];g.sections.forEach(function(e){function c(){b={type:e.type,stack:[]};f.push(b)}var b;c();e.stack.forEach(function(a){if("hr"===a.id){var d=!!b.stack.length;b.stack.push(a);d&&c()}else"table"===a.id?(b.stack.some(function(a){return"table"===a.id})&&c(),b.stack.push(a)):"pageBreak"===a.id?(b.stack.length&&c(),b.stack.push(a),c()):b.stack.push(a)})});f=f.filter(function(e){return!!e.stack.length});
g.sections=f}}})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/metadata/MetadataParser":function(){define("esri/dijit/geoenrichment/promise/all esri/dijit/geoenrichment/utils/JsonXmlConverter ./DataCollectionsCalculatorsParser ./ScriptsCalculatorsParser ./LocatorCalculatorsParser ./map/MapCalculatorsParser ./TradeAreaCalculatorsParser".split(" "),function(k,g,f,e,c,b,a){return{parseMetadataXML:function(d,h,l){l.log&&l.log(d.data);var n=g.parseXml(d.data);if(n&&n.tags)return k([a.parseTradeAreaCalculators(n,
h,l),f.parseDataCollectionsCalculators(n,h,l),e.parseScriptsCalculators(n,h,l),c.parseLocatorCalculators(n,h,l)]).then(function(){return b.parseMapCalculators(n,h,l)})}}})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/metadata/DataCollectionsCalculatorsParser":function(){define(["esri/dijit/geoenrichment/utils/JsonXmlConverter","./VariableScriptCollector","../../../../_devConfig"],function(k,g,f){return{parseDataCollectionsCalculators:function(e,c,b){k.queryJson(e,"DataCollections").forEach(function(a){var d=
k.queryJson(a,"ComparisonLevel");if(f.emulateErrors.metadataParseError)throw Error("Error test: something crashed during the parsing of the metadata!");var e;if(b.variableProvider.isPlayerOnly||d.length)e=g.getObjects(a);d.length&&(a={calculatorName:a.attributes.Name,levels:d.map(function(a){return a.attributes.Name}).filter(function(a){return!b.validateGeographyLevelFunc||b.validateGeographyLevelFunc(a)}),variableObjects:e.variableObjects},c&&(c.metadata.comparisonCalculatorsHash[a.calculatorName]=
a));b.variableProvider.isPlayerOnly&&(e.variableObjects.forEach(function(a){b.variableProvider.addVariable(a)}),e.scriptObjects.forEach(function(a){b.variableProvider.addScriptVariable(a)}))})}}})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/metadata/VariableScriptCollector":function(){define(["esri/dijit/geoenrichment/utils/JsonXmlConverter","../variables/VariableUtil"],function(k,g){var f={getObjects:function(e,c){c=f._getVariableInfo(e,c);e=f._getScriptObjects(e,
c.fieldNameToVariableCache);return{variables:c.variables,variableObjects:c.variableObjects,scriptObjects:e}},_getVariableInfo:function(e,c){var b=[];k.queryJson(e,c?/^(RawFields|Fields)$/:"Fields").forEach(function(a){b=b.concat(k.queryJson(a,/^(Field|PortalField)$/))});var a=[],d=[],h={};b.forEach(function(b){a.push(b.attributes.MapTo);if(b=g.fieldTagToVariable(b,e.attributes.Name))h[b.fieldName]=b,d.push(b)});return{variables:a,variableObjects:d,fieldNameToVariableCache:h}},_getScriptObjects:function(e,
c){var b=k.queryJson(e,"Scripts"===e.name?"Fields":"CalculatedFields")[0],b=b&&k.queryJson(b,"Script")||[];"Scripts"===e.name&&(b=b.filter(function(a){return!("STORE_ID"===a.attributes.Name||"AREA_ID"===a.attributes.Name)}));return b.map(function(a){var b=g.scriptTagToVariable(a,e.attributes.Name);b.usedFields&&(b.usedMapTos=[],b.usedFields.forEach(function(a){var d=c[a];d?d.usedMapTos?b.usedMapTos=b.usedMapTos.concat(d.usedMapTos):b.usedMapTos.push(d.fullName):console.log("Error parsing used fields for "+
a)}),c[b.fieldName]=b);return b})}};return f})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/variables/VariableUtil":function(){define([],function(){var k={getType:function(g,f){return g?0===g.indexOf("esriFieldType")?g:"esriFieldType"+g:f},fieldTagToVariable:function(g,f){return g.attributes.MapTo&&"AREA_ID"!==g.attributes.Name?{id:g.attributes.MapTo.substr(g.attributes.MapTo.lastIndexOf(".")+1),fullName:g.attributes.MapTo,alias:g.attributes.Alias,fieldName:g.attributes.Name,
precision:Number(g.attributes.Decimals)||0,calculatorName:f,templateName:f+"."+g.attributes.Name,type:k.getType(g.attributes.Type,g.attributes.Decimals?"esriFieldTypeDouble":"esriFieldTypeString"),vintage:null,source:null}:null},scriptTagToVariable:function(g,f){return{id:g.attributes.Name,fullName:f+"."+g.attributes.Name,fieldName:g.attributes.Name,alias:g.attributes.Alias,precision:Number(g.attributes.Decimals)||0,usedFields:g.attributes.usedFields?g.attributes.usedFields.split(","):[],usedMapTos:null,
expressionText:g.tags[0].text,calculatorName:f,templateName:f+"."+g.attributes.Name,type:k.getType(g.attributes.Type,g.attributes.Decimals?"esriFieldTypeDouble":"esriFieldTypeString")}}};return k})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/metadata/ScriptsCalculatorsParser":function(){define(["esri/dijit/geoenrichment/utils/JsonXmlConverter","./VariableScriptCollector"],function(k,g){return{parseScriptsCalculators:function(f,e,c){k.queryJson(f,"Scripts").forEach(function(b){c.variableProvider.isPlayerOnly&&
(b=g.getObjects(b),b.variableObjects.forEach(function(a){c.variableProvider.addVariable(a)}),b.scriptObjects.forEach(function(a){c.variableProvider.addScriptVariable(a)}))})}}})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/metadata/LocatorCalculatorsParser":function(){define(["esri/dijit/geoenrichment/promise/all","esri/dijit/geoenrichment/when","esri/dijit/geoenrichment/utils/JsonXmlConverter","../variables/VariableUtil"],function(k,g,f,e){return{parseLocatorCalculators:function(c,
b,a){c=f.queryJson(c,"Locator");return k(c.map(function(d){var c=[];f.queryJson(d,/^(PointFields|Fields)$/).forEach(function(a){c=c.concat(f.queryJson(a,/^(Field|Direction|Distance)$/))});var l=[];c.forEach(function(a){"Direction"===a.name?a.attributes.MapTo="DIRECTION":"Distance"===a.name&&(a.attributes.MapTo="DISTANCE");(a=e.fieldTagToVariable(a,d.attributes.Name))&&l.push(a)});var n={calculatorName:d.attributes.Name,variableObjects:l,layerID:null,layerUrl:null,layerName:d.attributes.LayerName};
d.attributes.Points&&0===d.attributes.Points.indexOf("std:")?n.layerID=d.attributes.Points.replace("std:",""):n.layerUrl=d.attributes.Layer;b.metadata.locatorCalculatorsHash[d.attributes.Name]=n;a.variableProvider.isPlayerOnly&&l.forEach(function(b){a.variableProvider.addVariable(b)});return g(!a.validateLocatorCalculator||a.validateLocatorCalculator(n.layerID,n.layerUrl),function(a){n.isValid=a})}))}}})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/metadata/map/MapCalculatorsParser":function(){define(["esri/dijit/geoenrichment/utils/JsonXmlConverter",
"./MetadataToRendererParser","./MapTagsUtil","esri/dijit/geoenrichment/utils/ImageUtil"],function(k,g,f,e){var c={parseMapCalculators:function(b,a,d){k.queryJson(b,"Maps").forEach(function(b){k.queryJson(b,"Map").forEach(function(e){var h=c._parsePortalLayers(e),f=c._parseStudyAreas(e),h={fieldName:e.attributes.Name,width:Number(e.attributes.Width),height:Number(e.attributes.Height),defaultBasemapId:h.defaultBasemapId,webMapId:h.webMapId,additionalLayerInfos:c._parseAdditionalLayers(e,a),pinSymbolJson:c._parseSiteLayerPinSymbol(e,
d),areaSymbolJsons:f.symbolJsons,areaSymbolRamp:f.ramp,mapScale:Number(e.attributes.Scale)||null};a&&(a.metadata.mapImageInfosHash[b.attributes.Name+"."+e.attributes.Name]=h)})})},_parsePortalLayers:function(b){var a;b=k.queryJson(b,"Layer").filter(function(a){return!!a.attributes.PortalItemId});1<b.length&&(a=b.shift());b=b.shift();return{defaultBasemapId:a&&a.attributes.PortalItemId,webMapId:b&&b.attributes.PortalItemId}},_parseAdditionalLayers:function(b,a){var d=[];k.queryJson(b,/^(Layer|LocatorResultsLayer|ComparisonResultsLayer)$/).filter(function(a){return!!a.attributes.ServiceUrl||
"LocatorResultsLayer"===a.name||"ComparisonResultsLayer"===a.name}).forEach(function(b){if(b.attributes.ServiceUrl)d.push({url:b.attributes.ServiceUrl});else if("LocatorResultsLayer"===b.name){var c=b.tags&&b.tags.filter(function(a){return"Renderer"===a.name})[0],e=a.metadata.locatorCalculatorsHash[b.attributes.CalculatorName];e.isValid&&d.push({isLocatorLayer:!0,layerName:b.attributes.LayerName,calculatorName:b.attributes.CalculatorName,calculatorInfo:e,rendererJson:c&&g.parseRendererJson(c)})}else"ComparisonResultsLayer"===
b.name&&((c=(c=b.tags&&b.tags.filter(function(a){return"Renderer"===a.name})[0])&&g.parseRendererJson(c))&&"esriTS"===c.uniqueValueInfos[0].symbol.type?d[d.length-1].labelRendererJson=c:(e=(e=b.tags&&b.tags.filter(function(a){return"LabelingInfo"===a.name})[0])&&g.parseLabelRendererJson(e),d.push({isComparisonLayer:!0,calculatorName:b.attributes.CalculatorName,rendererJson:c,labelRendererJson:e})))});return d.length&&d},_parseSiteLayerPinSymbol:function(b,a){var d;if(b=k.queryJson(b,"SiteLayer")[0])if((b=
k.queryJson(b,"Symbol")[0])&&"Image"===b.attributes.Type)(a=a.getImageData(b.attributes.Name))&&(d={type:"esriPMS",contentType:e.getContentType(a),imageData:e.base64DataFromDataURL(a),url:b.attributes.Url,width:Number(b.attributes.Width),height:Number(b.attributes.Height),angle:Number(b.attributes.Angle)||0,xoffset:Number(b.attributes.XOffset)||0,yoffset:Number(b.attributes.YOffset)||0});else if(b&&"Marker"===b.attributes.Type){d=(d=k.queryJson(b,"Fill")[0])&&k.queryJson(d,"Color")[0];var c=(a=k.queryJson(b,
"Outline")[0])&&k.queryJson(a,"Color")[0];d={type:"esriSMS",style:"esriSMS"+(b.attributes.Style||"Circle"),size:Number(b.attributes.Size),angle:Number(b.attributes.Angle)||0,xoffset:Number(b.attributes.XOffset)||0,yoffset:Number(b.attributes.YOffset)||0,color:f.parseColorTag(d),outline:a&&{type:"esriSLS",color:f.parseColorTag(c),style:"esriSLS"+(a.attributes.Style||"Solid"),width:void 0===a.attributes.Width?0:Number(a.attributes.Width)}}}return d},_parseStudyAreas:function(b){var a=(b=k.queryJson(b,
"StudyAreasLayer")[0])&&k.queryTopJson(b,"SymbolsPalette")[0];b=(a&&k.queryTopJson(a,"Symbol")||[]).map(c._parseAreaSymbol);var d=a&&k.queryTopJson(a,"SymbolRamp")[0],e;d&&(a=k.queryTopJson(d,"First")[0],d=k.queryTopJson(d,"Last")[0],a=a&&k.queryTopJson(a,"Symbol")[0],d=d&&k.queryTopJson(d,"Symbol")[0],a&&d&&(e=[a,d].map(c._parseAreaSymbol)));return{ramp:e,symbolJsons:b}},_parseAreaSymbol:function(b){var a=k.queryJson(b,"Fill")[0],a=a&&k.queryJson(a,"Color")[0],d=(b=k.queryJson(b,"Outline")[0])&&
k.queryJson(b,"Color")[0];return{type:"esriSFS",style:"esriSFSSolid",color:f.parseColorTag(a)||[0,0,0,1],outline:b&&{type:"esriSLS",color:f.parseColorTag(d),style:"esriSLS"+(b.attributes.Style||"Solid"),width:void 0===b.attributes.Width?0:Number(b.attributes.Width)}}}};return c})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/metadata/map/MetadataToRendererParser":function(){define(["esri/dijit/geoenrichment/utils/JsonXmlTypedConverter","esri/dijit/geoenrichment/utils/JsonXmlConverter"],
function(k,g){return{parseRendererJson:function(f){return k.parseXml(g.parseJson(f))},parseLabelRendererJson:function(f){return{type:"uniqueValue",field1:"StdGeographyLevel",uniqueValueInfos:k.parseXml(g.parseJson(f)).map(function(e){return{value:e.where.match(/StdGeographyLevel='(.*?)'/)[1],symbol:e.symbol}})}}}})},"esri/dijit/geoenrichment/utils/JsonXmlTypedConverter":function(){define(["dojo/_base/declare","./RegExpUtil"],function(k,g){var f=k(null,{parseJson:function(e,c){function b(d,c){if("string"===
typeof d)h+="\x3c"+c+' type\x3d"string"\x3e'+g.encodeXML(d,!1)+"\x3c/"+c+"\x3e";else if("number"===typeof d)h+="\x3c"+c+' type\x3d"number"\x3e'+d+"\x3c/"+c+"\x3e";else if("boolean"===typeof d)h+="\x3c"+c+' type\x3d"boolean"\x3e'+d+"\x3c/"+c+"\x3e";else if(Array.isArray(d))a(d,c);else if(d&&"object"===typeof d){h+="\x3c"+c+' type\x3d"object"\x3e';for(var e in d)b(d[e],e);h+="\x3c/"+c+"\x3e"}}function a(a,d){h+="\x3c"+d+' type\x3d"array"\x3e';a.forEach(function(a){b(a,"item")});h+="\x3c/"+d+"\x3e"}
var d=c&&c.rootName||"root",h="";c&&c.addDocumentOptions&&(h+='\x3c?xml version\x3d"1.0" encoding\x3d"utf-8"?\x3e');b(e,d);return h=decodeURIComponent(encodeURIComponent(h).replace("%19",""))},parseXml:function(e){function c(a){if(!a.attributes)return null;for(var b=0;b<a.attributes.length;b++){var d=a.attributes[b];if("type"===d.name)return d.value}return null}function b(b,d){if(d.childNodes)for(var c=0,e=d.childNodes.length;c<e;c++){var h=d.childNodes[c],f=a(h);void 0!==f&&(b[h.nodeName]=f)}return b}
function a(a){var e=c(a);if(a.nodeName&&e)switch(e){case "string":return a.childNodes[0]?g.decodeXML(a.childNodes[0].nodeValue):"";case "number":return Number(a.childNodes[0].nodeValue);case "boolean":return"true"===a.childNodes[0].nodeValue;case "object":return b({},a);case "array":return d([],a)}}function d(b,d){if(d.childNodes)for(var c=0,e=d.childNodes.length;c<e;c++)b[c]=a(d.childNodes[c]);return b}var h,f;e=(new DOMParser).parseFromString(e,"text/xml").childNodes;for(var k=0;k<e.length;k++)if(1===
e[k].nodeType){f=e[k];break}f&&(e=c(f),"object"===e?b(h={},f):"array"===e&&d(h=[],f));return h}});k=f();k.runTest=function(){console.log("------------------------------Testing JsonXmlTypedConverter.js------------------------------");var e={type:"uniqueValue",field1:"SubtypeCD",fieldDelimiter:", ",defaultSymbol:{type:"esriSLS",style:"esriSLSSolid",color:[130,130,130,255],width:1},defaultLabel:"\x3cOther values\x3e",uniqueValueInfos:[{value:"1",label:"Duct Bank",description:"Duct Bank description",
symbol:{type:"esriSLS",style:"esriSLSDash",color:[76,0,163,255],width:1}},{value:"2",label:"Trench",description:"Trench description",symbol:{type:"esriSLS",style:"esriSLSDot",color:[115,76,0,255],width:1}}],rotationType:"geographic",rotationExpression:"[Rotation] * 2"},c=new f,e=JSON.parse(JSON.stringify(e));console.log(JSON.stringify(e,void 0,4));var b=c.parseJson(e);console.log(b);var a=c.parseXml(b);console.log(JSON.stringify(a,void 0,4));c=c.parseJson(a);console.log(c);console.log("Compare JSON1 and JSON2: "+
(JSON.stringify(e)===JSON.stringify(a)));console.log("Compare XML1 and XML2: "+(b===c));console.log("------------------------------Testing JsonXmlTypedConverter.js------------------------------")};return k})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/metadata/map/MapTagsUtil":function(){define([],function(){return{parseColorTag:function(k){if(!k)return null;k=k.attributes;return[Number(k.Red)||0,Number(k.Green)||0,Number(k.Blue)||0,k.Transparency?255*(1-Number(k.Transparency)/
100):255]}}})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/metadata/TradeAreaCalculatorsParser":function(){define(["esri/dijit/geoenrichment/utils/JsonXmlConverter","./VariableScriptCollector","../../../supportClasses/templateJsonUtils/fieldInfo/FieldLibrary"],function(k,g,f){return{parseTradeAreaCalculators:function(e,c,b){e=k.queryJson(e,"SpecialTradeAreaFields");c.metadata.specialTradeAreaCalculatorName=e[0]&&e[0].attributes&&e[0].attributes.Name;e.forEach(function(a){b.variableProvider.isPlayerOnly&&
g.getObjects(a,!0).variableObjects.forEach(function(a){a.alias=a.alias||f.getFieldLabel(a.id);b.variableProvider.addVariable(a)})})}}})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/ImageCollector":function(){define(["esri/dijit/geoenrichment/when","esri/dijit/geoenrichment/promise/all","esri/dijit/geoenrichment/utils/DataUtil","esri/dijit/geoenrichment/utils/ImageUtil","esri/dijit/geoenrichment/utils/ImageInfoUtil"],function(k,g,f,e,c){return{collectImageResources:function(b,
a,d){function h(b){return k(c.getImageInfo(a[b],b),null,function(){delete a[b]})}b&&b.files&&b.files.forEach(function(b){var c=f.getContentType(b.name);c&&"image/"===c.substr(0,6)&&(a[d(b.name)]=e.base64DataToDataURL(b.data,c))});b=[];for(var l in a)b.push(h(l));return g(b)}}})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/parsers/Parsers":function(){define(["esri/dijit/geoenrichment/Deferred","require"],function(k,g){var f={},e={},c;f.initialize=function(){if(c)return c.promise;
c=new k;g("./DocumentParser ./ChartConverterPtoE ./InfographicConverterPtoE ./SectionParser ./FieldParser ./FilterParser ./SortingParser ../../../supportClasses/templateJsonUtils/fieldInfo/utils".split(" "),function(b,a,d,h,f,g,k,p){e.document=b;e.chart=a;e.infographic=d;e.section=h;e.field=f;e.filter=g;e.sorting=k;p.init().then(c.resolve)});return c.promise};f.getParser=function(b){return e[b]};return f})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/variables/PlayerVariableProvider":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/string","dojo/i18n!esri/nls/jsapi"],function(k,g,f,e){e=e.geoenrichment.dijit.ReportPlayer.Variables;var c=k(null,{variable:null,constructor:function(b){this.variable=b},calculate:function(b){return 0},getCalcType:function(){return"n/"},getAliasWithType:function(){return this.variable.alias},getDescriptionWithType:function(){return this.variable.alias},getDecimals:function(){return this.variable.precision||0}});return k(null,{isPlayerOnly:!0,_fieldNameToVariableCache:null,
_templateNameToVariableCache:null,constructor:function(b){this._templateNameToVariableCache=b&&b.templateNameToVariableCache||{};this._fieldNameToVariableCache={};for(var a in this._templateNameToVariableCache)b=this._templateNameToVariableCache[a],this._fieldNameToVariableCache[b.fieldName]=b},get:function(b){return this._templateNameToVariableCache[b]||this._fieldNameToVariableCache[b]},toCalculator:function(b){return(b=this.get(b))&&new c(b)},addVariable:function(b){this._fieldNameToVariableCache[b.fieldName]=
b;this._templateNameToVariableCache[b.templateName]=b},addScriptVariable:function(b){this._fieldNameToVariableCache[b.fieldName]=b;this._templateNameToVariableCache[b.templateName]=b},getVariables:function(){return Object.keys(this._fieldNameToVariableCache).map(function(b){return this._fieldNameToVariableCache[b]},this)},getVariablesDataVintageDescription:function(b){var a={},d={},c={};this.getVariables().forEach(function(a){a.fullName&&(c[a.fullName.toLowerCase()]=a)});for(var g in b.usedVariablesCache)if(b=
c[g.toLowerCase()])b.vintage&&(d[b.vintage]=1),b.source&&(a[b.source]=1);if(!Object.keys(a).length&&!Object.keys(d).length)return"";g=[];Object.keys(a).length&&g.push(f.substitute(e.sourcePattern,{source:Object.keys(a).join(", ")}));Object.keys(d).length&&g.push(f.substitute(e.vintagePattern,{vintage:Object.keys(d).join(", ")}));return g.join(" ")},toJson:function(){return{templateNameToVariableCache:g.clone(this._templateNameToVariableCache)}}})})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/DefaultStyles":function(){define(["dojo/_base/declare",
"dojo/_base/lang","esri/dijit/geoenrichment/utils/ColorUtil"],function(k,g,f){return k(null,{_styles:null,_stylesArray:null,constructor:function(e){this._styles={Default:{color:"#4C4C4C",backgroundColor:"#FFFFFF"}};g.mixin(this._styles,e);this._stylesArray=[];for(var c in this._styles)this._stylesArray.push(c)},getStyle:function(e){return this._styles[e]},getStylesArray:function(){return this._stylesArray},tryApplyStyle:function(e,c,b){if(c=this.getStyle(c))for(var a in c)b&&void 0!==e[a]||(e[a]=
c[a])},findDefaultStyle:function(e){var c,b=this;this.getStylesArray().some(function(a){var d=b.getStyle(a),h;for(h in d){if(!e[h])return!1;if("color"===h||"backgroundColor"===h){if(!f.colorsEqual(e[h],d[h]))return!1}else if(e[h]!==d[h])return!1}c=a;return!0});return c}})})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/images/ImageDataHolder":function(){define([],function(){var k={},g={},f={};k.putImageData=function(e,c){if("string"===typeof e&&c){var b=e.toLowerCase();f[b]=e;g[b]=c}else console.error("Invalid image filename or data!")};
k.getImageData=function(e){return"string"!==typeof e?null:g[e.toLowerCase()]};k.findFileNameByData=function(e){for(var c in g)if(e===g[c])return f[c];return null};return k})},"esri/dijit/geoenrichment/ReportPlayer/core/themes/conversion/CssParser":function(){define(["../PageBorderStyles","../ThemeUpdateUtil","../../../_devConfig"],function(k,g,f){var e={"font-size":"fontSize","font-family":"fontFamily","font-style":"fontStyle","font-weight":"fontWeight","text-decoration":"textDecoration",color:"color",
"background-color":"backgroundColor",opacity:"opacity",url:"data","background-position":"position","background-repeat":"repeat","background-size":"scale"},c={colors:1,colors3series:1};return{fromCssText:function(b){function a(a){var b=n;a.split("@").forEach(function(a){b=b[a]=b[a]||{}});return b}function d(a,b){if(b.borderStyle||b.border)if(a.border={},a.border.style=k.toSupportedValue(b.borderStyle),"string"===typeof b.border){var d=b.border.split(" ");3===d.length&&(a.border.thickness=Number(d[0].replace("px",
"")),a.border.lineStyle=d[1],a.border.color=d[2])}for(var c in b)if("border"!==c&&"borderStyle"!==c){var d=b[c],f;f=c;var g=d,l=a;"font-size"===f?(l[e[f]]=h(g.replace("px","")),f=!0):"background-repeat"===f?(l[e[f]]=h("repeat"===g),f=!0):"background-size"===f?(l[e[f]]=h("contain"===g||"cover"===g),l.size="auto"===g?null:g,f=!0):f=!1;f||(a[e[c]||c]=h(d))}}function h(a){if(void 0===a||null===a||"null"===a||"undefined"===a)return"";if("true"===a)return!0;if("false"===a)return!1;if(!0===a)return!0;if(!1===
a)return!1;var b=Number(a);return isNaN(b)?a:b}function l(a){if(f.emulateErrors.themeParseError)throw Error("Error test: something crashed during the parsing of the theme!");if("object"===typeof a)for(var b in a){var d=a[b];if(c[b]){var e=[],h=Object.keys(d);if(h.length){var g=h.every(function(a){return-1!==a.indexOf("_")});h.forEach(function(a,b){e[g?a.split("_")[1]:b]=d[a]})}a[b]=e}else l(d)}}var n={};b=b.replace(/\n/g,"");b=b.replace(/(\w|\d)_(\w|\d)/g,"$1@$2");b=b.replace("data:","dataM");b=b.replace(";base64",
"Mbase64");var m=function(){var a={};(b.match(/\..*?\}/g)||[]).forEach(function(b){var d=b.substring(1,b.indexOf("{")).trim(),c={};b.substring(b.indexOf("{")+1,b.indexOf("}")).trim().split(";").forEach(function(a){if(a=a.trim()){a=a.split(":");var b=a[1].trim(),b=b.replace("dataM","data:"),b=b.replace("Mbase64",";base64");c[a[0].trim()]=b}});a[d]=c});return a}(),p;for(p in m)d(a(p),m[p]);delete n.themeMetadata;l(n);g.populateMissingStyles(n);return n}}})},"esri/dijit/geoenrichment/ReportPlayer/core/themes/ThemeUpdateUtil":function(){define(["dojo/_base/lang",
"esri/dijit/geoenrichment/utils/ObjectUtil","./ThemeLibrary","./ThemeUtil"],function(k,g,f,e){return{populateMissingStyles:function(c){if(c){c.table&&c.table.overrideStyles||(c.table={overrideStyles:k.mixin({},c.table)});c.icon||(c.icon=k.clone(c.infographic.staticInfographic.icon),c.highlightedIcon=k.clone(c.infographic.staticInfographic.highlightedIcon));c.chart.icon||(c.chart.icon=k.clone(c.infographic.staticInfographic.icon));c.chart.xAxis.lineColor||(c.chart.xAxis.lineColor=c.chart.xAxis.axisStyle.color,
c.chart.yAxis.lineColor=c.chart.yAxis.axisStyle.color);var b=e.getThemeColors(c),a=c.chart.colors.slice(),d=c.chart.colors3series&&c.chart.colors3series.slice(),h=f.getDefaultTheme({defaultFontFamilty:c.document.fontFamily,defaultFontSize:c.document.fontSize});e.applyThemeColorsToTheme({theme:h,colors:b,chartColors:a,colors3series:d});g.populateObject(c,h,!1)}}}})},"esri/dijit/geoenrichment/utils/async/AsyncQueue":function(){define("dojo/_base/declare dojo/_base/lang esri/dijit/geoenrichment/Deferred esri/dijit/geoenrichment/when dijit/Destroyable ../DelayUtil".split(" "),
function(k,g,f,e,c,b){var a=k(c,{_lastPromise:null,_isFinished:!1,_isDestroyed:!1,_lastDfd:null,_lastResult:null,constructor:function(a){g.mixin(this,a)},add:function(a,c){c=c||{};var d=this;if(!this._isDestroyed){this._lastDfd||(this.onStarted(),this._lastDfd=new f);this._isFinished=!1;var h=function(){var h=function(){if(!d._isDestroyed)try{return"function"===typeof a?a():a}catch(q){return(new f).reject(q)}},g=0<=c.delayBefore?function(){return b.delay(h,c.delayBefore)}:h;return(0<=c.delayAfter?
function(){return e(g(),function(a){return b.delay(function(){return a},c.delayAfter)})}:g)()};!this._lastPromise||this._lastPromise.isFulfilled()?this._lastPromise=e(h()):this._lastPromise=e(this._lastPromise).then(h);var g=this._lastPromise;e(g,function(a){g!==d._lastPromise||d._isDestroyed||d._isFinished||g&&!g.isFulfilled()||(d._isFinished=!0,d._lastDfd.resolve(a),d._lastResult=a,d._lastDfd=null,d.onFinished(a))},this._lastDfd.reject);return this.getPromise()}},getPromise:function(){return this._isDestroyed?
null:this._lastDfd&&this._lastDfd.promise||this._lastResult},isFinished:function(){return this._isFinished},isDestroyed:function(){return this._isDestroyed},destroy:function(){this._isDestroyed=!0},onStarted:function(){},onFinished:function(a){}});a.executeFunctions=function(b,c,f){f=f||{};var d=new a,h=[];b.forEach(function(a,b){d.add(function(){return e(a(),function(a){h.push(a);return a})},{delayBefore:0===b?void 0:c})});f.onQueueReady&&f.onQueueReady(d);return e(d.getPromise(),function(a){return f.collectResults?
h:a})};a.processArrayInBatches=function(a,b){function d(){if(a.length){for(var e=[],h=0;h<b.batchSize&&a.length;h++)e.push(a.shift());b.processBatch?b.callback(e):e.forEach(b.callback);setTimeout(d,b.timeout||0)}else c.resolve()}a=a.slice();var c=new f;d();return c.promise};return a})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/attachments/AttachmentsStoreSerializer":function(){define("esri/dijit/geoenrichment/when esri/dijit/geoenrichment/promise/all ./AttributesUtil ./NotesUtil ./CustomAttachmentsStore esri/dijit/geoenrichment/utils/ImageInfoUtil".split(" "),
function(k,g,f,e,c,b){return{getAttachmentsStoreJson:function(a,d){function c(a){if(d.noCache)return a;m=m||{};for(var b in m)if(m[b]===a)return b;b="image_"+n++;m[b]=a;return b}function l(){return g([d.saveImages&&a.getImages(),a.getAttributes(),a.getNotes()]).then(function(a){var d=a[0]||[],h=a[1]||[],l=a[2]||[];return g(d.map(function(a){return g([k(a.getThumbnail(),function(a){return b.ensureDataUrlForRemoveImage(a)}),k(a.getUrl(),function(a){return b.ensureDataUrlForRemoveImage(a)})]).then(function(b){a.__thumbnail=
c(b[0]);a.__url=c(b[1])})})).then(function(){return{images:d.map(function(a){var b=a.__thumbnail,d=a.__url;delete a.__thumbnail;delete a.__url;return{description:a.description,thumbnail:b,url:d,filename:a.filename,imageViewType:a.imageViewType}}),attributes:h.map(function(a){return f.attributeToJson(a)}),notes:l.map(function(a){return e.noteToJson(a)})}})})}if(!a)return null;var n=0,m,p=[],t=[];if(a.supportsMultipleAreas)for(var q=0;q<d.numAreas;q++)a.setCurrentAnalysisAreaIndex(q),t.push(k(l(),function(a){p.push(a)}));
else t.push(k(l(),function(a){p.push(a)}));return g(t).then(function(){return{supportsMultipleAreas:a.supportsMultipleAreas,areaAttachments:p,imageDataCache:m}})},getAttachmentsStoreFromJson:function(a){return a&&new c(a)}}})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/attachments/NotesUtil":function(){define([],function(){return{noteToJson:function(k){return{text:k.text}},noteFromJson:function(k){return{text:k.text}}}})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/attachments/CustomAttachmentsStore":function(){define(["dojo/_base/declare",
"esri/dijit/geoenrichment/when"],function(k,g){var f={fromJson:function(e){function c(b){return e.imageDataCache&&e.imageDataCache[b]||b}e.areaAttachments=e.areaAttachments||e.areaAttachements;delete e.areaAttachements;return{getImagesForAreaAt:function(b){b=e.supportsMultipleAreas?b:0;return(e.areaAttachments[b]&&(e.areaAttachments[b].images||e.areaAttachments[b].attachments)||[]).map(function(a){return{description:a.description,filename:a.filename,imageViewType:a.imageViewType,getThumbnail:function(){return c(a.thumbnail)},
getUrl:function(){return c(a.url)}}})},getAttributesForAreaAt:function(b){b=e.supportsMultipleAreas?b:0;return e.areaAttachments[b]&&e.areaAttachments[b].attributes||[]},getNotesForAreaAt:function(b){b=e.supportsMultipleAreas?b:0;return e.areaAttachments[b]&&e.areaAttachments[b].notes||[]}}}};return k(null,{supportsMultipleAreas:!1,_currentAreaIndex:0,_provider:null,constructor:function(e){(this._provider=e.getAttachmentsForAreaAt||e.getImagesForAreaAt||e.getAttributesForAreaAt||e.getNotesForAreaAt?
e:f.fromJson(e))&&this._provider.getAttachmentsForAreaAt&&(e.getImagesForAreaAt=function(c){return e.getAttachmentsForAreaAt(c)});this.supportsMultipleAreas=e.supportsMultipleAreas},initialize:function(){},getImages:function(){function e(b){b.forEach(function(a){!a.getUrl&&a.getAttachmentUrl&&(a.getUrl=function(){return a.getAttachmentUrl()})})}var c=this._provider.getImagesForAreaAt?this._provider.getImagesForAreaAt(this._currentAreaIndex):[];return c?Array.isArray(c)?(e(c),c):g(c,function(b){e(b);
return b}):c},getAttributes:function(){return this._provider.getAttributesForAreaAt?this._provider.getAttributesForAreaAt(this._currentAreaIndex):[]},getNotes:function(){return this._provider.getNotesForAreaAt?this._provider.getNotesForAreaAt(this._currentAreaIndex):[]},setCurrentAnalysisAreaIndex:function(e){this._currentAreaIndex=e}})})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/templateJsonUtils/TemplateJsonSerializer":function(){define(["./query/TemplateJsonQueryUtil","../images/ImageDataHolder",
"../conditionalStyling/ConditionalStyleUtil"],function(k,g,f){return{serialize:function(e){this._attachImagesToTemplateJson(e);return e},_attachImagesToTemplateJson:function(e){function c(a){var d=g.getImageData(a);d&&(b[a]=d)}var b={};k.processTemplateFieldInfos(e,function(a){a.isImage?(c(a.imageJson.fileName),a.triggerJson&&f.collectImageFileNames(a.triggerJson).forEach(c)):a.isInfographic&&a.infographicJson.variableTables&&a.infographicJson.variableTables.forEach(function(a){a.image&&c(a.image.imageJson.fileName)})});
k.processSectionElements(e,function(a){"img"===a.id&&c(a.fileName)});e.imageData=b},deserialize:function(e){this._takeImagesFromTemplateJson(e);return e},_takeImagesFromTemplateJson:function(e){for(var c in e.imageData)g.putImageData(c,e.imageData[c]);delete e.imageData}}})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/conditionalStyling/ConditionalStyleUtil":function(){define(["esri/dijit/geoenrichment/utils/PageUnitsConverter"],function(k){var g={},f={FontSize:"fontSize",FontColor:"fontColor",
FontFamily:"fontFamily",ForeColor:"color",BackColor:"backgroundColor"},e={},c;for(c in f)e[f[c]]=c;g.getConditionalStyle=function(a,b){return(a=g.getMatchedCase(a,b))?g.styleFromSetters(a.setters):null};g.getMatchedCase=function(a,b){if(null!==a&&""!==a&&(a=Number(a),b&&!isNaN(a))){var d;b.cases.some(function(b){if(g._checkValueMatchesCase(a,b))return d=b,!0});return d}};g._checkValueMatchesCase=function(a,b){function d(a,b,d){switch(b){case "\x3d":return a===d;case "\x3c":return a<d;case "\x3e":return a>
d;case "\x3c\x3d":return a<=d;case "\x3e\x3d":return a>=d}return!1}return b.compareInfos.length&&b.compareInfos.every(function(b){return d(a,b.operator,Number(b.value))})};g.styleFromSetters=function(a){if(!a)return null;var b={};a.forEach(function(a){f[a.property]&&(b[f[a.property]]=a.value);"IsBold"===a.property&&(b.fontWeight="True"===a.value?"bold":"normal");"IsItalic"===a.property&&(b.fontStyle="True"===a.value?"italic":"normal");"IsUnderlined"===a.property&&(b.textDecoration="True"===a.value?
"underline":"none")});k.ptToPxObj(b);return b};g.settersFromStyle=function(a){var b=[];a=k.pxToPtObj(a,!0);for(var c in a){var f=e[c],g=a[c];!f||"string"!==typeof g&&isNaN(g)||b.push({property:f,value:g});"fontWeight"===c?b.push({property:"IsBold",value:"bold"===g?"True":"False"}):"fontStyle"===c?b.push({property:"IsItalic",value:"italic"===g?"True":"False"}):"textDecoration"===c&&b.push({property:"IsUnderlined",value:"underline"===g?"True":"False"})}return b};g.processImageJsonForTrigger=function(a,
b,c){var d=g.getMatchedCase(b,c);d||c.cases.some(function(a){if("default"===a.compareInfos[0].value)return d=a,!0});d&&(a.fileName=d.setters[0].value)};g.getStatistics=function(a){var b=Infinity,c=-Infinity,e,f,g;a&&a.cases.forEach(function(a){a.compareInfos&&a.compareInfos.forEach(function(a){var d=Number(a.value);isNaN(d)||(d<b&&(b=d,f="\x3c"===a.operator||"\x3c\x3d"===a.operator),d>c&&(c=d,g="\x3e"===a.operator||"\x3e\x3d"===a.operator),e=!0)})});return e&&-1E12<b&&1E12>b&&-1E12<c&&1E12>c?{min:b,
max:c,canFallBelowMin:f,canFallAboveMax:g}:null};var b=/\.png$/i;g.collectImageFileNames=function(a){var d=[];a&&a.cases&&a.cases.forEach(function(a){a.setters&&a.setters.forEach(function(a){"Source"===a.property&&b.test(a.value)&&d.push(a.value)})});return d};return g})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/metadata/MetadataFromDataBuilder":function(){define(["esri/dijit/geoenrichment/utils/JsonXmlConverter"],function(k){return{recoverMetadataFromAreaData:function(g,
f){g=g[0];var e={name:"DataCollection",tags:[{name:"Calculators",tags:[]}]},c;for(c in g){var b=g[c].data,a=g[c].comparisonLevels,d=f.map[c],h=f.locator[c],h={name:d?"Maps":h?"Locator":"DataCollections",attributes:{Name:c},tags:[]};e.tags[0].tags.push(h);var l=[],n;for(n in b)l.push({name:d?"Map":"Field",attributes:{Name:n,Alias:n,MapTo:"DC."+n,Type:"number"===typeof b[n]?"Double":"String"}});h.tags.push({name:"Fields",tags:l});if(a&&a.length){var m=[],p={};a.forEach(function(a){a.StdGeographyLevel&&
!p[a.StdGeographyLevel]&&(p[a.StdGeographyLevel]=1,m.push(a.StdGeographyLevel))});m.length&&h.tags.push({name:"ComparisonLevels",tags:m.map(function(a){return{name:"ComparisonLevel",attributes:{Name:a}}})})}}return k.parseJson(e)}}})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/TemplateJsonLoader":function(){define("dojo/_base/lang esri/dijit/geoenrichment/Deferred esri/dijit/geoenrichment/when ./CustomReportsManager ./GenericTemplateGenerator ./dataCollections/DataCollectionsLoader ../../core/conversion/PortalToEditorConverter ../../core/conversion/portalToEditorUtils/variables/PlayerVariableProvider ../../core/supportClasses/templateJsonUtils/fieldInfo/FieldInfoNameUtil ../../core/conversion/portalToEditorUtils/parsers/_FieldInfoBuilder".split(" "),
function(k,g,f,e,c,b,a,d,h,l){var n={_templatesCache:{},getCachedTemplateJsonPromise:function(a,b){return(a=this._templatesCache[a+";"+b.reportID])&&a.modified===b.modified?a.promise.then(function(a){return{templateJson:k.clone(a.templateJson),templateVariableProvider:a.templateVariableProvider}}):null},putCachedTemplateJsonPromise:function(a,b,d){this._templatesCache[b+";"+d.reportID]={modified:d.modified,promise:a}}};return{getTemplateJsonByID:function(b,c){var h=this,l=new g;f(e.getCustomReportByID(b),
function(e){if(e){var g=c&&n.getCachedTemplateJsonPromise(b.countryID,e);g?g.then(l.resolve,l.reject):(g=h._loadCustomReportData(e).then(function(){var b=new d;return f(a.provideEditorJson(e,{variableProvider:b}),function(){var a=e.templateJson;e.portalJson=null;e.templateJson=null;return{templateJson:a,templateVariableProvider:b}})}),c?(n.putCachedTemplateJsonPromise(g,b.countryID,e),n.getCachedTemplateJsonPromise(b.countryID,e).then(l.resolve,l.reject)):g.then(l.resolve,l.reject))}else l.reject("Can't find a report")},
l.reject);return l.promise},_loadCustomReportData:function(a){a.portalJson=null;return a.templateData.getFiles().then(function(b){a.portalJson={files:b}})},createTemplateJsonFromVariables:function(a){return b.loadVariables({countryID:a.countryID,outFields:["description","precision","type","vintage"],forceLowerCase:!0}).then(function(b){var e=new d,f=b.fullNameToVariableCache;b=a.variables.fullNames.map(function(b){var d=h.createFieldNameFromSource(b),c=a.variables.customDataMapping[b],c=c?c.variable:
f[b];b={id:c.id.toLowerCase(),fullName:b,alias:c.description,fieldName:d,precision:c.precision,calculatorName:h.DATA_COLLECTIONS_CALCULATOR_NAME,templateName:h.DATA_COLLECTIONS_CALCULATOR_NAME+"."+d,type:c.type,vintage:c.vintage};e.addVariable(b);return l.getCalculatorOrScriptFieldInfo(b.templateName,{variableProvider:e})});return{templateJson:c.generateTemplatesFromFieldInfos(b,{comparisonLevels:a.comparisonLevels}),templateVariableProvider:e}})}}})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/GenericTemplateGenerator":function(){define("../../core/supportClasses/templateJsonUtils/BlankTemplateJsonUtil ../../core/supportClasses/templateJsonUtils/fieldInfo/FieldInfoBuilder ../../core/supportClasses/tableJson/TableJsonUtil ../../core/sections/sectionUtils/SectionJsonUtil ../../core/infographics/InfographicTypes ../../core/infographics/utils/InfographicJsonUtil".split(" "),
function(k,g,f,e,c,b){var a={},d={calcNumRowsColumns:function(a){var b;b=2>=a?1:6>=a?2:12>=a?3:Math.ceil(a/4);var d;d=1===a?1:4>=a?2:9>=a?3:4;return{numRows:b,numColumns:d,numVarsInLastRow:d-(b*d-a),lastRowCellIndexes:null,lastRowCellWidths:null}}},h={mergeLastRow:function(a,b,d){2===b.numColumns?1===b.numVarsInLastRow&&(f.modifyTableJson(a,b.numRows-1,0,{columnSpan:2}),b.lastRowCellWidths=[2*d]):3===b.numColumns?1===b.numVarsInLastRow?(f.modifyTableJson(a,b.numRows-1,0,{columnSpan:3}),b.lastRowCellWidths=
[3*d]):2===b.numVarsInLastRow&&(f.modifyTableJson(a,b.numRows-1,0,{cellStyle:{width:1.5*d}}),f.modifyTableJson(a,b.numRows-1,1,{columnSpan:2,cellStyle:{width:.5*d}}),b.lastRowCellWidths=[1.5*d,1.5*d]):4===b.numColumns&&(1===b.numVarsInLastRow?(f.modifyTableJson(a,b.numRows-1,0,{columnSpan:4}),b.lastRowCellWidths=[4*d]):2===b.numVarsInLastRow?(f.modifyTableJson(a,b.numRows-1,0,{columnSpan:2}),f.modifyTableJson(a,b.numRows-1,2,{columnSpan:2}),b.lastRowCellIndexes=[0,2],b.lastRowCellWidths=[2*d,2*d]):
3===b.numVarsInLastRow&&(f.modifyTableJson(a,b.numRows-1,0,{cellStyle:{width:4*d/3}}),f.modifyTableJson(a,b.numRows-1,1,{columnSpan:2,cellStyle:{width:2*d/3}}),f.modifyTableJson(a,b.numRows-1,2,{cellStyle:{width:2*d/3}}),f.modifyTableJson(a,b.numRows-1,3,{cellStyle:{width:4*d/3}}),b.lastRowCellIndexes=[0,1,3],b.lastRowCellWidths=[4*d/3,4*d/3,4*d/3]))}},l={insertNextPanel:function(a,b,d){void 0===b.currentRowIndex&&(b.currentRowIndex=0,b.currentColumnIndex=0);var c=b.currentRowIndex===b.numRows-1;
a.data.data[b.currentRowIndex].fieldInfos["field"+(c&&b.lastRowCellIndexes?b.lastRowCellIndexes[b.currentColumnIndex]:b.currentColumnIndex)]=d(c&&b.lastRowCellWidths&&b.lastRowCellWidths[b.currentColumnIndex]);b.currentColumnIndex++;b.currentColumnIndex>b.numColumns-1&&(b.currentColumnIndex=0,b.currentRowIndex++)}};a.generateTemplatesFromFieldInfos=function(b){var c=d.calcNumRowsColumns(b.length),n=k.createBlankTemplate({elementWidth:500,elementHeight:250,layout:{numRows:c.numRows,numColumns:c.numColumns}}),
t=n.sectionsTables[0];h.mergeLastRow(t,c,500);b.forEach(function(b){l.insertNextPanel(t,c,function(d){var c=a._createInfographicJson(b,d||500,250);d=f.createSingleCellTable({width:d||500,height:250,fieldInfo:g.createFieldInfoFromInfographic(c)});return g.createFieldInfoFromSection(e.wrapInDetailsSectionJson(d))})});return n};a._createInfographicJson=function(a,d,e){return{type:c.ONE_VAR,title:a.alias,style:{width:d,height:e},levels:b.getDefaultLevels(),fieldInfos:[a],calcData:{calculatorName:a.templateName.substr(0,
a.templateName.indexOf(".")),variables:[a.fullName]}}};return a})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/templateJsonUtils/BlankTemplateJsonUtil":function(){define(["esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/DocumentOptions","./TemplateJsonModificationUtil"],function(k,g){return{createBlankTemplate:function(f){var e={},c=f.documentOptions||k.getDefaultDocumentOptionsGraphicReport();c.pagesize=k.combineCustomSizeString(c.left+c.right+f.layout.numColumns*f.elementWidth,
c.top+c.bottom+f.layout.numRows*f.elementHeight,"px");e.documentOptions=c;for(var c={style:{width:f.layout.numColumns*f.elementWidth},data:{columns:[],data:[]}},b=0;b<f.layout.numColumns;b++)c.data.columns.push({field:"field"+b,style:{width:f.elementWidth}});for(b=0;b<f.layout.numRows;b++)c.data.data.push({style:{height:f.elementHeight},fieldInfos:{}});e.sectionsTables=[c];g.adjustDocumentOptions(e);return e}}})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/templateJsonUtils/TemplateJsonModificationUtil":function(){define(["esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/DocumentOptions",
"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/GridLayoutCalculator"],function(k,g){var f={},e={getJsonStat:function(b){var a=0,d=0,e=[];b.sectionsTables.forEach(function(b){var h=0;b.data.columns.forEach(function(a){h+=c.getFieldWidth(b,b.data.data[0],a)});a=Math.max(a,h);var f=0;b.data.data.forEach(function(a){f+=c.getDataHeight(b,a,b.data.columns[0])});d=Math.max(d,f);e.push({totalW:h,totalH:f})});return{tableInfos:e,totalWMax:a,totalHMax:d}}},c={getFieldWidth:function(b,a,d){return g.getFieldWidth({looseResize:!0},
a,d)||d.style.width},getDataHeight:function(b,a,d){return g.getDataHeight({looseResize:!0},a,d.field)},getAverageFieldWidth:function(b,a){var d=0;b.data.data.forEach(function(e){d+=c.getFieldWidth(b,e,a)});return d/b.data.data.length},getAverageDataHeight:function(b,a){var d=0;b.data.columns.forEach(function(e){d+=c.getDataHeight(b,a,e)});return d/b.data.columns.length}};f.adjustDocumentOptions=function(b){if(b.documentOptions){var a=e.getJsonStat(b);a.totalWMax&&a.totalHMax&&!isNaN(a.totalWMax)&&
!isNaN(a.totalHMax)&&(b=b.documentOptions,b.pagesize=k.combineCustomSizeString(b.left+b.right+a.totalWMax,b.top+b.bottom+a.totalHMax,"px"),(a=k.getClosestStandrdSizes(b)[0])&&.001>a.score&&a.orientation===b.orientation&&(b.pagesize=a.pagesize))}};f.JsonStatCollector=e;f.DataUtil=c;return f})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/GridLayoutCalculator":function(){define("dojo/_base/lang ./gridLayoutCalcUtils/GridLayoutCalculatorQueryUtil ./gridLayoutCalcUtils/GridElementBoxCalculator ./gridLayoutCalcUtils/GridCellNodePlacer ./gridLayoutCalcUtils/rows/GridLayoutRowsCalculator ./gridLayoutCalcUtils/columns/GridLayoutColumnsCalculator ./gridLayoutCalcUtils/GridLayoutSnapper ../../supportClasses/tableJson/TableJsonUtil".split(" "),
function(k,g,f,e,c,b,a,d){var h={};f.calculator=h;h.markAsDirty=g.markAsDirty;h.fieldToColumn=g.fieldToColumn;h.dataIdToData=g.dataIdToData;h.getSpannedColumns=g.getSpannedColumns;h.recalcRows=c.recalcRows;h.recalcColumns=b.recalcColumns;h.recalcColumnsTableJson=b.recalcColumnsTableJson;h.recalcRowsToFitHeight=c.recalcRowsToFitHeight;h.adjustColumnWidth=b.adjustColumnWidth;h.getAffectedCellsForColumnAdjust=b.getAffectedCells;h.adjustRowHeight=c.adjustRowHeight;h.getAffectedCellsForRowAdjust=c.getAffectedCells;
h.recalcGridWidth=b.recalcGridWidth;h.calcFieldWidth=b.calcFieldWidth;h.getFieldWidth=b.getFieldWidth;h.setFieldWidth=b.setFieldWidth;h.calcDataHeight=c.calcDataHeight;h.getDataHeight=c.getDataHeight;h.setDataHeight=c.setDataHeight;h.autoSnapLayout=a.autoSnapLayout;h.positionCells=e.positionCells;h.calcFeatureCount=function(a,b,d){return(a-b)/d};h.calcRingIndexForCell=function(a){var b=a.parentGrid;if(!b)return-1;if(b.getNumDynamicRows())return void 0!==a.gridData.currentFeatureIndex?a.gridData.currentFeatureIndex:
a.gridData.index-b.getNumFixedRows();var d=b.getNumFixedColumns();return a.column.index<d?-1:Math.floor((a.column.index-d)/b.getNumDynamicColumns())};h.trimColumnsForNumberOfFeatures=function(a){for(var b=a.viewModel.dynamicReportInfo.fieldData.areaData.length,d=h.recalcGridWidth(a),c=0,e=0;e<a.getNumFixedColumns();e++)c+=a.columns[e].style.width;d-=c;c=h.calcFeatureCount(a.columns.length,a.getNumFixedColumns(),a.getNumDynamicColumns())-b;if(!(0>c)){for(var f=a.columns.slice(),e=f.length=a.getNumFixedColumns(),
g=[],l=0;a.columns[e];){for(var k=0;k<b;k++){var w=a.columns[e++],l=l+w.style.width;g.push(w)}e+=c}var y=d/l;g.forEach(function(a){a.style.width*=y});a.columns=f.concat(g)}};h.adjustRowsForNumberOfFeatures=function(a){var b=a.viewModel.dynamicReportInfo.fieldData.areaData.length;if(!(1>=b)){var c=a.store.data[a.getNumFixedRows()];c.currentFeatureIndex=0;for(var e=1;e<b;e++){var h=k.clone(c);h.currentFeatureIndex=e;a.store.data.push(h)}d.applyDefaultStyling({data:{data:a.store.data,columns:a.columns}})}};
return h})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/GridLayoutCalculatorQueryUtil":function(){define([],function(){var k={markAsDirty:function(g){g._fieldToColumnHash=null;g._dataIdToDataHash=null},_calcGridHashes:function(g){g._fieldToColumnHash={};g.columns.forEach(function(f){g._fieldToColumnHash[f.field]=f});g._dataIdToDataHash={};g.store.data.forEach(function(f){g._dataIdToDataHash[f.id]=f})},fieldToColumn:function(g,f){g._fieldToColumnHash||k._calcGridHashes(g);
return g._fieldToColumnHash&&g._fieldToColumnHash[f]},dataIdToData:function(g,f){g._dataIdToDataHash||k._calcGridHashes(g);return g._dataIdToDataHash&&g._dataIdToDataHash[f]},getSpannedColumns:function(g,f,e){var c=[];if(1>e)return[];var b;g.columns.some(function(a){if(b||a.field===f)c.push(a),b=!0;if(c.length===e)return!0});return c},getColumnSpannedFields:function(g,f,e){var c=null,b=f.fieldToRowSpanSourceDataIndex&&f.fieldToRowSpanSourceDataIndex[e];f=void 0!==b?g.store.data[b]:f;f=f.columnSpans&&
f.columnSpans[e];if(1<f)for(c=[],e=k.fieldToColumn(g,e),b=e=g.columns.indexOf(e);b<e+f;b++)c.push(g.columns[b].field);return c},getRowSpannedData:function(g,f,e){var c=null;e=f.fieldToColumnSpanSourceField&&f.fieldToColumnSpanSourceField[e]||e;e=f.rowSpans&&f.rowSpans[e];if(1<e)for(var c=[],b=f=g.store.data.indexOf(f);b<f+e;b++)c.push(g.store.data[b]);return c},getMovableData:function(g,f,e){return(f=f.movableIndexHashVertical&&f.movableIndexHashVertical[e])&&g.store.data[f]},getMovableColumn:function(g,
f,e){return(f=f.movableFieldsHashHorizontal&&f.movableFieldsHashHorizontal[e])&&k.fieldToColumn(g,f)}};return k})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/GridElementBoxCalculator":function(){define([],function(){function k(f,e,c,b,a){function d(a){return b&&void 0!==b.places?Number(a.toFixed(b.places)):a}if(!e||!c)return null;var h=g.calculator[a?"getFieldWidth":"calcFieldWidth"](f,e,c);a=g.calculator[a?"getDataHeight":"calcDataHeight"](f,e,c);for(var l=0,k=
0,m=g.calculator.fieldToColumn(f,c),p=0;p<m.index;p++)l+=g.calculator.getFieldWidth(f,e,f.columns[p].field);for(p=0;p<e.index;p++)k+=g.calculator.getDataHeight(f,f.store.data[p],c);return{x:d(l),y:d(k),w:d(h),h:d(a)}}var g={calculator:null,calcCellBox:function(f,e){return k(f.parentGrid,f.gridData,f.column.field,e,!1)},calcDataBox:function(f,e,c,b){return k(f,e,c,b,!0)}};return g})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/GridCellNodePlacer":function(){define(["./rows/GridLayoutRowsCalculator",
"./columns/GridLayoutColumnsCalculator"],function(k,g){return{positionCells:function(f){var e={},c={},b={},a={};if(f.store.data.length){f.store.data.forEach(function(d,h){f.columns.forEach(function(l,n){var m=b[n]||0,p=a[h]||0,t=k.getDataHeight(f,d,l.field);l=g.getFieldWidth(f,d,l.field);m+=t;p+=l;c[n+"_"+h]=m;e[n+"_"+h]=p;b[n]=m;a[h]=p})});f.getFieldCells().forEach(function(a){a.domNode.style.left=(e[a.column.index-1+"_"+a.gridData.index]||0)+"px";a.domNode.style.top=(c[a.column.index+"_"+(a.gridData.index-
1)]||0)+"px"});var d=0,h;for(h in b)d=Math.max(d,b[h]);var l=0;for(h in a)l=Math.max(l,a[h]);f.mainNode.style.width=l+"px";f.mainNode.style.height=d+"px";f.domNode.style.width=l+"px";f.domNode.style.height=d+"px";f._width=l;f._height=d}}}})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/rows/GridLayoutRowsCalculator":function(){define(["./RowsProcessor","./RowsScaler","./RowDataUtil","./RowModifier"],function(k,g,f,e){var c={};c.recalcRows=k.recalcRows;c.recalcRowsToFitHeight=
g.recalcRowsToFitHeight;c.adjustRowHeight=e.adjustRowHeight;c.getAffectedCells=e.getAffectedCells;c.getDataHeight=f.getDataHeight;c.setDataHeight=f.setDataHeight;c.calcDataHeight=f.calcDataHeight;return c})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/rows/RowsProcessor":function(){define(["dojox/uuid/generateRandomUuid","./RowDataUtil","../GridLayoutCalculatorQueryUtil"],function(k,g,f){function e(b,a){var d=[],c,e=0;a&&Object.keys(a).forEach(function(d){f.fieldToColumn(b,
d)?e++:delete a[d]});e&&b.columns.some(function(b){if(c||a[b.field])d.push(b),c=!0;a[b.field]&&e--;if(!e)return!0});return d}function c(b,a){var d=[],c,e=0;a&&Object.keys(a).forEach(function(d){f.dataIdToData(b,d)?e++:delete a[d]});e&&b.store.data.some(function(b){if(c||a[b.id])d.push(b),c=!0;a[b.id]&&e--;if(!e)return!0});return d}return{recalcRows:function(b){var a={};b.columns.forEach(function(b,d){a[b.field]=d});var d;b.store.data.forEach(function(c,h){c.index=h;c.style=c.style||{};c.style.fields=
c.style.fields||{};void 0===c.id&&(c.id=k());void 0===c.style.height&&(c.style.height=b.layoutDefaults.defaultRowHeight);delete c.excludedIndexHorizontal;delete c.movableFieldsHashHorizontal;delete c.fieldToColumnSpanSourceField;if(c.columnSpans){c.excludedIndexHorizontal={};c.movableFieldsHashHorizontal={};c.fieldToColumnSpanSourceField={};c._columnSpans=c._columnSpans||{};for(d in c.columnSpans){h=c._columnSpans[d];var g={};h=h?e(b,h):f.getSpannedColumns(b,d,c.columnSpans[d]);1<h.length&&(h.forEach(function(b){g[b.field]=
!0;b.field!==d&&(c.excludedIndexHorizontal[a[b.field]]=!0,c.fieldToColumnSpanSourceField[b.field]=d)}),c.movableFieldsHashHorizontal[d]=h[h.length-1].field);c.columnSpans[d]=h.length;c._columnSpans[d]=g}var l=0;Object.keys(c.columnSpans).forEach(function(a){2>c.columnSpans[a]?(delete c.columnSpans[a],delete c._columnSpans[a]):l++});l||(delete c.columnSpans,delete c._columnSpans)}delete c.excludedIndexVertical;delete c.movableIndexHashVertical;delete c.fieldToRowSpanSourceDataIndex;c.fieldInfos=c.fieldInfos||
{}});b.store.data.forEach(function(e,h){if(e.rowSpans)for(d in e._rowSpans=e._rowSpans||{},e.rowSpans){var f=e._rowSpans[d],g={};g[e.id]=!0;var l=a[d],k=e.rowSpans[d];if(f)f=c(b,f);else for(var f=[],m=h;m<h+k;m++)f.push(b.store.data[m]);1<f.length&&(f.forEach(function(a){if(a.id!==e.id){a.excludedIndexVertical=a.excludedIndexVertical||{};a.excludedIndexVertical[l]=!0;a.fieldToRowSpanSourceDataIndex=a.fieldToRowSpanSourceDataIndex||{};a.fieldToRowSpanSourceDataIndex[d]=e.index;var c=e.columnSpans&&
e.columnSpans[d];if(c)for(var h=1;h<c;h++)a.excludedIndexVertical[l+h]=!0,a.fieldToRowSpanSourceDataIndex[b.columns[l+h].field]=e.index}g[a.id]=!0}),e.movableIndexHashVertical=e.movableIndexHashVertical||{},e.movableIndexHashVertical[d]=h+f.length-1);e.rowSpans[d]=f.length;e._rowSpans[d]=g}});b.store.data.forEach(function(a,c){if(a.rowSpans){for(d in a.rowSpans)a.rowSpans[d]=Math.min(a.rowSpans[d],b.store.data.length-c);var e=0;Object.keys(a.rowSpans).forEach(function(b){2>a.rowSpans[b]?(delete a.rowSpans[b],
a._rowSpans&&delete a._rowSpans[b]):e++});e||(delete a.rowSpans,delete a._rowSpans)}});b.store.data.forEach(function(b,c){b.fieldInfos&&Object.keys(b.fieldInfos).forEach(function(c){void 0===a[c]&&delete b.fieldInfos[c]});b.style&&b.style.fields&&Object.keys(b.style.fields).forEach(function(c){void 0===a[c]&&delete b.style.fields[c]})});if(b.looseResize){b.store.data.forEach(function(a){b.columns.some(function(c){g.getDataHeightOwn(b,a,c.field)||g.setDataHeight(b,a,c.field,a.style.height)})});var h=
b.store.data[b.store.data.length-1],l=g.recalcGridHeight(b);b.columns.some(function(a){var c=0;b.store.data.forEach(function(d){c+=g.getDataHeightOwn(b,d,a.field)});var d=l-c;0!==d&&g.setDataHeight(b,h,a.field,g.getDataHeightOwn(b,h,a.field)+d)})}g.recalcGridHeight(b)}}})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/rows/RowDataUtil":function(){define(["../GridLayoutCalculatorQueryUtil"],function(k){var g={getDataHeight:function(f,e,c){return f.looseResize?g.getDataHeightOwn(f,
e,c)||e.style.height||0:e.style.height||0},getDataHeightOwn:function(f,e,c){if(f.looseResize)return e.style.fields=e.style.fields||{},(e.style.fields[c]=e.style.fields[c]||{}).height},setDataHeight:function(f,e,c,b,a){f.looseResize?(a?k.getColumnSpannedFields(f,e,c)||[c]:[c]).forEach(function(a){e.style.fields=e.style.fields||{};(e.style.fields[a]=e.style.fields[a]||{}).height=b}):e.style.height=b},calcDataHeight:function(f,e,c,b){var a=0,d=e.rowSpans&&e.rowSpans[c];if(1<d)for(var h=e.index;h<e.index+
d;h++)h!==b&&(a+=g.getDataHeight(f,f.store.data[h],c));else a=g.getDataHeight(f,e,c);return a},recalcGridHeight:function(f){f._height=0;var e=f.columns[0].field;f.store.data.forEach(function(c){f._height+=g.getDataHeight(f,c,e)});return f._height}};return g})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/rows/RowsScaler":function(){define(["./RowDataUtil"],function(k){return{recalcRowsToFitHeight:function(g,f){function e(a){a.forEach(function(a){g.columns.some(function(c,
d){if(!g.looseResize&&d)return!0;k.setDataHeight(g,a,c.field,k.getDataHeight(g,a,c.field)*b)})})}var c=k.recalcGridHeight(g),b=f/c;1!==b&&(e(g.store.data),g._getSavedOriginalData()&&e(g._getSavedOriginalData()),k.recalcGridHeight(g))}}})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/rows/RowModifier":function(){define(["../GridLayoutCalculatorQueryUtil","./RowDataUtil","./_RowModifierLoose","./_RowModifierNormal"],function(k,g,f,e){var c={},b={checkHeightLimit:function(a,
b,c,d){if(a.getMaxHeight()){var e=0;a.store.data.forEach(function(d){d!==b&&(e+=g.getDataHeight(a,d,c))});d=Math.min(a.getMaxHeight()-e,d)}return d}},a={findDataToMove:function(a,b,c,d){var e=k.getMovableData(a,b,c);e&&(a=g.calcDataHeight(a,b,c,e.index),d-=a);return{data:e||b,height:d}}},d={finalResizeGridCells:function(a){a.getFieldCells().forEach(function(b){b.setHeight(g.calcDataHeight(a,b.gridData,b.column.field))})}};c.adjustRowHeight=function(c,g,k,m){m=b.checkHeightLimit(c,g,k,m);g=a.findDataToMove(c,
g,k,m);(c.looseResize?f:e).adjustRowHeight(c,g.data,k,g.height);d.finalResizeGridCells(c)};c.getAffectedCells=function(b,c,d){return b.looseResize?f.getAffectedCells(b,a.findDataToMove(b,c,d).data,d):null};return c})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/rows/_RowModifierLoose":function(){define("dojo/_base/lang dojox/uuid/generateRandomUuid ../GridLayoutCalculatorQueryUtil ../GridElementBoxCalculator ./RowDataUtil ../../GridQueryUtil".split(" "),function(k,
g,f,e,c,b){var a={collectRowBoxes:function(a,b){for(var c=[],d=0;d<a.columns.length;){var e=a.columns[d],h=this._createEmptyBox(),e=f.getColumnSpannedFields(a,b,e.field)||[e.field];h.elements=this._getFieldsElements(a,b,e);this._measureBox(h);var g=c[c.length-1];g&&(g.nextSibling=h,h.prevSibling=g);c.push(h);d+=e.length}return c},_createEmptyBox:function(){return{id:g(),box:null,elements:[],overlappingBoxes:[],overlappingBoxesCache:{},prevSibling:null,nextSibling:null}},_getFieldsElements:function(a,
b,c){var d=[];c.forEach(function(c){c={data:b,dataIndex:b.index,field:c,box:e.calcDataBox(a,b,c,{places:2})};d.push(c)});return d},_measureBox:function(a){var b=0;a.elements.forEach(function(a){b+=a.box.w});a.box={x:a.elements[0].box.x,y:a.elements[0].box.y,h:a.elements[0].box.h,w:b}},mergeBoxesForBottomRow:function(a){var b=this._createEmptyBox();a.forEach(function(a){a.elements.forEach(function(a){b.elements.push({data:null,field:a.field,box:k.clone(a.box)})})});this._measureBox(b);b.box.h=1E6;
return[b]},getBoxAtField:function(a,b){return a.filter(function(a){return a.elements[0].field===b})[0]}},d={buildInfluenceTree:function(b,c,d){function e(a,d){(d?c:b).forEach(function(b){var c;if(c=!b.overlappingBoxesCache[a.id]){c=a.box;var d=b.box;c=!(c.x+.5>=d.x+d.w||c.x+c.w<=d.x+.5)}c&&(a.overlappingBoxes.push(b),a.overlappingBoxesCache[b.id]=!0)});a.overlappingBoxes.forEach(function(a){e(a,!d)})}d=a.getBoxAtField(b,d);e(d,!0);return d}},h={applyForce:function(a,b,d){function e(b,d){var f=b.elements[0];
f.data&&c.setDataHeight(a,f.data,f.field,c.getDataHeight(a,f.data,f.field)+(d?-1:1)*h,!0);b.overlappingBoxes.forEach(function(a){e(a,!d)})}var h=this._checkDelta(a,b,d);e(b,!1)},_checkDelta:function(a,b,c){function d(a,b){0!==h&&(b?0>h||(h=Math.min(h,a.box.h-e),a.prevSibling&&(h=Math.min(h,a.prevSibling.box.y+a.prevSibling.box.h-e-a.box.y)),a.nextSibling&&(h=Math.min(h,a.nextSibling.box.y+a.nextSibling.box.h-e-a.box.y))):0<h||(h=Math.max(h,-(a.box.h-e)),a.prevSibling&&(h=Math.max(h,-(a.box.y+a.box.h-
(a.prevSibling.box.y+e)))),a.nextSibling&&(h=Math.max(h,-(a.box.y+a.box.h-(a.nextSibling.box.y+e))))),a.overlappingBoxes.forEach(function(a){d(a,!b)}))}var e=a.layoutDefaults.rowMinHeight;c=Math.max(c,e);var h=c-b.box.h;d(b,!1);return h}},l={_getInluencedStartBox:function(b,c,e){var h=b.store.data[c.index+1];c=a.collectRowBoxes(b,c);b=h?a.collectRowBoxes(b,h):a.mergeBoxesForBottomRow(c);return d.buildInfluenceTree(c,b,e)},getAffectedCells:function(a,c,d){function e(c){if(c.elements[0].data){var d=
b.querySingleCell(a,{rowIndex:c.elements[0].data.index,columnField:c.elements[0].field,considerSpans:!0});d&&h.push(d)}c.overlappingBoxes.forEach(e)}var h=[];c=this._getInluencedStartBox(a,c,d);e(c);return h},adjustRowCell:function(a,b,c,d){b=this._getInluencedStartBox(a,b,c);h.applyForce(a,b,d)}};return{adjustRowHeight:function(a,b,c,d){l.adjustRowCell(a,b,c,d)},getAffectedCells:function(a,b,c){return l.getAffectedCells(a,b,c)}}})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/GridQueryUtil":function(){define(["dojo/dom-geometry",
"./GridDataUtil","esri/dijit/geoenrichment/utils/ArrayUtil","esri/dijit/geoenrichment/utils/DomUtil","esri/dijit/geoenrichment/utils/MouseUtil"],function(k,g,f,e,c){var b={querySingleCell:function(a,c){c.fieldCell&&(c={rowId:c.fieldCell.rowId,columnId:c.fieldCell.columnId});var d;a.getFieldCells().some(function(a){if(a.parentGrid&&a.column&&a.gridData&&!(a.columnId!==c.columnId&&a.column.index!==c.columnIndex&&a.column.field!==c.columnField||a.rowId!==c.rowId&&a.gridData.index!==c.rowIndex))return d=
a,!0});if(d)return d;if(c.considerSpans){var e=b.queryColumn(a,c),f=b.queryData(a,c);if(!e||!f)return null;var g=e.index,k=f.index;a.store.data.some(function(c){return a.columns.some(function(e){var h=e.index,f=e.index+(c.columnSpans&&c.columnSpans[e.field]||0),l=c.index;e=c.index+(c.rowSpans&&c.rowSpans[e.field]||0);if(h<=g&&f>=g&&l<=k&&e>=k)return d=b.querySingleCell(a,{columnIndex:h,rowIndex:l}),!0})})}return d},queryColumn:function(a,b){var c;a.columns.some(function(a){if(a.id===b.columnId||a.index===
b.columnIndex||a.field===b.columnField)return c=a,!0});return c},queryData:function(a,b){var c;a.store.data.some(function(a){if(a.id===b.rowId||a.index===b.rowIndex)return c=a,!0});return c},queryCells:function(a,c){if(c.fieldCell){var d=[],e=c.rowSpan||1,f=c.columnSpan||1;if(c=b.querySingleCell(a,c))for(var g=c.gridData.index;g<c.gridData.index+e;g++)for(var k=c.column.index;k<c.column.index+f;k++){var t=b.querySingleCell(a,{rowIndex:g,columnIndex:k});t&&d.push(t)}return d}return this.queryCellsInArray(a.getFieldCells(),
c)},queryCellsInArray:function(a,b){var c=[];if(!Object.keys(b).length)return c;a.forEach(function(a,d){if(void 0===b.cellIndex||d===b.cellIndex)if(void 0===b.cellIndexes||-1!==b.cellIndexes.indexOf(d))if(void 0===b.columnId||a.columnId===b.columnId)if(void 0===b.columnIds||-1!==b.columnIds.indexOf(a.columnId))if(void 0===b.columnIndex||a.column.index===b.columnIndex)if(void 0===b.columnIndexes||-1!==b.columnIndexes.indexOf(a.column.index))if(void 0===b.columnField||a.column.field===b.columnField)if(void 0===
b.columnFields||-1!==b.columnFields.indexOf(a.column.field))if(void 0===b.rowId||a.rowId===b.rowId)if(void 0===b.rowIds||-1!==b.rowIds.indexOf(a.rowId))if(void 0===b.rowIndex||a.gridData.index===b.rowIndex)void 0!==b.rowIndexes&&-1===b.rowIndexes.indexOf(a.gridData.index)||c.push(a)});return c},getTitleCell:function(a){var c=b.querySingleCell(a,{rowIndex:0,columnIndex:0});if(c&&!g.getFieldInfo(c)&&(1===a.columns.length||g.getColumnSpan(c)===a.columns.length))return c},isDynamicFieldCell:function(a,
b){return a._dynamicBindings&&a._dynamicBindings[b.column.field]},getDynamicallyBoundColumns:function(a,b){return a._dynamicBindings&&a._dynamicBindings[b.field]},getDynamicallyBoundFieldCells:function(a,c){if(c.column){var d=a._dynamicBindings&&a._dynamicBindings[c.column.field];if(!d)return null;var e=[];d.forEach(function(d){(d=d&&b.querySingleCell(a,{columnId:d.id,rowId:c.rowId}))&&e.push(d)});return e}},getAllBoundCells:function(a,c,e){var d=[],h={};c&&c.forEach(function(c){if((!e||e(c))&&!h[c.uniqueId]){h[c.uniqueId]=
!0;var f=b.getDynamicallyBoundFieldCells(a,c);f?f.forEach(function(a){d.push(a);h[a.uniqueId]=!0}):d.push(c)}});return f.removeDuplicates(d,"uniqueId")},trimDynamicBindings:function(a,c){var d=[],e={};c&&c.forEach(function(c){var h=b.getDynamicallyBoundFieldCells(a,c);h&&h.length?(e[h[0].uniqueId]||d.push(h[0]),h.forEach(function(a){e[a.uniqueId]=!0})):d.push(c)});return d},collectFieldInfos:function(a,c){var d=[];c=c||{};var e=c.fieldCells||a.getFieldCells();c.trimDynamicBinding&&e&&(e=b.trimDynamicBindings(a,
e));e&&e.forEach(function(a){(a=g.getFieldInfo(a))&&d.push(a)});return d},cellHasFloatingTableParent:function(a){function b(a){return a.isSection&&a.isDataDrillingView?!1:a.isFloatingTable?!0:a.parentWidget?b(a.parentWidget):!1}return a&&a.parentGrid?b(a.parentGrid):!1},isMouseOver:function(a){return c.isMouseOverBox(b.getBBox(a))},getOverFieldCell:function(a,b){b=b||{};var c=b.cellFilter||function(){return!0},d;a.getForegroundFloatingCells({topFirst:!0}).some(function(a){if(c(a)&&a.isMouseOver())return d=
a,!0});d||a.getFieldCells().some(function(a){if(c(a)&&a.isMouseOver())return d=a,!0});d||a.getBackgroundFloatingCells({topFirst:!0}).some(function(a){if(c(a)&&a.isMouseOver())return d=a,!0});return d},getBBox:function(a,b){var c=a.isSingleCelledTable()&&a.getFirstCell().getAngle();return"number"===typeof c&&0!==c?a.getFirstCell().getBBox(b):b&&b.noTransformation?e.noTransformPosition(a.domNode):k.position(a.domNode)}};return b})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/rows/_RowModifierNormal":function(){define(["./RowDataUtil"],
function(k){return{adjustRowHeight:function(g,f,e,c){var b=g.layoutDefaults.rowMinHeight;c=Math.max(c,b);var a=c-k.getDataHeight(g,f,e);if(g.keepGridHeightWhenResized){var d=g.store.data[f.index+1];d&&(a=k.getDataHeight(g,d,e)-a,a<b&&(c-=b-a,a=b),k.setDataHeight(g,d,e,a,!0))}k.setDataHeight(g,f,e,c,!0)}}})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/columns/GridLayoutColumnsCalculator":function(){define(["./ColumnDataUtil","./ColumnModifier","./ColumnsProcessor"],
function(k,g,f){var e={};e.recalcColumns=f.recalcColumns;e.recalcColumnsTableJson=f.recalcColumnsTableJson;e.adjustColumnWidth=g.adjustColumnWidth;e.getAffectedCells=g.getAffectedCells;e.getFieldWidth=k.getFieldWidth;e.setFieldWidth=k.setFieldWidth;e.calcFieldWidth=k.calcFieldWidth;e.recalcGridWidth=k.recalcGridWidth;return e})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/columns/ColumnDataUtil":function(){define(["../GridLayoutCalculatorQueryUtil"],function(k){var g=
{getFieldWidth:function(f,e,c){var b="string"===typeof c?k.fieldToColumn(f,c):c;c=b?b.field:"string"===typeof c?c:null;return f.looseResize?g.getFieldWidthOwn(f,e,c)||b&&b.style.width||0:b&&b.style.width||0},getFieldWidthOwn:function(f,e,c){if(f.looseResize)return e.style.fields=e.style.fields||{},(e.style.fields[c]=e.style.fields[c]||{}).width},setFieldWidth:function(f,e,c,b,a){var d="string"===typeof c?k.fieldToColumn(f,c):c,h=d?d.field:"string"===typeof c?c:null;f.looseResize?(a?k.getRowSpannedData(f,
e,h)||[e]:[e]).forEach(function(a){a.style.fields=a.style.fields||{};(a.style.fields[h]=a.style.fields[h]||{}).width=b}):d&&(d.style.width=b)},calcFieldWidth:function(f,e,c,b){var a=0;1<(e.columnSpans&&e.columnSpans[c])?k.getSpannedColumns(f,c,e.columnSpans[c]).forEach(function(c){b!==c.field&&(a+=g.getFieldWidth(f,e,c.field))}):a=g.getFieldWidth(f,e,c);return a},recalcGridWidth:function(f){f._width=0;var e=f.store.data[0];f.columns.forEach(function(c){f._width+=g.getFieldWidth(f,e,c.field)});return f._width},
getAllowedWidth:function(f){return f.fitParentWhenResized?f.getAllowedWidthFromParent():f.getAllowedWidth()}};return g})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/columns/ColumnModifier":function(){define(["../GridLayoutCalculatorQueryUtil","./ColumnDataUtil","./_ColumnModifierNormal","./_ColumnModifierLoose"],function(k,g,f,e){var c={},b={getColumnToChange:function(a,b,c,d){var e=k.getMovableColumn(a,b,c.field);e&&(a=g.calcFieldWidth(a,b,c.field,e.field),d-=
a);return{column:e||c,width:d}}},a={finalResizeGridCells:function(a){a.getFieldCells().forEach(function(b){b.setWidth(g.calcFieldWidth(a,b.gridData,b.column.field))});g.recalcGridWidth(a)}},d={recalcToStick:function(a){var b=a.columns[a.columns.length-1];a.store.data.some(function(c,d){if(!a.looseResize&&d)return!0;var e=0;a.columns.forEach(function(d){d!==b&&(e+=g.getFieldWidth(a,c,d.field))});g.setFieldWidth(a,c,b.field,g.getAllowedWidth(a)-e)})}};c.adjustColumnWidth=function(c,g,k,m){k=b.getColumnToChange(c,
g,k,m);(c.looseResize?e:f).adjustColumnWidth(c,g,k.column,k.width);c.stickToRight&&d.recalcToStick(c);a.finalResizeGridCells(c)};c.getAffectedCells=function(a,c,d){return a.looseResize?e.getAffectedCells(a,c,b.getColumnToChange(a,c,d).column):null};return c})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/columns/_ColumnModifierNormal":function(){define(["./ColumnDataUtil"],function(k){var g={},f={adjustColumnWidth:function(e,c,b,a,d){function h(a,b){return k.setFieldWidth(e,
c,a.field,b,!0)}var g=e.layoutDefaults.columnMinWidth,n=function(){if(!b)return null;var f=k.getFieldWidth(e,c,b.field);void 0!==d&&(a=f+d);a=Math.max(g,a);var h,l=0,m=!1;e.columns.forEach(function(a){l+=k.getFieldWidth(e,c,a.field);m&&!h?h=a:a===b&&(m=!0)});var n=k.getAllowedWidth(e)-(l-f);return isNaN(n)?null:{width:a,widthMemo:f,maxAllowedColumnWidth:n,nextColumn:h}}();if(n){a=n.width;var m=n.widthMemo,p=n.maxAllowedColumnWidth,t=(n=n.nextColumn)&&k.getFieldWidth(e,c,n.field),m=a-m,q=0;e.keepGridWidthWhenResized?
(n&&(m=t-m,m<g&&(a-=g-m,m=g),m<t&&(p+=t-m),h(n,m)),h(b,Math.min(p,a))):(n&&p<a&&t>g?(h(b,a),q=p-a):h(b,Math.min(p,a)),0!==q&&f.adjustColumnWidth(e,c,n,null,q))}}};g.adjustColumnWidth=function(e,c,b,a){f.adjustColumnWidth(e,c,b,a)};return g})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/columns/_ColumnModifierLoose":function(){define("dojo/_base/lang dojox/uuid/generateRandomUuid ../GridLayoutCalculatorQueryUtil ../GridElementBoxCalculator ./ColumnDataUtil ../../GridQueryUtil".split(" "),
function(k,g,f,e,c,b){var a={collectColumnBoxes:function(a,b){for(var c=[],d=0;d<a.store.data.length;){var e=a.store.data[d],h=this._createEmptyBox(),e=f.getRowSpannedData(a,e,b.field)||[e];h.elements=this._getSpannedDataElements(a,b,e);this._measureBox(h);var g=c[c.length-1];g&&(g.nextSibling=h,h.prevSibling=g);c.push(h);d+=e.length}return c},_createEmptyBox:function(){return{id:g(),box:null,elements:[],overlappingBoxes:[],overlappingBoxesCache:{},prevSibling:null,nextSibling:null}},_getSpannedDataElements:function(a,
b,c){var d=[];c.forEach(function(c){c={data:c,dataIndex:c.index,field:b.field,box:e.calcDataBox(a,c,b.field)};d.push(c)});return d},_measureBox:function(a){var b=0;a.elements.forEach(function(a){b+=a.box.h});a.box={x:a.elements[0].box.x,y:a.elements[0].box.y,w:a.elements[0].box.w,h:b}},mergeBoxesForRightColumn:function(a){var b=this._createEmptyBox();a.forEach(function(a){a.elements.forEach(function(a){b.elements.push({data:a.data,field:null,box:k.clone(a.box)})})});this._measureBox(b);b.box.w=1E6;
return[b]},getBoxAtDataIndex:function(a,b){return a.filter(function(a){return a.elements[0].dataIndex===b})[0]}},d={buildInfluenceTree:function(b,c,d){function e(a,d){(d?c:b).forEach(function(b){var c;if(c=!b.overlappingBoxesCache[a.id]){c=a.box;var d=b.box;c=!(c.y+.5>=d.y+d.h||c.y+c.h<=d.y+.5)}c&&(a.overlappingBoxes.push(b),a.overlappingBoxesCache[b.id]=!0)});a.overlappingBoxes.forEach(function(a){e(a,!d)})}d=a.getBoxAtDataIndex(b,d.index);e(d,!0);return d}},h={applyForce:function(a,b,d){function e(b,
d){var h=b.elements[0];h.field&&c.setFieldWidth(a,h.data,h.field,c.getFieldWidth(a,h.data,h.field)+(d?-1:1)*f,!0);b.overlappingBoxes.forEach(function(a){e(a,!d)})}var f=this._checkDelta(a,b,d);e(b,!1)},_checkDelta:function(a,b,d){function e(a,b){0!==f&&(b?0>f||(f=Math.min(f,a.box.w-h),a.prevSibling&&(f=Math.min(f,a.prevSibling.box.x+a.prevSibling.box.w-h-a.box.x)),a.nextSibling&&(f=Math.min(f,a.nextSibling.box.x+a.nextSibling.box.w-h-a.box.x))):0<f||(f=Math.max(f,-(a.box.w-h)),a.prevSibling&&(f=Math.max(f,
-(a.box.x+a.box.w-(a.prevSibling.box.x+h)))),a.nextSibling&&(f=Math.max(f,-(a.box.x+a.box.w-(a.nextSibling.box.x+h))))),a.overlappingBoxes.forEach(function(a){e(a,!b)}))}var h=a.layoutDefaults.columnMinWidth;d=Math.max(d,h);var f=d-b.box.w;if(0<f&&b.elements[0].field===a.columns[a.columns.length-1].field){var g=0;a.columns.forEach(function(d){g+=c.getFieldWidth(a,b.elements[0].data,d.field)});f=Math.min(f,c.getAllowedWidth(a)-g)}e(b,!1);return f}},l={_getInluencedStartBox:function(b,c,e){var f=b.columns[e.index+
1];e=a.collectColumnBoxes(b,e);b=f?a.collectColumnBoxes(b,f):a.mergeBoxesForRightColumn(e);return d.buildInfluenceTree(e,b,c)},getAffectedCells:function(a,c,d){function e(c){if(c.elements[0].data){var d=b.querySingleCell(a,{rowIndex:c.elements[0].data.index,columnField:c.elements[0].field,considerSpans:!0});d&&f.push(d)}c.overlappingBoxes.forEach(e)}var f=[];c=this._getInluencedStartBox(a,c,d);e(c);return f},adjustColumnCell:function(a,b,c,d){b=this._getInluencedStartBox(a,b,c);h.applyForce(a,b,d)}};
return{adjustColumnWidth:function(a,b,c,d){l.adjustColumnCell(a,b,c,d)},getAffectedCells:function(a,b,c){return l.getAffectedCells(a,b,c)}}})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/columns/ColumnsProcessor":function(){define(["dojox/uuid/generateRandomUuid","./ColumnDataUtil"],function(k,g){function f(c){c._dynamicBindings={};if(c.getNumDynamicColumns()){for(var b=c.getNumDynamicColumns(),a=c.getNumFixedColumns(),d=0;d<a;d++)c.columns[d].isFixed=!0;for(var d=
[],e=0;e<b;e++){for(var f=a,g=[];f<c.columns.length;){var k=c.columns[f+e];k.isDynamic=!0;g.push(k);f+=b}d.push(g)}d.forEach(function(a){a.forEach(function(b){c._dynamicBindings[b.field]=a})})}}var e={recalcColumns:function(c,b){var a=b&&b.resetWidth,d=b&&b.columnsToPreserve,e=b&&b.stickToRight,l=b&&b.newWidth,n=b&&b.rightOffsetWeight;b=b&&b._isJson;var m={},p=0;c.columns.every(function(a,b){if(!a.style||!a.style.width||isNaN(a.style.width)||"number"!==typeof a.style.width)return p=0,!1;p+=a.style.width;
m[b]=a.style.width;return!0});var t;t=l?l:e?c.getAllowedWidth():p?Math.min(p,c._width):c._width;t-=0<n?t*n:0;var q=t/c.columns.length,r=t;if(d){var u=d.length*q,v=0;d.forEach(function(a){v+=a.style.width});d.forEach(function(a){a.style.width=u/v*a.style.width/r*100+"%"})}c.columns.forEach(function(b,c,d){b.index=c;b.style=b.style||{};if("number"!==typeof b.style.width||a)if(c===d.length-1)b.style.width=r;else{var e=b.style.width;"string"===typeof e&&-1!==e.indexOf("%")?b.style.width=parseFloat(e.substr(0,
e.length-1))/100*t:b.style.width=q}r-=b.style.width;c===d.length-1&&0>r&&(b.style.width+=r);void 0===b.id&&(b.id=k())});if(c.looseResize){c.columns.some(function(a,b){var d=m[b]?a.style.width/m[b]:void 0;c.store.data.forEach(function(b){var e=g.getFieldWidthOwn(c,b,a.field);e?d&&1!==d&&g.setFieldWidth(c,b,a.field,e*d):g.setFieldWidth(c,b,a.field,a.style.width)})});var w=c.columns[c.columns.length-1].field;c.store.data.forEach(function(a){var b=0;c.columns.some(function(d){b+=g.getFieldWidthOwn(c,
a,d.field)});var d=t-b;0!==d&&g.setFieldWidth(c,a,w,g.getFieldWidthOwn(c,a,w)+d)})}b||(f(c),g.recalcGridWidth(c));return t},recalcColumnsTableJson:function(c){e.recalcColumns(c.data,{resetWidth:!0,newWidth:c.style.width,_isJson:!0})}};return e})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/GridLayoutSnapper":function(){define(["dojo/_base/lang","./rows/RowDataUtil","./columns/ColumnDataUtil","./GridElementBoxCalculator"],function(k,g,f,e){return{autoSnapLayout:function(c){function b(){var a=
[];c.store.data.forEach(function(b){c.columns.forEach(function(d){a.push(k.mixin({id:b.index+"_"+d.field,data:b,dataIndex:b.index,column:d,field:d.field},e.calcDataBox(c,b,d.field)))})});return a}if(c.looseResize)for(var a=c.store.data.length*c.columns.length,d={},h=0;h<a;h++){var l=b(),n=l[h],m=n.x+n.w,p=n.y+n.h;d[n.id]=!0;l.forEach(function(a){if(!d[a.id]){var b=m-(a.x+a.w);.5>=Math.abs(b)&&f.setFieldWidth(c,a.data,a.field,a.w+b);b=p-(a.y+a.h);.5>=Math.abs(b)&&g.setDataHeight(c,a.data,a.field,a.h+
b)}})}}}})},"esri/dijit/geoenrichment/ReportPlayer/core/sections/sectionUtils/SectionJsonUtil":function(){define(["esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/templateJsonUtils/fieldInfo/FieldInfoBuilder","esri/dijit/geoenrichment/ReportPlayer/core/sections/SectionTypes","../../supportClasses/tableJson/TableJsonUtil"],function(k,g,f){var e={wrapInDetailsSectionJson:function(c,b){c=Array.isArray(c)?c:[c];var a=c.some(function(a){return"table"===a.id&&a.attributes&&(0<a.attributes.dynamicColumns||
0<a.attributes.dynamicRows)});return{type:b||(a?g.GROUP:g.DETAILS),stack:c}},createSectionJsonFromInfographicJson:function(c,b,a){c=f.createSingleCellTable({width:b,height:a,fieldInfo:k.createFieldInfoFromInfographic(c)});return e.wrapInDetailsSectionJson(c)},getSectionJsonInfographic:function(c){var b;c.stack&&c.stack.some(function(a){b="table"===a.id&&f.getTableJsonInfographic(a);return!!b});return b},getSectionJsonInfographicTable:function(c){var b;c.stack&&c.stack.some(function(a){if("table"===
a.id&&f.getTableJsonInfographic(a))return b=a,!0});return b},calcSectionJsonBox:function(c){var b,a,d,e;function f(c){b=Math.min(b,c.l);a=Math.min(a,c.t);d=Math.max(d,c.l+c.w);e=Math.max(e,c.t+c.h)}a=b=Infinity;e=d=0;c.stack&&c.stack.forEach(function(a){switch(a.id){case "table":var b=0;a.data.data.forEach(function(a){b+=a.style.height});f({l:a.style.left||0,t:a.style.top||0,w:a.style.width,h:b});break;case "img":case "map":f({l:a.style.left||0,t:a.style.top||0,w:a.style.width,h:a.style.height})}});
c=c.style||{};return{x:c.left,y:c.top,w:c.width||b+d,h:c.height||a+e,contentLeft:b,contentTop:a,contentW:d-b,contentH:e-a}}};return e})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/parsers/_FieldInfoBuilder":function(){define(["../../../supportClasses/templateJsonUtils/fieldInfo/FieldInfoBuilder","dojo/i18n!esri/nls/jsapi"],function(k,g){g=g.geoenrichment.dijit.ReportPlayer.ReportPlayer;return{getCalculatorOrScriptFieldInfo:function(f,e,c){if(!f)return null;if(e.variableProvider.isPlayerOnly&&
!e.useVariableProviderToCollectOnly){var b=e.variableProvider.toCalculator(f);if(!b)return console.log("Can't create a dummy calculator for \x3d\x3e "+f),null;c=c||{};c.calculatorName=b.variable.calculatorName;f=k.createFieldInfoFromCalculator(b,e.variableProvider,c);f.name=b.variable.fieldName;f.templateName=b.variable.templateName;return f}var b=e.queryMetaDataFunc(f),a=f.substr(0,f.indexOf("."));c=c||{};c.calculatorName=a;if(b)return b.isScript?k.createFieldInfoFromScript(b,c):k.createFieldInfoFromCalculator(b,
e.variableProvider,c);c=k.createFieldInfoFromMissingVariable(f);e.variableProvider.isPlayerOnly&&(b=e.variableProvider.toCalculator(f),c.alias=b&&b.variable.alias);c.alias=c.alias?c.alias+" ("+g.missingVariable+")":g.missingVariable;return c}}})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/InfographicOptionsProvider":function(){define("dojo/_base/declare esri/kernel esri/dijit/geoenrichment/InfographicsOptions esri/dijit/geoenrichment/Geoenrichment esri/dijit/geoenrichment/config esri/tasks/geoenrichment/GeometryStudyArea esri/tasks/geoenrichment/StandardGeographyStudyArea esri/tasks/geoenrichment/studyAreaFromJson ./ge/LocalGEInfographic ./ge/_GEFilterSupport esri/dijit/geoenrichment/utils/StudyAreaKeyBuilder".split(" "),
function(k,g,f,e,c,b,a,d,h,l,n){var m=k(null,{_options:null,getTask:function(){return null},createGeoenrichment:function(a,b,c,d,f){return a&&a.calcData?new h(a,b,c,d,f):(new k([e,l]))()},getCountry:function(a){return null},getOptions:function(){this._options||(this._options=new f);return this._options}}),p=k(null,{countryID:null,reportID:null,geoenrichmentUrl:null,areaNames:null,studyAreas:null,studyArea:null,_provider:null,constructor:function(c,e){this.countryID=c.countryID;this.reportID=c.reportID;
this.geoenrichmentUrl=c.geoenrichmentUrl;this.studyAreas=c.studyAreas.map(function(c){return c instanceof b||c instanceof a?c:d(c)});this.areaNames=c.areaNames;this._provider=e;this.setCurrentAnalysisAreaIndex(0)},setCurrentAnalysisAreaIndex:function(a){this.studyArea=this.studyAreas[a]},_getGEKey:function(a){a=a||this.studyArea;return JSON.stringify(n.studyAreaToJson(a))+this.countryID+this.reportID},_getGEKeys:function(){return this.studyAreas.map(function(a){return this._getGEKey(a)},this)},getOptions:function(){return this._provider._getFactory().getOptions()},
createGeoenrichment:function(a){this.setCurrentAnalysisAreaIndex(a.currentFeatureIndex||0);return this._provider._createGE(this._getGEKey(),a.infographicJson,a.areaData,a.isMultiFeature,this.areaNames,a.currentFeatureIndex)},toJson:function(){return{countryID:this.countryID,reportID:this.reportID,geoenrichmentUrl:this.geoenrichmentUrl,geoenrichmentCache:this._provider._getGECacheJson(this._getGEKeys()),infographicsOptions:this.getOptions().toJson(),studyAreas:this.studyAreas.map(function(a){return a.toJson()}),
areaNames:this.areaNames}},toJsonAt:function(a){var b=this.studyAreas[a];return{countryID:this.countryID,reportID:this.reportID,geoenrichmentUrl:this.geoenrichmentUrl,geoenrichmentCache:this._provider._getGECacheJson([this._getGEKey(b)]),infographicsOptions:this.getOptions().toJson(),studyAreas:[b.toJson()],areaNames:[this.areaNames[a]]}}});return k(null,{_infographicsFactory:null,_geoenrichmentCache:null,constructor:function(){this._geoenrichmentCache={}},_getFactory:function(){return this._infographicsFactory=
this._infographicsFactory||new m},_createGE:function(a,b,c,d,e,f){b=this._getFactory().createGeoenrichment(b,c,d,e,f);(c=this._geoenrichmentCache[a])?b.cache=c:this._geoenrichmentCache[a]=b.cache;return b},_getGECacheJson:function(a){var b={};a.forEach(function(a){var c=this._geoenrichmentCache[a];c&&(b[a]=c.toJson())},this);return b},setServerUrl:function(a,b){c.server=a;b?c.token=b:(a=a&&g.id.findCredential(a)||g.id.credentials[0],c.token=a&&a.token)},getInfographicOptions:function(c){return new p({geoenrichmentUrl:c.geoenrichmentUrl,
countryID:c.countryID,reportID:c.reportID,studyAreas:c.analysisAreas.map(function(d){return d.geographies&&d.geographies.length?new a({countryID:c.countryID,layer:d.geographies[0].levelId,ids:[d.geographies.map(function(a){return a.id}).join(",")],attributes:{}}):new b({geometry:d.feature.geometry,attributes:{}})}),areaNames:c.analysisAreas.map(function(a){return a.shortName||a.name})},this)},getInfographicOptionsFromJson:function(a){this.setServerUrl(a.geoenrichmentUrl);for(var b in a.geoenrichmentCache){var c=
a.geoenrichmentCache[b];this._createGE(b);this._geoenrichmentCache[b].fromJson(c)}this._infographicsFactory&&(this._infographicsFactory._options=new f(a.infographicsOptions));return new p(a,this)}})})},"esri/dijit/geoenrichment/InfographicsOptions":function(){define("esri/declare dojo/_base/lang esri/dijit/geoenrichment/Deferred esri/tasks/geoenrichment/studyAreaOptionsFromJson esri/tasks/geoenrichment/GeoenrichmentTask ./utils/ArrayUtil ./config ./InfographicsOptionsItem".split(" "),function(k,g,
f,e,c,b,a,d){function h(a,b){if(a)for(var c in a)if(a.hasOwnProperty(c)){b[c]=[];for(var d=0;d<a[c].length;d++){var e={};m(a[c][d],e);b[c].push(e)}}}function l(a,b){a=parseFloat(a.index);b=parseFloat(b.index);return isNaN(a)&&isNaN(b)?0:isNaN(a)?1:isNaN(b)?-1:a-b}function n(a,c){for(var d=0;d<a.length;d++){var e=a[d];if(e.type==c.type&&b.arraysEqual(e.variables,c.variables))return{report:e,index:d}}return null}function m(a,b){b.type=a.type||("OneVarMultiComparison"==a.report?"OneVar":a.report);if(a.dataCollection)if(a.vars){b.variables=
[];for(var c=0;c<a.vars.length;c++)b.variables.push(a.dataCollection+"."+a.vars[c])}else b.variables=[a.dataCollection+".*"];else b.variables=a.variables;p(a.isVisible)?b.isVisible=a.isVisible:p(a.checked)&&(b.isVisible=a.checked)}function p(a){return"boolean"==typeof a||a instanceof Boolean}k=k("esri.dijit.geoenrichment.InfographicsOptions",null,{_items:null,_loaded:null,_loadPromises:null,studyAreaOptions:null,theme:"common",constructor:function(a){this._loaded={};this._loadPromises={};this.studyAreaOptions=
e(a&&(a.buffer||a.studyAreaOptions));this._items={};if(a){var b=a.reports||a.items;if(b){h(b,this._items);for(var c in b)b[c]&&b[c].length&&(this._loaded[c]=!0)}a.theme&&(this.theme=a.theme)}},getItems:function(b){var d=new f;if(this._loaded[b])d.resolve(this._items[b]);else{if(this._loadPromises[b])return this._loadPromises[b];var e=new c(a.server);e.token=a.token;e.getDataCollections(b,null,["id","alias"]).then(g.hitch(this,this._mergeItems,b,d),function(a){d.reject(a)})}return this._loadPromises[b]=
d.promise},_mergeItems:function(a,b,c){try{var e={AgePyramid:1,TapestryNEW:1,RelatedVariables:1,OneVar:1},f={TapestryNEW:"Tapestry"},h,g,k=[];for(h=0;h<c.length;h++){var p=c[h].metadata.infographics||c[h].metadata.infographics2;if(p){var q=JSON.parse(p),r;for(r in q)if(e[r]){var t=new d(f[r]||r,[c[h].id+".*"]),G;for(G in q[r])q[r].hasOwnProperty(G)&&(t[G]=q[r][G]);(g=n(k,t))?k[g.index]=t:k.push(t)}}}var F,D=this._items[a];D||(D=[],D.push(new d("OneVar",["KeyGlobalFacts.AVGHHSZ"])),this._items[a]=
D);for(h=D.length-1;0<=h;h--)if(g=n(k,D[h]))m(D[h],g.report),D[h]=g.report,k.splice(g.index,1);else{if("OneVar"==D[h].type&&1==D[h].variables.length){var H,J=D[h].variables[0];if(!F)for(F={},e=0;e<c.length;e++)for(f=0;f<c[e].variables.length;f++)F[c[e].id+"."+c[e].variables[f].id]=c[e].variables[f];if(H=F[J]){D[h].title=H.alias;continue}}D.splice(h,1);h--}for(h=0;h<k.length;h++)D.push(k[h]);D.sort(l);this._loaded[a]=!0;delete this._loadPromises[a];b.resolve(D)}catch(K){b.reject(K)}},toJson:function(){var a=
{};h(this._items,a);return{studyAreaOptions:this.studyAreaOptions.toJson(),items:a,theme:this.theme}}});k.Item=d;return k})},"esri/declare":function(){define(["dojo/_base/declare","dojo/_base/lang","./extend"],function(k,g,f){return function(e,c,b){var a=g.isString(e);a?b.declaredClass=e:(b=c,c=e);c=k(c,b);a&&f(e,c);return c}})},"esri/extend":function(){define(["dojo/_base/lang","dojo/has","./kernel"],function(k,g,f){return function(e,c){g("extend-esri")&&(e=e.substring(e.indexOf(".")+1),k.setObject(e,
c,f))}})},"esri/tasks/geoenrichment/studyAreaOptionsFromJson":function(){define(["./RingBuffer","./DriveBuffer","./IntersectingGeographies","../../extend"],function(k,g,f,e){var c=function(b){if(b){switch(b.areaType){case "DriveTimeBuffer":return new g(b);case "StandardGeography":return new f(b)}switch(b.type){case "DriveTime":return new g(b);case "StdGeo":return new f(b)}return new k(b)}return new k};e("esri.tasks.geoenrichment.studyAreaOptionsFromJson",c);return c})},"esri/tasks/geoenrichment/RingBuffer":function(){define(["../../declare",
"../../units","./StudyAreaOptions"],function(k,g,f){return k("esri.tasks.geoenrichment.RingBuffer",[f],{radii:null,units:null,constructor:function(e){e&&(e.bufferRadii?this.radii=e.bufferRadii:e.radius?this.radii=[e.radius]:e.radii&&(this.radii=e.radii),this.units=e.bufferUnits||e.units);this.radii||(this.radii=[1]);this.units||(this.units=g.MILES)},toJson:function(){return{areaType:"RingBuffer",bufferUnits:this.units,bufferRadii:this.radii}}})})},"esri/tasks/geoenrichment/StudyAreaOptions":function(){define(["../../declare"],
function(k){return k("esri.tasks.geoenrichment.StudyAreaOptions",null,{toJson:function(){throw"'toJson' method is not implemented";}})})},"esri/tasks/geoenrichment/DriveBuffer":function(){define(["../../declare","./StudyAreaOptions","./DriveUnits"],function(k,g,f){return k("esri.tasks.geoenrichment.DriveBuffer",[g],{radii:null,units:null,constructor:function(e){e&&(e.bufferRadii?this.radii=e.bufferRadii:e.radius?this.radii=[e.radius]:e.radii&&(this.radii=e.radii),this.units=e.bufferUnits||e.units);
this.radii||(this.radii=[5]);this.units||(this.units=f.MINUTES)},toJson:function(){return{areaType:"DriveTimeBuffer",bufferUnits:this.units,bufferRadii:this.radii}}})})},"esri/tasks/geoenrichment/DriveUnits":function(){define(["dojo/_base/lang","../../units"],function(k,g){g=k.clone(g);k.mixin(g,{MINUTES:"esriDriveTimeUnitsMinutes"});return g})},"esri/tasks/geoenrichment/IntersectingGeographies":function(){define(["../../declare","./StudyAreaOptions","./GeographyLevel"],function(k,g,f){return k("esri.tasks.geoenrichment.IntersectingGeographies",
[g],{geographyLevels:null,constructor:function(e){this.geographyLevels=f.fromJsonArray(e?e.intersectingGeographies||e.levels||e.geographyLevels:[{layerID:"Admin2"}])},toJson:function(){return{areaType:"StandardGeography",intersectingGeographies:f.toJsonArray(this.geographyLevels)}}})})},"esri/tasks/geoenrichment/GeographyLevel":function(){define(["../../declare"],function(k){var g=k("esri.tasks.geoenrichment.GeographyLevel",null,{layerID:null,datasetID:null,countryID:null,constructor:function(f){f&&
(this.layerID=f.layer||f.layerID||null,this.datasetID=f.dataset||f.datasetID||null,this.countryID=f.sourceCountry||f.countryID||null)},toJson:function(){var f={};this.layerID&&(f.layer=this.layerID);this.datasetID&&(f.dataset=this.datasetID);this.countryID&&(f.sourceCountry=this.countryID);return f}});g.fromJsonArray=function(f){var e=[];if(!f)return e;for(var c=0;c<f.length;c++){var b=f[c];b instanceof g||(b=new g(b));e.push(b)}return e};g.toJsonArray=function(f){if(!f||0===f.length)return null;
for(var e=[],c=0;c<f.length;c++)e.push(f[c].toJson());return e};return g})},"esri/tasks/geoenrichment/GeoenrichmentTask":function(){define("../../declare dojo/_base/array dojo/_base/lang dojo/dom-construct ./taskHelper ../FeatureSet ./EnrichParameters ./ReportParameters ../../urlUtils ../../IdentityManager ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline dojo/i18n!../../nls/jsapi".split(" "),function(k,g,f,e,c,b,a,d,h,l,n,m,p,t){function q(a){this.name="UserError";this.message=
a||""}function r(a,b){return a.getAvailableCountries().then(function(a){for(var c=0;c<a.length;c++)if(a[c].id==b)return a[c].name})}function u(a){a=a.getExtent();return new n((a.xmin+a.xmax)/2,(a.ymin+a.ymax)/2,a.spatialReference)}t=t.geoenrichment.task.GeoenrichmentTask;q.prototype=Error.prototype;return k("esri.tasks.geoenrichment.GeoenrichmentTask",null,{token:null,url:null,_query:null,constructor:function(a){if(a){var b=h.urlToObject(a);a=b.path;this._query=b.query}this.url=a||h.getProtocolForWebResource()+
"//geoenrich.arcgis.com/arcgis/rest/services/World/GeoenrichmentServer"},enrich:function(d){var e=this;return c.invokeMethod(this,"/Geoenrichment/enrich",function(){d instanceof a||(d=new a(d));return c.jsonToRest(d.toJson(),e._query)},function(a){(!a.results||1>a.results.length||!a.results[0].value||!a.results[0].value.FeatureSet||1>a.results[0].value.FeatureSet.length)&&c.throwEmptyResponse();var d={featureSets:[],messages:a.messages};a=a.results[0].value.FeatureSet;for(var e=0;e<a.length;e++)d.featureSets.push(new b(a[e]));
return d},"onEnrichComplete","onError")},getAvailableCountries:function(){var a=this;return c.invokeMethod(this,"/Geoenrichment/Countries",function(){return f.mixin({},a._query)},function(a){if(a.error)throw a.error;a=a.countries;for(var b=0;b<a.length;b++){var c=a[b].datasets;delete a[b].datasets;a[b].datasetIDs=c}return a},"onGetAvailableCountriesComplete","onError")},getDataCollections:function(a,b,d,e){var h;b?h="/GetDataCollections/execute":(h="/Geoenrichment/DataCollections",a&&(h+="/"+a));
var g=this;return c.invokeMethod(this,h,function(){var c=f.mixin({},g._query);c.suppressNullValues=!0;d&&(c.outFields=0===d.length?"none":JSON.stringify(d));b&&(a&&(c.sourcecountry=a),c.searchtext="id:"+b);e&&(c.addDerivativeVariables=JSON.stringify(e));return c},function(a){if(a.error)throw a.error;a=a.results||a.dataCollections||a.DataCollections;for(var b=0;b<a.length;b++)a[b]={id:a[b].dataCollectionID,metadata:a[b].metadata,variables:a[b].data};return a},"onGetDataCollectionsComplete","onError")},
createReport:function(a){var b=this;l.getCredential(this.url).then(function(f){try{var h=e.create("form",{target:"_blank",action:b.url+"/Geoenrichment/CreateReport",method:"post"});a instanceof d||(a=new d(a));var g=c.jsonToRest(a.toJson(),b._query);g.f="bin";g.token=f.token;for(var k in g)g.hasOwnProperty(k)&&e.create("input",{type:"hidden",name:k,value:g[k]},h);e.place(h,document.body);h.submit();e.destroy(h)}catch(z){b.onError(z)}},function(a){b.onError(a)})},getReports:function(a){var b=this;
return r(this,a).then(function(a){return c.invokeMethod(b,"/Geoenrichment/Reports/"+a,function(){return f.mixin({},b._query)},function(a){for(var b=0;b<a.reports.length;b++){var c=a.reports[b].reportID;delete a.reports[b].reportID;a.reports[b].id=c}return a.reports},"onGetReportsComplete","onError")})},getStandardGeographyLevels:function(a){function b(a){return c.invokeMethod(d,a,function(){return f.mixin({},d._query)},function(a){a=a.geographyLevels;for(var b=0;b<a.length;b++){var c=a[b];c.id=c.countryID;
delete c.countryID;c.name=c.countryName;delete c.countryName;for(var c=c.datasets,d=0;d<c.length;d++){var e=c[d];e.id=e.datasetID;delete e.datasetID;e.geographyLayers=e.levels;delete e.levels}}return a},"onGetStandardGeographyLevelsComplete","onError")}var d=this;return a?r(this,a).then(function(a){return b("/Geoenrichment/StandardGeographyLevels/"+a)}):b("/Geoenrichment/StandardGeographyLevels")},getServiceLimits:function(){var a=this;return c.invokeMethod(this,"/Geoenrichment/ServiceLimits",function(){return f.mixin({},
a._query)},function(a){return a.serviceLimits.value},"onGetServiceLimitsComplete","onError")},getCountries:function(a){var b;switch(a.type){case "point":b=a;break;case "polyline":b=a.paths[0];a=new p(a.spatialReference);a.addPath(b);b=u(a);break;case "polygon":b=a.rings[0],a=new m(a.spatialReference),a.addRing(b),b=u(a)}return this.enrich({variables:["GlobalIntersect.*"],studyAreas:[{geometry:b}],forStorage:!1}).then(function(a){var b=[];a=a.featureSets[0].features;for(var c=0;c<a.length;c++){var d=
a[c].attributes.sourceCountry;0>g.indexOf(b,d)&&b.push(d)}if(0===b.length)throw new q(t.noData);return b})},onEnrichComplete:function(a){},onGetAvailableCountriesComplete:function(a){},onGetDataCollectionsComplete:function(a){},onCreateReportComplete:function(a){},onGetReportsComplete:function(a){},onGetStandardGeographyLevelsComplete:function(a){},onGetServiceLimitsComplete:function(a){},onError:function(a){}})})},"esri/tasks/geoenrichment/taskHelper":function(){define(["dojo/_base/lang","dojo/Deferred",
"dojo/json","../../request","../../extend"],function(k,g,f,e,c){var b={invokeMethod:function(a,b,c,f,k,m){function d(b){var c;try{c=f(b)}catch(y){h(y);return}n&&n.resolve(c);a[k](c)}function h(b){n&&n.reject(b);a[m](b)}var l=null,n=null,n=new g(function(){l&&(l.cancel(),l=null)});try{var u=c?c():{};u.f="json";a.token&&(u.token=a.token);l=e({url:a.url+b,content:u,handleAs:"json"});l.then(d,h)}catch(v){h(v)}return n.promise},jsonToRest:function(a,b){b=k.mixin({},b);for(var c in a)k.isString(a[c])?b[c]=
a[c]:b[c]=f.stringify(a[c]);return b},throwEmptyResponse:function(){throw Error("Geoenrichment service returned empty response");}};c("esri.tasks.geoenrichment.taskHelper",b);return b})},"esri/tasks/geoenrichment/EnrichParameters":function(){define(["../../declare","../../SpatialReference","./EnrichParametersBase","./StandardIntersectingGeography"],function(k,g,f,e){return k("esri.tasks.geoenrichment.EnrichParameters",[f],{variables:null,returnGeometry:!1,outSR:null,intersectingGeographies:null,forStorage:!0,
constructor:function(c){this.variables=[];if(c&&(this.variables=c.analysisVariables||c.variables||null,c.returnGeometry&&(this.returnGeometry=!0),c.outSR&&(this.outSR=new g(c.outSR)),c.forStorage&&(this.forStorage=c.forStorage),c.intersectingGeographies)){this.intersectingGeographies=[];for(var b=0;b<c.intersectingGeographies.length;b++){var a=c.intersectingGeographies[b];if("standard"==a.geographyType)this.intersectingGeographies.push(new e(a));else if("external"==a.geographyType)throw Error("Not implemented");
}}},toJson:function(){var c=this.inherited(arguments);c.analysisVariables=this.variables;this.returnGeometry&&(c.returnGeometry=!0);this.outSR&&(c.outSR=this.outSR.toJson());this.forStorage||(c.forStorage=!1);if(this.intersectingGeographies){c.intersectingGeographies=[];for(var b=0;b<this.intersectingGeographies.length;b++)c.intersectingGeographies.push(this.intersectingGeographies[b].toJson())}return c}})})},"esri/tasks/geoenrichment/EnrichParametersBase":function(){define(["../../declare","../../SpatialReference",
"./StudyAreaOptions","./studyAreaFromJson","./studyAreaOptionsFromJson"],function(k,g,f,e,c){return k("esri.tasks.geoenrichment.EnrichParametersBase",null,{studyAreaOptions:null,studyAreas:null,countryID:null,datasetID:null,constructor:function(b){this.studyAreas=[];if(b){if(b.studyAreas){var a;b.inSR&&(a=b.inSR);for(var d=b.studyAreas,h=0;h<d.length;h++){var k=e(d[h]);a&&k.geometry&&k.geometry.setSpatialReference(new g(a));this.studyAreas.push(k)}}b.studyAreasOptions?this.studyAreaOptions=c(b.studyAreasOptions):
b.studyAreaOptions&&(this.studyAreaOptions=b.studyAreaOptions instanceof f?b.studyAreaOptions:c(b.studyAreaOptions));(a=b.useData)?(a.sourceCountry&&(this.countryID=a.sourceCountry),a.dataset&&(this.datasetID=a.dataset)):(b.countryID&&(this.countryID=b.countryID),b.datasetID&&(this.datasetID=b.datasetID))}},toJson:function(){for(var b={},a=[],c=0;c<this.studyAreas.length;c++)a.push(this.studyAreas[c].toJson());0<a.length&&(b.studyAreas=a);this.studyAreaOptions&&(b.studyAreasOptions=this.studyAreaOptions.toJson());
if(this.countryID||this.datasetID)a={},this.countryID&&(a.sourceCountry=this.countryID),this.datasetID&&(a.dataset=this.datasetID),b.useData=a;return b}})})},"esri/tasks/geoenrichment/studyAreaFromJson":function(){define(["./GeometryStudyArea","./AddressStudyArea","./StandardGeographyStudyArea","../../extend"],function(k,g,f,e){var c=function(b){if(b.geometry)return new k(b);if(b.address)return new g(b);if(b.layer)return new f(b)};e("esri.tasks.geoenrichment.studyAreaFromJson",c);return c})},"esri/tasks/geoenrichment/GeometryStudyArea":function(){define(["../../declare",
"../../geometry/jsonUtils","../../geometry/Geometry","./StudyArea"],function(k,g,f,e){return k("esri.tasks.geoenrichment.GeometryStudyArea",[e],{geometry:null,constructor:function(c){c&&c.geometry&&(this.geometry=c.geometry instanceof f?c.geometry:g.fromJson(c.geometry))},toJson:function(){var c=this.inherited(arguments);c.geometry=this.geometry.toJson();return c},getGeomType:function(){return this.geometry.type}})})},"esri/tasks/geoenrichment/StudyArea":function(){define(["../../declare","dojo/_base/lang",
"./StudyAreaOptions","./studyAreaOptionsFromJson","./GeographyLevel"],function(k,g,f,e,c){return k("esri.tasks.geoenrichment.StudyArea",null,{attributes:null,options:null,returnGeometry:!1,comparisonGeographyLevels:null,constructor:function(b){b&&(b.attributes&&(this.attributes=b.attributes),b.areaType?this.options=e(b):b.options instanceof f&&(this.options=b.options),b.returnGeometry&&(this.returnGeometry=!0),this.comparisonGeographyLevels=c.fromJsonArray(b.comparisonGeographyLevels||b.comparisonLevels));
this.comparisonGeographyLevels||(this.comparisonGeographyLevels=[])},toJson:function(){var b={};this.attributes&&(b.attributes=this.attributes);this.options&&g.mixin(b,this.options.toJson());this.returnGeometry&&(b.returnGeometry=!0);var a=c.toJsonArray(this.comparisonGeographyLevels);a&&(b.comparisonLevels=a);return b},getGeomType:function(){throw"Not implemented";}})})},"esri/tasks/geoenrichment/AddressStudyArea":function(){define(["../../declare","./StudyArea"],function(k,g){return k("esri.tasks.geoenrichment.AddressStudyArea",
[g],{address:null,constructor:function(f){f&&f.address&&(this.address=f.address)},toJson:function(){var f=this.inherited(arguments);f.address=this.address;return f},getGeomType:function(){return"point"}})})},"esri/tasks/geoenrichment/StandardGeographyStudyArea":function(){define(["../../declare","./StudyArea"],function(k,g){return k("esri.tasks.geoenrichment.StandardGeographyStudyArea",[g],{countryID:null,geographyLayerID:null,ids:null,constructor:function(f){if(f){var e=f.sourceCountry||f.countryID;
e&&(this.countryID=e);if(e=f.layer||f.geographyLayerID)this.geographyLayerID=e;f.ids&&(this.ids=f.ids)}},toJson:function(){var f=this.inherited(arguments);this.countryID&&(f.sourceCountry=this.countryID);this.geographyLayerID&&(f.layer=this.geographyLayerID);this.ids&&(f.ids=this.ids);return f},getGeomType:function(){return"polygon"}})})},"esri/tasks/geoenrichment/StandardIntersectingGeography":function(){define(["../../declare","./IntersectingGeography"],function(k,g){return k("esri.tasks.geoenrichment.StandardIntersectingGeography",
[g],{geographyLayerID:null,constructor:function(f){f&&(this.geographyLayerID=f.geographyLayer||f.geographyLayerID||null)},toJson:function(){var f=this.inherited(arguments);f.geographyType="standard";f.geographyLayer=this.geographyLayerID;return f}})})},"esri/tasks/geoenrichment/IntersectingGeography":function(){define(["../../declare"],function(k){return k("esri.tasks.geoenrichment.IntersectingGeography",null,{name:null,geometryType:"esriGeometryPoint",spatialRel:"esriSpatialRelIntersects",outFields:null,
constructor:function(g){g&&(this.name=g.name||null,this.outFields=g.outFields||null,g.intersectionInfo?(g.intersectionInfo.geometryType&&(this.geometryType=g.intersectionInfo.geometryType),g.intersectionInfo.spatialRel&&(this.spatialRel=g.intersectionInfo.spatialRel)):(g.geometryType&&(this.geometryType=g.geometryType),g.spatialRel&&(this.spatialRel=g.spatialRel)))},toJson:function(){return{name:this.name,outFields:this.outFields,intersectionInfo:{geometryType:this.geometryType,spatialRel:this.spatialRel}}}})})},
"esri/tasks/geoenrichment/ReportParameters":function(){define(["../../declare","./EnrichParametersBase"],function(k,g){return k("esri.tasks.geoenrichment.ReportParameters",[g],{reportID:null,format:"pdf",fields:null,constructor:function(f){f&&(this.reportID=f.report||f.reportID||null,this.format=f.format,this.fields=f.reportFields||f.fields||null)},toJson:function(){var f=this.inherited(arguments);this.reportID&&(f.report=this.reportID);this.format&&(f.format=this.format);this.fields&&(f.reportFields=
this.fields);return f}})})},"esri/dijit/geoenrichment/InfographicsOptionsItem":function(){define([],function(){return function(k,g){this.type=k;this.variables=g;this.index=this.title=null;this.isVisible=!0}})},"esri/dijit/geoenrichment/Geoenrichment":function(){define("esri/declare dojo/_base/lang dojo/on dojo/string esri/dijit/geoenrichment/promise/all esri/dijit/geoenrichment/when esri/graphic esri/geometry/jsonUtils esri/tasks/locator esri/tasks/FeatureSet esri/tasks/geoenrichment/GeoenrichmentTask esri/tasks/geoenrichment/EnrichParameters esri/tasks/geoenrichment/RingBuffer esri/tasks/geoenrichment/DriveBuffer esri/tasks/geoenrichment/GeographyLevel esri/tasks/geoenrichment/GeometryStudyArea esri/tasks/geoenrichment/AddressStudyArea esri/tasks/geoenrichment/studyAreaFromJson ./_Invoke ./config ./utils/ArrayUtil ./utils/StudyAreaKeyBuilder ./infographicUtils/bufferTitle ./infographicUtils/DataProvider".split(" "),
function(k,g,f,e,c,b,a,d,h,l,n,m,p,t,q,r,u,v,w,y,A,B,C,z){function E(a){a=B.studyAreaToJson(a);delete a.returnGeometry;delete a.comparisonLevels;delete a.attributes;return a=JSON.stringify(a)}var G=k(null,{_keys:null,_values:null,_capacity:5,constructor:function(a){this._keys=[];this._values={};a&&(this._capacity=a)},getValue:function(a){return this._values[a]},setValue:function(a,b){this._keys.push(a);this._values[a]=b;this._removeOverflow()},hasValue:function(a){return this._values.hasOwnProperty(a)},
_removeOverflow:function(){if(this._keys.length>this._capacity)for(var a=this._keys.splice(0,this._keys.length-this._capacity),b=0;b<a.length;b++)delete this._values[a[b]]},setCapacity:function(a){this._capacity=a;this._removeOverflow()},toJson:function(){var a={},b;for(b in this._values){var c=this._values[b];void 0===c||null===c||"number"==typeof c&&isNaN(c)||("string"==typeof c||"boolean"==typeof c||"number"==typeof c?a[b]=c:"object"==typeof c&&c.toJson&&(a[b]=c.toJson()))}return{keys:this._keys.slice(),
values:a,capacity:this._capacity}},fromJson:function(a,b){if(a){this._keys=a.keys;this._capacity=a.capacity;this._values={};for(var c in a.values)this._values[c]=b?b(a.values[c]):a.values[c]}}}),F=k(null,{_values:null,constructor:function(a){this._values=new G(a)},getValue:function(a){var b=this.keyToString(a);if(this._values.hasValue(b))return this._values.getValue(b);var c=this;return this.keyToValue(a).then(function(a){c._values.setValue(b,a);return a})},keyToString:function(a){return JSON.stringify(a)},
keyToValue:function(a){throw"Not implemented";},setCapacity:function(a){this._values.setCapacity(a)},toJson:function(){return this._values.toJson()},fromJson:function(a,b){a&&this._values.fromJson(a,b)}}),D=k([F],{keyToString:function(a){return JSON.stringify(a.toJson())},keyToValue:function(a){return(new h(y.locatorUrl)).locationToAddress(a).then(function(a){return e.substitute(y.addressFormat,a.address,function(a){return a||""})},function(a){return""})}}),H=k([F],{_countryValues:null,_geometries:null,
constructor:function(){this._countryValues=new G;this._geometries=new G(3)},keyToValue:function(a){var b=this,c=v(a.studyArea),d=c.returnGeometry,e,f;d&&(f=E(c),e=this._geometries.hasValue(f));var h=d&&!e,g=new n(y.server);g.token=y.token;for(var k=null,l=c.comparisonGeographyLevels.length-1;0<=l;l--)"Admin1"==c.comparisonGeographyLevels[l].layerID&&(k=c.comparisonGeographyLevels.splice(l,1)[0]);var p,q;k&&(p=JSON.stringify({variables:a.variables,country:a.country}),(q=this._countryValues.hasValue(p))||
c.comparisonGeographyLevels.push(k));l=new m;l.forStorage=!1;l.countryID=a.country;l.variables=a.variables;if(c.returnGeometry=h)l.outSR=c.geometry?c.geometry.spatialReference:a.outSR;l.studyAreas.push(c);return g.enrich(l).then(function(a){var c=a.featureSets[0].features;k&&(q?c.push(b._countryValues.getValue(p)):b._countryValues.setValue(p,c[c.length-1]));d&&(e?c[0].geometry=b._geometries.getValue(f):b._geometries.setValue(f,c[0].geometry));return a.featureSets[0]})},setCapacity:function(a){this.inherited(arguments);
this._countryValues.setCapacity(a)},toJson:function(){var a=this.inherited(arguments);a.countryValues=this._countryValues.toJson();a.geometries=this._geometries.toJson();return a},fromJson:function(b){b&&(this._countryValues.fromJson(b.countryValues,function(b){return new a(b)}),this._geometries.fromJson(b.geometries,function(a){return d.fromJson(a)}),this.inherited(arguments,[b,function(a){return new l(a)}]))}}),J=k([F],{metadata:null,_enrichCache:null,_addressCache:null,constructor:function(a){this._enrichCache=
new H(a);this._addressCache=new D(3)},keyToValue:function(a){var b=this,d=[],e=a.returnAddress;delete a.returnAddress;d.push(this._enrichCache.getValue(a));var f=v(a.studyArea);e&&d.push(this._addressCache.getValue(f.geometry));return c(d).then(function(a){var c=a[0],d=c.features[0];d.attributes[b.metadata.name]||(d.attributes[b.metadata.name]=C(f.getGeomType(),f.options),e?d.attributes[b.metadata.address]=a[1]:f instanceof u&&(d.attributes[b.metadata.address]=f.address.text));return c})},setCapacity:function(a){this.inherited(arguments);
this._enrichCache.setCapacity(a)},toJson:function(){var a=this.inherited(arguments);a.metadata=g.clone(this.metadata);a.enrichCache=this._enrichCache.toJson();a.addressCache=this._addressCache.toJson();return a},fromJson:function(a){a&&(this.metadata=a.metadata,this._enrichCache.fromJson(a.enrichCache),this._addressCache.fromJson(a.addressCache),this.inherited(arguments,[a,function(a){return new l(a)}]))}});return k("esri.dijit.geoenrichment.Geoenrichment",[z,w],{country:null,returnGeometry:!1,returnAddress:!1,
returnData:!0,studyArea:null,outSR:null,buffer:null,variables:null,levels:null,highestLevel:null,data:null,restartOnDone:!1,requests:null,started:!1,cache:null,constructor:function(){this.buffer=new p;this.cache=new J;this.cache.metadata=this.metadata},getData:function(){return this.data},getGeometry:function(){return this.data.features[0].geometry},isBusy:function(){return this.pendingInvoke("requestData")||this.requests||this.restartOnDone},setBuffer:function(a){this.buffer=a;this.invalidate()},
getBuffer:function(){return this.buffer},setStudyArea:function(a){this.studyArea=a;this.invalidate()},setVariables:function(a){A.arraysEqual(this.variables,a)||(this.variables=a,this.invalidateData())},setGeoLevels:function(a,b){A.arraysEqual(this.levels,a)&&this.highestLevel==b||(this.levels=a,this.highestLevel=b,this.invalidateData())},setReturnAddress:function(a){this.returnAddress!=a&&(this.returnAddress=a)&&this.invalidateData()},setCacheLimit:function(a){this.cache.setCapacity(a)},invalidateData:function(){this.data=
null;this.invalidate()},invalidate:function(){this.pendingInvoke("requestData")||(this.requests?this.restartOnDone=!0:(this.geometry=null,this.invoke("requestData")))},requestData:function(){if(this.studyArea&&this.variables&&this.buffer){this.requests=[];this.started||(f.emit(this,"start"),this.started=!0);var a,c=this.buffer;a=!1;if(this.studyArea instanceof r)switch(this.studyArea.geometry.type){case "point":a=this.returnAddress;break;case "polyline":this.buffer instanceof t&&(c=new p);break;case "polygon":c=
null}var d=g.clone(this.studyArea);!d.options&&c&&(d.options=c);if(this.levels)for(c=0;c<this.levels.length;c++)d.comparisonGeographyLevels.push(new q({layerID:this.levels[c]}));this.highestLevel&&d.comparisonGeographyLevels.push(new q({layerID:this.highestLevel}));d.returnGeometry=this.returnGeometry;a=b(this.cache.getValue({country:this.country,variables:this.variables,returnData:this.returnData,studyArea:B.studyAreaToJson(d),outSR:this.outSR,returnAddress:a}));this.requests.push(a);a.then(g.hitch(this,
this.handleResponse),g.hitch(this,this.handleError))}},stop:function(){this.restartOnDone=!1;this.cancelInvoke("requestData");if(this.requests)for(var a=this.requests.slice(0),b=0;b<a.length;b++)a[b].cancel()},handleResponse:function(a){try{this.data=a,this.data.features[0].attributes.isThisArea=!0,this.onDone(null)}catch(I){this.onDone(I)}},handleError:function(a){this.onDone(a)},onDone:function(a){this.requests=null;a?"CancelError"!==a.name&&(console.log(a),f.emit(this,"error",a)):f.emit(this,"data");
this.restartOnDone?(this.invalidate(),this.restartOnDone=!1):(f.emit(this,"end"),this.started=!1)}})})},"esri/tasks/locator":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/Deferred dojo/_base/json dojo/has ../kernel ../request ../deferredUtils ./Task ./AddressCandidate".split(" "),function(k,g,f,e,c,b,a,d,h,l,n){k=k(l,{declaredClass:"esri.tasks.Locator",_eventMap:{"address-to-locations-complete":["addresses"],"addresses-to-locations-complete":["addresses"],"location-to-address-complete":["address"],
"suggest-locations-complete":["suggestions"]},constructor:function(a){this._geocodeHandler=g.hitch(this,this._geocodeHandler);this._geocodeAddressesHandler=g.hitch(this,this._geocodeAddressesHandler);this._reverseGeocodeHandler=g.hitch(this,this._reverseGeocodeHandler);this.registerConnectEvents()},outSpatialReference:null,setOutSpatialReference:function(a){this.outSpatialReference=a},_geocodeHandler:function(a,b,c,d,e){try{var f=a.candidates,h;b=[];var g,k=f.length,l=a.spatialReference,m;for(g=0;g<
k;g++){h=f[g];if(m=h.location)m.spatialReference=l;b[g]=new n(h)}this._successHandler([b],"onAddressToLocationsComplete",c,e)}catch(C){this._errorHandler(C,d,e)}},_geocodeAddressesHandler:function(a,b,c,d,e){try{var f=a.locations;b=[];var h,g=f.length,k=a.spatialReference,l;for(h=0;h<g;h++){if(l=f[h].location)l.spatialReference=k;b[h]=new n(f[h])}this._successHandler([b],"onAddressesToLocationsComplete",c,e)}catch(B){this._errorHandler(B,d,e)}},addressToLocations:function(a,b,f,k,l){var m,n,p,q,r,
t,C,z;a.address&&(k=f,f=b,b=a.outFields,l=a.searchExtent,z=a.countryCode,m=a.magicKey,n=a.distance,C=a.categories,a.location&&this.normalization&&(p=a.location.normalize()),q=a.locationType,r=a.maxLocations,t=a.forStorage,a=a.address);l&&(l=l.shiftCentralMeridian());var E=this.outSpatialReference;a=this._encode(g.mixin({},this._url.query,a,{f:"json",outSR:E&&c.toJson(E.toJson()),outFields:b&&b.join(",")||null,searchExtent:l&&c.toJson(l.toJson()),category:C&&C.join(",")||null,countryCode:z||null,magicKey:m||
null,distance:n||null,location:p||null,locationType:q||null,maxLocations:r||null,forStorage:t||null}));var G=this._geocodeHandler,F=this._errorHandler,D=new e(h._dfdCanceller);D._pendingDfd=d({url:this._url.path+"/findAddressCandidates",content:a,callbackParamName:"callback",load:function(a,b){G(a,b,f,k,D)},error:function(a){F(a,k,D)}});return D},suggestLocations:function(a){var b;b=new e(h._dfdCanceller);a.hasOwnProperty("location")&&this.normalization&&(a.location=a.location.normalize());a.searchExtent&&
(a.searchExtent=a.searchExtent.shiftCentralMeridian());a=this._encode(g.mixin({},this._url.query,{f:"json",text:a.text,maxSuggestions:a.maxSuggestions,searchExtent:a.searchExtent&&c.toJson(a.searchExtent.toJson()),category:a.categories&&a.categories.join(",")||null,countryCode:a.countryCode||null,location:a.location||null,distance:a.distance||null},{f:"json"}));a=d({url:this._url.path+"/suggest",content:a,callbackParamName:"callback"});b._pendingDfd=a;a.then(g.hitch(this,function(a){a=a.suggestions||
[];this.onSuggestLocationsComplete(a);b.resolve(a)}),g.hitch(this,function(a){this._errorHandler(a);b.reject(a)}));return b},addressesToLocations:function(a,b,k){var l=this.outSpatialReference,m=[],n=a.categories,p=a.locationType,t=a.countryCode;f.forEach(a.addresses,function(a,b){m.push({attributes:a})});a=this._encode(g.mixin({},this._url.query,{category:n&&n.join(",")||null,locationType:p||null,sourceCountry:t||null},{addresses:c.toJson({records:m})},{f:"json",outSR:l&&c.toJson(l.toJson())}));
var y=this._geocodeAddressesHandler,A=this._errorHandler,B=new e(h._dfdCanceller);B._pendingDfd=d({url:this._url.path+"/geocodeAddresses",content:a,callbackParamName:"callback",load:function(a,c){y(a,c,b,k,B)},error:function(a){A(a,k,B)}});return B},_reverseGeocodeHandler:function(a,b,c,d,e){try{var f=new n({address:a.address,location:a.location,score:100});this._successHandler([f],"onLocationToAddressComplete",c,e)}catch(v){this._errorHandler(v,d,e)}},locationToAddress:function(a,b,f,k){a&&this.normalization&&
(a=a.normalize());var l=this.outSpatialReference;a=this._encode(g.mixin({},this._url.query,{outSR:l&&c.toJson(l.toJson()),location:a&&c.toJson(a.toJson()),distance:b,f:"json"}));var m=this._reverseGeocodeHandler,n=this._errorHandler,p=new e(h._dfdCanceller);p._pendingDfd=d({url:this._url.path+"/reverseGeocode",content:a,callbackParamName:"callback",load:function(a,b){m(a,b,f,k,p)},error:function(a){n(a,k,p)}});return p},onSuggestLocationsComplete:function(){},onAddressToLocationsComplete:function(){},
onAddressesToLocationsComplete:function(){},onLocationToAddressComplete:function(){}});b("extend-esri")&&g.setObject("tasks.Locator",k,a);return k})},"esri/tasks/AddressCandidate":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../geometry/Point"],function(k,g,f,e,c){k=k(null,{declaredClass:"esri.tasks.AddressCandidate",constructor:function(b){g.mixin(this,b);this.location=new c(this.location)}});f("extend-esri")&&g.setObject("tasks.AddressCandidate",k,e);return k})},
"esri/dijit/geoenrichment/_Invoke":function(){define(["esri/declare"],function(k){return k("esri.dijit.geoenrichment._Invoke",null,{_invokeTimeoutIDs:null,invoke:function(g,f){if(!this._invokeTimeoutIDs)this._invokeTimeoutIDs={};else if(this._invokeTimeoutIDs[g]){if(void 0===f)return;clearTimeout(this._invokeTimeoutIDs[g])}var e=this;this._invokeTimeoutIDs[g]=setTimeout(function(){e._invokeTimeoutIDs[g]=0;e[g]()},f||0)},pendingInvoke:function(g){return this._invokeTimeoutIDs?this._invokeTimeoutIDs[g]:
!1},cancelInvoke:function(g){if(this._invokeTimeoutIDs){var f=this._invokeTimeoutIDs[g];f&&(clearTimeout(f),this._invokeTimeoutIDs[g]=0)}}})})},"esri/dijit/geoenrichment/utils/StudyAreaKeyBuilder":function(){define([],function(){var k={studyAreaToJson:function(g){g=g.toJson();g.geometry&&(g.geometry.points?k._processPoints(g.geometry.points):g.geometry.paths?g.geometry.paths.forEach(k._processPoints):g.geometry.rings&&g.geometry.rings.forEach(k._processPoints));return g},_processPoints:function(g){g.forEach(function(f){f[0]=
parseFloat(f[0].toFixed(10));f[1]=parseFloat(f[1].toFixed(10))})}};return k})},"esri/dijit/geoenrichment/infographicUtils/bufferTitle":function(){define("dojo/string esri/tasks/geoenrichment/DriveBuffer esri/tasks/geoenrichment/IntersectingGeographies esri/tasks/geoenrichment/DriveUnits dojo/i18n!esri/nls/jsapi esri/extend".split(" "),function(k,g,f,e,c,b){function a(a,b){switch(a){case "polyline":return b instanceof g?k.substitute(c.lineBuffer[e.MILES],{radius:"1"}):k.substitute(c.lineBuffer[b&&
b.units||e.MILES],{radius:(b&&b.radii[0]||1).toString()});case "polygon":return c.polygon;default:return b instanceof g?k.substitute(c.pointDriveTime[b&&b.units||e.MILES],{radius:(b&&b.radii[0]||1).toString()}):b instanceof f?k.substitute(c.stdGeo,{level:b.geographyLevels[0].layerID}):k.substitute(c.pointRing[b&&b.units||e.MILES],{radius:(b&&b.radii[0]||1).toString()})}}c=c.geoenrichment.dijit.bufferTitle;b("esri.dijit.geoenrichment.bufferTitle",a);return a})},"esri/dijit/geoenrichment/infographicUtils/DataProvider":function(){define(["esri/declare",
"dojo/Evented"],function(k,g){return k([g],{metadata:null,constructor:function(){this.metadata={name:"StdGeographyName",address:"address"}},getData:function(){throw Error("Not implemented");}})})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/ge/LocalGEInfographic":function(){define(["dojo/_base/declare","dojo/_base/lang","./LocalGEBase","../data/AreaDataUtil"],function(k,g,f,e){return k(f,{_fieldNameToFieldInfoCache:null,_variableIdToFieldInfoCache:null,constructor:function(c,
b,a,d,f){this._fieldNameToFieldInfoCache={};this._variableIdToFieldInfoCache={};c.fieldInfos.forEach(function(a){this._fieldNameToFieldInfoCache[a.name]=a;this._variableIdToFieldInfoCache[a.variableID]=a},this);var h=c.calcData.calculatorName;(this._skipThisArea=a&&1<b.length)?(a=e.combineAreaDataObjectCalculators(b,h,{removeDuplicates:!0}),f=a.thisAreas.map(function(a,b){a=g.mixin({},a);a.StdGeographyName=d[b];a.isThisArea=!0;return a}),b={},b[h]={data:f.shift(),comparisonLevels:f.concat(a.comparisonLevels)}):
b=b[f||0];this._initGE(c.calcData.variables,b,h)},_propulateAttributesFromAreaData:function(c,b){for(var a in b){var d=this._fieldNameToFieldInfoCache[a];d?c[d.variableID]=b[a]:c[a]=b[a]}},_createField:function(c,b){var a=this.inherited(arguments),d=this._variableIdToFieldInfoCache[c];d?(a.alias=d.alias,a.decimals=d.decimals,a.units=d.showPercent?"pct":d.showCurrency?"currency":a.units,a.type=d.type||a.type):a.noVariableField=!0;return a},_filterAttributeField:function(c){return!c.noVariableField}})})},
"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/ge/LocalGEBase":function(){define("dojo/_base/declare dojo/_base/lang dojo/Evented dojo/on esri/graphic esri/tasks/FeatureSet ./_GEFilterSupport ../data/AreaDataUtil ../stdGeographies/StdGeographiesUtil esri/dijit/geoenrichment/ReportPlayer/countryConfig dojo/i18n!esri/nls/jsapi".split(" "),function(k,g,f,e,c,b,a,d,h,l,n){n=n.geoenrichment.dijit.ReportPlayer.ReportPlayer;return k([f,a],{metadata:{name:"StdGeographyName",address:"address"},
variables:null,data:null,_variableShortToFullNameCache:null,_areaData:null,_skipThisArea:!1,_initGE:function(a,b,c){this.variables=a||[];this._variableShortToFullNameCache={};this.variables.forEach(function(a){this._variableShortToFullNameCache[-1===a.indexOf(".")?a:a.substr(a.indexOf(".")+1)]=a},this);(a=b&&d.getAreaDataObjectCalculator(b,c))?this._areaData=[a.data].concat(a.comparisonLevels||[]):this._handleError(Error("Can't get calculator"))},setVariables:function(a){this.variables=a},_createFeatureSet:function(){var a=
new b,c=this._prepareFeatures();a.features=c;a.fields=this._prepareFields(c);this._prepareFieldAliases(a);return a},_prepareFeatures:function(){var a=[];if(!this._areaData)return a;for(var b=0;b<this._areaData.length;b++){var d={};this._propulateAttributesFromAreaData(d,this._areaData[b]);d.StdGeographyName=String(d.StdGeographyName||"");d.StdGeographyID=String(d.StdGeographyID||"");d.StdGeographyLevel=String(d.StdGeographyLevel||"");if(0!==b||this._skipThisArea){if(!d.StdGeographyName&&!d.StdGeographyID&&
!d.StdGeographyLevel){console.log("LocalGEBase.js can't add an unidentifiable geography.");continue}d.StdGeographyName=h.getAreaName(d)}else d.StdGeographyName=n.thisArea,d.isThisArea=!0;a.push(new c(null,null,d))}return a},_propulateAttributesFromAreaData:function(a,b){g.mixin(a,b)},_prepareFields:function(a){var b=[];if(!a.length)return b;a=a[0].attributes;for(var c in a)b.push(this._createField(c,a));return b},_stringAttrs:{StdGeographyName:1,StdGeographyID:1,StdGeographyLevel:1},_createField:function(a,
b){b=this._stringAttrs[a]||"string"===typeof b[a];return{name:a,alias:a,type:b?"esriFieldTypeString":"esriFieldTypeDouble",length:b?256:void 0,fullName:this._variableShortToFullNameCache[a],decimals:b?void 0:0,units:b?"other":"double",symbol:l.getCurrencySymbol()}},_prepareFieldAliases:function(a){a.fieldAliases={};a.fields.forEach(function(b){a.fieldAliases[b.name]=b.alias})},_handleError:function(a){setTimeout(function(){a&&e.emit(this,"error",a)}.bind(this))},isBusy:function(){return!1},setOutSR:function(){},
setGeoLevels:function(){},setStudyArea:function(){},stop:function(){}})})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/ge/_GEFilterSupport":function(){define(["dojo/_base/declare","esri/tasks/FeatureSet","esri/dijit/geoenrichment/infographicUtils/formatVariable","esri/dijit/geoenrichment/utils/ObjectUtil"],function(k,g,f,e){return k(null,{_filterRanges:null,_alwaysAllowThisAreasWhenFiltering:!1,getData:function(c){this.data||(this.data=this._createFeatureSet());return c&&c.ignoreFilters?
this.data:this._filterRanges&&this._filterRanges.length&&this.data?this._filterData(this.data):this.data},_createFeatureSet:function(){},_filterData:function(c){var b=new g;b.fields=c.fields;b.fieldAliases=c.fieldAliases;b.features=c.features.filter(function(a){return this._alwaysAllowThisAreasWhenFiltering&&a.attributes.isThisArea?!0:!this._filterRanges.some(function(b){var c=a.attributes[b.fieldName];return c<b.min||c>b.max})},this);return b},_excludeMap:{StdGeographyName:1,StdGeographyID:1,StdGeographyLevel:1,
isThisArea:1},getAttributeFields:function(){var c=this.getData({ignoreFilters:!0});if(!c)return[];for(var c=c.fields,b=[],a=0;a<c.length;a++){var d=c[a];!this._excludeMap[d.name]&&this._filterAttributeField(d)&&b.push({name:d.name,label:d.alias,decimals:0<=d.decimals?d.decimals:void 0,type:d.type,formatFunction:function(a){return function(b){return-1===a.decimals?e.formatNumber(b):f(a,b)}}(d)})}return b},_filterAttributeField:function(c){return this.variables&&this.variables.length?"HouseholdsByIncome.*"===
this.variables[0]?0===c.name.indexOf("HIN"):"HouseholdIncomeCurrentYear.*"===this.variables[0]?0===c.name.indexOf("EHYHNI"):"Age.*"===this.variables[0]?0===c.name.indexOf("FEM")||0===c.name.indexOf("MAL")||0===c.name.indexOf("ECYP"):-1!==this.variables[0].indexOf("AVGHHSZ")?-1!==c.name.indexOf("AVGHHSZ"):"RaceAndEthnicity.*"===this.variables[0]?-1!==c.name.indexOf("_CY_"):!0:!0},getAllGeographyAttributes:function(c){c=this.getData(c);if(!c)return[];c=c.features;for(var b=[],a=0;a<c.length;a++){var d=
c[a].attributes;d.isThisArea||b.push(d)}return b},setFilterRanges:function(c,b){this._filterRanges=c;this._alwaysAllowThisAreasWhenFiltering=b&&b.ignoreThisAreas},collectFilterRangesStats:function(c){if(!this.getData())return null;c=c||{};var b=c.additionalAttributes||[],b=b.concat(c.excludeThisAreas?this.getAllGeographyAttributes({ignoreFilters:!0}):this.getData({ignoreFilters:!0}).features.map(function(a){return a.attributes})),a=[];this.getAttributeFields().forEach(function(c){if("esriFieldTypeString"!==
c.type){var d={fieldName:c.name,alias:c.label,min:Infinity,max:-Infinity,decimals:c.decimals,dataArray:[]};a.push(d);b.forEach(function(a){a=a[c.name];d.min=Math.min(d.min,a);d.max=Math.max(d.max,a);d.dataArray.push(a)})}});return{filterRanges:a,numAreasTotal:b.length}}})})},"esri/dijit/geoenrichment/infographicUtils/formatVariable":function(){define(["dojo/number"],function(k){return function(g,f){var e=g.decimals||0;switch(g.units){case "pct":return k.format(f/100,{places:e,type:"percent"});case "currency":return k.format(f,
{places:e,type:"currency",symbol:g.symbol||"$"});default:return"esriFieldTypeDouble"==g.type?k.format(f,{places:e}):f}}})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/stdGeographies/StdGeographiesUtil":function(){define(["esri/dijit/geoenrichment/ReportPlayer/countryConfig"],function(k){var g={US_STATES_IDS:{"01":"AL","02":"AK","03":"AS","04":"AZ","05":"AR","06":"CA","08":"CO","09":"CT",10:"DE",11:"DC",12:"FL",13:"GA",14:"GU",15:"HI",16:"ID",17:"IL",18:"IN",19:"IA",20:"KS",
21:"KY",22:"LA",23:"ME",24:"MD",25:"MA",26:"MI",27:"MN",28:"MS",29:"MO",30:"MT",31:"NE",32:"NV",33:"NH",34:"NJ",35:"NM",36:"NY",37:"NC",38:"ND",39:"OH",40:"OK",41:"OR",42:"PA",43:"PR",44:"RI",45:"SC",46:"SD",47:"TN",48:"TX",49:"UT",50:"VT",51:"VA",53:"WA",54:"WV",55:"WI",56:"WY"},CA_PROVINCE_IDS:{10:"NL",59:"BC",60:"YT",61:"NT",62:"NU",11:"PE",12:"NS",13:"NB",24:"QC",35:"ON",46:"MB",47:"SK",48:"AB"},BUILDER_DATA:{US_census:{"US.CD":"%name%, %state%","US.CSD":"%name%, %state%","US.Counties":"%name%, %state%",
"US.Places":"%city%, %state%","US.ZIP5":"%id% (%name%)"},CA_census:{"CAN.FSA":"%id% (%name%)","CAN.CD":"%name%, %province%"}},getAreaName:function(f){var e=k.getCountryID(),c=k.getHierarchyID();if(!e||!c)return f.StdGeographyName;var e=e+"_"+c,b=g.BUILDER_DATA[e];b||(c=k.getGeographiesModel(),b=g.BUILDER_DATA[e]={},c.getLevels(!0).forEach(function(a){b[a.id.toUpperCase()]="%id% (%name%)"}));return g.buildDescription(f.StdGeographyID,f.StdGeographyName,f.StdGeographyLevel,b)},buildDescription:function(f,
e,c,b){b=b&&b[c.toUpperCase()];e=e||f;return"%id% (%name%)"===b&&0<=e.indexOf(f)?e:b?b.replace(/%(\w+)%/g,function(a,b){return g._buildDescriptionPart(a,b,f,e,c)}):e},_buildDescriptionPart:function(f,e,c,b,a){try{a.substr(0,a.indexOf(".")).toLowerCase();var d=g["_build_"+e];return d&&d(c,b)}catch(h){}return f},_build_id:function(f,e){return f},_build_name:function(f,e){return e},_build_city:function(f,e){return e.replace(/(\s|^)(\w)/g,function(c,b,a){return b+a.toUpperCase()})},_build_state:function(f,
e){return(f=f&&2<=f.length?g.US_STATES_IDS[f.substr(0,2)]:null)?f:"??"},_build_province:function(f,e){return(f=f&&2<=f.length?g.CA_PROVINCE_IDS[f.substr(0,2)]:null)?f:"??"}};return g})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/attachments/DefaultAttachmentsStore":function(){define(["dojo/_base/declare","esri/dijit/geoenrichment/promise/all","esri/dijit/geoenrichment/when","./WebMapAttachmentStore"],function(k,g,f,e){return k(null,{supportsMultipleAreas:!0,_analysisAreas:null,
_currentAreaIndex:-1,_webMapStores:null,constructor:function(c){this._analysisAreas=c},initialize:function(){var c=this;this._webMapStores={};return g(this._analysisAreas.map(function(b,a){if(b=b.feature||b.location||b.additionalFeatures&&b.additionalFeatures[0])return(c._webMapStores[a]=new e(b)).initialize()})).then(function(){return c})},_callStoreMethod:function(c){var b=this._webMapStores[this._currentAreaIndex];return b?f(b[c](),function(a){return a?a.slice():[]}):[]},getImages:function(){return this._callStoreMethod("getImages")},
getAttributes:function(){return this._callStoreMethod("getAttributes")},getNotes:function(){return this._callStoreMethod("getNotes")},setCurrentAnalysisAreaIndex:function(c){this._currentAreaIndex=c}})})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/attachments/WebMapAttachmentStore":function(){define("dojo/_base/declare dojo/_base/lang esri/dijit/geoenrichment/when esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/attachments/AttributesUtil esri/dijit/geoenrichment/utils/requests/UniversalClient esri/dijit/geoenrichment/utils/ImageUtil ./AttachmentsUtil".split(" "),
function(k,g,f,e,c,b,a){var d={_cache:{},getThumbnail:function(a){this._cache[a.url]||(this._cache[a.url]=this._getDataURL(a));return this._cache[a.url]},_getDataURL:function(a){return 0===a.url.indexOf("data:")?a.url:c.request(a.url).then(function(c){return c&&c.Attachment&&b.base64DataToDataURL(c.Attachment,a.contentType)}).otherwise(function(){return null})}};return k(null,{supportsMultipleAreas:!1,_attachmentInfos:null,_feature:null,_fieldInfos:null,_attributes:null,constructor:function(a,b){this._feature=
a;this._attachmentInfos=b},initialize:function(){this._tryGetFieldInfosAndAttributes();return f(this._attachmentInfos||this._tryGetAttachmentInfos()).always(function(){return!!this._attachmentInfos}.bind(this))},_tryGetFieldInfosAndAttributes:function(){var a=this._feature.getLayer();this._fieldInfos=(a=this._feature.infoTemplate||a&&a.infoTemplate)&&a.info.fieldInfos||[];this._attributes=g.mixin({},this._feature.attributes)},_tryGetAttachmentInfos:function(){return f(a.getFeatureAttachmentInfos(this._feature),
function(a){this._attachmentInfos=a}.bind(this))},getImages:function(){return this._attachmentInfos?this._attachmentInfos.map(function(a){return{getThumbnail:function(){return d.getThumbnail(a)},getUrl:function(){return a.url}}}):[]},getAttributes:function(){return e.composeAttributesFromFieldInfos(this._fieldInfos,this._attributes)},getNotes:function(){return[]},setCurrentAnalysisAreaIndex:null})})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/attachments/AttachmentsUtil":function(){define([],
function(){return{getFeatureAttachmentInfos:function(k){var g=k.getLayer();if(g&&g.hasAttachments&&g.queryAttachmentInfos&&g.objectIdField)return g.queryAttachmentInfos(k.attributes[g.objectIdField])}}})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/AdjustableGrid":function(){define("dojo/_base/declare dojo/_base/lang dojo/store/Memory esri/dijit/geoenrichment/promise/all esri/dijit/geoenrichment/when dojo/dom-class dojo/dom-construct dijit/_WidgetBase dijit/_TemplatedMixin ./_GridChartViewSupport ./_GridHighlightSupport ./_GridFilterSupport ./_GridSortSupport ./_ResizableColumnsSupport ./_DataDrillingSupport esri/dijit/geoenrichment/ReportPlayer/config ./valueField/ValueField ./valueField/_ResizableField ./coreUtils/GridBackgroundForegroundUtil ./coreUtils/GridFloatingTablesUtil ./coreUtils/GridBorderUtil ./coreUtils/GridDataUtil ./coreUtils/GridQueryUtil ./coreUtils/GridLayoutCalculator ./coreUtils/GridCellRenderer ./coreUtils/GridStyleUtil ./coreUtils/GridLayoutSizer ./coreUtils/_GridDebugUtil ../sections/SectionTypes esri/dijit/geoenrichment/utils/ArrayUtil esri/dijit/geoenrichment/utils/DeviceUtil esri/dijit/geoenrichment/utils/async/AsyncQueue esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/ViewModes esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/tableJson/TableJsonUtil dojo/text!../templates/AdjustableGrid.html".split(" "),
function(k,g,f,e,c,b,a,d,h,l,n,m,p,t,q,r,u,v,w,y,A,B,C,z,E,G,F,D,H,J,K,I,L,M,N){var Q={defaultRowHeight:15.33,rowMinHeight:3,columnMinWidth:3,defaultChartRowHeight:150},O={rowMinHeight:3,columnMinWidth:3},P=k([u,v]);return k([d,h,l,n,m,p,t,q],{isGrid:!0,templateString:N,viewModel:null,theme:null,columns:null,store:null,backgroundSectionJson:null,foregroundSectionJson:null,enableBackgroundForeground:!1,forceCreateFloatingTables:!1,backgroundFloatingTablesSectionJson:null,foregroundFloatingTablesSectionJson:null,
isFloatingTable:!1,isBackgroundFloatingTable:!1,layoutDefaults:null,stickToRight:!1,looseResize:!1,keepGridWidthWhenResized:!1,keepGridHeightWhenResized:!1,hasResizableColumns:!1,disableResizableColumnsAutoDetection:!1,fitParentWhenResized:!1,parentWidget:null,parentElementInPageInfo:null,viewPortContainer:null,parentGrid:null,reportContainerPageNode:null,isReportContainerPageGrid:!1,getPreviewValueFunction:null,currentFeatureIndex:null,currentFeatureAttributes:null,fixedViewMode:null,fixedSpecificViewMode:null,
fieldCellClass:null,enableAsyncRendering:!1,asyncBatchSize:1,enableNumberAnimation:!1,applyThemeStyle:!0,inheritThemeBackground:!0,previewModeBorderLineStyle:null,editModeBorderLineStyle:null,renderBordersFromTheme:!1,noThemeBorderLineStyle:null,hasRealBorders:!1,trimTextIfOverflows:!1,autoDetectUrl:!1,shouldStayWithinParent:!0,infographicBenchmarkController:null,backgroundSection:null,foregroundSection:null,backgroundFloatingTablesSection:null,foregroundFloatingTablesSection:null,_cellRenderer:null,
_fieldCells:null,_dynamicBindings:null,_isBeingResizedFlag:!1,_renderCellsQueue:null,_renderCellsContentQueue:null,postCreate:function(){this.inherited(arguments);this.layoutDefaults=g.mixin({},Q,this.layoutDefaults);r.isPlayerOnServer&&(this.hasResizableColumns=this.enableAsyncRendering=!1,this.disableResizableColumnsAutoDetection=!0)},refresh:function(a){if(this.domNode)return!this.isReportContainerPageGrid&&!this.hasResizableColumns&&this.viewModel.dynamicReportInfo&&1<this.columns.length&&2<this.store.data.length&&
!this.disableResizableColumnsAutoDetection&&(this.fitParentWhenResized=this.hasResizableColumns=this.keepGridWidthWhenResized=!0,this.layoutDefaults.columnMinWidth=30),K.isMobileDevice()&&(this.hasResizableColumns=!1),b[this.hasResizableColumns?"add":"remove"](this.domNode,"hasResizableColumns"),z.markAsDirty(this),this._doRefresh(a),this.getRenderPromise()},_doRefresh:function(c){this.mainNode&&this.store&&(this._destroyTableContent(),a.empty(this.mainNode),D.refreshStart(this),this._recoverOriginalData(),
this._applyFilterToStoreData(),this._applySortingToStoreData(),this.isEmptyTable()?a.create("div",{"class":"adjustableGrid_emptyRow"},this.mainNode):(b.remove(this.domNode,"esriGEAdjustableGridSingleCell esriGEAdjustableGridMultiCell"),b.add(this.domNode,this.isSingleCelledTable()?"esriGEAdjustableGridSingleCell "+(M.getTableSubtype(this)||""):"esriGEAdjustableGridMultiCell"),z.recalcRows(this),c=c||{},void 0===c.stickToRight&&(c.stickToRight=this.stickToRight),z.recalcColumns(this,c),z.autoSnapLayout(this),
this._createCellsFromStoreData(),this._renderCells(),z.positionCells(this)),this.refreshBackground(),this._renderBackgroundFloatingTables(),this._renderForegroundFloatingTables(),this.refreshForeground(),this._buildSortControls(),D.refreshEnd(this))},_originalData:null,_getOriginalData:function(){return this._originalData||this.store.data},_getSavedOriginalData:function(){return this._originalData},_saveOriginalData:function(){this._originalData||(this.store.data=g.clone(this.store.data),this._originalData=
g.clone(this.store.data))},_recoverOriginalData:function(){this._originalData&&(this.store.data=g.clone(this._originalData))},_createCellsFromStoreData:function(){var a=this;this.enableAsyncRendering&&(this._renderCellsQueue=new I({onFinished:function(){a.onRendered()}}));this.store.data.forEach(function(b){a.columns.forEach(function(c,d){if(!(b.excludedIndexHorizontal&&b.excludedIndexHorizontal[d]||b.excludedIndexVertical&&b.excludedIndexVertical[d])){d=c.index+(B.getDataColumnSpan(b,c.field)||1)===
a.columns.length;var e=b.index+(B.getDataRowSpan(b,c.field)||1)===a.store.data.length;a._createField(b,c,d,e)}})})},_getFieldClass:function(a){return this.hasResizableColumns&&0===a.gridData.index?P:u},_createField:function(a,b,c,d){var e="adjustableGridField field-"+b.field+(c?" lastInRow":"")+(d?" lastRow":"");c={viewModel:this.viewModel,fieldStyle:G.combineCellStyle(this,a,b),defaultBorderStyle:this._getDefaultBorderStyle(a,b,c,d),"class":e,fieldCellClass:this.fieldCellClass,trimTextIfOverflows:this.trimTextIfOverflows,
autoDetectUrl:this.autoDetectUrl,rowId:a.id,columnId:b.id,parentGrid:this,parentWidget:this,uniqueId:a.id+b.id,gridData:a,column:b,isLastInRow:c,isLastInColumn:d};this.hasResizableColumns&&(c.allowVerticalResizing=!1,c.showColumnRowSizeTooltip=!0);c=this._doCreateFieldFromParams(c,a,b);this.hasResizableColumns&&this._populateFieldForResizableColumns(c,a,b);c.domNode.style.position="absolute";this._fieldCells.push(c);return c},_getDefaultBorderStyle:function(a,b,c,d){return A.getBorderStyle(this,a,
b,c,d)},getRenderPromise:function(){var a=[];a.push(this._renderCellsQueue&&this._renderCellsQueue.getPromise());a.push(this._renderCellsContentQueue&&this._renderCellsContentQueue.getPromise());this.getFieldCells().forEach(function(b){b.content&&b.content.getRenderPromise&&a.push(b.content.getRenderPromise())});["backgroundSection","backgroundFloatingTablesSection","foregroundFloatingTablesSection","foregroundSection"].forEach(function(b){this[b]&&a.push(this[b].getRenderPromise())},this);return e(a)},
isBeingRendered:function(){return this._renderCellsQueue&&!this._renderCellsQueue.isFinished()||this._renderCellsContentQueue&&!this._renderCellsContentQueue.isFinished()},_doCreateFieldFromParams:function(a,b,c){return(new (this._getFieldClass(a))(a)).placeAt(this.mainNode)},_renderCells:function(){function a(a){b._renderFieldContent(a);b._postCreateFieldCell(a);b._updateCellViewMode(a)}var b=this;this._renderCellsQueue?J.splitArrayToBunches(this._fieldCells,this.asyncBatchSize).forEach(function(c){b._renderCellsQueue.add(function(){c.forEach(a)},
{delayAfter:0})}):(this._fieldCells.forEach(a),this.onRendered())},_renderFieldContent:function(a){this._trySetupDataDrilling(a);this._preRenderFieldCell(a);var b=this._getCellRenderer().renderCellContent(a);b&&b.then&&(this._renderCellsContentQueue=this._renderCellsContentQueue||new I({onFinished:function(){}}),this._renderCellsContentQueue.add(b));this._configureRenderedCellContentSpecificStyles(a);this._postRenderFieldCell(a)},_preRenderFieldCell:function(a){},_postRenderFieldCell:function(a){},
_getCellRenderer:function(){this._cellRenderer||(this._cellRenderer=new E);return this._cellRenderer},_configureRenderedCellContentSpecificStyles:function(a){b[B.isNumericVariableFieldCell(a)?"add":"remove"](a.domNode,"hasNumericVariableFieldInfo");b[B.isStringVariableFieldCell(a)?"add":"remove"](a.domNode,"hasStringVariableFieldInfo");b[B.getConditionalFormatting(a)?"add":"remove"](a.domNode,"hasConditionalFormatting")},_postCreateFieldCell:function(a){},refreshBackground:function(){this.enableBackgroundForeground&&
(this.backgroundSection&&this.backgroundSection.destroy(),this.backgroundSection=w.renderBackground(this,this.backgroundSectionJson,this._getBackgroundSectionCreationParams()))},_getBackgroundSectionCreationParams:function(){return this._getContentLoadingParams()},refreshForeground:function(){this.enableBackgroundForeground&&(this.foregroundSection&&this.foregroundSection.destroy(),this.foregroundSection=w.renderForeground(this,this.foregroundSectionJson,this._getForegroundSectionCreationParams()))},
_getForegroundSectionCreationParams:function(){return this._getContentLoadingParams()},_renderBackgroundFloatingTables:function(){this.backgroundFloatingTablesSection&&this.backgroundFloatingTablesSection.destroy();this.forceCreateFloatingTables&&(this.backgroundFloatingTablesSectionJson=this.backgroundFloatingTablesSectionJson||{type:H.TABLE_BACKGROUND_FLOATING_PANELS,stack:[]});this.backgroundFloatingTablesSection=y.renderFloatingTables(this,this.backgroundFloatingTablesSectionJson,this._getFloatingTablesSectionParams(!0),
!0);this._postProcessFloatingTablesSection(this.backgroundFloatingTablesSection,!0)},_renderForegroundFloatingTables:function(){this.foregroundFloatingTablesSection&&this.foregroundFloatingTablesSection.destroy();this.forceCreateFloatingTables&&(this.foregroundFloatingTablesSectionJson=this.foregroundFloatingTablesSectionJson||{type:H.TABLE_FOREGROUND_FLOATING_PANELS,stack:[]});this.foregroundFloatingTablesSection=y.renderFloatingTables(this,this.foregroundFloatingTablesSectionJson,this._getFloatingTablesSectionParams(!1),
!1);this._postProcessFloatingTablesSection(this.foregroundFloatingTablesSection,!1)},_getFloatingTablesSectionParams:function(a){var b=this,c={tableClass:function(a){return(a=M.getTableSubtype(a))?"outerFloatingAdjustableGrid floatingTableSimpleElement "+a:"outerFloatingAdjustableGrid floatingTableComplexElement"},tableParams:g.mixin({isFloatingTable:!0,isBackgroundFloatingTable:a,parentGrid:this,inheritThemeBackground:this.inheritThemeBackground,applyThemeStyle:this.applyThemeStyle,layoutDefaults:g.mixin({},
this.layoutDefaults,O),_preRenderFieldCell:function(a){b._preRenderFieldCell(a)},_postCreateFieldCell:function(a){b._postCreateFieldCell(a)}},this._getContentLoadingParams())};this._addFloatingTablesSectionCreationParams(c,a);return c},_addFloatingTablesSectionCreationParams:function(a,b){return a},_postProcessFloatingTablesSection:function(a,b){},getVisualState:function(){var a={type:"table",cells:this.getFieldCells().map(function(a){return a.content&&a.content.getVisualState&&a.content.getVisualState()})},
b=this.getSorting(this);b&&(a.sorting=b);if(b=this._filterRanges?g.clone(this._filterRanges):null)a.filterRanges=b;this.presetFilter&&(a.hasPresetFilter=!0);this.backgroundSection&&(a.backgroundSection=this.backgroundSection.getVisualState());this.backgroundFloatingTablesSection&&(a.backgroundFloatingTablesSection=this.backgroundFloatingTablesSection.getVisualState());this.foregroundFloatingTablesSection&&(a.foregroundFloatingTablesSection=this.foregroundFloatingTablesSection.getVisualState());this.foregroundSection&&
(a.foregroundSection=this.foregroundSection.getVisualState());this._chartViewInfo&&(a.isChartView=!0,a.chartViewInfo=g.clone(this._chartViewInfo));return a},setVisualState:function(a){var b=this;if(a)return c(this.getRenderPromise(),function(){var d=[];a.cells&&b.getFieldCells().forEach(function(b,c){b.content&&b.content.setVisualState&&d.push(b.content.setVisualState(a.cells[c]))});["backgroundSection","backgroundFloatingTablesSection","foregroundFloatingTablesSection","foregroundSection"].forEach(function(c){a[c]&&
b[c]&&d.push(b[c].setVisualState(a[c]))});return e(d).then(function(){return c(a.filterRanges&&b.setFilterRanges(a.filterRanges),function(){return c(a.sorting&&b.setSorting(a.sorting),function(){return a.isChartView&&b.tableToChart(a.chartViewInfo)})})})})},_setCellWidth:function(a,b){z.adjustColumnWidth(this,a.gridData,a.column,b);z.positionCells(this)},_setCellHeight:function(a,b){z.adjustRowHeight(this,a.gridData,a.column.field,b);z.positionCells(this)},setCellWidth:function(a,b){this._setCellWidth(a,
b)},setCellHeight:function(a,b){this._setCellHeight(a,b)},_maxWidth:500,_width:500,_height:0,_spaceAfter:0,_maxHeight:0,_left:0,_top:0,_alternatingStyle:null,_opacity:1,_fixedCellsOpacity:1,getMaxHeight:function(a){return this._maxHeight},setMaxHeight:function(a){this._maxHeight=a},getHeight:function(a,b){return this._height+(!1!==b?this._top:0)+(a?this._spaceAfter||0:0)},getMaxWidth:function(){return this._maxWidth},setMaxWidth:function(a,b){var c=0;b&&b.preserveRightOffset&&(z.recalcGridWidth(this),
c=this.getAllowedWidth(),c=(c-this._width)/c);this._maxWidth=a;b&&b.resizeToFitAllowedWidth&&this.resizeToFitAllowedWidth({rightOffsetWeight:b.preserveRightOffset?c:0})},getLeft:function(){return this._left},getTop:function(){return this._top},setSpaceAfter:function(a){this._spaceAfter=a},getAllowedWidth:function(){return this._maxWidth-this._left},getAllowedWidthFromParent:function(){return this.shouldStayWithinParent?this.domNode.parentNode.clientWidth-this._left:1E6},getTableBox:function(){var a=
this.getSettings().style;return{l:a.left,t:a.top,w:a.width,h:this.getHeight(!1,!1)}},resizeToFitAllowedWidth:function(a){this.isEmptyTable()||F.resizeToFitAllowedWidth(this,a)},resizeToFitWidth:function(a){this.isEmptyTable()||F.resizeToFitWidth(this,a)},resizeToFitHeight:function(a,b){this.isEmptyTable()||(!1!==b&&(a-=this._top),F.resizeToFitHeight(this,a))},scaleProportionallyWithinParent:function(a){F.scaleProportionallyWithinParent(this,a)},collapseContent:function(){this.getFieldCells({floatingCells:!0}).forEach(function(a){a.content&&
a.content.collapseContent&&a.content.collapseContent()})},hasHiddenContent:function(){return this._checkNeedResizeRowHeightToShowCellsContent(!1)},resizeRowHeightToShowCellsContent:function(){this._checkNeedResizeRowHeightToShowCellsContent(!0);return this.getRenderPromise()},_checkNeedResizeRowHeightToShowCellsContent:function(a){var b=this,c;this.getFieldCells({floatingCells:!0}).forEach(function(d){if(d.content&&d.content.getPreferredHeight){var e=d.content.getPreferredHeight();e>d.getHeight()&&
(a&&b._setCellHeight(d,e+10),c=!0)}});return c},_tableAttributes:null,_scaleToFitWidth:void 0,_scaleToFitHeight:void 0,setSettings:function(a){var b,c=this._left,d=this.isMultiFeatureTable();this.columns.forEach(function(a){a.style&&"number"===typeof a.style.width&&(a._wasBeforeRecalc=!0)});if(a.style){void 0!==a.style.left&&this.setPosition(a.style.left);void 0!==a.style.top&&this.setPosition(void 0,a.style.top);void 0!==a.style.spaceAfter&&(this._spaceAfter=a.style.spaceAfter);a.style.width&&(this._width=
a.style.width);a.style.alternatingStyle&&(this._alternatingStyle=a.style.alternatingStyle);this.setOpacity(a.style);var e=this._width;this._width=Math.min(this._width,this.getAllowedWidth());if(this._width!==e||c!==this._left)b=!0}a.attributes&&(this._adjustColumnsForSettings(a)&&(b=!0),this._tableAttributes=a.attributes,this._tableAttributes.rowCount&&this._tableAttributes.rowCount!==this.store.data.length&&this._adjustRowsForSettings(a),delete this._tableAttributes.rowCount,delete this._tableAttributes.columnCount);
void 0!==a.scaleToFitWidth&&(this._scaleToFitWidth=a.scaleToFitWidth);void 0!==a.scaleToFitHeight&&(this._scaleToFitHeight=a.scaleToFitHeight);this._tableAttributes=this._tableAttributes||{};var f=[];this.columns.forEach(function(a){a._wasBeforeRecalc&&f.push(a);delete a._wasBeforeRecalc});if(!d&&this.isMultiFeatureTable())for(c=this.columns.length-1;c>=this.getNumFixedColumns();c--)d=f.indexOf(this.columns[c]),-1!==d&&f.splice(d,1);(a.viewMode||a.specificViewMode)&&this._tryApplyNewViewMode(a.viewMode,
a.specificViewMode);void 0!==a.noChartView&&(this.noChartView=a.noChartView);void 0!==a.maxWidth&&this.setMaxWidth(a.maxWidth);void 0!==a.maxHeight&&this.setMaxHeight(a.maxHeight);this.viewModel.dynamicReportInfo&&this.getNumDynamicColumns()?(z.trimColumnsForNumberOfFeatures(this),this.refresh({resetWidth:!0})):this.viewModel.dynamicReportInfo&&this.getNumDynamicRows()?(z.adjustRowsForNumberOfFeatures(this),this.refresh()):b?this.refresh({resetWidth:!0,columnsToPreserve:f}):this.refresh()},setPosition:function(a,
b){void 0!==a&&(this._left=a||0,this.domNode.style.left=this._left+"px");void 0!==b&&(this._top=b||0,this.domNode.style.top=this._top+"px")},setOpacity:function(a){"number"===typeof a.opacity&&(this._opacity=Math.max(0,Math.min(1,a.opacity)),this.domNode.style.opacity=this._opacity,b[0===this._opacity?"add":"remove"](this.domNode,"esriGENonInteractable"));"number"===typeof a.fixedCellsOpacity&&(this._fixedCellsOpacity=Math.max(0,Math.min(1,a.fixedCellsOpacity)),this.mainNode.style.opacity=this._fixedCellsOpacity,
b[0===this._fixedCellsOpacity?"add":"remove"](this.mainNode,"esriGENonInteractable"))},_adjustColumnsForSettings:function(a){return!1},_adjustRowsForSettings:function(a){},getSettings:function(){z.recalcGridWidth(this);return{style:{width:this._width,left:this._left,top:this._top,spaceAfter:this._spaceAfter,alternatingStyle:this._alternatingStyle,opacity:this._opacity,fixedCellsOpacity:this._fixedCellsOpacity},attributes:g.mixin(g.clone(this._tableAttributes),{columnCount:this.columns.length,rowCount:this.store.data.length}),
presetFilter:this.presetFilter,presetSorting:this.presetSorting,scaleToFitWidth:this._scaleToFitWidth,scaleToFitHeight:this._scaleToFitHeight,noChartView:this.noChartView}},getOpacity:function(){return{opacity:this._opacity,fixedCellsOpacity:this._fixedCellsOpacity}},needScaleToFitWidth:function(){return this._scaleToFitWidth},needScaleToFitHeight:function(){return this._scaleToFitHeight},isEmptyTable:function(){return M.isEmptyTable(this)},isSingleCelledTable:function(){return M.isSingleCelledTable(this)},
isMultiDataTable:function(){return M.isMultiDataTable(this)},isMultiFeatureTable:function(){return!!this.getNumDynamicColumns()||!!this.getNumDynamicRows()},getNumFixedColumns:function(){return this._tableAttributes&&this._tableAttributes.fixedColumns||0},setNumFixedColumns:function(a){this._tableAttributes.fixedColumns=a},getNumDynamicColumns:function(){return this._tableAttributes&&this._tableAttributes.dynamicColumns||0},setNumDynamicColumns:function(a){this._tableAttributes.dynamicColumns=a},
getNumFixedRows:function(){return this._tableAttributes&&this._tableAttributes.fixedRows||0},setNumFixedRows:function(a){this._tableAttributes.fixedRows=a},getNumDynamicRows:function(){return this._tableAttributes&&this._tableAttributes.dynamicRows||0},setNumDynamicRows:function(a){this._tableAttributes.dynamicRows=a},_viewMode:null,_specificViewMode:null,_viewModeKey:null,getViewMode:function(){return this._viewMode},getSpecificViewMode:function(){return this._specificViewMode},setViewMode:function(a,
b,c){!this._tryApplyNewViewMode(a,b)||c&&c.noUpdate||(this._fieldCells&&this._fieldCells.forEach(function(a){this._updateCellViewMode(a)},this),this.backgroundSection&&this.backgroundSection.setViewMode(this._viewMode,this._specificViewMode),this.backgroundFloatingTablesSection&&this.backgroundFloatingTablesSection.setViewMode(this._viewMode,this._specificViewMode),this.foregroundFloatingTablesSection&&this.foregroundFloatingTablesSection.setViewMode(this._viewMode,this._specificViewMode),this.foregroundSection&&
this.foregroundSection.setViewMode(this._viewMode,this._specificViewMode))},_tryApplyNewViewMode:function(a,c){var d="function"===typeof this.fixedViewMode?this.fixedViewMode(this):this.fixedViewMode,e="function"===typeof this.fixedSpecificViewMode?this.fixedSpecificViewMode(this):this.fixedSpecificViewMode;a=d||a||this._viewMode;c=e||c||this._specificViewMode;d=a+(c?JSON.stringify(c):"");if(this._viewModeKey===d)return!1;this._viewModeKey=d;this._viewMode=a;this._specificViewMode=c;b.remove(this.domNode,
"adjustableGridPreviewMode adjustableGridEditMode ");b.add(this.domNode,this._viewMode===L.EDIT?"adjustableGridEditMode":"adjustableGridPreviewMode");return!0},_updateCellViewMode:function(a){a.setDefaultBorderStyle(this._getDefaultBorderStyle(a.gridData,a.column,a.isLastInRow,a.isLastInColumn));a.content&&a.content.setViewMode&&a.content.setViewMode(this._viewMode,this._specificViewMode);this._getCellRenderer().updateViewMode(a)},_getContentLoadingParams:function(){return{onContentLoadingStart:this.onContentLoadingStart.bind(this),
onContentLoadingEnd:this.onContentLoadingEnd.bind(this)}},getFieldCells:function(a){var b=[],b=a&&a.floatingCells?this.getBackgroundFloatingCells().concat(this._fieldCells).concat(this.getForegroundFloatingCells()):this._fieldCells;a&&a.topFirst&&(b=b.slice().reverse());return b},queryCells:function(a){return C.queryCells(this,a)},getFirstCell:function(){return this.getFieldCells()[0]},getCellText:function(a){return B.getFieldCellValue(a)},renderCell:function(a){this._renderFieldContent(a)},refreshCellStyle:function(a){a.setStyle(G.combineCellStyle(this,
a.gridData,a.column))},getInfographicJson:function(){var a=this.getFirstCell();return B.isInfographicCell(a)?B.getFieldInfo(a).infographicJson:null},getFeatureIndexForCell:function(a){return this.isMultiFeatureTable()?z.calcRingIndexForCell(a):"number"===typeof this.currentFeatureIndex?this.currentFeatureIndex:"number"===typeof a.gridData.currentFeatureIndex?a.gridData.currentFeatureIndex:"number"===typeof a.column.currentFeatureIndex?a.column.currentFeatureIndex:void 0},isMouseOver:function(){return this.domNode&&
C.isMouseOver(this)},getOverFieldCell:function(a){return C.getOverFieldCell(this,a)},getBBox:function(a){return C.getBBox(this,a)},getBackgroundFloatingCells:function(a){return this._getFloatingCells(this.backgroundFloatingTablesSection,a)},getForegroundFloatingCells:function(a){return this._getFloatingCells(this.foregroundFloatingTablesSection,a)},_getFloatingCells:function(a,b){var c=[];if(!a)return c;a.getTables().forEach(function(a){c=c.concat(a.getFieldCells())});b&&b.topFirst&&c.reverse();return c},
getChartJson:function(){var a=this.getFirstCell();return B.isChartCell(a)?B.getFieldInfo(a).chartJson:null},toJson:function(){var a=this.getSettings();a.id="table";a.data={data:this._getOriginalData(),columns:this.columns};["backgroundSection","foregroundSection","backgroundFloatingTablesSection","foregroundFloatingTablesSection"].forEach(function(b){var c=this[b];c&&(c=c.toJson(),c.stack.length&&(a[b+"Json"]=c))},this);return g.clone(a)},fromJson:function(a){a&&a.data&&(this.columns=a.data.columns||
[],this.store=new f({data:a.data.data||[],idProperty:"id"}),this.backgroundSectionJson=a.backgroundSectionJson,this.foregroundSectionJson=a.foregroundSectionJson,this.backgroundFloatingTablesSectionJson=a.backgroundFloatingTablesSectionJson,this.foregroundFloatingTablesSectionJson=a.foregroundFloatingTablesSectionJson,this.setSettings(a))},notifyShown:function(){this.getFieldCells().forEach(function(a){a.notifyShown();a.content&&a.content.notifyShown&&a.content.notifyShown()});this.backgroundSection&&
this.backgroundSection.notifyShown();this.backgroundFloatingTablesSection&&this.backgroundFloatingTablesSection.notifyShown();this.foregroundFloatingTablesSection&&this.foregroundFloatingTablesSection.notifyShown();this.foregroundSection&&this.foregroundSection.notifyShown()},onRendered:function(){},onContentLoadingStart:function(){},onContentLoadingEnd:function(){},onRequestScaleToFitHeight:function(){},_destroyTableContent:function(){this._renderInfo=null;this._fieldCells=this._fieldCells||[];this._fieldCells.forEach(function(a){a.parentWidget=
null;a.parentGrid=null;a.gridData=null;a.column=null;a.destroy()});this._fieldCells.length=0;this.backgroundSection&&this.backgroundSection.destroy();this.backgroundSection=null;this.backgroundFloatingTablesSection&&this.backgroundFloatingTablesSection.destroy();this.backgroundFloatingTablesSection=null;this.foregroundFloatingTablesSection&&this.foregroundFloatingTablesSection.destroy();this.foregroundFloatingTablesSection=null;this.foregroundSection&&this.foregroundSection.destroy();this.foregroundSection=
null;this._renderCellsQueue&&this._renderCellsQueue.destroy();this._renderCellsQueue=null;this._renderCellsContentQueue&&this._renderCellsContentQueue.destroy();this._renderCellsContentQueue=null},destroy:function(){this._destroyTableContent();this.reportContainerPageNode=this.parentGrid=this.viewPortContainer=this.parentElementInPageInfo=this.parentWidget=this._originalData=this.columns=this.store=this.theme=this.viewModel=null;this._removeChart();this.inherited(arguments)}})})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/_GridChartViewSupport":function(){define(["dojo/_base/declare",
"dojo/dom-construct","./coreUtils/chart/ChartViewBuilder","./coreUtils/chart/GridChartUtil","esri/dijit/geoenrichment/utils/DomUtil"],function(k,g,f,e,c){return k(null,{noChartView:!1,_chartViewInfo:null,_chartNode:null,_chartViewBuilder:null,getChartViewOptions:function(){var b=e.getSupportedChartTypes(this),a=e.getTableRowsColumnsInfos(this);return b&&b.length&&a&&{chartType:this._chartViewInfo&&this._chartViewInfo.chartType,chartTypes:b,supportsAltOrientation:2<this.columns.length,columnInfos:a.columnInfos,
rowInfos:a.rowInfos,sourceId:this._chartViewInfo&&this._chartViewInfo.sourceId,takeSeriesFromRows:!1}},tableToChart:function(b){this._removeChart();this._chartViewInfo=b;this._chartNode=g.create("div",{"class":"esriGEAbsoluteStretched"},this.domNode);c.hide(this.mainNode);this._chartViewBuilder=new f({viewModel:this.viewModel,theme:this.theme,grid:this,chartNode:this._chartNode,width:this._width,height:this._height});return this._chartViewBuilder.renderChart(b)},chartToTable:function(){this._removeChart()},
_removeChart:function(){this._chartViewInfo&&(this._chartViewInfo=null,this._chartViewBuilder.destroy(),this._chartViewBuilder=null,g.destroy(this._chartNode),this._chartNode=null,c.show(this.mainNode))}})})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/chart/ChartViewBuilder":function(){define("dojo/_base/declare dojo/_base/lang ../../../charts/utils/ChartTypes ../../../charts/utils/ChartDataLabelsTypes ../../../charts/utils/ChartJsonUtil ../../../charts/legends/ChartLegendPlacements ./GridChartUtil esri/dijit/geoenrichment/utils/WaitingUtil".split(" "),
function(k,g,f,e,c,b,a,d){return k(null,{viewModel:null,theme:null,grid:null,chartNode:null,width:null,height:null,_chartContainer:null,_chartType:null,_seriesInRows:null,_sourceId:null,constructor:function(a){g.mixin(this,a)},renderChart:function(a){this._chartType=a.chartType;this._seriesInRows=a.altOrientation;this._sourceId=a.sourceId;a=this.viewModel.layoutBuilder.getClass("chart");return a.isAsync?d.showProgressPromise(this.grid.domNode,a.loadModules()).then(this._doRenderChart.bind(this)):
this._doRenderChart()},_doRenderChart:function(){this._chartContainer=this.viewModel.layoutBuilder.createElement("chart",{node:this.chartNode,json:this._getChartJson(),creationParams:{viewModel:this.viewModel,theme:this.theme,parentWidget:this.grid,enableAxisLabelsAutoTilt:!0}})},_getChartJson:function(){var d=c.getDefaultChartSettings({chartType:this._chartType,width:this.width,height:this.height,seriesItems:a.createChartSeriesItems(this.grid,{chartType:this._chartType,seriesInRows:this._seriesInRows,
sourceId:this._sourceId})});if(1<d.seriesItems.length||f.isSingleSeries(this._chartType))d.visualProperties.legend.series.placement=b.BOTTOM;this._chartType===f.RING&&(d.visualProperties.dataLabels=e.LABEL_VALUE);f.isSingleSeries(this._chartType)?d.visualProperties.title.text=d.seriesItems[0]&&d.seriesItems[0].label||"":d.visualProperties.title.text=a.getChartTitle(this.grid);return d},destroy:function(){this._chartContainer&&this._chartContainer.destroy();this._chartContainer=null}})})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/ChartTypes":function(){define([],
function(){var k={COLUMN:"Column",BAR:"Bar",LINE:"Line",VERTICAL_LINE:"VerticalLine",PIE:"Pie",DONUT:"Donut",GAUGE:"Gauge",RING:"Ring",PICTURE_COLUMN:"PictureColumn",PICTURE_BAR:"PictureBar",WAFFLE:"Waffle",COLUMN_LINE:"ColumnLine",BAR_LINE:"BarLine"};k.CLASSIC_CHART_TYPES=[k.COLUMN,k.BAR,k.LINE,k.PIE];k.AVAILABLE_CHART_TYPES=[k.COLUMN,k.BAR,k.LINE,k.VERTICAL_LINE,k.PIE,k.DONUT,k.GAUGE,k.RING,k.PICTURE_COLUMN,k.PICTURE_BAR,k.WAFFLE];k.isSupported=function(g){return-1!==k.AVAILABLE_CHART_TYPES.indexOf(g)};
k.isColumnBarLike=function(g){return g===k.COLUMN||g===k.BAR||g===k.PICTURE_COLUMN||g===k.PICTURE_BAR};k.isColumnBarNoPictureLike=function(g){return g===k.COLUMN||g===k.BAR};k.isColumnLike=function(g){return g===k.COLUMN||g===k.PICTURE_COLUMN};k.isBarLike=function(g){return g===k.BAR||g===k.PICTURE_BAR};k.isPictureLike=function(g){return g===k.PICTURE_COLUMN||g===k.PICTURE_BAR||g===k.WAFFLE};k.isLineLike=function(g){return g===k.LINE||g===k.VERTICAL_LINE};k.isXAxisVertical=function(g){return g===
k.BAR||g===k.PICTURE_BAR||g===k.VERTICAL_LINE};k.hasAxis=function(g){return k.isColumnBarLike(g)||k.isLineLike(g)};k.hasLegend=function(g){return k.isColumnBarLike(g)||k.isLineLike(g)||g===k.PIE||g===k.DONUT||g===k.WAFFLE};k.hasBackgroundImage=function(g){return k.isColumnBarLike(g)||k.isLineLike(g)};k.isSingleSeries=function(g){return g===k.PIE||g===k.DONUT||g===k.GAUGE||g===k.RING||g===k.WAFFLE};k.isComparisonSupported=function(g){return g===k.COLUMN||g===k.BAR?2:k.isLineLike(g)?1E6:0};k.isConditionalStylingSupported=
function(g){return k.isColumnBarLike(g)||g===k.RING||g===k.GAUGE||g===k.WAFFLE};k.isLegendSupported=function(g,f,e,c){return k.isSeriesLegendSupported(g,f,e)||k.isMinMaxLegendSupported(g,f)};k.isSeriesLegendSupported=function(g,f,e,c){1===f&&c&&(f=2);return 0===f||1===f&&k.isLineLike(g)&&!e?!1:k.isColumnBarLike(g)||k.isLineLike(g)||g===k.PIE||g===k.DONUT||g===k.WAFFLE};k.isMinMaxLegendSupported=function(g,f){return k.isColumnBarLike(g)||k.isLineLike(g)||g===k.PIE||g===k.DONUT||g===k.WAFFLE};k.isSortingSupported=
function(g,f,e){return 0===f||1<f||e?!1:k.isColumnBarLike(g)||g===k.PIE||g===k.DONUT||g===k.RING};k.isStackSupported=function(g,f,e){return 0===f||1===f&&!e?!1:g===k.COLUMN||g===k.BAR||g===k.LINE};k.isRenderInOppositeDirectionsSupported=function(g,f,e){return 0===f||1===f||e?!1:k.isColumnBarLike(g)};k.supportsNegativeValues=function(g){return k.isColumnBarLike(g)||k.isLineLike(g)||g===k.RING};k.isShowDataAsWeightSupported=function(g){return k.isColumnBarLike(g)||k.isLineLike(g)};k.canFilterVariables=
function(g,f){return f?!1:k.isColumnBarLike(g)||k.isLineLike(g)||g===k.PIE||g===k.DONUT||g===k.RING};k.isBenchmarkSupported=function(g,f){return f?!1:k.isColumnBarLike(g)||k.isLineLike(g)||g===k.RING};return k})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/ChartDataLabelsTypes":function(){define([],function(){var k={NONE:"None",LABEL:"Label",VALUE:"Value",LABEL_VALUE:"LabelValue",PERCENT:"Percent",LABEL_PERCENT:"LabelPercent",isSupported:function(g){for(var f in k)if(k[f]===g)return!0;
return!1},toSupportedValue:function(g){return k.isSupported(g)?g:k.NONE},buildType:function(g){var f="";g.label&&(f="Label");g.value?f+="Value":g.percent&&(f+="Percent");return f||k.NONE},hasLabel:function(g){return g&&-1!==g.indexOf("Label")},hasValue:function(g){return g&&-1!==g.indexOf("Value")},hasPercent:function(g){return g&&-1!==g.indexOf("Percent")},has2Values:function(g){return g===k.LABEL_VALUE||g===k.LABEL_PERCENT}};return k})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/ChartJsonUtil":function(){define("dojo/_base/lang ./ThemeCalculator ./cleanUp/_ChartJsonCleaner ./ChartTypes ./ChartDataLabelsTypes ../legends/ChartLegendPlacements ../legends/ChartLegendTypes ./plots/supportClasses/GaugeLabelPlacements ./plots/supportClasses/WaffleLabelPlacements ./plots/supportClasses/WaffleDirections ../../../dataProvider/supportClasses/data/AreaDataUtil esri/dijit/geoenrichment/utils/ObjectUtil dojo/i18n!esri/nls/jsapi".split(" "),
function(k,g,f,e,c,b,a,d,h,l,n,m,p){p=p.geoenrichment.dijit.ReportPlayer.ChartContainer;var t={getDefaultChartSettings:function(f){f=f||{};var n=k.mixin({},f.font),m=k.mixin({},f.font);delete m.fontSize;return{isChart:!0,type:f.chartType||e.COLUMN,isMultiFeatureChart:!!f.isMultiFeatureChart,seriesItems:f.seriesItems||[],visualProperties:{width:f.width||400,height:f.height||300,marginTop:void 0,marginRight:void 0,marginBottom:void 0,marginLeft:void 0,backgroundColor:void 0,backgroundColorOpacity:1,
plotAreaOutlineColor:void 0,plotAreaOutlineOpacity:1,plotAreaOutlineThickness:0,plotAreaOutlineStyle:void 0,backgroundImageData:void 0,panelBackgroundColor:void 0,title:{text:"",align:"center",style:k.mixin({},n),verticalShift:0},xAxis:{show:!0,hideLine:!1,showTicks:!0,ticksInside:!1,hideLabels:!1,title:"",titleStyle:k.mixin({},n),style:k.mixin({},n),labelsAngle:0,lineColor:void 0,gridLines:!1,gridLinesCentered:!1,gridLinesColor:void 0,gridLinesOpacity:1,gridLinesThickness:.5,gridLinesStyle:void 0,
gridStripes:!1,gridStripesColor:void 0,gridStripesColorAlt:void 0,placement:void 0},yAxis:{show:!0,hideLine:!1,showTicks:!0,ticksInside:!1,hideLabels:!1,title:"",titleStyle:k.mixin({},n),style:k.mixin({},n),labelsAngle:0,lineColor:void 0,gridLines:!1,gridLinesCentered:!1,gridLinesColor:void 0,gridLinesOpacity:1,gridLinesThickness:.5,gridLinesStyle:void 0,gridStripes:!1,gridStripesColor:void 0,gridStripesColorAlt:void 0,hideBaseLine:!1,baseLineColor:void 0,baseLineOpacity:1,baseLineThickness:.5,baseLineStyle:void 0,
baseLineValue:0,showPercentSymbol:!1,showCurrencySymbol:!1,showSymbolForAllLabels:!1,showValuesAsWeightsInSeries:!1,placement:void 0,nonZeroInclusive:!1},legend:{type:a.SERIES,series:{placement:b.NONE,placementOffset:10,hasBorder:!0,labelParts:"Label",style:k.mixin({},n),symbol:void 0,hideOthers:!1,showComparison:!1},minMax:{placement:b.NONE,placementOffset:3,titleStyle:k.mixin({},m),minVariableLabelStyle:k.mixin({},m),maxVariableLabelStyle:k.mixin({},m)}},isStacked:!1,showValuesAsWeightInStack:!1,
columnThickness:g.DEFAULT_COLUMN_THICKNESS,columnBarGap:void 0,columnBarOpacity:1,renderColumnBarsInOppositeDirections:!1,showColumnBarBackground:!1,columnBarBackgroundColor:void 0,columnBarBackgroundOpacity:1,fillOpacity:1,outlineColor:void 0,outlineOpacity:1,outlineThickness:0,outlineStyle:void 0,lineThickness:g.DEFAULT_LINE_THICKNESS,lineOpacity:1,fillLineMarkers:!1,lineMarkersFillOpacity:1,fillLineArea:!1,lineAreaOpacity:1,donutHolePercent:g.DEFAULT_DONUT_HOLE_PERCENT,donutGap:g.DEFAULT_DONUT_GAP,
donutArcPercent:g.DEFAULT_DONUT_ARC_PERCENT,gaugeHolePercent:g.DEFAULT_GAUGE_HOLE_PERCENT,gaugeRangeMin:void 0,gaugeRangeMax:void 0,gaugeGap:g.DEFAULT_GAUGE_GAP,gaugeStartAngle:g.DEFAULT_GAUGE_ANGLE,gaugeArcPercent:g.DEFAULT_GAUGE_ARC_PERCENT,gaugeLabelPlacement:d.INSIDE,gaugeLabelStyle:k.mixin({},m),gaugeShowArrow:!1,gaugeArrowLineColor:void 0,gaugeArrowFillColor:void 0,gaugeConditionalStylingOthers:!1,gaugeConditionalStylingLabel:!1,gaugeShowFromToLabels:!1,gaugeFromLabelStyle:k.mixin({},m),gaugeToLabelStyle:k.mixin({},
m),waffleDirection:l.DOWN_RIGHT,waffleFlowStyle:void 0,waffleShowWholePictures:!1,waffleStretchIconsToFill:!1,waffleRangeMin:void 0,waffleRangeMax:void 0,waffleLabelPlacement:h.BOTTOM,waffleLabelOffset:10,waffleHideValue:!1,waffleHideLabel:!1,waffleShowLabelAbove:!1,waffleValueStyle:k.mixin({},m),waffleLabelStyle:k.mixin({},m),waffleColumnSpace:5,waffleRowSpace:5,waffleConditionalStylingOthers:!1,waffleConditionalStylingValue:!1,waffleConditionalStylingLabel:!1,waffleNumIcons:void 0,waffleNumRows:void 0,
waffleNumColumns:void 0,ringBackgroundColor:void 0,ringBackgroundOpacity:1,columnBarShowWholePictures:!1,dataLabels:c.NONE,dataLabelsShowLabelUnder:!1,dataLabelsDecimals:0,dataLabelsStyle:k.mixin({},n),dataLabelsLabelStyle:null,dataLabelsAltColor:null,dataLabelsEnableAltColor:!1,dataLabelsInside:!1,dataLabelsStackedInColumns:!1,dataLabelsHorizontalAlign:"center",dataLabelsVerticalAlign:"middle",dataLabelsShowValuePercentSymbol:!1,dataLabelsShowValueCurrencySymbol:!1,dataLabelsAngle:0,dataLabelsMaxWidth:void 0,
chartIcons:void 0,floatingIcons:void 0,showAxisIcons:!1,showChartIcons:!1,floatingTexts:void 0,sorting:void 0,filter:void 0,tooltip:t.getChartDefaultTooltip(),conditionalStyling:void 0},comparisonInfo:void 0,dataDrillingPanelInfo:void 0}},getChartDefaultTooltip:function(a){return a&&a.full?{title:!0,value:!0,weight:!0,min:!0,max:!0,avg:!0,conditional:!0,fieldInfo:null,style:{},linkStyle:{}}:{title:!0,value:!0,style:{},linkStyle:{}}},provideDefaultValueForMissing:function(a,b){b=b||{};b=t.getDefaultChartSettings(b);
a.visualProperties.tooltip=a.visualProperties.tooltip||t.getChartDefaultTooltip();m.populateObject(a,b);return a},cleanUpJson:function(a,b,c){return f.cleanUpJson(a,b,c)},supportsVisualProperty:function(a,b,c){return f.supportsProperty(b,"visualProperties."+a,c)},supportsProperty:function(a,b,c){return f.supportsProperty(b,a,c)},enrichVisualPropertiesWithThemeSettings:function(a,b){a=k.clone(a);a.backgroundColor=a.backgroundColor||b.backgroundColor;a.outlineColor=a.outlineColor||b.outlineColor;a.outlineStyle=
a.outlineStyle||b.outlineStyle;m.populateObject(a.title.style,b.titleStyle);a.xAxis&&(m.populateObject(a.xAxis.style,b.xAxis.axisStyle),m.populateObject(a.xAxis.titleStyle,b.xAxis.titleStyle),a.xAxis.lineColor=a.xAxis.lineColor||b.xAxis.lineColor,a.xAxis.gridLinesColor=a.xAxis.gridLinesColor||b.xAxis.gridLinesColor,a.xAxis.gridLinesStyle=a.xAxis.gridLinesStyle||b.xAxis.gridLinesStyle,a.xAxis.gridStripesColor=a.xAxis.gridStripesColor||b.xAxis.gridStripesColor,a.xAxis.gridStripesColorAlt=a.xAxis.gridStripesColorAlt||
b.xAxis.gridStripesColorAlt,m.populateObject(a.yAxis.style,b.yAxis.axisStyle),m.populateObject(a.yAxis.titleStyle,b.yAxis.titleStyle),a.yAxis.lineColor=a.yAxis.lineColor||b.yAxis.lineColor,a.yAxis.gridLinesColor=a.yAxis.gridLinesColor||b.yAxis.gridLinesColor,a.yAxis.gridLinesStyle=a.yAxis.gridLinesStyle||b.yAxis.gridLinesStyle,a.yAxis.gridStripesColor=a.yAxis.gridStripesColor||b.yAxis.gridStripesColor,a.yAxis.gridStripesColorAlt=a.yAxis.gridStripesColorAlt||b.yAxis.gridStripesColorAlt,a.yAxis.baseLineColor=
a.yAxis.baseLineColor||b.yAxis.baseLineColor,a.yAxis.baseLineStyle=a.yAxis.baseLineStyle||b.yAxis.baseLineStyle);a.legend&&(m.populateObject(a.legend.series.style,b.legendStyle),a.legend.minMax&&(m.populateObject(a.legend.minMax.titleStyle,b.minMaxLegend.titleStyle),m.populateObject(a.legend.minMax.minVariableLabelStyle,b.minMaxLegend.minVariableLabelStyle),m.populateObject(a.legend.minMax.maxVariableLabelStyle,b.minMaxLegend.maxVariableLabelStyle)));m.populateObject(a.dataLabelsStyle,b.dataLabelsStyle);
m.populateObject(a.dataLabelsLabelStyle,a.dataLabelsStyle);a.dataLabelsAltColor=a.dataLabelsAltColor||b.dataLabelsAltColor;m.populateObject(a.gaugeLabelStyle,b.gauge&&b.gauge.dataLabelStyle);a.gaugeArrowLineColor=a.gaugeArrowLineColor||b.gauge&&b.gauge.arrowIndicator.lineColor;a.gaugeArrowFillColor=a.gaugeArrowFillColor||b.gauge&&b.gauge.arrowIndicator.backgroundColor;m.populateObject(a.waffleValueStyle,b.waffle&&b.waffle.dataValueStyle);m.populateObject(a.waffleLabelStyle,b.waffle&&b.waffle.dataLabelStyle);
a.ringBackgroundColor=a.ringBackgroundColor||b.ring&&b.ring.ringBackground&&b.ring.ringBackground.backgroundColor;a.columnBarBackgroundColor=a.columnBarBackgroundColor||b.columnBarBackground&&b.columnBarBackground.backgroundColor;a.tooltip=a.tooltip||t.getChartDefaultTooltip();a.tooltip.style=a.tooltip.style||{};a.tooltip.linkStyle=a.tooltip.linkStyle||{};m.populateObject(a.tooltip.style,b.tooltip&&b.tooltip);m.populateObject(a.tooltip.linkStyle,b.tooltip&&b.tooltipLink);return a},createChartPoint:function(a,
b,c,d,e){a={color:c||"",label:void 0!==b?b||"":a&&a.alias,fieldInfo:a,iconFieldInfo:d,captionFieldInfo:e};c&&g.setPointColor(a,c);return a},getGaugeOthersPoint:function(a){return{label:a&&a.label||p.gaugeOthers,color:a&&a.color}},getWaffleOthersPoint:function(a){return{label:a&&a.label||p.waffleOthers,color:a&&a.color,iconFieldInfo:a&&a.iconFieldInfo}}},q=[{headers:{data:{AREA_DESC:p.oneMile}}},{headers:{data:{AREA_DESC:p.threeMiles}}},{headers:{data:{AREA_DESC:p.fiveMiles}}}];t.getSeriesItemsForMultiFeatureChart=
function(a,b,c){if(!b)return b;c=c||q;var d=b[0];return e.isLineLike(a)?c.map(function(a,b){var c=k.clone(d);c.points.forEach(function(a){delete a.color});if(b=d.multiFeatureLineStyles&&d.multiFeatureLineStyles[b])c.color=b.color,c.lineThickness=b.lineThickness,c.lineStyle=b.lineStyle,c.lineMarker=b.lineMarker,c.lineMarkerColor=b.lineMarkerColor,c.lineMarkerSize=b.lineMarkerSize,c.lineMarkerFillColor=b.lineMarkerFillColor,c.fillColor=b.fillColor;var e=n.getAreaDataValue({areaDataObject:a,fieldName:"headers.AREA_DESC"})||
"";c.points.forEach(function(a){a.areaName=e;a.originalSeriesName=d.label});c.label=e;return c}):d.points.map(function(a){return{label:a.label,points:c.map(function(b){b=n.getAreaDataValue({areaDataObject:b,fieldName:"headers.AREA_DESC"})||"";var c=t.createChartPoint(a.fieldInfo,b,a.color||d.color);c.areaName=b;c.originalSeriesName=d.label;return c})}})};t.getOriginalPointByMultiFeatureIndexes=function(a,b,c){return a[0].points[b]};t.transposeSeriesItems=function(a){return a.length?a[0].points.map(function(b,
c){return{label:b.label,points:a.map(function(a){var b=k.clone(a.points[c]);b.label=a.label;return b})}}):[]};return t})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/ThemeCalculator":function(){define("dojo/_base/lang dojox/charting/Theme ../../themes/ThemeLibrary ./ChartTypes ./ChartLineMarkers ./ChartLineStyles esri/dijit/geoenrichment/utils/ColorUtil".split(" "),function(k,g,f,e,c,b,a){function d(a,b,c){var d;switch(a){case e.COLUMN:d=b.column&&b.column.colors;break;case e.BAR:d=b.bar&&
b.bar.colors;break;case e.LINE:d=b.line&&b.line.colors;break;case e.VERTICAL_LINE:d=b.line&&b.line.colors;break;case e.PIE:d=b.pie&&b.pie.colors;break;case e.DONUT:d=b.donut&&b.donut.colors;break;case e.GAUGE:d=b.gauge&&b.gauge.colors;break;case e.WAFFLE:d=b.waffle&&b.waffle.colors;break;case e.RING:d=b.ring&&b.ring.colors;break;case e.PICTURE_COLUMN:d=b.pictureColumn&&b.pictureColumn.colors;break;case e.PICTURE_BAR:d=b.pictureBar&&b.pictureBar.colors}d&&d.length||(d=null);return 3>=c&&b.colors3series&&
b.colors3series.length&&b.colors3series||d||b.colors||l}var h={},l=["#AAAAAA","#888888","#555555","#333333"];h.DEFAULT_LINE_THICKNESS=1;h.DEFAULT_COLUMN_THICKNESS="Medium";h.DEFAULT_DONUT_HOLE_PERCENT=50;h.DEFAULT_DONUT_GAP=3;h.DEFAULT_DONUT_ARC_PERCENT=100;h.DEFAULT_GAUGE_HOLE_PERCENT=80;h.DEFAULT_GAUGE_GAP=2;h.DEFAULT_GAUGE_ANGLE=0;h.DEFAULT_GAUGE_ARC_PERCENT=100;h.getThemeForSettings=function(c,d,f){var n=f.isEditMode;f=f.isBenchmarked;var m=new g({colors:d.colors||l});if(!c)return m;var p=c.visualProperties;
m.plotarea.fill=p.backgroundColor||d.backgroundColor;"number"!==typeof p.backgroundColorOpacity||a.isTransparent(m.plotarea.fill)||(m.plotarea.fill=a.toColor(m.plotarea.fill),m.plotarea.fill.a=p.backgroundColorOpacity);m.plotarea.stroke={width:0};p.plotAreaOutlineColor&&(m.plotarea.stroke.color=p.plotAreaOutlineColor,"number"!==typeof p.plotAreaOutlineOpacity||a.isTransparent(m.plotarea.stroke.color)||(m.plotarea.stroke.color=a.toColor(m.plotarea.stroke.color),m.plotarea.stroke.color.a=p.plotAreaOutlineOpacity),
m.plotarea.stroke.width=p.plotAreaOutlineThickness||0,p.plotAreaOutlineStyle&&(m.plotarea.stroke.style=b.toGFXValue(p.plotAreaOutlineStyle)));m.chart.fill="transparent";m.axis.title.font="normal normal normal 11px Verdana";e.hasBackgroundImage(c.type)&&(m.plotarea.backgroundImageData=p.backgroundImageData);var u=k.mixin({},d.dataLabelsStyle,p.dataLabelsStyle);m.series.dataLabelsColor=u.color;m.series.dataLabelsAltColor=p.dataLabelsEnableAltColor&&(p.dataLabelsAltColor||d.dataLabelsAltColor);m.series.dataLabelsFont=
h.combineFontString(u);m.series.dataLabelsHorizontalAlign=p.dataLabelsHorizontalAlign||"center";m.series.dataLabelsVerticalAlign=p.dataLabelsVerticalAlign||"middle";m.series.dataLabelsAngle=p.dataLabelsAngle;m.series.dataLabelsMaxWidth=p.dataLabelsMaxWidth;var v=k.mixin({},u,p.dataLabelsLabelStyle);m.series.dataLabelsLabelColor=v.color;m.series.dataLabelsLabelFont=h.combineFontString(v);m.series.dataLabelsPercentColor=u.color;m.series.dataLabelsPercentFont=h.combineFontString(u);e.isColumnBarLike(c.type)&&
(m.series.showColumnBarBackground=p.showColumnBarBackground,m.series.columnBarBackgroundColor=p.columnBarBackgroundColor||d.columnBarBackground&&d.columnBarBackground.backgroundColor,m.series.columnBarBackgroundColor&&(m.series.columnBarBackgroundColor=1>p.columnBarBackgroundOpacity?a.getColorWithAlpha(m.series.columnBarBackgroundColor,p.columnBarBackgroundOpacity):m.series.columnBarBackgroundColor),m.series.renderColumnBarsInOppositeDirections=p.renderColumnBarsInOppositeDirections);e.hasAxis(c.type)&&
(m.series.baseLineValue=p.yAxis.baseLineValue);c.type===e.DONUT&&(m.series.donutHolePercent=void 0!==p.donutHolePercent?p.donutHolePercent:h.DEFAULT_DONUT_HOLE_PERCENT,m.series.donutGap=void 0!==p.donutGap?p.donutGap:h.DEFAULT_DONUT_GAP,m.series.donutArcPercent=void 0!==p.donutArcPercent?p.donutArcPercent:h.DEFAULT_DONUT_ARC_PERCENT,m.series.donutArcPercent=Math.min(100,Math.max(50,m.series.donutArcPercent)));c.type===e.GAUGE&&(m.series.donutHolePercent=void 0!==p.gaugeHolePercent?p.gaugeHolePercent:
h.DEFAULT_GAUGE_HOLE_PERCENT,m.series.donutGap=void 0!==p.gaugeGap?p.gaugeGap:h.DEFAULT_GAUGE_GAP,m.series.startAngle=void 0!==p.gaugeStartAngle?p.gaugeStartAngle:h.DEFAULT_GAUGE_ANGLE,m.series.donutArcPercent=void 0!==p.gaugeArcPercent?p.gaugeArcPercent:h.DEFAULT_GAUGE_ARC_PERCENT,m.series.donutArcPercent=Math.min(100,Math.max(50,m.series.donutArcPercent)),m.series.donutShowIcons=p.showChartIcons,p.gaugeShowArrow&&(m.series.gaugeShowArrowIndicator=!0,m.series.donutGap=0,100!==m.series.donutArcPercent&&
(m.series.startAngle=0),m.series.gaugeArrowIndicatorLineColor=p.gaugeArrowLineColor||d.gauge&&d.gauge.arrowIndicator.lineColor,m.series.gaugeArrowIndicatorFillColor=p.gaugeArrowFillColor||d.gauge&&d.gauge.arrowIndicator.backgroundColor),u=k.mixin({},d.gauge&&d.gauge.dataLabelStyle,p.gaugeLabelStyle),m.series.gaugeMainLabelPosition=p.gaugeLabelPlacement,m.series.gaugeMainLabelFont=h.combineFontString(u),m.series.gaugeMainLabelFontColor=p.gaugeConditionalStylingLabel?null:u.color,m.series.gaugeMainLabelFontColorFromConditionalStyling=
p.gaugeConditionalStylingLabel&&!!p.conditionalStyling,m.series.gaugeMainLabelFontSize=p.gaugeLabelStyle&&p.gaugeLabelStyle.fontSize,m.series.gaugeMainLabelTextDecoration=u.textDecoration,p.gaugeShowFromToLabels&&(m.series.gaugeShowFromToLabels=p.gaugeShowFromToLabels,u=k.mixin({},d.gauge&&d.gauge.dataLabelStyle,p.gaugeFromLabelStyle),m.series.gaugeFromLabelValue=p.gaugeRangeMin||0,m.series.gaugeFromLabelFont=h.combineFontString(u),m.series.gaugeFromLabelFontColor=u.color,m.series.gaugeFromLabelFontSize=
u.fontSize,m.series.gaugeFromLabelTextDecoration=u.textDecoration,u=k.mixin({},d.gauge&&d.gauge.dataLabelStyle,p.gaugeToLabelStyle),m.series.gaugeToLabelValue=p.gaugeRangeMax||"",m.series.gaugeToLabelFont=h.combineFontString(u),m.series.gaugeToLabelFontColor=u.color,m.series.gaugeToLabelFontSize=u.fontSize,m.series.gaugeToLabelTextDecoration=u.textDecoration));c.type===e.WAFFLE&&(m.series.waffleDirection=p.waffleDirection,m.series.waffleFlowStyle=p.waffleFlowStyle,m.series.waffleShowWholePictures=
p.waffleShowWholePictures,m.series.waffleStretchIconsToFill=p.waffleStretchIconsToFill,m.series.waffleLabelPlacement=p.waffleLabelPlacement,m.series.waffleLabelOffset=p.waffleLabelOffset,m.series.waffleColumnSpace=p.waffleColumnSpace,m.series.waffleRowSpace=p.waffleRowSpace,m.series.waffleNumIcons=p.waffleNumIcons,m.series.waffleNumRows=p.waffleNumRows,m.series.waffleNumColumns=p.waffleNumColumns,m.series.waffleHideValue=p.waffleHideValue,u=k.mixin({},d.waffle&&d.waffle.dataValueStyle,p.waffleValueStyle),
m.series.waffleValueFont=h.combineFontString(u),m.series.waffleValueFontColor=p.waffleConditionalStylingValue?null:u.color,m.series.waffleValueFontColorFromConditionalStyling=p.waffleConditionalStylingValue&&!!p.conditionalStyling,m.series.waffleValueFontSize=u.fontSize,m.series.waffleValueTextDecoration=u.textDecoration,m.series.waffleHideLabel=p.waffleHideLabel,u=k.mixin({},d.waffle&&d.waffle.dataLabelStyle,p.waffleLabelStyle),m.series.waffleLabelFont=h.combineFontString(u),m.series.waffleLabelFontColor=
p.waffleConditionalStylingLabel?null:u.color,m.series.waffleLabelFontColorFromConditionalStyling=p.waffleConditionalStylingLabel&&!!p.conditionalStyling,m.series.waffleLabelFontSize=u.fontSize,m.series.waffleLabelTextDecoration=u.textDecoration,m.series.waffleShowLabelAbove=p.waffleShowLabelAbove);c.type===e.RING&&(m.series.show100PercentLabel=!f,m.series.ringBackgroundColor=p.ringBackgroundColor||d.ring&&d.ring.ringBackground&&d.ring.ringBackground.backgroundColor,m.series.ringBackgroundColor&&(m.series.ringBackgroundColor=
1>p.ringBackgroundOpacity?a.getColorWithAlpha(m.series.ringBackgroundColor,p.ringBackgroundOpacity):m.series.ringBackgroundColor));e.isPictureLike(c.type)&&(m.series.columnBarShowWholePictures=p.columnBarShowWholePictures);m.marker.fill="#FFFFFF";m.series.outline=null;m.series.isEditMode=n;return m};h.getComparisonSymbol=function(a){return c.getMarkerPath(c.CIRCLE,a)};h.calcColorForPoint=function(a){var b=a.point,c=a.seriesItem,f=a.pointIndex,g=a.isOthersPoint,k=a.seriesIndex,l=a.numSeries,n=a.chartType,
w=a.themeSettings,y=a.isComparisonSeries;a=a.comparisonInfo;var A=c&&c.points.length;n===e.WAFFLE&&A--;var c=c&&c.color,B=e.isSingleSeries(n)||e.isColumnBarLike(n)&&!w.renderSingleDataSeriesWithSameColor&&1===l,l=d(n,w,B?A:l),C;if(e.isLineLike(n))y&&a?f=a.color||w.comparisonInfo.lineColor:(C=l[k%l.length],f=c||C||"#000000");else if(y&&a&&a.color)f=a.color;else{b=e.isPictureLike(n)?b&&h.getPointIconStyle(b).fillColor:b&&b.color;if(n===e.GAUGE&&g&&w.gauge.othersColor)return b||w.gauge.othersColor;if(n===
e.WAFFLE&&g&&w.waffle.othersColor)return b||w.waffle.othersColor;C=C||(B?l[f%l.length]:l[k%l.length]);f=b||!e.isSingleSeries(n)&&c||C||"#000000"}return f};h.pointCanHaveColor=function(a){return e.isPictureLike(a.chartType)?!!(a.point.iconFieldInfo&&a.point.iconFieldInfo.shapeJson&&a.point.iconFieldInfo.shapeJson.g.length):!0};h.setPointColor=function(a,b){delete a.color;a.iconFieldInfo?a.iconFieldInfo.shapeJson&&(delete a.iconFieldInfo.shapeJson.style.fillColor,delete a.iconFieldInfo.shapeJson.style.borderColor,
b&&(a.iconFieldInfo.shapeJson.style.fillColor=b,a.iconFieldInfo.shapeJson.style.borderColor=b)):b&&(a.color=b)};h.calcColorForSeries=function(a){var b=a.seriesItem,c=a.seriesIndex,f=a.numSeries,h=a.chartType,g=a.themeSettings;if(e.isSingleSeries(h))return null;a=e.isColumnBarLike(h)&&!g.renderSingleDataSeriesWithSameColor&&1===f;f=d(h,g,f);c=e.isLineLike(h)?f[c%f.length]:a?null:f[c%f.length];return b&&b.color||c||"#000000"};h.provideMissingIconsForPoints=function(a,b){if(e.isPictureLike(b)){var c,
d=[];a.forEach(function(a){a.iconFieldInfo?(c=a.iconFieldInfo,d.forEach(function(a){a.iconFieldInfo=k.clone(c)}),d.length=0):c?a.iconFieldInfo=k.clone(c):d.push(a)})}};h.setWaffleChartPointIcon=function(a,b,c){var d=a&&a.shapeJson;0===b?c.forEach(function(b,c){if(b.fieldInfo||d){var e=h.getPointIconStyle(b);b.iconFieldInfo=0===c?a:a&&k.clone(a);b.iconFieldInfo&&b.iconFieldInfo.shapeJson&&0!==c&&(b.iconFieldInfo.shapeJson.style.fillColor=e.fillColor,b.iconFieldInfo.shapeJson.style.borderColor=e.borderColor)}}):
c[b].iconFieldInfo=a;b=c[0];c=c[c.length-1];!c.iconFieldInfo&&b.iconFieldInfo&&b.iconFieldInfo.shapeJson&&(c.iconFieldInfo=k.clone(b.iconFieldInfo),delete c.iconFieldInfo.shapeJson.style.fillColor,delete c.iconFieldInfo.shapeJson.style.borderColor)};h.getPointIconStyle=function(a,b){function c(a,b){return"number"===typeof a?a:b}var d=a&&(a.iconFieldInfo||a.icon);if(!d||!d.shapeJson)return{fillColor:null,fillAlpha:null,borderColor:null,borderAlpha:null,borderWidth:null,borderDashArray:null};a=d.shapeJson.style;
b=b&&b.considerTheme&&d.shapeJson.themeStyle;return{fillColor:a&&a.fillColor||b&&b.fillColor,fillAlpha:c(a&&a.fillAlpha,b&&b.fillAlpha),borderColor:a&&a.borderColor||b&&b.borderColor,borderAlpha:c(a&&a.borderAlpha,b&&b.borderAlpha),borderWidth:c(a&&a.borderWidth,b&&b.borderWidth),borderDashArray:a&&a.borderDashArray||b&&b.borderDashArray}};h.calcIconForPoint=function(a,b,c){if(!e.isPictureLike(c))return null;(a=a.iconFieldInfo)&&a.shapeJson&&b&&(a=k.clone(a),a.shapeJson.themeStyle={fillColor:b,borderColor:b});
return a};h.calcBackgroundIconForPoint=function(a,b,c,d){if(!e.isPictureLike(b))return null;b=d.columnBarBackgroundColor||c.columnBarBackground&&c.columnBarBackground.backgroundColor;return(a=a.iconFieldInfo)&&a.shapeJson&&b?(a=k.clone(a),a.shapeJson.themeStyle={fillColor:b,borderColor:b},a):null};h.combineFontString=function(a){a=a||{};return(a.fontStyle||"normal")+" normal "+(a.fontWeight||"normal")+" "+((a.fontSize||f.CHART_DATA_FONT_SIZE)+"px")+" "+(a.fontFamily||f.DEFAULT_FONT_FAMILY_CLASSIC)};
return h})},"dojox/charting/Theme":function(){define("dojo/_base/lang dojo/_base/declare dojo/_base/Color ./SimpleTheme dojox/color/_base dojox/color/Palette dojox/gfx/gradutils".split(" "),function(k,g,f,e,c,b){var a=g("dojox.charting.Theme",e,{});k.mixin(a,{defineColors:function(a){a=a||{};var d,e=[],f=a.num||5;if(a.colors){d=a.colors.length;for(var g=0;g<f;g++)e.push(a.colors[g%d]);return e}return a.hue?b.generate(c.fromHsv(a.hue,a.saturation||100,((a.high||90)+(a.low||30))/2),"monochromatic").colors:
a.generator?c.Palette.generate(a.base,a.generator).colors:e},generateGradient:function(a,b,c){a=k.delegate(a);a.colors=[{offset:0,color:b},{offset:1,color:c}];return a},generateHslColor:function(a,b){a=new f(a);var d=a.toHsl();b=c.fromHsl(d.h,d.s,b);b.a=a.a;return b},generateHslGradient:function(b,e,g,k){b=new f(b);var d=b.toHsl();g=c.fromHsl(d.h,d.s,g);k=c.fromHsl(d.h,d.s,k);g.a=k.a=b.a;return a.generateGradient(e,g,k)}});a.defaultMarkers=e.defaultMarkers;a.defaultColors=e.defaultColors;a.defaultTheme=
e.defaultTheme;return a})},"dojox/charting/SimpleTheme":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/declare dojo/_base/Color dojox/lang/utils dojox/gfx/gradutils".split(" "),function(k,g,f,e,c,b){var a=f("dojox.charting.SimpleTheme",null,{shapeSpaces:{shape:1,shapeX:1,shapeY:1},constructor:function(b){b=b||{};var c=a.defaultTheme;g.forEach("chart plotarea axis grid series marker indicator".split(" "),function(a){this[a]=k.delegate(c[a],b[a])},this);b.seriesThemes&&b.seriesThemes.length?
(this.colors=null,this.seriesThemes=b.seriesThemes.slice(0)):(this.seriesThemes=null,this.colors=(b.colors||a.defaultColors).slice(0));this.markerThemes=null;b.markerThemes&&b.markerThemes.length&&(this.markerThemes=b.markerThemes.slice(0));this.markers=b.markers?k.clone(b.markers):k.delegate(a.defaultMarkers);this.noGradConv=b.noGradConv;this.noRadialConv=b.noRadialConv;b.reverseFills&&this.reverseFills();this._current=0;this._buildMarkerArray()},clone:function(){var a=new this.constructor({chart:this.chart,
plotarea:this.plotarea,axis:this.axis,grid:this.grid,series:this.series,marker:this.marker,colors:this.colors,markers:this.markers,indicator:this.indicator,seriesThemes:this.seriesThemes,markerThemes:this.markerThemes,noGradConv:this.noGradConv,noRadialConv:this.noRadialConv,pieInnerRadius:this.pieInnerRadius});g.forEach("clone clear next skip addMixin post getTick".split(" "),function(b){this.hasOwnProperty(b)&&(a[b]=this[b])},this);return a},clear:function(){this._current=0},next:function(a,b,f){var d=
c.merge,h;if(this.colors){h=k.delegate(this.series);var d=k.delegate(this.marker),g=new e(this.colors[this._current%this.colors.length]),l;h.stroke&&h.stroke.color?(h.stroke=k.delegate(h.stroke),l=new e(h.stroke.color),h.stroke.color=new e(g),h.stroke.color.a=l.a):h.stroke={color:g};d.stroke&&d.stroke.color?(d.stroke=k.delegate(d.stroke),l=new e(d.stroke.color),d.stroke.color=new e(g),d.stroke.color.a=l.a):d.stroke={color:g};!h.fill||h.fill.type?h.fill=g:(l=new e(h.fill),h.fill=new e(g),h.fill.a=
l.a);!d.fill||d.fill.type?d.fill=g:(l=new e(d.fill),d.fill=new e(g),d.fill.a=l.a)}else h=this.seriesThemes?d(this.series,this.seriesThemes[this._current%this.seriesThemes.length]):this.series,d=this.markerThemes?d(this.marker,this.markerThemes[this._current%this.markerThemes.length]):h;h={series:h,marker:d,symbol:d&&d.symbol||this._markers[this._current%this._markers.length]};++this._current;b&&(h=this.addMixin(h,a,b));f&&(h=this.post(h,a));return h},skip:function(){++this._current},addMixin:function(a,
b,e,f){if(k.isArray(e))g.forEach(e,function(c){a=this.addMixin(a,b,c)},this);else{var d={};"color"in e&&("line"==b||"area"==b?(k.setObject("series.stroke.color",e.color,d),k.setObject("marker.stroke.color",e.color,d)):k.setObject("series.fill",e.color,d));g.forEach("stroke outline shadow fill filter font fontColor labelWiring".split(" "),function(a){var b="marker"+a.charAt(0).toUpperCase()+a.substr(1),c=b in e;a in e&&(k.setObject("series."+a,e[a],d),c||k.setObject("marker."+a,e[a],d));c&&k.setObject("marker."+
a,e[b],d)});"marker"in e&&(d.symbol=e.marker,d.symbol=e.marker);a=c.merge(a,d)}f&&(a=this.post(a,b));return a},post:function(a,b){var d=a.series.fill,e;return!this.noGradConv&&this.shapeSpaces[d.space]&&"linear"==d.type&&("bar"==b?e={x1:d.y1,y1:d.x1,x2:d.y2,y2:d.x2}:this.noRadialConv||"shape"!=d.space||"slice"!=b&&"circle"!=b||(e={type:"radial",cx:0,cy:0,r:100}),e)?c.merge(a,{series:{fill:e}}):a},getTick:function(a,b){var d=this.axis.tick;a+="Tick";var e=c.merge;d?this.axis[a]&&(d=e(d,this.axis[a])):
d=this.axis[a];b&&(d?b[a]&&(d=e(d,b[a])):d=b[a]);return d},inspectObjects:function(a){g.forEach("chart plotarea axis grid series marker indicator".split(" "),function(b){a(this[b])},this);this.seriesThemes&&g.forEach(this.seriesThemes,a);this.markerThemes&&g.forEach(this.markerThemes,a)},reverseFills:function(){this.inspectObjects(function(a){a&&a.fill&&(a.fill=b.reverse(a.fill))})},addMarker:function(a,b){this.markers[a]=b;this._buildMarkerArray()},setMarkers:function(a){this.markers=a;this._buildMarkerArray()},
_buildMarkerArray:function(){this._markers=[];for(var a in this.markers)this._markers.push(this.markers[a])}});k.mixin(a,{defaultMarkers:{CIRCLE:"m-3,0 c0,-4 6,-4 6,0 m-6,0 c0,4 6,4 6,0",SQUARE:"m-3,-3 l0,6 6,0 0,-6 z",DIAMOND:"m0,-3 l3,3 -3,3 -3,-3 z",CROSS:"m0,-3 l0,6 m-3,-3 l6,0",X:"m-3,-3 l6,6 m0,-6 l-6,6",TRIANGLE:"m-3,3 l3,-6 3,6 z",TRIANGLE_INVERTED:"m-3,-3 l3,6 3,-6 z"},defaultColors:["#54544c","#858e94","#6e767a","#948585","#474747"],defaultTheme:{chart:{stroke:null,fill:"white",pageStyle:null,
titleGap:20,titlePos:"top",titleFont:"normal normal bold 14pt Tahoma",titleFontColor:"#333",titleAlign:"middle"},plotarea:{stroke:null,fill:"white"},axis:{stroke:{color:"#333",width:1},tick:{color:"#666",position:"center",font:"normal normal normal 7pt Tahoma",fontColor:"#333",labelGap:4},majorTick:{width:1,length:6},minorTick:{width:.8,length:3},microTick:{width:.5,length:1},title:{gap:15,font:"normal normal normal 11pt Tahoma",fontColor:"#333",orientation:"axis"}},series:{stroke:{width:1.5,color:"#333"},
outline:{width:.1,color:"#ccc"},shadow:null,fill:"#ccc",font:"normal normal normal 8pt Tahoma",fontColor:"#000",labelWiring:{width:1,color:"#ccc"}},marker:{stroke:{width:1.5,color:"#333"},outline:{width:.1,color:"#ccc"},shadow:null,fill:"#ccc",font:"normal normal normal 8pt Tahoma",fontColor:"#000"},indicator:{lineStroke:{width:1.5,color:"#333"},lineOutline:{width:.1,color:"#ccc"},lineShadow:null,lineFill:null,stroke:{width:1.5,color:"#333"},outline:{width:.1,color:"#ccc"},shadow:null,fill:"#ccc",
radius:3,font:"normal normal normal 10pt Tahoma",fontColor:"#000",markerFill:"#ccc",markerSymbol:"m-3,0 c0,-4 6,-4 6,0 m-6,0 c0,4 6,4 6,0",markerStroke:{width:1.5,color:"#333"},markerOutline:{width:.1,color:"#ccc"},markerShadow:null}}});return a})},"dojox/lang/utils":function(){define(["..","dojo/_base/lang"],function(k,g){var f=g.getObject("lang.utils",!0,k),e={},c=Object.prototype.toString,b=function(a){if(a)switch(c.call(a)){case "[object Array]":return a.slice(0);case "[object Object]":return g.delegate(a)}return a};
g.mixin(f,{coerceType:function(a,b){switch(typeof a){case "number":return Number(eval("("+b+")"));case "string":return String(b);case "boolean":return!!eval("("+b+")")}return eval("("+b+")")},updateWithObject:function(a,c,h){if(!c)return a;for(var d in a)if(d in c&&!(d in e)){var g=a[d];g&&"object"==typeof g?f.updateWithObject(g,c[d],h):a[d]=h?f.coerceType(g,c[d]):b(c[d])}return a},updateWithPattern:function(a,c,h,g){if(!c||!h)return a;for(var d in h)d in c&&!(d in e)&&(a[d]=g?f.coerceType(h[d],c[d]):
b(c[d]));return a},merge:function(a,b){if(b){var d=c.call(a),e=c.call(b),k,m;switch(e){case "[object Array]":if(e==d){d=Array(Math.max(a.length,b.length));k=0;for(e=d.length;k<e;++k)d[k]=f.merge(a[k],b[k]);return d}return b.slice(0);case "[object Object]":if(e==d&&a){d=g.delegate(a);for(k in b)k in a?(e=a[k],m=b[k],m!==e&&(d[k]=f.merge(e,m))):d[k]=g.clone(b[k]);return d}return g.clone(b)}}return b}});return f})},"dojox/gfx/gradutils":function(){define(["./_base","dojo/_base/lang","./matrix","dojo/_base/Color"],
function(k,g,f,e){function c(b,a){if(0>=b)return a[0].color;var c=a.length;if(1<=b)return a[c-1].color;for(var f=0;f<c;++f){var g=a[f];if(g.offset>=b)return f?(a=a[f-1],e.blendColors(new e(a.color),new e(g.color),(b-a.offset)/(g.offset-a.offset))):g.color}return a[c-1].color}k=k.gradutils={};k.getColor=function(b,a){var d;if(b){switch(b.type){case "linear":d=f.rotate(-Math.atan2(b.y2-b.y1,b.x2-b.x1));var h=f.project(b.x2-b.x1,b.y2-b.y1);a=f.multiplyPoint(h,a);var g=f.multiplyPoint(h,b.x1,b.y1),h=
f.multiplyPoint(h,b.x2,b.y2),h=f.multiplyPoint(d,h.x-g.x,h.y-g.y).x;d=f.multiplyPoint(d,a.x-g.x,a.y-g.y).x/h;break;case "radial":d=a.x-b.cx,a=a.y-b.cy,d=Math.sqrt(d*d+a*a)/b.r}return c(d,b.colors)}return new e(b||[0,0,0,0])};k.reverse=function(b){if(b)switch(b.type){case "linear":case "radial":if(b=g.delegate(b),b.colors){for(var a=b.colors,c=a.length,e=0,f,k=b.colors=Array(a.length);e<c;++e)f=a[e],k[e]={offset:1-f.offset,color:f.color};k.sort(function(a,b){return a.offset-b.offset})}}return b};return k})},
"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/ChartLineMarkers":function(){define(["dojox/charting/SimpleTheme"],function(k){var g={NONE:"None",CIRCLE:"Circle",SQUARE:"Square",DIAMOND:"Diamond",CROSS:"Cross",X:"X",TRIANGLE:"Triangle",TRIANGLE_INVERTED:"TriangleInverted"},f=[g.CIRCLE,g.SQUARE,g.DIAMOND,g.CROSS,g.X,g.TRIANGLE,g.TRIANGLE_INVERTED],e={},c;for(c in g)e[g[c]]=c;g.DEFAULT_SIZE=3;g.isSupported=function(b){return-1!==f.indexOf(b)};g.getMarkerAt=function(b){return f[b%f.length]};
g.getMarkerPath=function(b,a){a=(0<=a?a:g.DEFAULT_SIZE)/g.DEFAULT_SIZE;switch(b){case g.CIRCLE:return"m"+-3*a+",0 c0,"+-4*a+" "+6*a+","+-4*a+" "+6*a+",0 m"+-6*a+",0 c0,"+4*a+" "+6*a+","+4*a+" "+6*a+",0";case g.SQUARE:return"m"+-3*a+","+-3*a+" l0,"+6*a+" "+6*a+",0 0,"+-6*a+" z";case g.DIAMOND:return"m0,"+-3*a+" l"+3*a+","+3*a+" "+-3*a+","+3*a+" "+-3*a+","+-3*a+" z";case g.CROSS:return"m0,"+-3*a+" l0,"+6*a+" m"+-3*a+","+-3*a+" l"+6*a+",0";case g.X:return"m"+-3*a+","+-3*a+" l"+6*a+","+6*a+" m0,"+-6*
a+" l"+-6*a+","+6*a+"";case g.TRIANGLE:return"m"+-3*a+","+3*a+" l"+3*a+","+-6*a+" "+3*a+","+6*a+" z";case g.TRIANGLE_INVERTED:return"m"+-3*a+","+-3*a+" l"+3*a+","+6*a+" "+3*a+","+-6*a+" z"}return k.defaultMarkers[e[b]]||""};g.getMarkerPathAt=function(b,a){return g.getMarkerPath(g.getMarkerAt(b),a)};return g})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/cleanUp/_ChartJsonCleaner":function(){define("../ChartTypes ../ChartDataLabelsTypes ../../legends/ChartLegendTypes ../../legends/ChartLegendPlacements ./_ChartTypeSupports ../../../supportClasses/templateJsonUtils/fieldInfo/FieldInfoBuilder".split(" "),
function(k,g,f,e,c,b){return{cleanUpJson:function(a,d,h){var l=a.type,n=a.isMultiFeatureChart,m=a.seriesItems.length,p=a.visualProperties;h=h&&h.isBenchmarked;k.isSingleSeries(l)&&1<m&&(m=a.seriesItems.length=1);k.hasBackgroundImage(l)||delete p.backgroundImageData;k.isConditionalStylingSupported(l)||delete p.conditionalStyling;k.isSortingSupported(l,m,n)||delete p.sorting;k.canFilterVariables(l,n)||delete p.filter;k.isComparisonSupported(l,n)<m&&delete a.comparisonInfo;2===m&&a.comparisonInfo&&(p.showColumnBarBackground=
!1,p.isStacked=!1,p.showValuesAsWeightInStack=!1);n&&a.comparisonInfo&&(a.comparisonInfo.chartType=l);p.legend&&p.legend.series&&p.legend.type===f.SERIES&&!k.isSeriesLegendSupported(l,m,n,!!a.comparisonInfo&&p.legend.series.showComparison)&&(p.legend.series.placement=e.NONE);k.isRenderInOppositeDirectionsSupported(l,m,n)||delete p.renderColumnBarsInOppositeDirections;k.isStackSupported(l,m,n)||(p.isStacked=!1,p.showValuesAsWeightInStack=!1);p.renderColumnBarsInOppositeDirections&&p.isStacked&&(p.renderColumnBarsInOppositeDirections=
!0,p.isStacked=!1,p.showValuesAsWeightInStack=!1);p.isStacked||(p.showValuesAsWeightInStack=!1);if(p.yAxis){if(p.isStacked||p.renderColumnBarsInOppositeDirections)p.yAxis.baseLineValue=0;k.isShowDataAsWeightSupported(l)&&!p.showValuesAsWeightInStack||delete p.yAxis.showValuesAsWeightsInSeries}k.isPictureLike(l)?a.seriesItems.forEach(function(a){a.points&&a.points.forEach(function(a){delete a.color})}):a.seriesItems.forEach(function(a){a.points&&a.points.forEach(function(a){delete a.iconFieldInfo})});
k.isSingleSeries(l)&&a.seriesItems.forEach(function(a){delete a.color});k.isLineLike(l)&&a.seriesItems.forEach(function(a){n?(delete a.color,delete a.lineThickness,delete a.lineStyle,delete a.lineMarker,delete a.lineMarkerColor,delete a.lineMarkerFillColor,delete a.lineMarkerSize):delete a.multiFeatureLineStyles});if(l===k.GAUGE){if((m=a.seriesItems[0]&&a.seriesItems[0].points&&a.seriesItems[0].points)&&m.length){m.length=Math.min(2,m.length);m[1]&&delete m[1].fieldInfo;var t=m[0].fieldInfo;t&&b.isFieldInfoInPercentState(t)&&
(delete p.gaugeRangeMin,delete p.gaugeRangeMax)}90<p.gaugeArcPercent&&(p.gaugeShowFromToLabels=!1)}l===k.WAFFLE&&(m=a.seriesItems[0]&&a.seriesItems[0].points&&a.seriesItems[0].points)&&m.length&&(1<m.length&&delete m[m.length-1].fieldInfo,(t=m[0].fieldInfo)&&b.isFieldInfoInPercentState(t)&&(delete p.waffleRangeMin,delete p.waffleRangeMax),1<m.length&&delete m[m.length-1].fieldInfo,2<m.length?delete p.waffleRangeMin:delete p.legend);a=c.cleanUpJsonForChartType(a,d);h&&(p=a.visualProperties,p.renderColumnBarsInOppositeDirections=
!1,p.isStacked=!1,p.showValuesAsWeightInStack=!1,p.yAxis&&p.yAxis.showValuesAsWeightsInSeries&&(delete p.yAxis.showValuesAsWeightsInSeries,delete p.yAxis.showPercentSymbol),g.hasPercent(p.dataLabels)&&(p.dataLabels=g.buildType({label:g.hasLabel(p.dataLabels),value:!0})),delete a.comparisonInfo);return a},supportsProperty:function(a,b,e){return c.supportsProperty(a,b,e)}}})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/legends/ChartLegendTypes":function(){define([],function(){var k={SERIES:"Series",
MIN_MAX:"MinMax",isSupported:function(g){for(var f in k)if(k[f]===g)return!0;return!1},toSupportedValue:function(g){return k.isSupported(g)?g:k.SERIES}};return k})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/legends/ChartLegendPlacements":function(){define([],function(){var k={NONE:"None",LEFT:"Left",RIGHT:"Right",TOP:"Top",BOTTOM:"Bottom",isSupported:function(g){for(var f in k)if(k[f]===g)return!0;return!1},toSupportedValue:function(g){return k.isSupported(g)?g:k.NONE},isOnSide:function(g){return g===
k.LEFT||g===k.RIGHT}};return k})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/cleanUp/_ChartTypeSupports":function(){define("esri/dijit/geoenrichment/utils/ObjectUtil esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/ChartTypes ./chartTypes/classic/_ColumnBarLike ./chartTypes/classic/_LineLike ./chartTypes/classic/_Pie ./chartTypes/graphic/_ColumnBarLike ./chartTypes/graphic/_ColumnBarPictureLike ./chartTypes/graphic/_LineLike ./chartTypes/graphic/_Pie ./chartTypes/graphic/_Donut ./chartTypes/graphic/_Ring ./chartTypes/graphic/_Gauge ./chartTypes/graphic/_Waffle".split(" "),
function(k,g,f,e,c,b,a,d,h,l,n,m,p){var t={},q={};q[g.COLUMN]=q[g.BAR]=f;q[g.LINE]=e;q[g.PIE]=c;var r={};r[g.COLUMN]=r[g.BAR]=b;r[g.PICTURE_COLUMN]=r[g.PICTURE_BAR]=a;r[g.LINE]=r[g.VERTICAL_LINE]=d;r[g.PIE]=h;r[g.DONUT]=l;r[g.RING]=n;r[g.GAUGE]=m;r[g.WAFFLE]=p;t.cleanUpJsonForChartType=function(a,b){return k.filterByPattern(a,(b?r:q)[a.type])};t.supportsProperty=function(a,b,c){b=b.split(".");var d=(c?r:q)[a];b.forEach(function(a){d=d&&d[a]});return!!d};return t})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/cleanUp/chartTypes/classic/_ColumnBarLike":function(){define([],
function(){return{isChart:1,type:1,seriesItems:[{label:1,color:1,points:1}],visualProperties:{width:1,height:1,view3D:1,origin:1,backgroundColor:1,backgroundImageData:1,title:{text:1,align:1,style:1},xAxis:{show:1,showTicks:1,title:1,titleStyle:1,style:1,labelsAngle:1,gridLines:1,gridLinesCentered:1,placement:1},yAxis:{show:1,showTicks:1,title:1,titleStyle:1,style:1,labelsAngle:1,gridLines:1,gridLinesCentered:1,placement:1},legend:{series:{placement:1,placementOffset:1,hasBorder:1,labelParts:1,style:1}},
columnThickness:1,dataLabels:1,dataLabelsStyle:1,dataLabelsDecimals:1}}})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/cleanUp/chartTypes/classic/_LineLike":function(){define([],function(){return{isChart:1,type:1,seriesItems:[{label:1,color:1,points:1}],visualProperties:{width:1,height:1,view3D:1,origin:1,backgroundColor:1,backgroundImageData:1,title:{text:1,align:1,style:1},xAxis:{show:1,showTicks:1,title:1,titleStyle:1,style:1,labelsAngle:1,gridLines:1,gridLinesCentered:1,placement:1},
yAxis:{show:1,showTicks:1,title:1,titleStyle:1,style:1,labelsAngle:1,gridLines:1,gridLinesCentered:1,placement:1},legend:{series:{placement:1,placementOffset:1,hasBorder:1,labelParts:1,style:1}},lineThickness:1,dataLabels:1,dataLabelsStyle:1,dataLabelsDecimals:1}}})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/cleanUp/chartTypes/classic/_Pie":function(){define([],function(){return{isChart:1,type:1,seriesItems:[{label:1,color:1,points:1}],visualProperties:{width:1,height:1,view3D:1,origin:1,
title:{text:1,align:1,style:1},legend:{series:{placement:1,placementOffset:1,hasBorder:1,labelParts:1,style:1}},dataLabels:1,dataLabelsStyle:1,dataLabelsDecimals:1}}})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/cleanUp/chartTypes/graphic/_ColumnBarLike":function(){define([],function(){return{isChart:1,type:1,isMultiFeatureChart:1,seriesItems:[{label:1,color:1,points:1}],visualProperties:{width:1,height:1,marginTop:1,marginRight:1,marginBottom:1,marginLeft:1,backgroundColor:1,backgroundColorOpacity:1,
plotAreaOutlineColor:1,plotAreaOutlineOpacity:1,plotAreaOutlineThickness:1,plotAreaOutlineStyle:1,backgroundImageData:1,panelBackgroundColor:1,title:{text:1,align:1,style:1,verticalShift:1},xAxis:{show:1,hideLine:1,showTicks:1,ticksInside:1,hideLabels:1,title:1,titleStyle:1,style:1,labelsAngle:1,lineColor:1,gridLines:1,gridLinesCentered:1,gridLinesColor:1,gridLinesOpacity:1,gridLinesThickness:1,gridLinesStyle:1,gridStripes:1,gridStripesColor:1,gridStripesColorAlt:1,placement:1},yAxis:{show:1,hideLine:1,
showTicks:1,ticksInside:1,hideLabels:1,title:1,titleStyle:1,style:1,labelsAngle:1,lineColor:1,gridLines:1,gridLinesCentered:1,gridLinesColor:1,gridLinesOpacity:1,gridLinesThickness:1,gridLinesStyle:1,gridStripes:1,gridStripesColor:1,gridStripesColorAlt:1,hideBaseLine:1,baseLineColor:1,baseLineOpacity:1,baseLineThickness:1,baseLineStyle:1,baseLineValue:1,showPercentSymbol:1,showCurrencySymbol:1,showSymbolForAllLabels:1,showValuesAsWeightsInSeries:1,placement:1},legend:{type:1,series:{placement:1,placementOffset:1,
hasBorder:1,labelParts:1,style:1,symbol:1,showComparison:1},minMax:{placement:1,placementOffset:1,titleStyle:1,minVariableLabelStyle:1,maxVariableLabelStyle:1}},isStacked:1,showValuesAsWeightInStack:1,columnThickness:1,columnBarGap:1,columnBarOpacity:1,renderColumnBarsInOppositeDirections:1,showColumnBarBackground:1,columnBarBackgroundColor:1,columnBarBackgroundOpacity:1,outlineColor:1,outlineOpacity:1,outlineThickness:1,outlineStyle:1,dataLabels:1,dataLabelsShowLabelUnder:1,dataLabelsStyle:1,dataLabelsLabelStyle:1,
dataLabelsAltColor:1,dataLabelsEnableAltColor:1,dataLabelsDecimals:1,dataLabelsInside:1,dataLabelsHorizontalAlign:1,dataLabelsShowValuePercentSymbol:1,dataLabelsShowValueCurrencySymbol:1,dataLabelsAngle:1,dataLabelsMaxWidth:1,chartIcons:1,floatingIcons:1,showAxisIcons:1,floatingTexts:1,sorting:1,filter:1,tooltip:1,conditionalStyling:1},comparisonInfo:1,dataDrillingPanelInfo:1}})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/cleanUp/chartTypes/graphic/_ColumnBarPictureLike":function(){define([],
function(){return{isChart:1,type:1,isMultiFeatureChart:1,seriesItems:[{label:1,color:1,points:1}],visualProperties:{width:1,height:1,marginTop:1,marginRight:1,marginBottom:1,marginLeft:1,backgroundColor:1,backgroundColorOpacity:1,plotAreaOutlineColor:1,plotAreaOutlineOpacity:1,plotAreaOutlineThickness:1,plotAreaOutlineStyle:1,backgroundImageData:1,panelBackgroundColor:1,title:{text:1,align:1,style:1,verticalShift:1},xAxis:{show:1,hideLine:1,showTicks:1,ticksInside:1,hideLabels:1,title:1,titleStyle:1,
style:1,labelsAngle:1,lineColor:1,gridLines:1,gridLinesCentered:1,gridLinesColor:1,gridLinesOpacity:1,gridLinesThickness:1,gridLinesStyle:1,gridStripes:1,gridStripesColor:1,gridStripesColorAlt:1,placement:1},yAxis:{show:1,hideLine:1,showTicks:1,ticksInside:1,hideLabels:1,title:1,titleStyle:1,style:1,labelsAngle:1,lineColor:1,gridLines:1,gridLinesCentered:1,gridLinesColor:1,gridLinesOpacity:1,gridLinesThickness:1,gridLinesStyle:1,gridStripes:1,gridStripesColor:1,gridStripesColorAlt:1,hideBaseLine:1,
baseLineColor:1,baseLineOpacity:1,baseLineThickness:1,baseLineStyle:1,baseLineValue:1,showPercentSymbol:1,showCurrencySymbol:1,showSymbolForAllLabels:1,showValuesAsWeightsInSeries:1,placement:1},legend:{type:1,series:{placement:1,placementOffset:1,hasBorder:1,labelParts:1,style:1,symbol:1,showComparison:1},minMax:{placement:1,placementOffset:1,titleStyle:1,minVariableLabelStyle:1,maxVariableLabelStyle:1}},columnThickness:1,columnBarGap:1,renderColumnBarsInOppositeDirections:1,showColumnBarBackground:1,
columnBarBackgroundColor:1,columnBarShowWholePictures:1,dataLabels:1,dataLabelsShowLabelUnder:1,dataLabelsStyle:1,dataLabelsLabelStyle:1,dataLabelsAltColor:1,dataLabelsEnableAltColor:1,dataLabelsDecimals:1,dataLabelsInside:1,dataLabelsHorizontalAlign:1,dataLabelsShowValuePercentSymbol:1,dataLabelsShowValueCurrencySymbol:1,dataLabelsAngle:1,dataLabelsMaxWidth:1,floatingIcons:1,floatingTexts:1,sorting:1,filter:1,tooltip:1,conditionalStyling:1},comparisonInfo:1,dataDrillingPanelInfo:1}})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/cleanUp/chartTypes/graphic/_LineLike":function(){define([],
function(){return{isChart:1,type:1,isMultiFeatureChart:1,seriesItems:[{label:1,color:1,lineThickness:1,lineStyle:1,lineMarker:1,lineMarkerColor:1,lineMarkerSize:1,lineMarkerFillColor:1,fillColor:1,multiFeatureLineStyles:[{color:1,lineThickness:1,lineStyle:1,lineMarker:1,lineMarkerColor:1,lineMarkerSize:1,lineMarkerFillColor:1,fillColor:1}],points:1}],visualProperties:{width:1,height:1,marginTop:1,marginRight:1,marginBottom:1,marginLeft:1,backgroundColor:1,backgroundColorOpacity:1,plotAreaOutlineColor:1,
plotAreaOutlineOpacity:1,plotAreaOutlineThickness:1,plotAreaOutlineStyle:1,backgroundImageData:1,panelBackgroundColor:1,title:{text:1,align:1,style:1,verticalShift:1},xAxis:{show:1,hideLine:1,showTicks:1,ticksInside:1,hideLabels:1,title:1,titleStyle:1,style:1,labelsAngle:1,lineColor:1,gridLines:1,gridLinesCentered:1,gridLinesColor:1,gridLinesOpacity:1,gridLinesThickness:1,gridLinesStyle:1,gridStripes:1,gridStripesColor:1,gridStripesColorAlt:1,placement:1},yAxis:{show:1,hideLine:1,showTicks:1,ticksInside:1,
hideLabels:1,title:1,titleStyle:1,style:1,labelsAngle:1,lineColor:1,gridLines:1,gridLinesCentered:1,gridLinesColor:1,gridLinesOpacity:1,gridLinesThickness:1,gridLinesStyle:1,gridStripes:1,gridStripesColor:1,gridStripesColorAlt:1,hideBaseLine:1,baseLineColor:1,baseLineOpacity:1,baseLineThickness:1,baseLineStyle:1,baseLineValue:1,showPercentSymbol:1,showCurrencySymbol:1,showSymbolForAllLabels:1,showValuesAsWeightsInSeries:1,placement:1,nonZeroInclusive:1},legend:{type:1,series:{placement:1,placementOffset:1,
hasBorder:1,labelParts:1,style:1,symbol:1,showComparison:1},minMax:{placement:1,placementOffset:1,titleStyle:1,minVariableLabelStyle:1,maxVariableLabelStyle:1}},isStacked:1,showValuesAsWeightInStack:1,lineThickness:1,lineOpacity:1,fillLineMarkers:1,lineMarkersFillOpacity:1,fillLineArea:1,lineAreaOpacity:1,chartIcons:1,floatingIcons:1,showAxisIcons:1,floatingTexts:1,filter:1,tooltip:1},comparisonInfo:1,dataDrillingPanelInfo:1}})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/cleanUp/chartTypes/graphic/_Pie":function(){define([],
function(){return{isChart:1,type:1,seriesItems:[{label:1,color:1,points:1}],visualProperties:{width:1,height:1,marginTop:1,marginRight:1,marginBottom:1,marginLeft:1,backgroundColor:1,backgroundColorOpacity:1,plotAreaOutlineColor:1,plotAreaOutlineOpacity:1,plotAreaOutlineThickness:1,plotAreaOutlineStyle:1,panelBackgroundColor:1,title:{text:1,align:1,style:1,verticalShift:1},legend:{type:1,series:{placement:1,placementOffset:1,hasBorder:1,labelParts:1,style:1,symbol:1},minMax:{placement:1,placementOffset:1,
titleStyle:1,minVariableLabelStyle:1,maxVariableLabelStyle:1}},fillOpacity:1,outlineColor:1,outlineOpacity:1,outlineThickness:1,outlineStyle:1,dataLabels:1,dataLabelsShowLabelUnder:1,dataLabelsStyle:1,dataLabelsLabelStyle:1,dataLabelsDecimals:1,dataLabelsInside:1,dataLabelsStackedInColumns:1,dataLabelsShowValuePercentSymbol:1,dataLabelsShowValueCurrencySymbol:1,dataLabelsAngle:1,dataLabelsHorizontalAlign:1,dataLabelsMaxWidth:1,chartIcons:1,floatingIcons:1,showChartIcons:1,floatingTexts:1,sorting:1,
filter:1,tooltip:1},dataDrillingPanelInfo:1}})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/cleanUp/chartTypes/graphic/_Donut":function(){define([],function(){return{isChart:1,type:1,seriesItems:[{label:1,color:1,points:1}],visualProperties:{width:1,height:1,marginTop:1,marginRight:1,marginBottom:1,marginLeft:1,backgroundColor:1,backgroundColorOpacity:1,plotAreaOutlineColor:1,plotAreaOutlineOpacity:1,plotAreaOutlineThickness:1,plotAreaOutlineStyle:1,panelBackgroundColor:1,title:{text:1,
align:1,style:1,verticalShift:1},legend:{type:1,series:{placement:1,placementOffset:1,hasBorder:1,labelParts:1,style:1,symbol:1},minMax:{placement:1,placementOffset:1,titleStyle:1,minVariableLabelStyle:1,maxVariableLabelStyle:1}},fillOpacity:1,outlineColor:1,outlineOpacity:1,outlineThickness:1,outlineStyle:1,donutHolePercent:1,donutGap:1,donutArcPercent:1,dataLabels:1,dataLabelsShowLabelUnder:1,dataLabelsStyle:1,dataLabelsLabelStyle:1,dataLabelsDecimals:1,dataLabelsInside:1,dataLabelsStackedInColumns:1,
dataLabelsShowValuePercentSymbol:1,dataLabelsShowValueCurrencySymbol:1,dataLabelsAngle:1,dataLabelsHorizontalAlign:1,dataLabelsMaxWidth:1,chartIcons:1,floatingIcons:1,showChartIcons:1,floatingTexts:1,sorting:1,filter:1,tooltip:1},dataDrillingPanelInfo:1}})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/cleanUp/chartTypes/graphic/_Ring":function(){define([],function(){return{isChart:1,type:1,seriesItems:[{label:1,color:1,points:1}],visualProperties:{width:1,height:1,marginTop:1,marginRight:1,
marginBottom:1,marginLeft:1,backgroundColor:1,backgroundColorOpacity:1,plotAreaOutlineColor:1,plotAreaOutlineOpacity:1,plotAreaOutlineThickness:1,plotAreaOutlineStyle:1,panelBackgroundColor:1,title:{text:1,align:1,style:1,verticalShift:1},fillOpacity:1,outlineColor:1,outlineOpacity:1,outlineThickness:1,outlineStyle:1,ringBackgroundColor:1,ringBackgroundOpacity:1,dataLabels:1,dataLabelsStyle:1,dataLabelsLabelStyle:1,dataLabelsEnableAltColor:1,dataLabelsDecimals:1,dataLabelsShowValuePercentSymbol:1,
dataLabelsShowValueCurrencySymbol:1,chartIcons:1,floatingIcons:1,showChartIcons:1,floatingTexts:1,sorting:1,filter:1,tooltip:1,conditionalStyling:1},dataDrillingPanelInfo:1}})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/cleanUp/chartTypes/graphic/_Gauge":function(){define([],function(){return{isChart:1,type:1,seriesItems:[{label:1,color:1,points:1}],visualProperties:{width:1,height:1,marginTop:1,marginRight:1,marginBottom:1,marginLeft:1,backgroundColor:1,backgroundColorOpacity:1,plotAreaOutlineColor:1,
plotAreaOutlineOpacity:1,plotAreaOutlineThickness:1,plotAreaOutlineStyle:1,panelBackgroundColor:1,title:{text:1,align:1,style:1,verticalShift:1},fillOpacity:1,outlineColor:1,outlineOpacity:1,outlineThickness:1,outlineStyle:1,gaugeHolePercent:1,gaugeRangeMin:1,gaugeRangeMax:1,gaugeGap:1,gaugeStartAngle:1,gaugeArcPercent:1,gaugeLabelPlacement:1,gaugeLabelStyle:1,gaugeShowArrow:1,gaugeArrowLineColor:1,gaugeArrowFillColor:1,gaugeConditionalStylingOthers:1,gaugeConditionalStylingLabel:1,gaugeShowFromToLabels:1,
gaugeFromLabelStyle:1,gaugeToLabelStyle:1,dataLabelsDecimals:1,dataLabelsShowValuePercentSymbol:1,dataLabelsShowValueCurrencySymbol:1,chartIcons:1,floatingIcons:1,showChartIcons:1,floatingTexts:1,conditionalStyling:1,tooltip:1}}})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/cleanUp/chartTypes/graphic/_Waffle":function(){define([],function(){return{isChart:1,type:1,seriesItems:[{label:1,color:1,points:1}],visualProperties:{width:1,height:1,marginTop:1,marginRight:1,marginBottom:1,marginLeft:1,
backgroundColor:1,backgroundColorOpacity:1,plotAreaOutlineColor:1,plotAreaOutlineOpacity:1,plotAreaOutlineThickness:1,plotAreaOutlineStyle:1,panelBackgroundColor:1,title:{text:1,align:1,style:1,verticalShift:1},legend:{type:1,series:{placement:1,placementOffset:1,hasBorder:1,labelParts:1,style:1,symbol:1,hideOthers:1},minMax:{placement:1,placementOffset:1,titleStyle:1,minVariableLabelStyle:1,maxVariableLabelStyle:1}},waffleDirection:1,waffleFlowStyle:1,waffleShowWholePictures:1,waffleStretchIconsToFill:1,
waffleRangeMin:1,waffleRangeMax:1,waffleLabelPlacement:1,waffleLabelOffset:1,waffleHideValue:1,waffleHideLabel:1,waffleShowLabelAbove:1,waffleValueStyle:1,waffleLabelStyle:1,waffleColumnSpace:1,waffleRowSpace:1,waffleConditionalStylingOthers:1,waffleConditionalStylingValue:1,waffleConditionalStylingLabel:1,waffleNumIcons:1,waffleNumRows:1,waffleNumColumns:1,dataLabelsDecimals:1,dataLabelsShowValuePercentSymbol:1,dataLabelsShowValueCurrencySymbol:1,dataLabelsHorizontalAlign:1,dataLabelsVerticalAlign:1,
floatingIcons:1,floatingTexts:1,conditionalStyling:1,tooltip:1},dataDrillingPanelInfo:1}})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/plots/supportClasses/GaugeLabelPlacements":function(){define([],function(){var k={NONE:"None",INSIDE:"Inside",OUTSIDE:"Outside",isSupported:function(g){for(var f in k)if(k[f]===g)return!0;return!1},toSupportedValue:function(g){return k.isSupported(g)?g:k.NONE}};return k})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/plots/supportClasses/WaffleLabelPlacements":function(){define([],
function(){var k={NONE:"None",TOP:"Top",RIGHT:"Right",BOTTOM:"Bottom",LEFT:"Left",INSIDE:"Inside",isSupported:function(g){for(var f in k)if(k[f]===g)return!0;return!1},toSupportedValue:function(g){return k.isSupported(g)?g:k.NONE}};return k})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/plots/supportClasses/WaffleDirections":function(){define([],function(){var k={UP_RIGHT:"Up",DOWN_RIGHT:"Down",RIGHT_UP:"Right",LEFT_UP:"Left",UP_LEFT:"UpLeft",DOWN_LEFT:"DownLeft",RIGHT_DOWN:"RightDown",
LEFT_DOWN:"LeftDown",isSupported:function(g){for(var f in k)if(k[f]===g)return!0;return!1},toSupportedValue:function(g){return k.isSupported(g)?g:k.DOWN_RIGHT},isLeftRightStartPosition:function(g){return g===k.RIGHT_UP||g===k.LEFT_UP||g===k.RIGHT_DOWN||g===k.LEFT_DOWN},isLeftGrowth:function(g){return g===k.UP_LEFT||g===k.DOWN_LEFT},isDownGrowth:function(g){return g===k.RIGHT_DOWN||g===k.LEFT_DOWN},toFlowDirectionPosition:function(g){switch(g){case k.UP_RIGHT:return["Right","Down"];case k.DOWN_RIGHT:return["Right",
"Up"];case k.RIGHT_UP:return["Up","Left"];case k.LEFT_UP:return["Up","Right"];case k.UP_LEFT:return["Left","Down"];case k.DOWN_LEFT:return["Left","Up"];case k.RIGHT_DOWN:return["Down","Left"];case k.LEFT_DOWN:return["Down","Right"]}},fromFlowDirectionPosition:function(g,f){if("Right"===g)return"Down"===f?k.UP_RIGHT:k.DOWN_RIGHT;if("Up"===g)return"Left"===f?k.RIGHT_UP:k.LEFT_UP;if("Left"===g)return"Down"===f?k.UP_LEFT:k.DOWN_LEFT;if("Down"===g)return"Left"===f?k.RIGHT_DOWN:k.LEFT_DOWN}};return k})},
"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/chart/GridChartUtil":function(){define(["dojo/string","../../../charts/utils/ChartTypes","../GridDataUtil","dojo/i18n!esri/nls/jsapi"],function(k,g,f,e){e=e.geoenrichment.dijit.ReportPlayer.Grid;var c={getSupportedChartTypes:function(b){return c._canViewTableAsChart(b)&&[g.COLUMN,g.BAR,g.LINE,g.VERTICAL_LINE,g.PIE,g.DONUT,g.RING]},getTableRowsColumnsInfos:function(b){var a=b.columns[0].field,d=c._hasBigTitleCell(b)?1:0,f=b.store.data[d];if(!f)return null;
var g=[],n=[];b.columns.forEach(function(a,b){0!==b&&n.push({label:f[a.field]||k.substitute(e.columnN,[b+1]),id:b+""})});b.store.data.forEach(function(b,c){c>d&&g.push({label:b[a]||c+1+"",id:c+""})});return{rowInfos:g,columnInfos:n}},_canViewTableAsChart:function(b){return b.noChartView||2>b.columns.length||2>b.store.data.length?!1:b.getFieldCells().length===b.store.data.length*b.columns.length||c._hasBigTitleCell(b)&&b.getFieldCells().length-1===(b.store.data.length-1)*b.columns.length?!0:!1},getChartTitle:function(b){return b.getFieldCells()[0].get("value")},
_hasBigTitleCell:function(b){var a=b.getFieldCells()[0];return f.getColumnSpan(a)===b.columns.length&&!f.getRowSpan(a)},createChartSeriesItems:function(b,a){return a.seriesInRows?c._buildSeriesInRows(b,a):c._buildSeriesInColumns(b,a)},_buildSeriesInColumns:function(b,a){var d=[],h=b.columns[0].field,l=c._hasBigTitleCell(b)?1:0;b.columns.forEach(function(a,c){if(0!==c){var g={label:"",points:[]};d.push(g);b.store.data.forEach(function(d,m){if(!(m<l))if(m===l)g.label=d[a.field]||k.substitute(e.columnN,
[c+1]),g._cIndex=c;else{var p=f.getRenderedValue(b,d,a),n=d.fieldInfos[a.field];g.points.push({label:d[h]||k.substitute(e.rowN,[m+1]),value:{value:p.numericValue||0,formattedValue:p.formattedValue,decimals:n&&n.decimals},_rIndex:m})}})}});g.isSingleSeries(a.chartType)&&0<=a.sourceId&&(d=(a=d[a.sourceId])?[a]:[]);c._resolveSeriesNames(d,!1);return d},_buildSeriesInRows:function(b,a){var d=[],h=c._hasBigTitleCell(b)?1:0,l=b.store.data[h];b.store.data.forEach(function(a,c){if(!(c<h)&&c!==h){var g={label:"",
points:[]};d.push(g);b.columns.forEach(function(d,h){if(0===h)g.label=a[d.field]||k.substitute(e.rowN,[c+1]),g._rIndex=c;else{var m=f.getRenderedValue(b,a,d),p=a.fieldInfos[d.field];g.points.push({label:l[d.field]||h+1+"",value:{value:m.numericValue||0,formattedValue:m.formattedValue,decimals:p&&p.decimals},_cIndex:h})}})}});g.isSingleSeries(a.chartType)&&0<=a.sourceId&&(d=(a=d[a.sourceId])?[a]:[]);c._resolveSeriesNames(d,!0);return d},_resolveSeriesNames:function(b,a){c._resolveItems(b,a);b.forEach(function(b){c._resolveItems(b.points,
!a)})},_resolveItems:function(b,a){var c={};b.forEach(function(a){(c[a.label]=c[a.label]||[]).push(a)});for(var f in c)1<c[f].length&&c[f].forEach(function(b){b.label+=" ("+k.substitute(e[a?"rowN":"columnN"],[b[a?"_rIndex":"_cIndex"]+1])+")"});b.forEach(function(b){delete b[a?"_rIndex":"_cIndex"]})}};return c})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/_GridHighlightSupport":function(){define(["dojo/_base/declare","dojo/on","dojo/dom-construct","esri/dijit/geoenrichment/utils/MouseUtil"],
function(k,g,f,e){return k(null,{canHighlightHeader:!1,canHighlightFirstColumn:!0,_highlightOnHoverHandles:null,_setHighlightRowsOnHoverAttr:function(c){this._setHighlightOnHover(c,!1)},setCellRowHighlighted:function(c,b){(c=c&&c.domNode&&this.queryCells({rowIndex:c.gridData.index}))&&c.forEach(function(a){this.setCellHighlighted(a,b)},this)},_setHighlightColumnsOnHoverAttr:function(c){this._setHighlightOnHover(c,!0)},setCellColumnHighlighted:function(c,b){(c=c&&c.domNode&&this.queryCells({columnIndex:c.column.index}))&&
c.forEach(function(a){this.setCellHighlighted(a,b)},this)},setCellHighlighted:function(c,b){if(c&&c.domNode)if(!b)c.__highlightScreen&&(c.__highlightScreen.style.display="none");else if(this.canHighlightHeader||0!==c.gridData.index)if(this.canHighlightFirstColumn||0!==c.column.index)c.__highlightScreen=c.__highlightScreen||f.create("div",{"class":"fieldCellHighlightScreen esriGEAbsoluteStretched"},c.domNode,"first"),c.__highlightScreen.style.display=""},_setHighlightOnHover:function(c,b){function a(){var a;
d.getFieldCells().forEach(function(b){d.setCellHighlighted(b,!1);e.isMouseOver(b&&b.domNode)&&(a=b)});return a}if(this.domNode){var d=this;this._highlightOnHoverHandles&&this._highlightOnHoverHandles.forEach(function(a){a.remove()});if(c){this._highlightOnHoverHandles=[];var f;this._highlightOnHoverHandles.push(g(d.domNode,"mouseover",function(){f&&f.remove();f=g(document.body,"mousemove",function(){e.isMouseOver(d.domNode)||(a(),f.remove())})}));this._highlightOnHoverHandles.push(g(d.domNode,"mousemove",
function(){var c=a();c&&d[b?"setCellColumnHighlighted":"setCellRowHighlighted"](c,!0)}));this._highlightOnHoverHandles.push(g(d.domNode,"mouseout",function(){a()}));this._highlightOnHoverHandles.forEach(function(a){d.own(a)})}}}})})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/_GridFilterSupport":function(){define("esri/dijit/geoenrichment/when dojo/_base/declare dojo/dom-construct ./coreUtils/GridFilterUtil ../sections/dynamicSettings/supportClasses/FilterUtil dojo/i18n!esri/nls/jsapi".split(" "),
function(k,g,f,e,c,b){b=b.geoenrichment.dijit.ReportPlayer.Grid;return g(null,{presetFilter:null,ignorePresetFilter:!1,_filterStats:null,_filterRanges:null,_numShownElements:null,_emptyDiv:null,_applyFilterToStoreData:function(){if(!this.ignorePresetFilter){var a=this._getSetRanges();this._emptyDiv&&f.destroy(this._emptyDiv);this._emptyDiv=null;this.mainNode.style.display="";a&&a.length&&(this._numShownElements=e.filterGridData(this,a).numRowsShown,this._numShownElements||(this._emptyDiv=f.create("div",
{"class":"esriGEAbsoluteStretched esriGENoDataPlaceHolder"},this.domNode),f.create("div",{"class":"esriGENoDataPlaceHolderLabel",innerHTML:b.noTableData},this._emptyDiv),this.mainNode.style.display="none",this._emptyDiv.style.paddingTop=(this.getHeight(!1,!1)-20)/2+"px"))}},_getSetRanges:function(){if(!this.presetFilter||this.presetFilter.ranges&&!this.viewModel.dynamicReportInfo)return this._filterRanges;var a=this.getFilterRanges();return this._filterRanges=a&&a.map(function(b){var d=c.filterData(b.dataArray,
1===a.length||this.presetFilter.columnIndex===b.columnIndex?this.presetFilter:{method:c.NONE});return{fieldName:b.fieldName,min:d[0],max:d[d.length-1]}},this)},getFilterRanges:function(){return(this._filterStats=e.collectStatsForVariables(this))&&this._filterStats.filterRanges.length?this._filterStats.filterRanges:null},setFilterRanges:function(a){var b=this;this.presetFilter=null;this._filterRanges=a;return k(this.refresh(),function(){return b._chartViewInfo&&b.tableToChart(b._chartViewInfo)})},
getNumElementsTotal:function(){return this._filterStats&&this._filterStats.numRowsTotal||0},getNumElementsShown:function(){return"number"===typeof this._numShownElements?this._numShownElements:this.getNumElementsTotal()}})})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/GridFilterUtil":function(){define("dojo/string ../../supportClasses/tableJson/TableJsonResizeUtil ../../supportClasses/tableJson/TableJsonUtil ./sorting/GridSortUtil ./sorting/GridRowStyler ./GridDataUtil esri/dijit/geoenrichment/utils/ObjectUtil esri/dijit/geoenrichment/utils/JsonXmlConverter dojo/i18n!esri/nls/jsapi".split(" "),
function(k,g,f,e,c,b,a,d,h){h=h.geoenrichment.dijit.ReportPlayer.Grid;var l={collectStatsForVariables:function(c){var e=0,f=[],g={};if(2>c.columns.length||3>c.store.data.length)return null;var n=l.getFirstFilterableRowIndex(c)-1;c.columns.forEach(function(l,m){var p,q={alias:null,fieldName:l.field,columnIndex:m,min:Infinity,max:-Infinity,decimals:0,dataArray:[]};c._getOriginalData().forEach(function(f,h){f=b.getRenderedValue(c,f,l);h<=n?q.alias=q.alias||h===n&&d.unrichHTML(f.formattedValue):"number"===
typeof f.numericValue&&(f=f.numericValue,q.min=Math.min(q.min,f),q.max=Math.max(q.max,f),q.decimals=Math.max(q.decimals,a.getPlaces(f)),q.dataArray.push(f),e++,p=!0,g[h]=!0)});p&&(q.alias=q.alias||k.substitute(h.columnN,[m+1]),f.push(q),q._cIndex=m)});var r={};f.forEach(function(a){(r[a.alias]=r[a.alias]||[]).push(a)});for(var u in r)1<r[u].length&&r[u].forEach(function(a){a.alias+=" ("+k.substitute(h.columnN,[a._cIndex+1])+")"});f.forEach(function(a){delete a._cIndex});return 1<e&&{filterRanges:f,
numVariablesTotal:e,numRowsTotal:Object.keys(g).length}},getFirstFilterableRowIndex:function(a){var c=a._getOriginalData(),d=a.columns[0].field,e=(d=b.getDataColumnSpan(c[0],d)===a.columns.length&&!b.getDataRowSpan(c[0],d))?1:0;a=a.columns.some(function(a){return b.isVariableLikeFieldCell(b.getFieldInfo({gridData:c[e],column:a}))});return d?a?1:2:a?0:1},filterGridData:function(a,d){var h=[],k=0,m=0,n={};d.forEach(function(a){n[a.fieldName]=a});a._saveOriginalData();var u=l.getFirstFilterableRowIndex(a)-
1;d=e.getSortableDataInfo(a);a.store.data.forEach(function(c,d){var e=!0,f;d>u&&a.columns.forEach(function(d){var h=n[d.field];if(h){var g=b.getRenderedValue(a,c,d);"number"===typeof g.numericValue&&(f=!0,g.numericValue<h.min||g.numericValue>h.max?(delete c.fieldInfos[d.field],delete c[d.field],e=!1):k++)}});e&&(h.push(c),f&&m++)});g.resizeTableJsonToFitHeight({data:{data:h,columns:a.columns}},f.getTableHeight({data:{data:a.store.data}}));if(d&&d.styleInfo){var v=h.slice(d.topData.length);c.setAlternatingColors(v,
a.columns,d.styleInfo)}a.store.data=h;return{numValuesShown:k,numRowsShown:m}}};return l})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/tableJson/TableJsonResizeUtil":function(){define([],function(){var k={resizeTableJsonToFitWidth:function(g,f,e){e=e&&e.columnWidths;var c=0;g.data.columns.forEach(function(a){var b=a.style.width;"string"===typeof b&&-1!==b.indexOf("%")&&(b=Number(b.replace("%",""))/100*f,a.style.width=b);c+=b});g.style.width=f;var b=f/c;g.data.columns.forEach(function(a){a.style.width*=
b});e&&e.length&&(e.forEach(function(a,b){if(b=g.data.columns[b])b.style.width=a}),k.resizeTableJsonToFitWidth(g,f))},resizeTableJsonToFitHeight:function(g,f){var e=0;g.data.data.forEach(function(b){e+=b.style.height});var c=f/e;g.data.data.forEach(function(b){b.style.height*=c})}};return k})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/sorting/GridSortUtil":function(){define("dojo/_base/lang dojo/dom-class dojo/dom-construct esri/dijit/geoenrichment/ReportPlayer/config ./GridRowStyler ../GridDataUtil ../GridQueryUtil ../gridLayoutCalcUtils/GridLayoutCalculatorQueryUtil esri/dijit/geoenrichment/utils/DnDUtil esri/dijit/geoenrichment/utils/TooltipUtil dojo/i18n!esri/nls/jsapi".split(" "),
function(k,g,f,e,c,b,a,d,h,l,n){n=n.geoenrichment.dijit.ReportPlayer.Grid;var m={ORDER_ASC:"asc",ORDER_DES:"desc",isGridSortable:function(a){return!(!a.allowSorting||!(a.viewModel.dynamicReportInfo||a.presetSorting&&!a.ignorePresetSorting)||!m.isGridSortableInStructure(a))},isGridSortableInStructure:function(a){return!(a.isEmptyTable()||3>a.store.data.length||!m.collectHeaderRowInfoFromData(a))},getSorting:function(a){return(a=a._sortInfo||a.presetSorting)&&{field:a.field,order:a.order}},applySortingToStoreData:function(a){m.isGridSortable(a)&&
m._applySortingToStoreData(a)},setSorting:function(a,b,c){if(m.isGridSortable(a)&&b)if(a.presetSorting=null,a._sortInfo={field:b.field,order:b.order},c&&c.doNotRefresh)m._makeSortable(a);else return a.refresh()},buildSortControls:function(a){m.isGridSortable(a)&&m._makeSortable(a)},getSortRowIndexMapping:function(a){var b=m.getSorting(a);if(!b||!b.order)return null;var c={},d={};a._getOriginalData().forEach(function(a,b){d[a.id]=b});a.store.data.forEach(function(a,b){c[b]=d[a.id]});return c},getSortableDataInfo:function(a){function b(b){var c=
[],d=m.collectHeaderRowInfoFromData(a,b);if(!d)return null;b=b?a._getOriginalData().slice():k.clone(a.store.data);for(var e=0;e<d.headerRowIndex+1;e++)c.push(b.shift());return{topData:c,sortableData:b}}var d=b();d&&(d.styleInfo=c.getStyleInfo(b(!0).sortableData,a.columns));return d},_applySortingToStoreData:function(a){var d=m.getSorting(a);if(d&&d.order){a._saveOriginalData();var e=m.getSortableDataInfo(a),f=d.field,h=a.columns.filter(function(a){return a.field===f})[0];h&&e.sortableData.sort(function(c,
e){function f(c){c=b.getRenderedValue(a,c,h);return"number"===typeof c.numericValue?c.numericValue:c.formattedValue}c=f(c);var g=f(e);e=d.order===m.ORDER_DES;"number"===typeof c||"number"===typeof g?(c=Number(c),g=Number(g),c=c>g?1:c<g?-1:0):(c=String(c),g=String(g),c=c.localeCompare(g));return e?-c:c});e.styleInfo&&c.setAlternatingColors(e.sortableData,a.columns,e.styleInfo);a.store.data=e.topData.concat(e.sortableData)}},collectHeaderRowInfoFromData:function(a,b){function c(b){b=e[b];for(var c=
0,f=0;f<a.columns.length;f++){var g=d.getColumnSpannedFields(a,b,a.columns[f].field),f=f+(g&&g.length?g.length-1:0);c++}return c}var e=b?a._getOriginalData():a.store.data;b=e.length-2;for(var f,g=0;g<b;g++)if(c(g)===a.columns.length){f=g;break}if(0<=f)for(g=f+1;g<e.length;g++){if(c(g)!==a.columns.length)return null}else return null;return{headerRowIndex:f}},_makeSortable:function(a){if(!e.isPlayerOnServer){var b=m._collectHeaderRowInfoWithCells(a);b&&(b.cells.forEach(function(b){if(!b._sortArrow){var c=
f.create("div",{"class":"sortArrow sortArrowHoverIndicator"},b.domNode),d=b.getFullStyle();c.style[d&&"left"===d.horizontalAlign?"right":"left"]="5px";b._sortArrow=c;a.viewModel.dynamicReportInfo&&(g.add(b.domNode,"esriGEClickable"),h.addNoDragClickHandler(b.contentBlock,function(c){a&&a.canSortCellFunc&&!a.canSortCellFunc(b)||m._checkCanSortOnHeaderClick(c)&&m._toggleSortForCell(b)}),h.addNoDragClickHandler(c,function(a){m._toggleSortForCell(b)}))}}),m._updateArrows(a,b))}},_collectHeaderRowInfoWithCells:function(b){for(var c=
b.store.data.length-2,d,e,f=0;f<c;f++){var g=a.queryCells(b,{rowIndex:f});if(g&&g.length===b.columns.length){d=g;e=f;break}}if(d)for(f=e+1;f<b.store.data.length;f++){if(g=a.queryCells(b,{rowIndex:f}),!g||g.length!==b.columns.length)return null}else return null;return{cells:d,headerRowIndex:e}},_toggleSortForCell:function(a){var b=a.parentGrid,c=m.getSorting(b),c=c&&c.field===a.column.field?c.order:null;b.presetSorting=null;b._sortInfo={field:a.column.field,order:null};c?c===m.ORDER_DES?b._sortInfo.order=
m.ORDER_ASC:c===m.ORDER_ASC&&(b._sortInfo.order=null):b._sortInfo.order=m.ORDER_DES;b.refresh();b.onSortingChanged(m.getSorting(b))},_checkCanSortOnHeaderClick:function(a){if(a&&a.path){if(a.path.some(function(a){return"A"===a.nodeName}))return!1}else if(a&&a.srcElement&&a.srcElement.parentNode&&"A"===a.srcElement.parentNode.nodeName)return!1;return!0},_updateArrows:function(a,b){b.cells.forEach(function(b){var c=b._sortArrow;if(c){g.remove(c,"sortArrowHoverIndicator sortArrowUp sortArrowDown");l.setTooltipToNode(c,
null);var d=m.getSorting(a);d&&d.field===b.column.field?d.order===m.ORDER_ASC?g.add(c,"sortArrowUp"):d.order===m.ORDER_DES?g.add(c,"sortArrowDown"):(l.setTooltipToNode(c,n.sortTable),g.add(c,"sortArrowHoverIndicator")):(l.setTooltipToNode(c,n.sortTable),g.add(c,"sortArrowHoverIndicator"));setTimeout(function(){c.style.top=(b.getHeight()-c.clientHeight)/2+"px"},100)}})}};return m})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/sorting/GridRowStyler":function(){define([],function(){var k=
{_getCellStyle:function(g,f){g.style=g.style||{};g=g.style.fields=g.style.fields||{};return g[f.field]=g[f.field]||{}},_getCellStyleState:function(g){return{backgroundColor:g.backgroundColor,overrideStyle:g.overrideStyle,key:g.backgroundColor+"."+g.overrideStyle}},getStyleInfo:function(g,f){function e(b){var a;return f.some(function(c){c=k._getCellStyle(b,c);c=k._getCellStyleState(c);if(a&&a.key!==c.key)return!0;a=c})?!1:a}k.resetStyling(g,f);var c=[];return g.some(function(b){var a=e(b);if(!a)return!0;
if(c.length)if(1===c.length){if(c[0].key===a.key)return!0;c.push(a)}else{if((a.backgroundColor||a.overrideStyle)&&!c.some(function(b){return b.key===a.key}))return!0}else c.push(a)})?null:{states:c}},setAlternatingColors:function(g,f,e,c){k.resetStyling(g,f);e&&e.states.length&&(1===e.states.length&&"Default"===e.states[0].overrideStyle&&e.states.push({overrideStyle:"AlternatingRow"}),1===e.states.length&&"AlternatingRow"===e.states[0].overrideStyle&&e.states.unshift({overrideStyle:"Default"}),g.forEach(function(b,
a){var d=a%2?e.states[1]:e.states[0];f.forEach(function(a){a=k._getCellStyle(b,a);c&&c.forceOverrideOriginal?a.backgroundColor=d.backgroundColor:(a.__isStyled=!0,a.__originalBackgroundColor=a.backgroundColor,a.backgroundColor=d.backgroundColor,a.__originalOverrideStyle=a.overrideStyle);a.overrideStyle=d.overrideStyle})}))},resetStyling:function(g,f){g.forEach(function(e){f.forEach(function(c){c=k._getCellStyle(e,c);c.__isStyled&&(delete c.__isStyled,c.backgroundColor=c.__originalBackgroundColor,delete c.__originalBackgroundColor,
c.overrideStyle=c.__originalOverrideStyle,delete c.__originalOverrideStyle)})})}};return k})},"esri/dijit/geoenrichment/ReportPlayer/core/sections/dynamicSettings/supportClasses/FilterUtil":function(){define(["esri/dijit/geoenrichment/utils/SortUtil"],function(k){var g={ABOVE_AVERAGE:"aboveAverage",BELOW_AVERAGE:"belowAverage",TOP_N:"topN",BOTTOM_N:"bottomN",RANGE:"range",NONE:"none",isSupported:function(f){for(var e in g)if(g[e]===f)return!0;return!1},isNumElementsType:function(f){return f===g.TOP_N||
f===g.BOTTOM_N},isRangeType:function(f){return f===g.RANGE},filterData:function(f,e){function c(){var a=0;f.forEach(function(b){a+=b});return a/f.length}if(!f.length)return[];f=f.slice().sort(k.compareNumeric);switch(e.method){case g.ABOVE_AVERAGE:var b=c();return f.filter(function(a){return a>b});case g.BELOW_AVERAGE:return b=c(),f.filter(function(a){return a<b});case g.TOP_N:var a=e.numElements;if(a>=f.length)return f;var d=f.slice().reverse()[a-1];return f.filter(function(a){return a>=d});case g.BOTTOM_N:a=
e.numElements;if(a>=f.length)return f;var h=f[a-1];return f.filter(function(a){return a<=h});case g.RANGE:return f.filter(function(a){return e.ranges.some(function(b){return g._checkValueMatchesRange(a,b)})});case g.NONE:return f;default:throw Error("Method is not supported!");}},_checkValueMatchesRange:function(f,e){function c(b,a,c){switch(a){case "\x3d":return b===c;case "\x3c":return b<c;case "\x3e":return b>c;case "\x3c\x3d":return b<=c;case "\x3e\x3d":return b>=c}return!1}return e.conditions.length&&
e.conditions.every(function(b){return c(f,b.operator,Number(b.value))})},getRangeStatistics:function(f){var e=-Infinity,c=Infinity;f&&f.forEach(function(b){b.conditions.forEach(function(a){"\x3e"===a.operator||"\x3e\x3d"===a.operator?e=Math.max(e,a.value):c=Math.min(c,a.value)})});return{min:e,max:c}}};return g})},"esri/dijit/geoenrichment/utils/SortUtil":function(){define([],function(){function k(c,b,a,d){c=void 0===c||null===c;return c!=(void 0===b||null===b)?(b=c?-1:1,(void 0===d?a:d)?-b:b):c?
0:null}function g(c){var b=/^(.+)\s([1-9]\d*)$/.exec(c);return b?{base:b[1],number:b[2]}:/^[1-9]\d*$/.test(c)?{base:"",number:+c}:{base:c,number:0}}var f={NEWEST:"newest",OLDEST:"oldest",ALPHABETICAL:"alphabetical",UNALPHABETICAL:"unalphabetical",compareNumeric:function(c,b,a,d){d=k(c,b,a,d);if(null!==d)return d;c=Number(c);b=Number(b);d=c>b?1:c<b?-1:0;return a?-d:d},compareString:function(c,b,a,d){d=k(c,b,a,d);if(null!==d)return d;c=String(c);b=String(b);d=c.localeCompare(b);return a?-d:d}},e=/^(.+)\s([1-9]\d*)(\D*)$/;
f.compareNames=function(c,b,a,d){var h=g("string"===typeof c?c.toLowerCase():c),k=g("string"===typeof b?b.toLowerCase():b),n=null;if(h.base===k.base)n=f.compareNumeric(h.number,k.number,a,d);else{var m=e.exec(h.base);if(m){var p=e.exec(k.base);p&&m[1]===p[1]&&m[3]===p[3]&&(n=f.compareNumeric(m[2],p[2],a,d))}null===n&&(n=f.compareString(h.base,k.base,a,d))}return n||f.compareString(c,b,a,d)};f.compare=function(c,b,a,d){var e=k(c,b,a,d);if(null!==e)return e;e=typeof c;typeof b!=e&&(e="");switch(e){case "number":case "boolean":break;
case "object":c=c.valueOf();b=b.valueOf();break;default:return f.compareString(c,b,a,d)}e=c>b?1:c<b?-1:0;return a?-e:e};return f})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/_GridSortSupport":function(){define(["dojo/_base/declare","./coreUtils/sorting/GridSortUtil"],function(k,g){return k(null,{presetSorting:null,ignorePresetSorting:!1,allowSorting:!1,canSortCellFunc:null,_applySortingToStoreData:function(){!this.ignorePresetSorting&&g.applySortingToStoreData(this)},_buildSortControls:function(){g.buildSortControls(this)},
getSorting:function(){return g.getSorting(this)},setSorting:function(f,e){return g.setSorting(this,f,e)},getSortRowIndexMapping:function(){return g.getSortRowIndexMapping(this)},onSortingChanged:function(f){}})})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/_ResizableColumnsSupport":function(){define(["dojo/_base/declare"],function(k){return k(null,{_populateFieldForResizableColumns:function(g,f,e){var c=this;0===f.index&&(g.onManualWidthChange=function(){c._setCellWidth(g,g.getWidth());c.onColumnWidthChanged()})},
onColumnWidthChanged:function(){}})})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/_DataDrillingSupport":function(){define(["dojo/_base/declare","../dataDrilling/DataDrillingVisualizer","../dataDrilling/DataDrillingButtonsBuilder","./coreUtils/GridDataUtil","../supportClasses/WidgetQueryUtil"],function(k,g,f,e,c){return k(null,{_ddButtonsBuilder:null,_trySetupDataDrilling:function(b){var a=this;this.viewModel.dynamicReportInfo&&this.viewModel.enableDataDrilling&&!c.isDataDrillingView(this)&&
e.getDataDrilling(b)&&(this._ddButtonsBuilder=this._ddButtonsBuilder||new f({parentWidget:this}),this._ddButtonsBuilder.setDataDrillingButtonForTableCell(b,function(){a._showDataDrilling(b)}))},_showDataDrilling:function(b){var a=new g({viewModel:this.viewModel,theme:this.theme,parentWidget:this,domNode:this.domNode,currentFeatureIndex:this.currentFeatureIndex,closeZoomedDDWhenClickedOutside:!0,closeZoomedDDOnEsc:!0,onClose:function(){a.play(!1,!0)}});a.play(!0,!0,null,e.getDataDrilling(b).sectionJson)}})})},
"esri/dijit/geoenrichment/ReportPlayer/core/dataDrilling/DataDrillingVisualizer":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect esri/dijit/geoenrichment/when dojo/on dojo/keys dojo/query dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dijit/Destroyable esri/dijit/geoenrichment/utils/DelayUtil esri/dijit/geoenrichment/utils/DeviceUtil esri/dijit/geoenrichment/utils/DomUtil esri/dijit/geoenrichment/utils/MouseUtil esri/dijit/geoenrichment/utils/TooltipUtil esri/dijit/geoenrichment/utils/WaitingUtil esri/dijit/geoenrichment/utils/animation/AnimationUtil esri/dijit/geoenrichment/utils/mobile/GesturesUtil ../sections/sectionUtils/SectionJsonUtil ../supportClasses/ViewModes ./DataDrillingBackgroundUtil ./DataDrillingExportUtil ../../ReportPlayerState dojo/i18n!esri/nls/jsapi".split(" "),
function(k,g,f,e,c,b,a,d,h,l,n,m,p,t,q,r,u,v,w,y,A,B,C,z,E,G){G=G.geoenrichment.dijit.ReportPlayer.Infographics;var F={w:700,h:600,minW:400,minH:500};k=k(m,{viewModel:null,theme:null,parentWidget:null,currentFeatureIndex:null,currentFeatureAttributes:null,getPreviewValueFunction:null,ddZoomScreenClass:null,closeZoomedDDWhenClickedOutside:!0,closeZoomedDDOnEsc:!0,zIndex:null,domNode:null,ddZoomScreen:null,dataDrillingViewDiv:null,_drillingSections:null,_currentTriggerButtonBox:null,_toDataDrillingScale:1,
constructor:function(a){g.mixin(this,a);this._buildLayout();t.isMobileDevice()&&y.preventDefaultOverflow(this.dataDrillingViewDiv)},_buildLayout:function(){function a(a,b){return h.create("div",{"class":a},b)}var b=this;this.dataDrillingViewDiv=a("dataDrilling_dataDrillingViewDiv esriGEReportPlayer esriGENonSelectable");this.drilledDataViewDiv=a("dataDrilling_drilledDataViewDiv esriGEAbsoluteStretched",this.dataDrillingViewDiv);this.drilledDataViewDivScaler=a("",this.drilledDataViewDiv);this.topToolbar=
a("dataDrilling_topToolbar",this.dataDrillingViewDiv);this.dynamicSettingsToolbarRoot=a("dijitInline dataDrilling_dynamicSettingsToolbarRoot",this.topToolbar);this.exportButton=a("dijitInline dataDrilling_exportButton",this.topToolbar);this.printButton=a("dijitInline dataDrilling_printButton",this.topToolbar);this.backToMainViewButton=a("dijitInline dataDrilling_backToMainViewButton",this.topToolbar);c(this.backToMainViewButton,"click",function(){b.onClose()});var d=this.exportButton,e=this.printButton;
q.hide([d,e]);this.viewModel.dynamicReportInfo&&(z.canExportDataDrilling(this.parentWidget)&&(u.setTooltipToNode(d,G.exportInfographic),q.show(d),c(d,"click",function(){z.exportDataDrilling(b)})),z.canPrintDataDrilling(this.parentWidget)&&(u.setTooltipToNode(e,G.printInfographic),q.show(e),c(e,"click",function(){z.printDataDrilling(b)})))},play:function(a,b,c,e,f){function g(a){a?(q.show(k.dataDrillingViewDiv),k.dataDrillingViewDiv.parentNode!==document.body&&document.body.appendChild(k.dataDrillingViewDiv),
k.zIndex&&n.set(k.dataDrillingViewDiv,"zIndex",k.zIndex)):(k.dataDrillingViewDiv.parentNode===document.body&&document.body.removeChild(k.dataDrillingViewDiv),q.hide(k.dataDrillingViewDiv))}function h(){g(a);k._setZoomScreen(a,!1);k._setCloseHandlers(a);E.isViewingDataDrillingZoom=a;d[a?"add":"remove"](k.domNode,"isDrillingData");d.remove(k.domNode,"isShowingAnimation")}var k=this;this.viewModel.setBenchmarkDisabled&&this.viewModel.setBenchmarkDisabled(a);this._currentTriggerButtonBox=c?l.position(c):
this._currentTriggerButtonBox;d.add(this.domNode,"isShowingAnimation");if(b)return g(!0),a?(b=this.getDataDrillingPanelDimensions(e),n.set(this.dataDrillingViewDiv,{width:b.w+"px",height:b.h+"px"})):b={w:this.dataDrillingViewDiv.clientWidth,h:this.dataDrillingViewDiv.clientHeight,scale:this._toDataDrillingScale},this._setZoomScreen(a,!0),a?(c=this._toDataDrillingScale=b.scale||1,b=w.animateResize({duration:200,domNode:this.dataDrillingViewDiv,fromBox:b.animateFromCenter||!this._currentTriggerButtonBox?
{x:0,y:0,w:document.body.clientWidth,h:document.body.clientHeight}:this._currentTriggerButtonBox,startScaleX:.7*c,startScaleY:.7*c,fromOffset:{x:"c",y:"c"},toBox:{x:(document.body.clientWidth-b.w*c)/2,y:(document.body.clientHeight-b.h*c)/2+(b.yOffset||0),w:b.w,h:b.h},endScaleX:b.scale,endScaleY:b.scale,onEnd:h}),w.animateFadeIn({domNode:k.dataDrillingViewDiv,duration:100})):(b=w.animateResize({duration:200,domNode:this.dataDrillingViewDiv,toBox:this._currentTriggerButtonBox,startScaleX:b.scale,startScaleY:b.scale,
endScaleX:.7*(b.scale||1),endScaleY:.7*(b.scale||1),toOffset:{x:"c",y:"c"},onEnd:h}),w.animateFadeOut({domNode:this.dataDrillingViewDiv,duration:100})),b=b&&b.then(function(){return p.delay(100)}),a&&e&&k.renderCustomSectionJson({sectionJson:e,fieldInfo:f,promise:b}),b;h()},_setZoomScreen:function(a,b){var c=this;a!==!!this.ddZoomScreen&&(a?(this.ddZoomScreen=h.create("div",{"class":"esriGEAbsoluteStretched dataDrilling_dataDrillingViewDivScreen"+(t.isMobileDevice()?" mobile":"")},this.dataDrillingViewDiv,
"before"),t.isMobileDevice()&&y.preventDefaultOverflow(this.ddZoomScreen),this.zIndex&&n.set(this.ddZoomScreen,"zIndex",this.zIndex),this.ddZoomScreenClass&&d.add(this.ddZoomScreen,this.ddZoomScreenClass),b&&w.animateFadeIn({domNode:this.ddZoomScreen,duration:100})):(a=function(){c.ddZoomScreen&&h.destroy(c.ddZoomScreen);c.ddZoomScreen=null},b?w.animateFadeOut({domNode:this.ddZoomScreen,duration:100,onEnd:a}):a()))},_clickOutsideHandler:null,_keyboardHandler:null,_setCloseHandlers:function(a){var d=
this;this._clickOutsideHandler&&this._clickOutsideHandler.remove();this._clickOutsideHandler=null;this._keyboardHandler&&this._keyboardHandler.remove();this._keyboardHandler=null;a&&(this.closeZoomedDDWhenClickedOutside&&(this._clickOutsideHandler=c(document.body,t.press,function(){if(!E.isViewingDynamicSettings&&!r.isMouseOver(d.dataDrillingViewDiv,{checkAllChildren:!0})&&!d._drillingSections[0].isMouseOver())d.onClose()})),this.closeZoomedDDOnEsc&&(this._keyboardHandler=c(document.body,"keyup",
function(a){if(a.keyCode===b.ESCAPE)d.onClose()})))},updateView:function(){var a=this.getSection();if(a){var b=this.dataDrillingViewDiv,c=a.getWidth(),a=a.getHeight(),d=b.clientWidth,e=b.clientHeight,f=n.get(b,"left"),g=n.get(b,"top");b.style.width=c+"px";b.style.height=a+"px";b.style.left=f+-(c-d)/2+"px";b.style.top=g+-(a-e)/2+"px"}},getDataDrillingPanelDimensions:function(a){var b=document.body.clientWidth-(t.isLandscape()?80:40),c=document.body.clientHeight-80;if(a){var d=A.calcSectionJsonBox(a),
e=a.style&&a.style.width||d.w||F.w;a=a.style&&a.style.height||d.h||F.h;d=Math.min(1,b/e,c/a);return t.isMobileDevice()?{w:e,h:a,scale:d,yOffset:10,animateFromCenter:!0}:{w:e,h:a,scale:d,yOffset:c-30>a?0:15}}d=Math.max(.7,Math.min(1,b/F.minW,c/F.minH));return t.isMobileDevice()?{w:b/d,h:c/d,scale:d,yOffset:10,animateFromCenter:!0}:{w:Math.min(b/d,F.w),h:Math.min(c/d,F.h),scale:d,yOffset:c-30>F.h?0:15}},renderCustomSectionJson:function(a){var b=this;this.destroyContent();var c,d=this.getDataDrillingPanelSectionParams(a.sectionJson);
this._showDDProgress(!0);return e(a.promise).then(function(){return p.delay(function(){c=b._createDataDrillingSection(d);c.fitContentNicely();c.domNode.style.opacity="0.01";return e(c.getContentFullPromise(),function(){return p.delay(function(){c.domNode.style.opacity="";c.notifyShown();b._showDDProgress(!1);b.onCustomSectionRendered(a)})})})})},getDataDrillingPanelSectionParams:function(a){var b={"class":"infographicContainer_dataDrillingSection"},c=this.getDataDrillingPanelDimensions(a);b.json=
a;b.initialWidth=c.w;b.initialHeight=c.h;b.viewModel=this.viewModel;b.theme=this.theme;b.parentWidget=this;b.isDataDrillingView=!0;b.currentFeatureIndex=this.currentFeatureIndex||0;b.currentFeatureAttributes=this.currentFeatureAttributes;b.getPreviewValueFunction=this.getPreviewValueFunction;b.initialViewMode=B.PREVIEW_VALUES;h.empty(this.dynamicSettingsToolbarRoot);b.dynamicSettingsToolbarRoot=this.dynamicSettingsToolbarRoot;return b},_createDataDrillingSection:function(b){var c=this.getDataDrillingPanelDimensions(b.json);
b=this.viewModel.layoutBuilder.createElement("section",b,this.drilledDataViewDivScaler);this._drillingSections.push(b);d[a(".sectionDynamicSettings_settingsButton",this.dataDrillingViewDiv)[0]?"add":"remove"](this.dataDrillingViewDiv,"hasChartSettingsButton");this.setUpDDPanelBackgroundColor();c.scale&&(b.notifyPanelScaleChanged(c.scale),this._applyScaleToDataDrillingToolbarButtons(c.buttonScale||c.scale),f.after(b,"onDynamicSettingsButtonsCreated",function(){this._applyScaleToDataDrillingToolbarButtons(c.buttonScale||
c.scale)}.bind(this)));return b},getSection:function(){return this._drillingSections[0]},_applyScaleToDataDrillingToolbarButtons:function(b){var c=1/b;b=[];var d=a(".sectionDynamicSettings_buttonBar",this.dynamicSettingsToolbarRoot)[0];if(d)for(var e=0;e<d.children.length;e++)b.push(d.children[e]);b.push(this.exportButton);b.push(this.printButton);b.push(this.backToMainViewButton);b.forEach(function(a,b){a.style.transformOrigin="100% 100%";a.style.transform="scale("+c+")";a.style["webkit-transform"]=
"scale("+c+")";0<b&&(b=26*c,b+=32*(c-1),a.style.marginLeft=b+"px")})},setUpDDPanelBackgroundColor:function(){C.setUpDDPanelBackgroundColor({viewModel:this.viewModel,theme:this.theme,infographicJson:this.getInfographicJson(),node:this.dataDrillingViewDiv})},getInfographicJson:function(){return null},_showDDProgress:function(a){v[a?"showProgress":"removeProgress"](this.dataDrillingViewDiv);this.topToolbar&&(this.topToolbar.style.opacity=a?"0.001":"")},destroyContent:function(){this._drillingSections=
this._drillingSections||[];this._drillingSections.forEach(function(a){a.destroy()});this._drillingSections.length=0;h.empty(this.drilledDataViewDivScaler)},onClose:function(){},onCustomSectionRendered:function(a){},destroy:function(){this.destroyContent();this._setCloseHandlers(!1)}});k.DATA_DRILLING_BOX_ZOOM=F;return k})},"esri/dijit/geoenrichment/utils/mobile/GesturesUtil":function(){define(["dojo/on","../DnDUtil","../animation/Animator","dojo/domReady!"],function(k,g,f){var e={},c=window._dev_emulateMultiTouch,
b=window._dev_logTouch,a={_animation:null,_measures:null,start:function(){this._animation&&this._animation.stop();this._animation=null;this._measures=[];this._addMeasurePoint(0,0)},_addMeasurePoint:function(a,b){for(;9<this._measures.length;)this._measures.shift();var c={time:(new Date).getTime(),dx:a,dy:b},d=this._measures[this._measures.length-1];this._measures.push(c);d&&(c.vx=a/(c.time-d.time),c.vy=b/(c.time-d.time))},notifyScrolled:function(a,b){this._addMeasurePoint(a,b)},flyScroll:function(a){if(!(2>
this._measures.length)){var b=(new Date).getTime(),c=0,d=0,e=0;this._measures.forEach(function(a,f){"number"!==typeof a.vx||100<b-a.time||(c+=a.vx,d+=a.vy,e++)});if(e){var c=c/e,d=d/e,g=c,k=d;this._animation=f.animateProperty({duration:750,properties:{p:{start:0,end:1,easing:"sineOut"}},progressFunction:function(e,f,h){e=(new Date).getTime();f=e-b;b=e;a(g*f,k*f);g=c*(1-h);k=d*(1-h)}})}}}};e.preventDefaultSiteBehavior=function(){document.body.style.touchAction="none"};e.preventDefaultOverflow=function(a){return a&&
k(a,"touchmove",function(a){a.preventDefault()})};e.preventDoubleTapZoom=function(a){var b,c=(new Date).getTime();b=k(a,"touchstart",function(a){var b=(new Date).getTime();300>b-c&&a.preventDefault();c=b});return{remove:function(){b.remove()}}};e.enableGesturesOnNode=function(d,f){function g(a,b){if(f.logDiv){if(1E3<f.logDiv.innerHTML.length||b)f.logDiv.innerHTML="";f.logDiv.innerHTML+=a+"\x3cbr/\x3e"}}function h(a,b){var c=a.x-b.x;a=a.y-b.y;return Math.sqrt(c*c+a*a)}function m(b){f.enableFlyingScroll&&
a.start();for(var c=0;c<b.changedTouches.length;c++){var d=b.changedTouches[c];q[d.identifier]={x:d.clientX,y:d.clientY}}g("Num touches "+b.touches.length);2===b.touches.length&&(f.canZoom&&!f.canZoom(b)?g("Can't zoom"):(c=q[b.touches[0].identifier],b=q[b.touches[1].identifier],c&&b?(r=h(c,b),g("Start distance: "+Math.round(r))):q={}))}function p(b){if(2===b.touches.length){b.preventDefault();var c=b.touches[0];b=b.touches[1];var d=q[c.identifier],e=q[b.identifier];if(d&&e&&r){if(d.x=c.clientX,d.y=
c.clientY,e.x=b.clientX,e.y=b.clientY,c=h(d,e),d=Math.abs(r-c),g("Diff: "+Math.round(d),!0),d>u){g("Zoom");if(r<c)f.onZoomIn();else f.onZoomOut();r=c}}else q={}}else if(1===b.touches.length)if(f.canScroll&&!f.canScroll(b)||b.preventDefault(),c=b.touches[0],d=q[c.identifier]){var e=d.x-c.clientX,k=d.y-c.clientY;d.x=c.clientX;d.y=c.clientY;if(!f.canScroll||f.canScroll(b))f.onScrollChanged(e,k),f.enableFlyingScroll&&a.notifyScrolled(e,k)}else q={}}function t(b){for(var c=0;c<b.changedTouches.length;c++)delete q[b.changedTouches[c].identifier];
r=0;g("Num touches "+b.touches.length,!b.touches.length);f.enableFlyingScroll&&a.flyScroll(f.onScrollChanged)}if(d){e.preventDefaultSiteBehavior();var q={},r=0,u=f.zoomTolerance||50;if(c)e.dev_addMultiTouchEmulation(d,m,p,t);else var v=k(d,"touchstart",m),w=k(d,"touchmove",p),y=k(d,"touchend",t);b&&(f.logDiv=e.dev_createLogLabel());return{remove:function(){q=null;v.remove();w.remove();y.remove()}}}};e.dev_addMultiTouchEmulation=function(a,b,c,e){function d(a,d,g){d={type:a,clientX:g&&g.clientX,clientY:g&&
g.clientY,changedTouches:[d.getTouch()],touches:[],preventDefault:function(){g&&g.preventDefault()}};f.isOn&&d.touches.push(f.getTouch());h.isOn&&d.touches.push(h.getTouch());switch(a){case "touchstart":b(d);break;case "touchmove":c(d);break;case "touchend":e(d)}}a=function(a,b,c){var e=this;e.x=b;e.y=c;e.isOn=!1;e.node=document.createElement("div");e.node.style.width="50px";e.node.style.height="50px";e.node.style.borderRadius="50%";e.node.style.cursor="pointer";e.node.style.position="absolute";e.node.style.zIndex=
"10000";document.body.appendChild(e.node);g.addNoDragClickHandler(e.node,function(){e.isOn=!e.isOn;e._updateStateColor();d(e.isOn?"touchstart":"touchend",e,null)},{tolerance:5});var f,h;k(e.node,"touchstart",function(a){f=a.clientX;h=a.clientY;k.once(document.body,"touchend",function(){f=void 0})});k(e.node,"touchmove",function(a){if(void 0!==f){a.preventDefault();var b=a.clientX-f,c=a.clientY-h;f=a.clientX;h=a.clientY;e.x+=b;e.y+=c;e._updateNodePosition();e.isOn&&d("touchmove",e,a)}});e._updateStateColor=
function(){e.node.style.backgroundColor=e.isOn?"#00FF00":"#CCCCCC"};e._updateNodePosition=function(){e.node.style.left=e.x-e.node.clientWidth/2+"px";e.node.style.top=e.y-e.node.clientHeight/2+"px"};e._updateStateColor();e._updateNodePosition();e.getTouch=function(){return{identifier:a,clientX:e.x,clientY:e.y}}};var f=new a("touch_0",100,100),h=new a("touch_1",200,200)};e.dev_createLogLabel=function(){var a=document.createElement("div");document.body.appendChild(a);var b=a.style;b.position="absolute";
b.zIndex="10000";b.right="0px";b.bottom="0px";b.width="150px";b.height="100px";b.backgroundColor="gray";b.color="white";b.overflow="auto";b.padding="3px";return a};return e})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/ViewModes":function(){define([],function(){return{EDIT:"edit",PREVIEW:"preview",PREVIEW_VALUES:"previewValues"}})},"esri/dijit/geoenrichment/ReportPlayer/core/dataDrilling/DataDrillingBackgroundUtil":function(){define(["dojo/dom-class","esri/dijit/geoenrichment/utils/ColorUtil",
"../themes/BackgroundThemeUtil"],function(k,g,f){return{setUpDDPanelBackgroundColor:function(e){var c=e.viewModel.getStaticInfographicDefaultStyles(e.theme),b=e.viewModel.getDocumentDefaultStyles(e.theme);[e.infographicJson&&e.infographicJson.style.backgroundColor,c&&c.backgroundColor,b.backgroundColor].some(function(a){if(a&&!g.isTransparent(a))return e.node.style.backgroundColor=a,k.remove(e.node,"playerThemeDark playerThemeLight"),k.add(e.node,g.isLightColor(a)?"playerThemeLight":"playerThemeDark"),
!0})||f.renderThemeBackgroundImage(e.node,b.backgroundImage)}}})},"esri/dijit/geoenrichment/ReportPlayer/core/themes/BackgroundThemeUtil":function(){define(["dojo/dom-class","dojo/dom-construct","dojo/dom-style","esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/DocumentOptions"],function(k,g,f,e){var c={hasBackgroundImage:function(b){return b&&!!b.__themeBgImage},getBackgroundImage:function(b){return b&&b.__themeBgImage},removeBackgroundImage:function(b){b&&(b.__themeBgImage&&g.destroy(b.__themeBgImage),
delete b.__themeBgImage)},renderThemeBackgroundImage:function(b,a,d,e){c.removeBackgroundImage(b);if(!b||!a||!a.data)return!1;e=g.create("div",{"class":"esriGEAbsoluteStretched "+(e&&e.nodeClass||""),style:"overflow: hidden"},b,"first");b.__themeBgImage=e;var f=g.create("div",{style:"background-repeat: no-repeat; background-size: cover;"},e);f.style.backgroundImage="url("+a.data+")";0<a.opacity&&1>a.opacity&&(f.style.opacity=a.opacity);f.style.backgroundPosition=a.position||"center";f.style.backgroundRepeat=
a.repeat?"repeat":"no-repeat";f.style.backgroundSize=a.scale?a.repeat?"contain":"cover":a.size||"auto";c.updateThemeBackgroundImage(b,d);return e},updateThemeBackgroundImage:function(b,a){if(c.hasBackgroundImage(b)&&(b=b.__themeBgImage.children[0]))if(a&&a.documentOptions&&a.pos){var d=e.getPageBox(a.documentOptions),g=a.zoom||1;f.set(b,{position:"absolute",width:d.w+"px",height:d.h+"px",left:-a.pos.x/g+"px",top:-a.pos.y/g+"px"});k.remove(b,"esriGEAbsoluteStretched")}else k.add(b,"esriGEAbsoluteStretched")}};
return c})},"esri/dijit/geoenrichment/ReportPlayer/core/dataDrilling/DataDrillingExportUtil":function(){define("dojo/_base/lang esri/dijit/geoenrichment/when dojo/dom-construct esri/dijit/geoenrichment/ReportPlayer/ReportPlayer esri/dijit/geoenrichment/ReportPlayer/PlayerResizeModes esri/dijit/geoenrichment/ReportPlayer/PlayerThemes esri/dijit/geoenrichment/ReportPlayer/DataProviderGE esri/dijit/geoenrichment/ReportPlayer/PlayerCommands ../reportContainerGrid/utils/PageQueryUtil ../supportClasses/templateJsonUtils/BlankTemplateJsonUtil ../supportClasses/templateJsonUtils/fieldInfo/FieldInfoBuilder esri/dijit/geoenrichment/utils/DeviceUtil esri/dijit/geoenrichment/utils/WaitingUtil".split(" "),
function(k,g,f,e,c,b,a,d,h,l,n,m,p){var t={reportPlayerClass:e,dataProviderClass:a,initPlayer:function(){var a=f.create("div",{"class":"esriGEAbsoluteStretched esriGEOffscreen"},document.body),e=new t.dataProviderClass;e.registerCommand(d.PRINT);e.registerCommand(d.IMAGE);e=(new t.reportPlayerClass({theme:b.DARK,dataProvider:e,resizeMode:c.FIT_WINDOW,isDataDrillingPlayer:!0})).placeAt(a);e.__playerDiv=a;return e},destroyPlayer:function(a){a.destroy();f.destroy(a.__playerDiv)}},q={},r=!1;q.setReportPlayerClass=
function(a){t.reportPlayerClass=a};q.setDataProviderClass=function(a){t.dataProviderClass=a};q.canPrintDataDrilling=function(a){return m.isMobileDevice()?!1:!!h.getParentReportPlayer(a).dataProvider.getCommandById(d.PRINT)};q.canExportDataDrilling=function(a){return m.isMobileDevice()?!1:(a=h.getParentReportPlayer(a).dataProvider.getCommandById(d.IMAGE))&&a.isBrowserSupported()};q.printDataDrilling=function(a){q._createTemporaryPlayerAndExport(a,!0)};q.exportDataDrilling=function(a){q._createTemporaryPlayerAndExport(a,
!1)};q._createTemporaryPlayerAndExport=function(a,b){if(!r){r=!0;var c,d=h.getParentReportPlayer(a.parentWidget),e=d.getReportData(),d=d.dataProvider.reportDataToSingleAreaReportData(e,{currentFeatureIndex:a.currentFeatureIndex||0,reportTitle:d.getReportTitle(),templateJson:function(){var b=a.getSection().toJson(),d=a.getDataDrillingPanelDimensions(b),d=l.createBlankTemplate({elementWidth:d.w,elementHeight:d.h,layout:{numRows:1,numColumns:1}});d.theme=k.clone(a.theme);delete d.theme.document.backgroundImage;
c=a.getSection().getVisualState();var b=n.createFieldInfoFromSection(b),e=d.sectionsTables[0].data;e.data[0].fieldInfos[e.columns[0].field]=b;return d}()}),f=t.initPlayer();f.onWaitingShown=function(b){p.showProgressPromise(a.dataDrillingViewDiv,b)};f.onCommandSettingsShown=function(a){q.unitTesting_onCommandSettingsShown()};g(f.setReportData(d,{waitUntilAllContentIsReady:!0,disableAnimation:!0}),function(){var d={pages:[{cells:[c]}]},e=f.getCurrentReportContainer().getLayoutCells()[0].content;e.getPreviewValueFunction=
a.getPreviewValueFunction;return g(e.refresh()).then(function(){return g(f.onWaitingShown(f.getCurrentReportContainer().setVisualState(d)),function(){return g(f[b?"executePrint":"executeExport"](),function(a){t.destroyPlayer(f);q.unitTesting_onExportCommandFinished(a)})})})})["finally"](function(){r=!1})}};q.unitTesting_onCommandSettingsShown=function(){};q.unitTesting_onExportCommandFinished=function(a){};return q})},"esri/dijit/geoenrichment/ReportPlayer/core/reportContainerGrid/utils/PageQueryUtil":function(){define(["dojo/dom-geometry",
"../../../ReportPlayer","esri/dijit/geoenrichment/utils/ColorUtil","esri/dijit/geoenrichment/utils/DomUtil"],function(k,g,f,e){var c={getElementPageInfo:function(b){function a(a,b){a=k.position(a.domNode);b=k.position(b.domNode);n.x+=a.x-b.x;n.y+=a.y-b.y}function d(a){r||(a=a.getFullStyle().backgroundColor)&&!f.isTransparent(a)&&(r=a)}function e(f){if(f)if(f.parentGridCell&&d(f.parentGridCell),f.parentElementInPageInfo)f=f.parentElementInPageInfo,g=f.reportContainer,r=r||f.panelBackgroundColor,n.x+=
f.pos.x,n.y+=f.pos.y,m=f.pageGrid,p=f.gridContainer,t=f.pageIndex,q=f.layoutCell,u=f.isBackgroundFloatingPanel,v=f.isForegroundFloatingPanel,w=f.panelIndex;else{var h=f.parentWidget;h&&h.isReportContainerGrid?(g=h,f=c.getNodePositionOnPage(g,f.domNode),h=c.getNodePositionOnPage(g,b.domNode),f&&h&&(n.x+=f.x,n.y+=f.y,m=f.pageGrid,p=f.gridContainer,t=f.pageIndex,q=h.layoutCell,u=h.isBackgroundFloatingPanel,v=h.isForegroundFloatingPanel,w=h.panelIndex)):(a(f,h),e(h))}}if(b&&b.parentWidget){var g,n={x:0,
y:0},m,p,t,q,r,u,v,w;b.isValueField&&b.parentGrid&&b.rowId&&b.columnId?(d(b),a(b,b.parentGrid),e(b.parentGrid)):e(b);return g&&q?{reportContainer:g,documentOptions:g.documentOptions,pos:n,zoom:g.getZoomInfo().scale,pageGrid:m,gridContainer:p,pageIndex:t,layoutCell:q,panelBackgroundColor:r,isFloatingPanel:u||v,isBackgroundFloatingPanel:u,isForegroundFloatingPanel:v,panelIndex:w}:null}},getReportContainerPageNode:function(b){for(;b;){if(b.reportContainerPageNode)return b.reportContainerPageNode;b=b.parentWidget||
b.parentGrid}return null},getParentReportContainerGrid:function(b){if(b&&b.isReportContainerGrid)return b;for(;b;){if(b.parentWidget&&b.parentWidget.isReportContainerGrid)return b.parentWidget;if(b.parentElementInPageInfo)return b.parentElementInPageInfo.reportContainer;b=b.parentWidget||b.parentGrid}return null},getParentReportPlayer:function(b){if(b instanceof g)return b;for(;b;){if(b.parentWidget instanceof g)return b.parentWidget;b=b.parentWidget||b.parentGrid}return null},getNodePositionOnPage:function(b,
a){if(!a)return null;var c,f=-1,g,n,m,p;b.getGrids().some(function(b,d){if(b.domNode===a||e.isChildOf(a,b.domNode))return c=b,g=d,b.getFieldCells().some(function(b,c){if(b.domNode===a||e.isChildOf(a,b.domNode))return f=c,p=b,!0}),-1===f&&b.getBackgroundFloatingCells().some(function(b,c){if(b.domNode===a||e.isChildOf(a,b.domNode))return f=c,n=!0,p=b,!0}),-1===f&&b.getForegroundFloatingCells().some(function(b,c){if(b.domNode===a||e.isChildOf(a,b.domNode))return f=c,m=!0,p=b,!0}),!0});if(!c)return null;
b=b.getGridContainer(c);var t=k.position(b),q=k.position(a);return{x:q.x-t.x,y:q.y-t.y,pageGrid:c,gridContainer:b,pageIndex:g,layoutCell:p,isFloatingPanel:n||m,isBackgroundFloatingPanel:n,isForegroundFloatingPanel:m,panelIndex:f}}};return c})},"esri/dijit/geoenrichment/ReportPlayer/core/dataDrilling/DataDrillingButtonsBuilder":function(){define("dojo/_base/declare dojo/_base/lang dojo/on dojo/dom-construct dojo/dom-style esri/dijit/geoenrichment/utils/DeviceUtil esri/dijit/geoenrichment/utils/DnDUtil esri/dijit/geoenrichment/utils/DomUtil esri/dijit/geoenrichment/utils/MouseUtil dojo/i18n!esri/nls/jsapi".split(" "),
function(k,g,f,e,c,b,a,d,h,l){l=l.geoenrichment.dijit.ReportPlayer.Infographics;return k(null,{parentWidget:null,_ddButtons:null,_shownButtons:null,constructor:function(a){g.mixin(this,a)},setDataDrillingButtonForSection:function(a,b){this._setDataDrillingButton({widget:a,getBox:function(){var b=[];a.getTables().forEach(function(a){b.push(a.domNode)});return d.uniteNodeBoxes(b,a.domNode)},onClick:b})},setDataDrillingButtonForTableCell:function(a,b){this._setDataDrillingButton({widget:a,getBox:function(){return{x:0,
y:0,w:a.domNode.clientWidth,h:a.domNode.clientHeight}},onClick:b})},_setDataDrillingButton:function(d){function g(){var a=e.create("div",{"class":"dataDrilling_drillDataButton"},k.domNode);e.create("div",{"class":"dijitInline dataDrilling_drillDataButtonIcon esriGESpaceAfterBig"},a);var b=e.create("div",{"class":"dijitInline dataDrilling_drillDataButtonLabel",innerHTML:l.drillForMoreData},a),f=d.getBox();c.set(a,{left:f.x+"px",top:f.y+"px",width:f.w+"px",height:f.h+"px",lineHeight:f.h+"px"});var g=
a.clientWidth;g>f.w&&c.set(a,"left",f.x-(g-f.w)/2+"px");b.style.maxWidth=g-50+"px";b.style.whiteSpace="normal";q._ddButtons.push({destroy:function(){e.destroy(a)}});return a}var k=d.widget,n=d.onClick,q=this;this._ddButtons=this._ddButtons||[];var r;if(b.isMobileDevice()){var u=function(a){r.style.opacity=a?1:0;q._shownButtons.splice(q._shownButtons.indexOf(r),1);a&&q._shownButtons.push(r);v&&v.remove();a&&q._syncButtonWithScale(r)},v;this._shownButtons=this._shownButtons||[];a.addNoDragClickHandler(this.parentWidget.domNode,
function(){setTimeout(function(){!q._shownButtons.length&&h.isMouseOver(k.domNode,{checkAllChildren:!0})&&(r=r||g(),u(!0),setTimeout(function(){v=a.addNoDragClickHandler(r,function(){u(!1);n(r)});f.once(document.body,"touchend",function(){u(!1)})}))})},{detectLongPress:!0,longPressTimeout:750,ignoreReleaseIfLongPressHappened:!0,longPressCallback:function(){h.isMouseOver(k.domNode,{checkAllChildren:!0})&&(r=r||g(),u(!0),n(r),setTimeout(function(){u(!1)}))}})}else k.own(f.once(this.parentWidget.domNode,
"mouseover",function(){r=r||g();q._syncButtonWithScale(r);f(r,"click",function(){n(r)})}))},_panelScale:null,notifyPanelScaleChanged:function(a){this._panelScale=a;this._ddButtons&&this._ddButtons.forEach(this._syncButtonWithScale.bind(this))},_syncButtonWithScale:function(a){a&&a.style&&(a.style.fontSize=13/(this._panelScale||1)+"px")},destroyButtons:function(){this._ddButtons=this._ddButtons||[];this._ddButtons.forEach(function(a){a.destroy()});this._ddButtons.length=0}})})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/WidgetQueryUtil":function(){define([],
function(){var k={checkParentWidgets:function(g,f,e){for(var c=!1;g;){c=f(g)||c;if(e&&c)break;g=g.parentWidget}return c},isDataDrillingView:function(g){return k.checkParentWidgets(g,function(f){return f.isDataDrillingView},!0)},getReportContainerGrid:function(g){return k.findParentWidget(g,function(f){return f.isReportContainerGrid&&!f.isTempAddContainer})},findParentWidget:function(g,f){var e;k.checkParentWidgets(g,function(c){if(f(c))return e=c,!0},!0);return e}};return k})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/valueField/ValueField":function(){define("dojo/_base/Color dojo/_base/declare dojo/_base/lang dojo/on dojo/sniff dojo/dom-construct dojo/dom-class dojo/dom-geometry dijit/Destroyable ./supportClasses/TextRenderer ./supportClasses/NumberAnimator esri/dijit/geoenrichment/utils/DomUtil esri/dijit/geoenrichment/utils/MathUtil esri/dijit/geoenrichment/utils/MouseUtil esri/dijit/geoenrichment/utils/UrlUtil".split(" "),
function(k,g,f,e,c,b,a,d,h,l,n,m,p,t,q){function r(a){a.domNode=b.toDom("\x3cdiv class\x3d'esriGEAdjustableGridValueField'\x3e\x3cdiv class\x3d'valueField_contentBlock'\x3e\x3cdiv class\x3d'valueField_valueBlock'\x3e\x3cdiv class\x3d'valueField_valueLabel'\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e");a.contentBlock=a.domNode.children[0];a.valueContainer=a.contentBlock.children[0];a.valueLabel=a.valueContainer.children[0]}var u=g(h,{_buildLayoutFunc:null,_parentNode:null,constructor:function(a,
b){f.mixin(this,a);this._parentNode=b;this.postCreate()},postCreate:function(){this._buildLayoutFunc(this);this["class"]&&a.add(this.domNode,this["class"]);this._parentNode&&this.placeAt(this._parentNode);this.value&&this.set("value",this.value)},get:function(a){return"value"===a?this._getValueAttr?this._getValueAttr():this.value:this[a]},set:function(a,b){"value"===a?this._setValueAttr?this._setValueAttr(b):this.value=b:this[a]=b},placeAt:function(a){b.place(this.domNode,a);return this},on:function(a,
b){this.own(e(this.domNode,a,b))},isLeftToRight:function(){return d.isBodyLtr(document)},destroy:function(){b.destroy(this.domNode);this._buildLayoutFunc=this.domNode=this._parentNode=null}});h={width:1,height:1,angle:1,opacity:1};var v={color:1,fontSize:1,lineHeight:1,fontFamily:1,fontWeight:1,fontStyle:1,textDecoration:1,backgroundColor:1,verticalAlign:1,horizontalAlign:1,horizontalPadding:1,verticalPadding:1,overrideStyle:1},w={borderTopColor:1,borderTopWidth:1,borderTopOpacity:1,borderTopStyle:1,
borderRightColor:1,borderRightWidth:1,borderRightOpacity:1,borderRightStyle:1,borderBottomColor:1,borderBottomWidth:1,borderBottomOpacity:1,borderBottomStyle:1,borderLeftColor:1,borderLeftWidth:1,borderLeftOpacity:1,borderLeftStyle:1},y=f.mixin({},h,v,w),A={verticalAlign:"top",horizontalAlign:"left",horizontalPadding:0,verticalPadding:0,angle:0,opacity:1};g=g(u,{isValueField:!0,DEFAULT_STYLES:A,viewModel:null,fieldCellClass:null,trimTextIfOverflows:!1,autoDetectUrl:!1,valueLabel:null,fieldStyle:null,
defaultBorderStyle:null,_borderStyle:null,content:null,postCreate:function(){this._buildLayoutFunc=this._buildLayoutFunc||r;this.inherited(arguments);this.setStyle(this.fieldStyle);this.setContent(this.content);this.fieldCellClass&&(a.add(this.domNode,this.fieldCellClass),a.add(this.contentBlock,"contentBlock_"+this.fieldCellClass))},_destroyExistingContent:function(){this.content&&(this.content.destroy&&this.content.destroy(),this.contentContainer&&b.empty(this.contentContainer),this.content=null)},
getContentContainerNode:function(a){a||this._destroyExistingContent();this.contentContainer||(this.contentContainer=b.create("div",{"class":"valueField_valueBlock"},this.contentBlock,"first"));m.show(this.contentContainer);return this.contentContainer},setContent:function(a){this._destroyExistingContent();if(this.content=a)this.getContentContainerNode(!0),(a=this.content.domNode||this.content)&&a.parentNode!==this.contentContainer&&b.place(a,this.contentContainer);this.content?(b.destroy(this.valueContainer),
this.valueContainer=null):(b.destroy(this.contentContainer),this.contentContainer=null,this._restoreValueContainer()?(a=this._value,this._value=null,this.set("value",a)):this.set("value",this._value))},_restoreValueContainer:function(){if(this.valueContainer)return!1;this.valueContainer=b.toDom("\x3cdiv class\x3d'valueField_valueBlock'\x3e\x3cdiv class\x3d'valueField_valueLabel'\x3e\x3c/div\x3e\x3c/div\x3e");this.contentBlock.appendChild(this.valueContainer);this.valueLabel=this.valueContainer.children[0];
this.setStyle(this.fieldStyle);return!0},_value:null,_getValueAttr:function(){return this._value},_setValueAttr:function(a){this._value!==a&&(this._setValueLabelText(a),this._value=a)},_setValueLabelText:function(a){this.valueLabel&&l.renderText(this,a,this._benchmarkInfo);return a},hasOverflowText:function(){return!this.content&&l.hasOverflowText(this)},_benchmarkInfo:null,setBenchmarkInfo:function(a){this._benchmarkInfo=a},currentNumberValue:null,numberFormatFunction:null,_canAnimate:!1,setNumberValue:function(a,
b,c){this.currentNumberValue=a;this.numberFormatFunction=b;this._canAnimate=c&&this.viewModel.isAnimationAllowed();this.currentNumberValue&&this.numberFormatFunction&&this._canAnimate&&this._animateNumber()},notifyShown:function(){this.currentNumberValue&&this.numberFormatFunction&&this._canAnimate&&this._animateNumber()},_animateNumber:function(){n.animateNumber(this,this.currentNumberValue,this.numberFormatFunction)},getFullStyle:function(){return f.mixin({},A,this.fieldStyle)},setStyle:function(a){a=
a||{};this.fieldStyle=f.mixin(this.fieldStyle||{},a);"number"===typeof this.fieldStyle.opacity&&(this.fieldStyle.opacity=Math.max(0,Math.min(1,this.fieldStyle.opacity)));a=void 0!==a.width||void 0!==a.height;this._applyAlignAndPaddingStyles();this._applyTransformStyles();this._applyTextStyleToDom(this.domNode);(a=this._setBorderStyle()||a)&&this._refreshLayout()},_applyAlignAndPaddingStyles:function(){this.domNode.style.textAlign=this.fieldStyle.horizontalAlign||A.horizontalAlign;var a=this.fieldStyle.verticalAlign||
A.verticalAlign;this.valueLabel&&(this.valueLabel.style.paddingLeft="",this.valueLabel.style.paddingRight="",this.valueLabel.style.paddingTop="","number"===typeof this.fieldStyle.horizontalPadding&&(this.valueLabel.style.paddingLeft=this.fieldStyle.horizontalPadding+"px",this._allowRightPadding()&&(this.valueLabel.style.paddingRight=this.fieldStyle.horizontalPadding+"px")),"number"===typeof this.fieldStyle.verticalPadding&&"top"===a&&(this.valueLabel.style.paddingTop=this.fieldStyle.verticalPadding+
"px"));this.valueContainer&&(this.valueContainer.style.verticalAlign=a);this.contentContainer&&(this.contentContainer.style.verticalAlign=a);this.domNode.style.opacity="number"===typeof this.fieldStyle.opacity?this.fieldStyle.opacity:""},_allowRightPadding:function(){return this.viewModel&&this.viewModel.isGraphicStyle},_applyTransformStyles:function(){if(this.valueContainer){var a=c("webkit")?"webkitTransform":"transform";this.valueContainer.style[a]=0!==(Number(this.fieldStyle.angle)||0)?"rotate("+
this.fieldStyle.angle+"deg)":""}},_supportedTextStyles:"color fontSize lineHeight fontFamily fontWeight fontStyle textDecoration backgroundColor".split(" "),_applyTextStyleToDom:function(a){var b=this;this._supportedTextStyles.forEach(function(c){if(b.fieldStyle[c]){var d=b.fieldStyle[c]+("fontSize"===c||"lineHeight"===c?"px":"");"backgroundColor"===c?b._setNodeBackgroundColor(a,d):a.style[c]=d}else a.style[c]=""})},_setNodeBackgroundColor:function(a,b){var c=a===this.domNode&&this.fieldStyle.angle?
this.valueContainer:a;c&&(c.style.backgroundColor=b);a===this.domNode&&this.fieldStyle.angle&&(this.domNode.style.backgroundColor="transparent")},clearTextStyle:function(){for(var a in v)delete this.fieldStyle[a];this.setStyle()},clearLineHeight:function(){delete this.fieldStyle.lineHeight;this.setStyle()},_currentBorderKey:null,_SIDES:["Top","Right","Bottom","Left"],setDefaultBorderStyle:function(a){this.defaultBorderStyle=a;this._setBorderStyle()&&this._refreshLayout()},clearBorder:function(){for(var a in w)delete this.fieldStyle[a];
this.setStyle()},_setBorderStyle:function(){var a=f.mixin({},this.defaultBorderStyle,this.fieldStyle);this._borderStyle=a;var b=this._getBorderKey(a);if(this._currentBorderKey===b)return!1;this._currentBorderKey=b;this.domNode.style.border="";this._SIDES.forEach(function(b){var c="none",d=a["border"+b+"Color"],e=a["border"+b+"Width"],f=a["border"+b+"Style"]||"solid",g=a["border"+b+"Opacity"];d&&0<e&&0!==g&&"none"!==f&&(1>g&&(d=new k(d),d.a=g,d=d.toCss(!0)),c=e+"px "+f+" "+d);this.domNode.style["border"+
b]=c},this);return!0},_getBorderKey:function(a){var b="",c;for(c in w)b+=a[c]+"_";return b},_getLeftBorder:function(){return this._borderStyle?this._borderStyle.borderLeftWidth||0:0},_getLeftPadding:function(){return this.fieldStyle.horizontalPadding||0},_getRightBorder:function(){return this._borderStyle?this._borderStyle.borderRightWidth||0:0},_getRightPadding:function(){return this._allowRightPadding()?this.fieldStyle.horizontalPadding||0:0},_getTopBorder:function(){return this._borderStyle?this._borderStyle.borderTopWidth||
0:0},_getTopPadding:function(){return this.fieldStyle.verticalPadding||0},_getBottomBorder:function(){return this._borderStyle?this._borderStyle.borderBottomWidth||0:0},_getBottomPadding:function(){return this.fieldStyle.verticalPadding||0},getWidth:function(){return this.fieldStyle.width||0},getContentWidth:function(){return this.getWidth()-this._getLeftBorder()-this._getRightBorder()-this._getLeftPadding()-this._getRightPadding()},setWidth:function(a){this.contentBlock&&this.domNode&&(a=Math.max(0,
a),this.fieldStyle.width=a,this.domNode.style.width=a+"px",a=this.getWidth()-this._getLeftBorder()-this._getRightBorder(),this.contentBlock.style.width=a+"px",this.valueContainer&&(this.valueContainer.style.width=a+"px"),this.valueLabel&&(this.valueLabel.style.width=a-this._getLeftPadding()-this._getRightPadding()+"px"),this.contentContainer&&(this.contentContainer.style.width=a+"px"),l.renderText(this),this.onWidthChanged(),this.onSizeChanged())},getHeight:function(){return this.fieldStyle.height||
0},getContentHeight:function(){return this.getHeight()-this._getTopBorder()-this._getBottomBorder()-this._getTopPadding()-this._getBottomPadding()},setHeight:function(a){this.contentBlock&&this.domNode&&(a=Math.max(0,a),void 0!==this._minHeight&&(a=Math.max(a,this._minHeight)),this.fieldStyle.height=a,this.domNode.style.height=a+"px",a=this.getHeight()-this._getTopBorder()-this._getBottomBorder(),this.contentBlock.style.height=a+"px",this.valueContainer&&(this.valueContainer.style.height=a+"px"),
this.contentContainer&&(this.contentContainer.style.height=a+"px"),l.renderText(this),this.onHeightChanged(),this.onSizeChanged())},getMinHeight:function(){return this._minHeight||0},_minHeight:void 0,setMinHeight:function(a){this._minHeight=a;this.domNode.style.minHeight=a+"px";a=a-this._getTopPadding()-this._getBottomPadding();this.contentBlock.style.minHeight=a+"px";this.valueContainer&&(this.valueContainer.style.minHeight=a+"px");this.contentContainer&&(this.contentContainer.style.minHeight=a+
"px");l.renderText(this)},_refreshLayout:function(){this.setWidth(this.getWidth());this.setHeight(this.getHeight());void 0!==this._minHeight&&this.setMinHeight(this.getMinHeight())},getAngle:function(){return this.content&&this.content.getAngle?this.content.getAngle()||0:this.fieldStyle.angle||0},setAngle:function(a){this.content&&this.content.setAngle?this.content.setAngle(a):this.setStyle({angle:a||0})},isMouseOver:function(a){return this.domNode&&t.isMouseOverBox(this.getBBox())},getBBox:function(a){a=
a&&a.noTransformation?m.noTransformPosition(this.domNode):d.position(this.domNode);return 0===this.getAngle()?a:p.getRotatedRectBox(a,this.getAngle())},_urlClickHandle:null,setUrl:function(b){this._urlClickHandle&&this._urlClickHandle.remove();this.valueLabel&&(a[b?"add":"remove"](this.valueLabel,"esriGEAdjustableGridValueFieldHyperLink"),b&&(this._urlClickHandle=e(this.valueLabel,"click",function(){q.openUrl(q.toHttpUrl(b))})))},onWidthChanged:function(){},onHeightChanged:function(){},onSizeChanged:function(){},
destroy:function(){this.viewModel=null;this._destroyExistingContent();this.inherited(arguments)}});g.SUPPORTED_LAYOUT_STYLES=h;g.SUPPORTED_TEXT_STYLES=v;g.SUPPORTED_BORDER_STYLES=w;g.SUPPORTED_STYLES=y;return g})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/valueField/supportClasses/TextRenderer":function(){define("dojo/_base/lang dojo/when dojo/dom-construct dojo/dom-style esri/dijit/geoenrichment/utils/DomUtil esri/dijit/geoenrichment/utils/MathUtil esri/dijit/geoenrichment/utils/RegExpUtil esri/dijit/geoenrichment/utils/UrlUtil ../../coreUtils/GridDataUtil ../../../supportClasses/conditionalStyling/ConditionalStyleUtil ./BenchmarkUtil".split(" "),
function(k,g,f,e,c,b,a,d,h,l,n){return{renderText:function(b,c,d){b.valueLabel&&void 0!==c&&this._applyNewText(b,c,d);b.valueLabel&&(b.valueLabel.__hasTrimmedText=!1);d&&(b.trimTextIfOverflows=!1);if(b.trimTextIfOverflows&&b.valueLabel&&this._getLabelInnerHTML(b)&&!a.isRichText(this._getLabelInnerHTML(b))&&(c=this.getFullText(b),c!==this._getLabelInnerHTML(b)&&this._setLabelInnerHTML(b,c),b.valueLabel.__untrimmedText=c,b.domNode.clientWidth)){c=c.trim();d=this._measureValueField(b,c);var e=d.parentH;
if(!(b.valueLabel.clientHeight<=e)){var f=Math.floor(d.parentW/d.charWidth),g=c.length;c=c.substr(0,Math.max(1,Math.floor(e/d.lineHeight))*f);g>c.length&&(c=c.substr(0,c.length-3),this._setLabelInnerHTML(b,c+"..."),b.valueLabel.__hasTrimmedText=!0);if(b.valueLabel.clientHeight>e)for(;!(!c||b.valueLabel.clientHeight<=e||this._getLabelInnerHTML(b).length<=f);)c=c.substr(0,c.length-1),this._setLabelInnerHTML(b,c+"..."),b.valueLabel.__hasTrimmedText=!0}}},_measureValueField:function(a,b){var d=c.getNodeFontSize(a.domNode),
d=c.getTextBox(b,{style:"font-family:"+e.get(a.valueLabel,"fontFamily")+";font-size:"+d+"px;"});return{parentW:a.domNode.clientWidth-e.get(a.valueLabel,"paddingLeft")-e.get(a.valueLabel,"paddingRight"),parentH:a.domNode.clientHeight-e.get(a.valueLabel,"paddingTop")-e.get(a.valueLabel,"paddingBottom"),lineHeight:d.h,charWidth:d.w/b.length,textBox:d}},getFullText:function(a){return a.valueLabel&&(a.valueLabel.__untrimmedText||this._getLabelInnerHTML(a))},hasOverflowText:function(a){return a.valueLabel&&
a.valueLabel.__hasTrimmedText||a.valueLabel.clientHeight>a.domNode.clientHeight},_applyNewText:function(a,b,c){delete a.valueLabel.__untrimmedText;c?this._applyTextForBenchmark(a,b,c):this._getLabelInnerHTML(a)!==b&&this._setLabelInnerHTML(a,b)},_applyTextForBenchmark:function(a,d,e){function m(b){var c=h.getFieldInfo(a);c&&c.triggerJson&&(c=l.getConditionalStyle(e.ownValue,c.triggerJson))&&c.color&&(b=b||{},b.color=b.color||c.color);return n.createBenchmarkedValue(k.mixin({text:d,fontSize:t,isGreater:e.isGreater,
formattedValue:e.formattedValue,color:a.fieldStyle.color,nowrap:!0,noTextLimit:e.noTextLimit},b))}var p=this,u=a.parentGrid,t=c.getNodeFontSize(a.domNode);a.__benchmarkLabel&&f.destroy(a.__benchmarkLabel);delete a.__benchmarkLabel;if(u.infographicBenchmarkController)if(u.infographicBenchmarkController.isVariableInShape){var w=u.infographicBenchmarkController.getIconTable();g(w.getRenderPromise(),function(){function e(a){return c.getNodesBox(a.getBoundingClientRect?[a]:a)}p._setLabelInnerHTML(a,m());
var g=p._getInnerHTMLNode(a),h=e(g.children[0]),k=w.getFirstCell().content;if((k=e(k.getSvgNode?k.getSvgNode().children:k.content))&&!b.isRectInRect(h,k)){p._setLabelInnerHTML(a,d);h=e(g);g=f.create("div",null,a.domNode);g.style.position="absolute";g.style.fontSize="0px";g.innerHTML=m({text:"",color:u.infographicBenchmarkController.getOutsideShapeTextColor()});a.__benchmarkLabel=g;var l=e(g),n=e(a.domNode),q=n.w/c.noTransformPosition(a.domNode).w;g.style.left=(k.x+k.w-n.x)/q+5+"px";g.style.top=(h.y+
(h.h-l.h)/2-n.y)/q+"px"}})}else if(this._setLabelInnerHTML(a,m()),"center"===a.fieldStyle.horizontalAlign){var y=p._getInnerHTMLNode(a);a.domNode.style.marginLeft=Math.min(0,(a.getWidth()-y.children[0].clientWidth)/2)+"px"}else"right"===a.fieldStyle.horizontalAlign&&(y=p._getInnerHTMLNode(a),a.domNode.style.marginLeft=Math.min(0,a.getWidth()-y.children[0].clientWidth)+"px");else this._setLabelInnerHTML(a,m())},_getLabelInnerHTML:function(a){return this._getInnerHTMLNode(a).innerHTML},_setLabelInnerHTML:function(b,
c){c=String(c);var e=b.valueLabel;if(b.autoDetectUrl){var f=this.getFullText(b)||c;a.isUrl(f)?(b=this._getInnerHTMLNode(b),"A"===b.nodeName?(b.innerHTML=c,b.hasAttribute("href")&&b.removeAttribute("href"),b.setAttribute("href",f)):e.innerHTML="\x3ca href\x3d'"+d.toHttpsUrl(f)+"' target\x3d'_blank'\x3e"+c+"\x3c/a\x3e"):e.innerHTML=c}else e.innerHTML=c},_getInnerHTMLNode:function(a){var b=a.valueLabel;return a.autoDetectUrl&&b.childNodes&&1===b.childNodes.length&&b.childNodes[0]&&"A"===b.childNodes[0].nodeName?
b.childNodes[0]:b}}})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/valueField/supportClasses/BenchmarkUtil":function(){define(["dojo/string","dojo/text!esri/dijit/geoenrichment/ReportPlayer/themes/images/longArrows/upArrowLong.svg.txt","dojo/text!esri/dijit/geoenrichment/ReportPlayer/themes/images/longArrows/downArrowLong.svg.txt"],function(k,g,f){return{createBenchmarkedValue:function(e){var c="\x3cdiv class\x3d'dijitInline' style\x3d'font-size:0px;"+(e.nowrap?"white-space:nowrap;":"")+"'\x3e";
e.text&&(c+="\x3cdiv class\x3d'dijitInline' style\x3d'font-size:"+e.fontSize+"px;'\x3e"+e.text+"\x3c/div\x3e");var b=Math.min(e.noTextLimit?100:15,e.fontSize,Math.max(e.noTextLimit?6:10,Math.round(.6*e.fontSize))),c=c+("\x3cdiv class\x3d'dijitInline' style\x3d'margin-left:"+(e.text?2:0)+"px;font-size:0px;'\x3e"+k.substitute(e.isGreater?g:f,{fillColor:e.color||"",size:Math.min(e.noTextLimit?100:16,e.fontSize,Math.max(e.noTextLimit?6:10,Math.round(.7*e.fontSize)))})+"\x3c/div\x3e");return c+="\x3cdiv class\x3d'dijitInline' style\x3d'margin-left:2px;font-size:"+
b+"px;color:"+e.color+"'\x3e"+e.formattedValue+"\x3c/div\x3e"}}})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/valueField/supportClasses/NumberAnimator":function(){define(["esri/dijit/geoenrichment/utils/animation/Animator","esri/dijit/geoenrichment/ReportPlayer/ReportPlayerState"],function(k,g){return{animateNumber:function(f,e,c){g.isAnimationSuspended||(f.set("value","0"),f.__numberAnimation&&f.__numberAnimation.stop(),f.__numberAnimation=k.animateProperty({duration:375,properties:{p:{start:0,
end:e,easing:"quadOut"}},progressFunction:function(b,a,d){f.domNode&&f.set("value",c(e*d))},endFunction:function(){delete f.__numberAnimation}}))}}})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/valueField/_ResizableField":function(){define("dojo/_base/declare dojo/aspect dojo/on dojo/string dojo/dom-class dojo/dom-construct dojo/dom-style ./supportClasses/ResizeColumnRowTooltipVisualizer ./supportClasses/ResizeEngine esri/dijit/geoenrichment/utils/PageUnitsConverter esri/dijit/geoenrichment/utils/DomUtil esri/dijit/geoenrichment/utils/MouseUtil esri/dijit/geoenrichment/utils/TooltipUtil dojo/i18n!esri/nls/jsapi".split(" "),
function(k,g,f,e,c,b,a,d,h,l,n,m,p,t){t=t.geoenrichment.dijit.ReportPlayer.ValueField;return k(null,{resizable:!0,hasAllSidesSizers:!1,showSizeLabel:!1,showSizeLabelsInAllRelatedCells:!1,showColumnRowSizeTooltip:!1,showSizersOnFocus:!1,createSizersOnDemand:!0,resizeSnapNode:null,resizeRestrictNode:null,allowHorizontalResizing:!0,allowVerticalResizing:!0,sizeLabel:null,_tooltipHandles:null,postCreate:function(){this._tooltipHandles=[];this.inherited(arguments);this.resizable&&this._addCreateSizersTrigger()},
_isBeingResized:!1,_isBeingResizedDelayed:!1,_sizers:null,isBeingResized:function(){return this.resizable&&this._sizers?this._isBeingResized||this._sizers.some(function(a){return m.isMouseOver(a)})||!this.hasAllSidesSizers&&this._sizers.some(function(b){return 0<a.get(b,"opacity")}):!1},wasResizedRecently:function(){return this.isBeingResized()||this._isBeingResizedDelayed},_addCreateSizersTrigger:function(){var a=this;this.createSizersOnDemand||this._updateSizers();f(this.domNode,"mouseover",function(){a._updateSizers()})},
_createSizers:function(){var a=this;this.resizable&&!this._sizers&&(this._sizers=(this.hasAllSidesSizers?h.ALL_DIRECTIONS:[this.allowHorizontalResizing?"e":null,this.allowVerticalResizing?"s":null].filter(function(a){return!!a})).map(function(d){var e=b.create("div",null,a.domNode);a.hasAllSidesSizers?(c.add(e,(a.showSizersOnFocus?"valueField_allSidesSizer_showOnFocus":"valueField_allSidesSizer")+" "+d+"_fieldSizer"),a.fieldCellClass&&c.add(e,"fieldSizer_"+a.fieldCellClass)):"e"===d?(c.add(e,"valueField_widthSizer"),
a._tooltipHandles.push(p.setTooltipToNode(e,t.dragToChangeWidth)),a.fieldCellClass&&c.add(e,"widthSizer_"+a.fieldCellClass)):(c.add(e,"valueField_heightSizer"),a._tooltipHandles.push(p.setTooltipToNode(e,t.dragToChangeHeight)),a.fieldCellClass&&c.add(e,"heightSizer_"+a.fieldCellClass));e._dir=d;return e}),this._addResizeHandlers())},unitTesting_getSizerByDirection:function(a){this._updateSizers();return this._sizers.filter(function(b){return b._dir===a})[0]},_addResizeHandlers:function(){var a=this;
this._sizers.forEach(function(b){f(b,"mousedown",function(c){c.preventDefault();c.stopPropagation();a._setIsBeingResized(!0);a.stopEdit&&a.stopEdit();h.trackSizer({dir:b._dir,w:a.getWidth(),h:a.getHeight(),angle:a.getAngle(),supportsCtrlShift:a.hasAllSidesSizers,getThisBox:function(){return n.noTransformPosition(a.domNode)},getThisFullBox:function(){return a.getBBox({noTransformation:!0})},getSnapNodeBoxes:function(){if(!a.hasAllSidesSizers)return null;var b=a._getResizeSnapElements()||[],b=b.map(function(a){return{box:a.getBBox({noTransformation:!0}),
tolerance:3}});a.resizeSnapNode&&b.push({box:n.noTransformPosition(a.resizeSnapNode),tolerance:7});return b.length?b:null},getRestrictNodeBox:function(){return a.hasAllSidesSizers?a.resizeRestrictNode&&n.noTransformPosition(a.resizeRestrictNode):null},onPreChange:function(){a._onManualSizePreChange()},onSizeChanged:function(){a._onManualSizeChange(b._dir);a.onManualSizeChange();a._updateSizers()},onWidthChanged:function(b){a.onManualWidthChange(b)},onHeightChanged:function(b){a.onManualHeightChange(b)},
setWidth:function(b){a.parentGrid&&a.parentGrid.layoutDefaults.columnMinWidth&&(b=Math.max(b,a.parentGrid.layoutDefaults.columnMinWidth));a.setWidth(b)},setHeight:function(b){a.parentGrid&&a.parentGrid.layoutDefaults.rowMinHeight&&(b=Math.max(b,a.parentGrid.layoutDefaults.rowMinHeight));a.setHeight(b)},applyShift:function(b,c){a.onNeedShiftPositionFromResizing(b,c)},onEnd:function(){a._setIsBeingResized(!1)},onSnapped:function(b){a.onResizeSnapped(b)}})})});this.hasAllSidesSizers&&this.own(g.after(this,
"onSizeChanged",function(){(n.isNodeInLayout(a._sizers[0])||n.isNodeInLayout(a._sizers[1]))&&a._updateSizers()}))},_getResizeSnapElements:function(){},_setIsBeingResized:function(a){a?(this._isBeingResizedDelayed=this._isBeingResized=!0,c.add(this.domNode,"isBeingResized"),this.parentGrid&&c.add(this.parentGrid.domNode,"isBeingResized")):(this._isBeingResized&&this._onManualSizeChangeEnd(),this._isBeingResized=!1,c.remove(this.domNode,"isBeingResized"),this.parentGrid&&c.remove(this.parentGrid.domNode,
"isBeingResized"),n.stealFocus(),setTimeout(function(){this._isBeingResizedDelayed=!1}.bind(this),100));this._tooltipHandles.forEach(function(b){a?b.suspend():b.resume()})},updateSizers:function(){this._updateSizers()},_updateSizers:function(){function a(){var a=b.getAngle();b._sizers.forEach(function(c){h.positionSizer({sizer:c,dir:c._dir,w:b.getWidth(),h:b.getHeight(),angle:a})})}this._createSizers();if(this._sizers&&this.hasAllSidesSizers){var b=this;5<this.domNode.clientHeight?a():setTimeout(a,
100)}},_onManualSizePreChange:function(){this.onManualSizePreChange()},_onManualSizeChange:function(a){this.inherited(arguments);this.showSizeLabel&&this._showAndUpdateSizeLabel();this.showSizeLabelsInAllRelatedCells&&this._showAndUpdateRelatedCellsSizeLabels();this.showColumnRowSizeTooltip&&("e"===a?d.showColumnTooltip(this):"s"===a&&d.showRowTooltip(this))},_onManualSizeChangeEnd:function(){n.hide(this.sizeLabel);this.showSizeLabelsInAllRelatedCells&&this._hideRelatedCellsSizeLabels();this.showColumnRowSizeTooltip&&
d.removeTooltip();this.onManualSizeChangeEnd()},tryUpdateSizeLabel:function(){n.isNodeInLayout(this.sizeLabel)&&(this.showSizeLabel&&this._showAndUpdateSizeLabel(),this.showSizeLabelsInAllRelatedCells&&this._showAndUpdateRelatedCellsSizeLabels())},_showAndUpdateSizeLabel:function(){if(this.domNode){this.sizeLabel=this.sizeLabel||b.create("div",{"class":"elementSizeLabel"},this.domNode);n.show(this.sizeLabel);var a=this.domNode.clientWidth,c=this.domNode.clientHeight,d=l.convert(a,"px",this.viewModel.getUnits()),
f=l.convert(c,"px",this.viewModel.getUnits());this.sizeLabel.innerHTML=e.substitute(this.viewModel.provideUnits(t.elementSizeFormat),{width:this.viewModel.roundForUnits(d),height:this.viewModel.roundForUnits(f)});d=this.sizeLabel.clientHeight;this.sizeLabel.style.left=Math.round((a-this.sizeLabel.clientWidth)/2)+"px";this.sizeLabel.style.top=Math.round(20<c?(c-d)/2:-d-5)+"px"}},_showAndUpdateRelatedCellsSizeLabels:function(){this._getRelatedCells().forEach(function(a){a._showAndUpdateSizeLabel()})},
_hideRelatedCellsSizeLabels:function(){this._getRelatedCells().forEach(function(a){n.hide(a.sizeLabel)})},_getRelatedCells:function(){return this.parentGrid?this.parentGrid.getFieldCells().filter(function(a){return a!==this},this):[]},onManualSizePreChange:function(){},onManualSizeChangeEnd:function(){},onManualSizeChange:function(){},onManualWidthChange:function(a){},onManualHeightChange:function(a){},onNeedShiftPositionFromResizing:function(a,b){},onResizeSnapped:function(a){}})})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/valueField/supportClasses/ResizeColumnRowTooltipVisualizer":function(){define("dojo/_base/declare dojo/string dojo/dom-construct dojo/dom-geometry esri/dijit/geoenrichment/utils/PageUnitsConverter dojo/i18n!esri/nls/jsapi".split(" "),
function(k,g,f,e,c,b){b=b.geoenrichment.dijit.ReportPlayer.ValueField;var a={},d=k(null,{_cell:null,_isColumn:null,_tooltip:null,constructor:function(a,b){this._cell=a;this._isColumn=b},show:function(){this.destroy();this._tooltip=f.create("div",{"class":"esriGEAdjustableGrid_resizableColumnTooltip"},document.body);this.update()},update:function(){setTimeout(this._doUpdate.bind(this))},_doUpdate:function(){if(this._tooltip&&this._cell.domNode){var a=e.position(this._cell.domNode),d=e.position(this._cell.parentGrid.domNode),
f=this._cell.viewModel;this._isColumn?(this._tooltip.innerHTML=g.substitute(f.provideUnits(b.columnWidth),{width:f.roundForUnits(c.convert(this._cell.domNode.clientWidth,"px",f.getUnits()))}),this._tooltip.style.left=a.x+(a.w-this._tooltip.clientWidth)/2+"px",this._tooltip.style.top=d.y-this._tooltip.clientHeight-10+"px"):(this._tooltip.innerHTML=g.substitute(f.provideUnits(b.rowHeight),{height:f.roundForUnits(c.convert(this._cell.domNode.clientHeight,"px",f.getUnits()))}),this._tooltip.style.left=
d.x-this._tooltip.clientWidth-10+"px",this._tooltip.style.top=a.y+(a.h-this._tooltip.clientHeight)/2+"px")}},destroy:function(){this._tooltip&&f.destroy(this._tooltip);this._tooltip=null}}),h,l;a.showColumnTooltip=function(b){a._showTooltip(b,!0)};a.showRowTooltip=function(b){a._showTooltip(b,!1)};a._showTooltip=function(b,c){l!==b&&a.removeTooltip();l=b;h?h.update():(h=new d(b,c),h.show())};a.removeTooltip=function(){h&&h.destroy();l=h=null};return a})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/valueField/supportClasses/ResizeEngine":function(){define("dojo/on dojo/dom-style esri/dijit/geoenrichment/utils/DomUtil esri/dijit/geoenrichment/utils/KeyboardUtil esri/dijit/geoenrichment/utils/MathUtil esri/dijit/geoenrichment/utils/MouseUtil".split(" "),
function(k,g,f,e,c,b){var a={ALL_DIRECTIONS:"e se s sw w nw n ne".split(" "),trackSizer:function(d){var f=a._getSizerInfo(d),g,n=b.getCursorPosition().clientX,m=b.getCursorPosition().clientY,p=d.w,t=d.h,q=0,r=0,u=k(document.body,"mousemove",function(h){h.preventDefault();h.stopPropagation();d.applyShift(-q,-r);r=q=0;var k=b.getCursorPosition().clientX,l=b.getCursorPosition().clientY,u=[0,0,k-n,l-m],l=k=0,w;w=d.supportsCtrlShift&&h.shiftKey;var v=d.supportsCtrlShift&&e.isCtrl(h);f.changeWVector&&f.changeHVector&&
w&&(w=c.normalizeVector(f.vector),u=c.calcDotProduct(u,w),u=[0,0,w[2]*u,w[3]*u]);d.onSnapped(null);f.changeWVector&&(k=c.calcAngleBetweenVectors(f.changeWVector,u),k=c.calcVectorLength(u)*Math.cos(k)||0);f.changeHVector&&(l=c.calcAngleBetweenVectors(f.changeHVector,u),l=c.calcVectorLength(u)*Math.cos(l)||0);k=k&&a._restricVectorDelta(k,f.changeWVector,d);l=l&&a._restricVectorDelta(l,f.changeHVector,d);u=k&&a._snapVectorDelta(k,f.calcBoundaryWVectors(p,t,l),d);w=l&&a._snapVectorDelta(l,f.calcBoundaryHVectors(p,
t,k),d);u&&u.canSnap&&w&&w.canSnap&&(u.canSnap=Math.abs(u.minDelta)<=Math.abs(w.minDelta),w.canSnap=Math.abs(w.minDelta)<Math.abs(u.minDelta));u&&u.canSnap&&(d.onSnapped(u.snapInfo),k=u.snappedDelta);w&&w.canSnap&&(d.onSnapped(w.snapInfo),l=w.snappedDelta);v&&(k*=2,l*=2);g||!k&&!l||(d.onPreChange(),g=!0);u=k||l;w=p+k;var E=t+l;u&&(v?(q=p/2-w/2,r=t/2-E/2):(v=f.calcOppositePoint(w,E),q=f.oppositePoint[0]-v[0],r=f.oppositePoint[1]-v[1]),d.applyShift(q,r),d.setWidth(w),d.setHeight(E));u&&d.onSizeChanged(h);
k&&d.onWidthChanged(h);l&&d.onHeightChanged(h)}),v=k.once(document.body,"mouseup, click",function(a){a.preventDefault();a.stopPropagation();v.remove();u.remove();d.onEnd()})},_getSizerInfo:function(a){function b(a,b){var f,g,h,k,l,m;switch(d){case "e":f=[a,b/2];g=h=[0,b/2];l=[[0,0,a,0],[0,b,a,b]];break;case "se":f=[a,b];g=[0,0];h=[0,b];k=[a,0];l=[[0,b,a,b],[0,0,a,0]];m=[[a,0,a,b],[0,0,0,b]];break;case "s":f=[a/2,b];g=k=[a/2,0];m=[[0,0,0,b],[a,0,a,b]];break;case "sw":f=[0,b];g=[a,0];h=[a,b];k=[0,0];
l=[[a,b,0,b],[a,0,0,0]];m=[[0,0,0,b],[a,0,a,b]];break;case "w":f=[0,b/2];g=h=[a,b/2];l=[[a,0,0,0],[a,b,0,b]];break;case "nw":f=[0,0];g=[a,b];h=[a,0];k=[0,b];l=[[a,0,0,0],[a,b,0,b]];m=[[0,b,0,0],[a,b,a,0]];break;case "n":f=[a/2,0];g=k=[a/2,b];m=[[0,b,0,0],[a,b,a,0]];break;case "ne":f=[a,0],g=[0,b],h=[0,0],k=[a,b],l=[[0,0,a,0],[0,b,a,b]],m=[[a,b,a,0],[0,b,0,0]]}var n=[a/2,b/2];f=c.rotatePointAroundPoint(n,f,e);g=c.rotatePointAroundPoint(n,g,e);h=h&&c.rotatePointAroundPoint(n,h,e);k=k&&c.rotatePointAroundPoint(n,
k,e);a=[g[0],g[1],f[0],f[1]];h=h&&[h[0],h[1],f[0],f[1]];k=k&&[k[0],k[1],f[0],f[1]];l=l&&l.map(function(a){return c.rotateVectorAroundPoint(a,n,e)});m=m&&m.map(function(a){return c.rotateVectorAroundPoint(a,n,e)});return{sizerPoint:f,oppositePoint:g,vector:a,changeWVector:h,changeHVector:k,boundaryWVectors:l,boundaryHVectors:m}}var d=a.dir,e=a.angle,f=b(a.w,a.h);return{oppositePoint:f.oppositePoint,vector:f.vector,changeWVector:f.changeWVector,changeHVector:f.changeHVector,calcOppositePoint:function(a,
c){return b(a,c).oppositePoint},calcBoundaryWVectors:function(a,d,e){a=b(a,d).boundaryWVectors;e&&(e=c.addLengthToVector(c.normalizeVector(f.changeHVector),e),a[0]=c.addPointToVector(a[0],[e[2],e[3]]));return a},calcBoundaryHVectors:function(a,d,e){a=b(a,d).boundaryHVectors;e&&(e=c.addLengthToVector(c.normalizeVector(f.changeWVector),e),a[0]=c.addPointToVector(a[0],[e[2],e[3]]));return a}}},_restricVectorDelta:function(a,b,e){var d=e.getRestrictNodeBox();if(!d||0>=a||!a)return a;e=e.getThisBox();
var f=c.calcVectorLength(b);b=c.addLengthToVector(b,a);b=c.addPointToVector(b,[e.x,e.y]);var g=[d.x+d.w,d.y,d.x+d.w,d.y+d.h],h=[d.x,d.y,d.x+d.w,d.y];a=[d.x,d.y+d.h,d.x+d.w,d.y+d.h];d=c.intersect2Lines(b,[d.x,d.y,d.x,d.y+d.h]);g=c.intersect2Lines(b,g);h=c.intersect2Lines(b,h);a=c.intersect2Lines(b,a);var k=c.calcVectorLength(b),l=b;[d,g,h,a].forEach(function(a){if(a&&(a=[b[0],b[1],a[0],a[1]],0<c.calcDotProduct(b,a))){var d=c.calcVectorLength(a);d<k&&(k=d,l=a)}});l=c.subtractPointFromVector(l,[e.x,
e.y]);return c.calcVectorLength(l)-f},_snapVectorDelta:function(a,b,e){var d=e.getSnapNodeBoxes()||[];if(!d.length||!a)return a;var f=e.getThisBox(),g,h,k,l=Infinity;b.forEach(function(b){b=c.addLengthToVector(b,a);b=c.addPointToVector(b,[f.x,f.y]);var e=c.calcVectorLength(b);d.forEach(function(a){var d=a.box,f=a.tolerance;[[d.x,d.y,d.x,d.y+d.h],[d.x+d.w,d.y,d.x+d.w,d.y+d.h],[d.x+d.w/2,d.y,d.x+d.w/2,d.y+d.h],[d.x,d.y,d.x+d.w,d.y],[d.x,d.y+d.h,d.x+d.w,d.y+d.h],[d.x,d.y+d.h/2,d.x+d.w,d.y+d.h/2]].forEach(function(a,
m){var n=c.intersect2Lines(b,a);n&&(n=[b[0],b[1],n[0],n[1]],0<c.calcDotProduct(b,n)&&(n=c.calcVectorLength(n)-e,Math.abs(n)<=Math.abs(l)&&Math.abs(n)<=f&&(l=n,g=a,k=d,h=2<m)))})})});return{canSnap:!!g,snapInfo:g&&{elementBox:e.getThisFullBox(),snapBox:k,to:h?g[1]:g[0],isHorizontal:h},minDelta:g?l:NaN,snappedDelta:g?a+l:NaN}},positionSizer:function(b){var d,e,k=b.sizer;k.style.display="block";var m=b.dir,p=b.w,t=b.h;b=b.angle;var q=k.offsetWidth||12,r=k.offsetHeight||12;switch(m){case "e":d=p;e=t/
2;break;case "se":d=p;e=t;break;case "s":d=p/2;e=t;break;case "sw":d=0;e=t;break;case "w":d=0;e=t/2;break;case "nw":e=d=0;break;case "n":d=p/2;e=0;break;case "ne":d=p,e=0}b&&(e=c.rotatePointAroundPoint({x:p/2,y:t/2},{x:d,y:e},b),d=e.x,e=e.y);g.set(k,{left:d-q/2+"px",top:e-r/2+"px",cursor:a._getCursorDirection(m,b)+"-resize"});if("w"===m||"e"===m)f[30>t?"hide":"show"](k);if("s"===m||"n"===m)f[30>p?"hide":"show"](k);k.style.display=""},_getCursorDirection:function(b,e){if(!e)return b;e=c.angleTo0_360Range(e);
e=Math.round(e/45);b=a.ALL_DIRECTIONS.indexOf(b)+e;return a.ALL_DIRECTIONS[b%a.ALL_DIRECTIONS.length]}};return a})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/GridBackgroundForegroundUtil":function(){define(["dojo/_base/lang","dojo/dom-construct"],function(k,g){var f={renderBackground:function(e,c,b){return f._renderSection(e,c,b,!0)},renderForeground:function(e,c,b){return f._renderSection(e,c,b,!1)},_renderSection:function(e,c,b,a){var d=a?e.backgroundNode:e.foregroundNode;d&&g.empty(d);
if(!c)return null;d={};d["class"]="esriGEAbsoluteStretched "+(a?"adjustableGrid_backgroundSection":"adjustableGrid_foregroundSection");d.initialWidth=e.getAllowedWidth();d.initialHeight=e.getHeight();d.json=c;d.viewModel=e.viewModel;d.theme=e.theme;d.parentWidget=e;d.currentFeatureIndex=e.currentFeatureIndex;d.initialViewMode=e.getViewMode();d.initialSpecificViewMode=e.getSpecificViewMode();k.mixin(d,b);return e.viewModel.layoutBuilder.createElement("section",d,f._provideNode(e,a))},_provideNode:function(e,
c){return c?e.backgroundNode=e.backgroundNode||g.create("div",{"class":"adjustableGridBackgroundNode"},e.domNode,"first"):e.foregroundNode=e.foregroundNode||g.create("div",{"class":"adjustableGridForegroundNode"},e.domNode)}};return f})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/GridFloatingTablesUtil":function(){define(["dojo/_base/lang","dojo/dom-construct"],function(k,g){var f={renderFloatingTables:function(e,c,b,a){var d=a?e.backgroundFloatingTablesNode:e.foregroundFloatingTablesNode;
d&&g.empty(d);if(!c)return null;d={"class":"esriGEAbsoluteStretched adjustableGrid_floatingTablesSection"};d.initialWidth=e.getAllowedWidth();d.initialHeight=e.getHeight();d.json=c;d.viewModel=e.viewModel;d.theme=e.theme;d.parentWidget=e;d.currentFeatureIndex=e.currentFeatureIndex;d.initialViewMode=e.getViewMode();d.initialSpecificViewMode=e.getSpecificViewMode();k.mixin(d,b);return e.viewModel.layoutBuilder.createElement("section",d,f._provideNode(e,a))},_provideNode:function(e,c){return c?e.backgroundFloatingTablesNode=
e.backgroundFloatingTablesNode||g.create("div",{"class":"adjustableGridFloatingTablesNode"},e.mainNode,"before"):e.foregroundFloatingTablesNode=e.foregroundFloatingTablesNode||g.create("div",{"class":"adjustableGridFloatingTablesNode"},e.mainNode,"after")}};return f})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/GridBorderUtil":function(){define(["../../themes/PageBorderStyles","../../themes/ThemeLibrary","esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/ViewModes"],function(k,
g,f){var e={getBorderStyle:function(c,b,a,d,g){c=c.renderBordersFromTheme?e._getThemeBorderStyle(c,b,a,d,g):c.getViewMode()===f.EDIT?c.editModeBorderLineStyle&&e._getAllBorderStyle(d,g,c.editModeBorderLineStyle.width,c.editModeBorderLineStyle.color):c.previewModeBorderLineStyle&&e._getAllBorderStyle(d,g,c.previewModeBorderLineStyle.width,c.previewModeBorderLineStyle.color);return e._toBorderStyleFormat(c)},_getAllBorderStyle:function(c,b,a,d,e){return{l:a,r:c?a:0,t:a,b:b?a:0,color:d,style:e}},_getThemeBorderStyle:function(c,
b,a,d,f){var h=c.viewModel.getDocumentDefaultStyles(c.theme).border||g.getDefaultBorderSettings();if(h){var n=h.thickness,m=h.lineStyle,p=h.color;switch(h.style){case k.ALL:return e._getAllBorderStyle(d,f,n,p,m);case k.OUTER_ONLY:return{l:0===a.index?n:0,r:d?n:0,t:0===b.index?n:0,b:f?n:0,color:p,style:m};case k.INNER_ONLY:return{l:0<a.index?n:0,t:0<b.index?n:0,color:p,style:m};case k.HORIZONTAL_INNER_ONLY:return{t:0<b.index?n:0,color:p,style:m};case k.VERTICAL_INNER_ONLY:return{l:0<a.index?n:0,color:p,
style:m};default:return c.noThemeBorderLineStyle&&e._getAllBorderStyle(d,f,c.noThemeBorderLineStyle.width,c.noThemeBorderLineStyle.color)}}},_toBorderStyleFormat:function(c){return c&&{borderTopColor:c.color,borderTopWidth:c.t,borderTopOpacity:1,borderTopStyle:c.style,borderRightColor:c.color,borderRightWidth:c.r,borderRightOpacity:1,borderRightStyle:c.style,borderBottomColor:c.color,borderBottomWidth:c.b,borderBottomOpacity:1,borderBottomStyle:c.style,borderLeftColor:c.color,borderLeftWidth:c.l,
borderLeftOpacity:1,borderLeftStyle:c.style}}};return e})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/GridCellRenderer":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect esri/dijit/geoenrichment/ReportPlayer/config esri/dijit/geoenrichment/utils/ObjectUtil esri/dijit/geoenrichment/utils/WaitingUtil ./GridDataUtil ./GridStyleUtil ./GridCellContentScaler ./GridCellContentSynchronizer ../../supportClasses/conditionalStyling/ConditionalStyleUtil ../../supportClasses/templateJsonUtils/fieldInfo/FieldInfoRenderer esri/dijit/geoenrichment/ReportPlayer/core/sections/SectionTypes esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/ElementUsageTypes esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/ViewModes esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/SpecificViewModes ./GridQueryUtil ./tooltip/GridCellTooltipBuilder esri/dijit/geoenrichment/ReportPlayer/config ../../../_devConfig".split(" "),
function(k,g,f,e,c,b,a,d,h,l,n,m,p,t,q,r,u,v,w,y){function A(a){return a[a.parentGrid.hasRealBorders?"getContentWidth":"getWidth"]()}function B(a){return a[a.parentGrid.hasRealBorders?"getContentHeight":"getHeight"]()}var C={color:"#FF0000"},z={color:"#AAAAAA",fontStyle:"italic",fontSize:13,horizontalAlign:"center",verticalAlign:"middle"},E=k(null,{_parentState:null,constructor:function(a,b,c){var d=this;h.fitContentInsideCell(a);this._setParentState(a);c.forEach(function(c){var e=c[1];b.own(f.after(a,
c[0],function(){d._checkParentChanged(e,a)&&(h.fitContentInsideCell(a),l.syncParentFieldInfoWithElementState(a,b))}))})},_setParentState:function(a){var b=a.getFullStyle();this._parentState={width:A(a),height:B(a),horizontalAlign:b.horizontalAlign,verticalAlign:b.verticalAlign}},_checkParentChanged:function(a,b){var c;switch(a){case "width":a=A(b);this._parentState.width!==a&&(this._parentState.width=a,c=!0);break;case "height":a=B(b);this._parentState.height!==a&&(this._parentState.height=a,c=!0);
break;case "horizontalAlign":case "verticalAlign":if(a=b.getFullStyle(),this._parentState.horizontalAlign!==a.horizontalAlign||this._parentState.verticalAlign!==a.verticalAlign)this._parentState.horizontalAlign=a.horizontalAlign,this._parentState.verticalAlign=a.verticalAlign,c=!0}return c}});return k(null,{renderCellContent:function(b){var c=b.parentGrid,d=a.getFieldInfo(b);if(y.emulateErrors.reportContainerRenderError)throw Error("Error test: something crashed when building the UI layout!");try{if(d){if(d.isReportSection)return this._placeReportSectionInCell(c,
b);if(d.isInfographic)return this._placeInfographicInCell(c,b);if(d.isChart)return this._placeChartInCell(c,b);if(d.isMap)return this._placeMapInCell(c,b);if(d.isImage)return this._renderCellTooltip(b),this._placeImageInCell(c,b);if(d.isShape)return this._placeShapeInCell(c,b);d.isMissing&&b.setStyle(C);d.isUnsupportedContent&&b.setStyle(z)}this._applyRenderedContent(b,this._getRenderedContent(b));b.setContent(null);this._renderCellTooltip(b)}catch(H){if(console.log(H),!w.tables.leaveEmptyCellsUponError)throw H;
}},_renderCellTooltip:function(a){a.viewModel.dynamicReportInfo&&!e.isPlayerOnServer&&v.setDynamicTooltipToCell(a,a.viewModel.dynamicReportInfo.templateVariableProvider)},updateViewMode:function(b){var c=a.getFieldInfo(b);c&&(c.hasVariable||c.script||c.alias||c.isRichText)&&this._applyRenderedContent(b,this._getRenderedContent(b))},getRenderedContent:function(a){return this._getRenderedContent(a)},_getRenderedContent:function(b,c){var d=a.getFieldInfo(b);if(d)return b=this._prepareRenderContextForFieldCell(b),
g.mixin(b,c),d.isImage&&d.triggerJson&&d.triggerJson.fieldInfo&&(d=d.triggerJson.fieldInfo),m.renderFieldInfoInTableCell(d,b);c=b.gridData[b.column.field];return{formattedValue:null===c||void 0===c||"number"===typeof c&&isNaN(c)?"":c,value:c,formatFunction:null,isUnavailableData:!1,conditionalStyle:null}},_prepareRenderContextForFieldCell:function(a){var b=a.parentGrid,c=b.getViewMode()===q.EDIT,d=this._getCellBenchmarkInfoBuilder(a);return{previewValues:this._isPreviewValues(a),previewConditionalStyle:!c,
getPreviewValueFunction:b.getPreviewValueFunction,fieldData:b.viewModel.dynamicReportInfo&&b.viewModel.dynamicReportInfo.fieldData,currentFeatureIndex:b.getFeatureIndexForCell(a),currentFeatureAttributes:b.currentFeatureAttributes,rowIndex:a.gridData&&a.gridData.index,columnIndex:a.column&&a.column.index,columnField:a.column&&a.column.field,numRows:b.store.data.length,isGraphicReport:b.viewModel.isGraphicStyle,isMultiFeature:b.viewModel.dynamicReportInfo&&b.viewModel.dynamicReportInfo.isMultiFeature,
presetFilter:!c&&b.presetFilter,presetSorting:!c&&b.presetSorting,isBenchmarked:!!d,getBenchmarkInfo:d&&d.getBenchmarkInfo}},_isPreviewValues:function(b){var c=b.parentGrid;b=a.getFieldInfo(b);var d=c.getSpecificViewMode(),c=c.getViewMode()===q.PREVIEW_VALUES;b&&b.name&&0===b.name.indexOf("SiteNote")&&(c=!0);d&&b&&(d[r.RICH_TEXT]===q.PREVIEW_VALUES&&b.isRichText?c=!0:d[r.VARIABLE]===q.PREVIEW_VALUES&&a.isVariableLikeFieldCell(b)?c=!0:d[r.SPECIAL]===q.PREVIEW_VALUES&&a.isSpecialFieldCell(b)?c=!0:d[r.INFOGRAPHIC]===
q.PREVIEW_VALUES&&b.isInfographic&&(c=!0));return c},_applyRenderedContent:function(b,c){c&&(this._setCellFormattedValue(b,c),c.isUnavailableData||("number"!==typeof c.value||isNaN(c.value)||(a.setNumericCellValue(b,c.value),b.setNumberValue(c.value,c.formatFunction,b.parentGrid.enableNumberAnimation)),c.conditionalStyle?(b.setStyle(c.conditionalStyle.style),"string"===typeof c.conditionalStyle.formattedValue&&this._setCellFormattedValue(b,c.conditionalStyle),b.__hasConditionalStyle=!0):!1===c.conditionalStyle||
b.__hasConditionalStyle?(delete b.__hasConditionalStyle,b.setStyle(d.combineCellStyle(b.parentGrid,b.gridData,b.column))):c.modifiedValue&&"string"===typeof c.modifiedValue.formattedValue&&this._setCellFormattedValue(b,c.modifiedValue)),b.parentGrid&&b.parentGrid.viewModel.dynamicReportInfo&&b.setUrl(a.getFieldCellUrl(b)))},_setCellFormattedValue:function(b,c){if("number"===typeof c.value&&!isNaN(c.value)){var d=this._getCellBenchmarkInfoBuilder(b);d&&b.setBenchmarkInfo(d.getBenchmarkInfo(c.value))}a.setFieldCellContent(b,
c.formattedValue)},_getCellBenchmarkInfoBuilder:function(a){var b=this,d=a.parentGrid;return d.viewModel.isBenchmarkedArea&&d.viewModel.isBenchmarkedArea(d.getFeatureIndexForCell(a))&&{isBenchmarked:!0,getBenchmarkInfo:function(e,f){var g=a;f&&(g={gridData:{fieldInfos:{}},column:a.column,parentGrid:d},g.gridData.fieldInfos[g.column.field]=f);f=b._getRenderedContent(g,{currentFeatureIndex:d.viewModel.getBenchmarkController().getAreaIndex()});g=e-f.value;return{ownValue:e,isGreater:0<=g,value:Math.abs(g),
formattedValue:f.formatFunction?f.formatFunction(Math.abs(g)):c.formatNumber(Math.abs(g)),noTextLimit:d.viewModel.getBenchmarkController().hasNoTextLimit()}}}},_placeReportSectionInCell:function(c,d){function e(){if(d.domNode)return f._createReportSectionFromParams(c,d,g)}var f=this,g={"class":"adjustableGrid_inCellSection"};g.json=a.getFieldInfo(d).sectionJson;g.viewModel=c.viewModel;g.theme=c.theme;g.viewPortContainer=c.viewPortContainer;g.parentWidget=d;g.currentFeatureIndex=c.getFeatureIndexForCell(d);
g.currentFeatureAttributes=c.currentFeatureAttributes;g.initialWidth=A(d);g.initialHeight=B(d);g.noContentOffset=u.cellHasFloatingTableParent(d);g.initialViewMode=c.getViewMode();g.onContentLoadingStart=c.onContentLoadingStart.bind(c);g.onContentLoadingEnd=c.onContentLoadingEnd.bind(c);g.parentGridCell=d;g.elementUsageType=(c.isReportContainerPageGrid||c.parentGrid&&c.parentGrid.isReportContainerPageGrid)&&t.PAGE_PANEL_SECTION;var h=c.viewModel.layoutBuilder.getClass("section");return h.isAsync?b.showProgressPromise(d.domNode,
h.loadModules()).then(e):e()},_createReportSectionFromParams:function(a,b,c){a=c.json&&c.json.stack&&c.json.type!==p.EMPTY?a.viewModel.layoutBuilder.createElement("section",c,b.getContentContainerNode()):a.viewModel.layoutBuilder.createElement("emptySection",c,b.getContentContainerNode());b.setContent(a);new E(b,a,[["onWidthChanged","width"],["onHeightChanged","height"]]);return a},_placeInfographicInCell:function(c,d){function e(){if(d.domNode)return f._createInfographicFromParams(c,d,g,h)}var f=
this,g=a.getFieldInfo(d).infographicJson,h={viewModel:c.viewModel,theme:c.theme,parentWidget:d,currentFeatureIndex:c.getFeatureIndexForCell(d),currentFeatureAttributes:c.currentFeatureAttributes,getPreviewValueFunction:c.getPreviewValueFunction,width:A(d),height:B(d),adjustElementsWhenResized:u.cellHasFloatingTableParent(d),onContentLoadingStart:c.onContentLoadingStart.bind(c),onContentLoadingEnd:c.onContentLoadingEnd.bind(c)},k=c.viewModel.layoutBuilder.getClass("infographic");return k.isAsync?b.showProgressPromise(d.domNode,
k.loadModules()).then(e):e()},_createInfographicFromParams:function(a,b,c,d){c=a.viewModel.layoutBuilder.createElement("infographic",{node:b.getContentContainerNode(),placeFunc:function(a){b.setContent(a)},json:c,creationParams:d});c.setViewMode&&c.setViewMode(a.getViewMode());new E(b,c,[["onWidthChanged","width"],["onHeightChanged","height"]]);return c},_placeChartInCell:function(c,d){function e(){if(d.domNode)return f._createChartPageFromParams(c,d,h,g)}var f=this,g={viewModel:c.viewModel,theme:c.theme,
currentFeatureIndex:c.getFeatureIndexForCell(d),currentFeatureAttributes:c.currentFeatureAttributes,parentWidget:d,onContentLoadingStart:c.onContentLoadingStart.bind(c),onContentLoadingEnd:c.onContentLoadingEnd.bind(c)},h=a.getFieldInfo(d).chartJson;h.visualProperties.width=d.getWidth();h.visualProperties.height=d.getHeight();var k=c.viewModel.layoutBuilder.getClass("chart");return k.isAsync?b.showProgressPromise(d.domNode,k.loadModules()).then(e):e()},_createChartPageFromParams:function(a,b,c,d){a=
a.viewModel.layoutBuilder.createElement("chart",{node:b.getContentContainerNode(),placeFunc:function(a){b.setContent(a)},json:c,creationParams:d});new E(b,a,[["onWidthChanged","width"],["onHeightChanged","height"]]);return a},_placeMapInCell:function(c,d){function e(){if(d.domNode)return h=f._createMapFromParams(c,d,g,k)}var f=this,g=a.getFieldInfo(d).mapJson;A(d);B(d);var h,k={viewModel:c.viewModel,theme:c.theme,parentWidget:d,currentFeatureIndex:c.getFeatureIndexForCell(d),currentFeatureAttributes:c.currentFeatureAttributes,
onContentLoadingStart:c.onContentLoadingStart.bind(c),onContentLoadingEnd:c.onContentLoadingEnd.bind(c)},l=c.viewModel.layoutBuilder.getClass("map");return l.isAsync?b.showProgressPromise(d.domNode,l.loadModules()).then(e):e()},_createMapFromParams:function(a,b,c,d){a=a.viewModel.layoutBuilder.createElement("map",{node:b.getContentContainerNode(),placeFunc:function(a){b.setContent(a)},json:c,creationParams:d});new E(b,a,[["onWidthChanged","width"],["onHeightChanged","height"],["setStyle","horizontalAlign"]]);
return a},_placeImageInCell:function(b,c){function d(){if(c.domNode)return p=e._createImageFromParams(b,c,g,q)}var e=this,f=a.getFieldInfo(c),g=f.imageJson,h=A(c),k=B(c);if(f.triggerJson)if(b.viewModel.dynamicReportInfo){var l=m.getValueFromFieldData(f.triggerJson.fieldInfo,{fieldData:b.viewModel.dynamicReportInfo.fieldData,currentFeatureIndex:b.getFeatureIndexForCell(c),currentFeatureAttributes:b.currentFeatureAttributes});n.processImageJsonForTrigger(g,l.value,f.triggerJson);l.isUnavailableData||
"number"!==typeof l.value||isNaN(l.value)||(a.setNumericCellValue(c,l.value),c.setNumberValue(l.value,l.formatFunction,!1))}else(l=m.getConditionalStylePreview(f,c.gridData.index))&&"number"===typeof l.value&&!isNaN(l.value)&&(n.processImageJsonForTrigger(g,l.value,f.triggerJson),a.setNumericCellValue(c,l.value));g.style.width&&g.style.height&&!1!==g.ownSizeInsideParent&&Math.round(g.style.width)!==Math.round(h)&&Math.round(g.style.height)!==Math.round(k)?g.ownSizeInsideParent=!0:(g.ownSizeInsideParent=
!1,g.style.width=h,g.style.height=k);var p,q={viewModel:b.viewModel,theme:b.theme,parentWidget:c,currentFeatureIndex:b.getFeatureIndexForCell(c),currentFeatureAttributes:b.currentFeatureAttributes,alignParams:c.getFullStyle(),imageTriggerJson:f.triggerJson,onInitialized:function(){if(c.domNode){var a=A(c),b=B(c);p&&p.resize({w:a,h:b},c.getFullStyle())}},onContentLoadingStart:b.onContentLoadingStart.bind(b),onContentLoadingEnd:b.onContentLoadingEnd.bind(b)},f=b.viewModel.layoutBuilder.getClass("image");
return f.isAsync?f.loadModules().then(d):d()},_createImageFromParams:function(a,b,c,d){a=a.viewModel.layoutBuilder.createElement("image",{node:b.getContentContainerNode(),placeFunc:function(a){b.setContent(a)},json:c,creationParams:d});new E(b,a,[["onWidthChanged","width"],["onHeightChanged","height"],["setStyle","horizontalAlign"]]);return a},_placeShapeInCell:function(b,c){function d(){if(c.domNode)return k=e._createShapeFromParams(b,c,f,l)}var e=this,f=a.getFieldInfo(c).shapeJson,g=A(c),h=B(c);
f.style.width=g;f.style.height=h;var k,l={viewModel:b.viewModel,theme:b.theme,parentWidget:c,currentFeatureIndex:b.getFeatureIndexForCell(c),currentFeatureAttributes:b.currentFeatureAttributes,alignParams:c.getFullStyle(),getPreviewValueFunction:b.getPreviewValueFunction,applyThemeStyle:b.applyThemeStyle,onInitialized:function(){if(c.domNode){var a=A(c),b=B(c);k&&k.resize({w:a,h:b},c.getFullStyle())}},onContentLoadingStart:b.onContentLoadingStart.bind(b),onContentLoadingEnd:b.onContentLoadingEnd.bind(b)},
g=b.viewModel.layoutBuilder.getClass("shape");return g.isAsync?g.loadModules().then(d):d()},_createShapeFromParams:function(a,b,c,d){a=a.viewModel.layoutBuilder.createElement("shape",{node:b.getContentContainerNode(),placeFunc:function(a){b.setContent(a)},json:c,creationParams:d});new E(b,a,[["onWidthChanged","width"],["onHeightChanged","height"],["setStyle","horizontalAlign"]]);return a}})})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/GridStyleUtil":function(){define(["./GridLayoutCalculator",
"esri/dijit/geoenrichment/utils/ColorUtil","esri/dijit/geoenrichment/utils/ObjectUtil","../valueField/ValueField"],function(k,g,f,e){var c={filterCellStyles:function(b){return c._filterCellStyles(b,e.SUPPORTED_STYLES)},filterCellTextStyles:function(b){return c._filterCellStyles(b,e.SUPPORTED_TEXT_STYLES)},_filterCellStyles:function(b,a){var c={},e;for(e in b)void 0!==b[e]&&a[e]&&(c[e]=b[e]);return c},combineCellStyle:function(b,a,d,e){var h={};if(c._isContainerCell(b,a,d))e=e||a.style.fields&&a.style.fields[d.field],
f.copyOwnJsonProperties(e,h),delete h.backgroundColor;else{var n=b.viewModel.getDocumentDefaultStyles&&b.viewModel.getDocumentDefaultStyles(b.theme);f.copyOwnJsonProperties(n,h);delete h.backgroundColor;c._canApplyDefaultTableStyle(b)&&b.viewModel.getTableDefaultStyles&&f.copyOwnJsonProperties(b.viewModel.getTableDefaultStyles(b.theme,"Default"),h);f.copyOwnJsonProperties(a.style,h);b.applyThemeStyle&&f.copyOwnJsonProperties(a.themeStyle&&a.themeStyle.fields&&a.themeStyle.fields[d.field],h);b.inheritThemeBackground||
g.isTransparent(h.backgroundColor)||delete h.backgroundColor;e=e||a.style.fields&&a.style.fields[d.field];f.copyOwnJsonProperties(e,h);if(h.overrideStyle&&b.viewModel.getTableDefaultStyles&&(e=b.viewModel.getTableDefaultStyles(b.theme,h.overrideStyle)))for(var m in e)if("backgroundColor"!==m||b.inheritThemeBackground||g.isTransparent(e[m]))h[m]=e[m]}h.width=k.calcFieldWidth(b,a,d.field);h.height=k.calcDataHeight(b,a,d.field);return c.filterCellStyles(h)},_isContainerCell:function(b,a,c){return b.viewModel.isGraphicStyle?
b.isReportContainerPageGrid?!0:(a=a.fieldInfos&&a.fieldInfos[c.field])?a.isReportSection?!0:b.isSingleCelledTable()&&(a.isImage||a.isShape||a.isInfographic||a.isChart||a.isMap):!1:!1},_canApplyDefaultTableStyle:function(b){return b.viewModel.isGraphicStyle?b.isMultiDataTable():!0}};return c})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/GridCellContentScaler":function(){define(["./GridDataUtil"],function(k){return{fitContentInsideCell:function(g){var f=k.getFieldInfo(g);if(f&&g.content){var e=
g.content,c=g.parentGrid,b=g[c.hasRealBorders?"getContentWidth":"getWidth"](),c=g[c.hasRealBorders?"getContentHeight":"getHeight"]();f.isReportSection?(e.setHeight(c,{resizeContentProportionally:!0}),e.setWidth(b,{resizeContentProportionally:!0})):f.isChart?e.resize(b,c):f.isInfographic?e.resize(b,c):f.isMap?e.resize({w:b,h:c}):(f.isImage||f.isShape)&&e.resize({w:b,h:c},g.getFullStyle())}}}})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/GridCellContentSynchronizer":function(){define(["./GridDataUtil",
"../../supportClasses/templateJsonUtils/fieldInfo/FieldInfoBuilder"],function(k,g){return{syncParentFieldInfoWithElementState:function(f,e){if(f&&e){var c=k.getFieldInfo(f);c&&(c.isChart?(c.chartJson.visualProperties.width=f.getWidth(),c.chartJson.visualProperties.height=f.getHeight()):c.isMap?k.setFieldInfo(f,g.createFieldInfoFromMap(e.toJson())):c.isImage?k.setFieldInfo(f,g.createFieldInfoFromImage(e.toJson(),e.imageTriggerJson)):c.isShape?k.setFieldInfo(f,g.createFieldInfoFromShape(e.toJson())):
c.isReportSection?k.setFieldInfo(f,g.createFieldInfoFromSection(e.toJson())):c.isInfographic&&k.setFieldInfo(f,g.createFieldInfoFromInfographic(e.toJson())))}}}})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/templateJsonUtils/fieldInfo/FieldInfoRenderer":function(){define(["../../../grid/coreUtils/GridDataUtil","./utils","./_FieldInfoPreviewRenderer","./_FieldInfoDataRenderer","dojo/i18n!esri/nls/jsapi"],function(k,g,f,e,c){function b(a,b){b=b||15;return!a||a.length<=b?a:a.substr(0,
b-3)+"..."}var a=c.geoenrichment.dijit.ReportPlayer.ReportPlayer.missingVariable,d=c.geoenrichment.dijit.ReportPlayer.ReportPlayer.unsupportedContent;c=c.geoenrichment.dijit.ReportPlayer.VariableStates;var h={},l={renderPreview:function(a,b){return b.fieldData?e.getValueFromFieldData(a,b):f.getValuePreview(a,b)},tryProvideConditionalStylePreview:function(a,b,c){a.isUnavailableData||a.conditionalStyle||c.fieldData||!(b=f.getConditionalStylePreview(b,c))||(a.conditionalStyle=c.previewConditionalStyle?
b:!1)},tryProvideRangeFilterPreview:function(a,b){a.isUnavailableData||a.modifiedValue||b.fieldData||!b.presetFilter||(a.modifiedValue=f.getRangeFilterPreview(b))},tryProvideSortingPreview:function(a,b){a.isUnavailableData||b.fieldData||!b.presetSorting||(a.modifiedValue=f.getSortingPreview(b))}},n={buildVariableLabel:function(a){var d;if(a.isWebMap)d=b(a.webMapFieldName)+"(WebMap)";else if(a.isSiteAttribute)d=b(a.alias)+"(SiteAttribute)";else if(a.isDataLayerAttribute)d=b(a.alias)+"(NearbyLocations)";
else if(a.isCustomDataCollection)d=b(a.alias)+"(CustomData)";else a:{d=a.variableID;switch(a.statefulName&&a.statefulName.charAt(0).toLowerCase()){case "p":a=c.statePercent_short;break;case "a":a=c.stateAverage_short;break;case "i":a=c.stateIndex_short;break;case "r":a=c.stateReliability_short;break;default:break a}d=d+" ("+a+")"}return"["+d+"]"},_SCRIPT_ALIAS_RE:/\s/g,buildScriptLabel:function(a){a=a.alias?a.alias.replace(n._SCRIPT_ALIAS_RE,""):g.name.renderScriptName(a.name);return"["+b(a,40)+"]"}},
m={renderRichTextFieldInfoInTableCell:function(a,b){return g.richText.createRichTextFromFieldInfo(a,function(a){var c=h.renderFieldInfoInTableCell(a,b),d=c.formattedValue;b&&b.isBenchmarked&&(a=b.getBenchmarkInfo(c.value,a))&&a.formattedValue&&(d+=" ("+(a.isGreater?"+":"-")+a.formattedValue+")");return d})}};h.renderFieldInfoInTableCell=function(b,c){c=c||{};var e={formattedValue:null,value:null,formatFunction:null,isUnavailableData:!1,conditionalStyle:null,modifiedValue:null};if(b.isRichText)return e.formattedValue=
m.renderRichTextFieldInfoInTableCell(b,c),e;if(b.isMissing)return e.formattedValue=a,e.isUnavailableData=!0,e;if(b.isUnsupportedContent)return e.formattedValue=d,e.isUnavailableData=!0,e;if(c.previewValues){if(e=l.renderPreview(b,c),e.isUnavailableData)return e}else e.formattedValue=b.hasVariable?n.buildVariableLabel(b):b.script?n.buildScriptLabel(b.script):"["+b.alias+"]";if(k.isVariableLikeFieldCell(b)&&(l.tryProvideConditionalStylePreview(e,b,c),l.tryProvideRangeFilterPreview(e,c),l.tryProvideSortingPreview(e,
c),e.formattedValue=g.format.providePercentCurrencySymbols(e.formattedValue,b,{placePercentCurrencyInFront:!c.previewValues}),e.formatFunction)){var f=e.formatFunction;e.formatFunction=function(a){return g.format.providePercentCurrencySymbols(f(a),b,{placePercentCurrencyInFront:!c.previewValues})};e.conditionalStyle&&void 0===e.conditionalStyle.formattedValue&&(e.conditionalStyle.formattedValue=e.formatFunction(e.conditionalStyle.value));e.modifiedValue&&void 0===e.modifiedValue.formattedValue&&(e.modifiedValue.formattedValue=
e.formatFunction(e.modifiedValue.value))}return e};h.getConditionalStylePreview=function(a,b){var c={};l.tryProvideConditionalStylePreview(c,a,{rowIndex:b,previewConditionalStyle:!0});return c.conditionalStyle};h.renderRichTextFieldInfoInTableCell=m.renderRichTextFieldInfoInTableCell;h.getValueFromFieldData=e.getValueFromFieldData;h.getFieldDataValue=e.getFieldDataValue;return h})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/templateJsonUtils/fieldInfo/_FieldInfoPreviewRenderer":function(){define("dojo/string ./utils ./FieldInfoPreviewSampleUtil ./FieldInfoPreviewAttributeUtil ../../conditionalStyling/ConditionalStyleUtil esri/dijit/geoenrichment/utils/ObjectUtil esri/dijit/geoenrichment/utils/DateUtil ../../../grid/coreUtils/sorting/GridSortUtil ../../../grid/coreUtils/GridDataUtil esri/dijit/geoenrichment/ReportPlayer/countryConfig ../../../sections/dynamicSettings/supportClasses/FilterUtil dojo/i18n!esri/nls/jsapi ../../../../_devConfig".split(" "),
function(k,g,f,e,c,b,a,d,h,l,n,m,p){m=m.geoenrichment.dijit.ReportPlayer.FieldInfoPreview;var t={percent:[10,15,20,25,33,46,72,90,95],percentSmall:[2,3,4,5,6,7],index:[80,99,105,111,113,118,121,130],number:[1150,2013,5006,10135,20456,36813],numberSep:[1150,2013,5006,10135,20456,36813],numberSmall:[10,5,3,7,15]},q=/^MEDAGE|^AVGHHSZ|^UNEMPRT|ECYHSZAVG|ECYPTAMED/,r={percent:{MP19013a_B:72,MP19014a_B:70,EMP_TO_POP:25,NOHS:10,HSG:20,SC:30,BGPD:40,X9074_A:326},percentSmall:{UNEMPRT_CY:5},index:{},number:{MEDHINC_CY:55650,
TOTPOP_CY:20456,TOTHH_CY:8546,MEDDI_CY:38290,S01_BUS:11256,S01_EMP:60382,PCI_CY:30382,MEDNW_CY:88548,MEDVAL_CY:352430,X3004_A:5682,ACSMEDCRNT:1227,X5001_A:1762,X1003_A:4073,X4100_A:543,X8001_A:4538,X1130_A:3465,X7001_A:1568,X9008_A:246,X9073_A:158,X9045_A:42,POPGRWCYCY:1.05,POPGRWCYFY:1.12,ECYPTAPOP:20456,ECYHNIMED:55650},numberSep:{MEDHINC_CY:55650,TOTPOP_CY:20456,TOTHH_CY:8546,MEDDI_CY:38290,S01_BUS:11256,S01_EMP:60382,PCI_CY:30382,MEDNW_CY:88548,MEDVAL_CY:352430,X3004_A:5682,ACSMEDCRNT:1227,X5001_A:1762,
X1003_A:4073,X4100_A:543,X8001_A:4538,X1130_A:3465,X7001_A:1568,X9008_A:246,X9073_A:158,X9045_A:42,ECYPTAPOP:20456,ECYHNIMED:55650},numberSmall:{AVGHHSZ_CY:2,MEDAGE_CY:36,ECYHSZAVG:2,ECYPTAMED:36},string:{TSEGNAME:"Bright Young Professionals",TLIFECODE:"L8",TLIFENAME:"Middle Ground",TSEGCODE:"8A",CONAME:"Coffee",NAICS:"1234",SIC:"5678",ADDR:"380 New York St, Redlands, CA",STATE:"CA",STATE_NAME:"California",ZIP:"92373",ZIP4:"92373",CITY:"Redlands",STREET:"New York st.",DIRECTION:"SW",FRNCOD:"24"}},
u={"Employee/ Population Ratio":"EMP_TO_POP","No High School Diploma":"NOHS","High School Graduate":"HSG","Some College":"SC","Bachelors/Grad/Prof Degree":"BGPD","Tickets to Movies/Museums/Parks: Average":"X9074_A"},v={};return{getValuePreview:function(a,b){return h.isVariableLikeFieldCell(a)?this._getVariableOrScriptPreview(a,b):this._getNonVariablePreview(a,b)},_getVariableOrScriptPreview:function(c,d){function g(a){return{formattedValue:a,value:a,formatFunction:null,isUnavailableData:!1}}function h(a,
d){function e(a){a=0<c.decimals?a+.5432123456789:Math.round(a);return b.formatNumber(a,{places:c.decimals||0,noSeparator:!c.useThousandsSeparator,preserveTrailingZeroes:!0})}d=a;d=0<c.decimals?Number((d+.5432123456789).toFixed(c.decimals)):Math.round(d);return{formattedValue:e(a),value:d,formatFunction:function(a){return e(a)},isUnavailableData:!1}}var k=this._getSampleCacheType(c);if(p.preview.bigValues&&("number"===k||"numberSep"===k))return h(1E12,k);if(d=this._getValueFromPreviewFunction(c,d))return h(d.value,
d.propName);d=f.findNonEmptySample(c);if("string"===typeof d)return g(d);if("number"===typeof d)return h(d,k);var l=c.type||c.isSiteAttribute&&c.attribute.type;d=c.isSiteAttribute&&e.getAttributePreviewValue(c.attribute);if("esriFieldTypeDate"===l)return k=new Date,d&&k.setTime(d),g(a.formatDateShort(k));if("esriFieldTypeString"===l)return g(r.string[c.isDataLayerAttribute?c.attribute.name:c.variableID]||d||m.sampleTextValue);if("number"===typeof d)return h(d,k);d=v[k]=v[k]||{};var l=c.name+";"+c.decimals,
n=d[l];if(!n){var n=r[k],q;q=c.variableID?c.variableID:c.script&&u[c.script.alias];n=n[q];n||(n=t[k],n=n[Math.round((n.length-1)*Math.random())]);n=d[l]=n}return h(n,k)},_getSampleCacheType:function(a){var b=a.statefulName?"p"===a.statefulName.charAt(0):a.showPercent,c=a.statefulName&&"i"===a.statefulName.charAt(0),d=a.hasVariable&&q.test(a.variableID);return b?d?"percentSmall":"percent":c?"index":d?"numberSmall":a.useThousandsSeparator?"numberSep":"number"},_getValueFromPreviewFunction:function(a,
b){if(b=b.getPreviewValueFunction&&b.getPreviewValueFunction({fieldInfo:a})){var c=this._getSampleCacheType(a),c=0===c.indexOf("percent")?"percent":"number";b=b.fields&&b.fields[a.name]||b;return{value:b[c]||b.value,propName:c}}return null},_getNonVariablePreview:function(a,b){var c=void 0;if(b.getPreviewValueFunction){var d=b.getPreviewValueFunction({fieldInfo:a});d&&(d=d.fields&&d.fields[a.name]||d,c=d.formattedValue||d.value)}void 0===c&&("headers.AREA_DESC"===a.name&&-1<b.currentFeatureIndex?
(a=1+2*b.currentFeatureIndex,c=1===a?l.getSingleUnits()?"1 "+l.getSingleUnits():k.substitute(m.fieldPreviewAreaDescWithRadiusSingular,{radius:a}):l.getPluralUnits()?a+" "+l.getPluralUnits():k.substitute(m.fieldPreviewAreaDescWithRadiusPlural,{radius:a})):c=g.fields.getPreview(a.name,b.isGraphicReport,b.isMultiFeature)||a.alias);return{formattedValue:c,value:c,formatFunction:null,isUnavailableData:!1}},getConditionalStylePreview:function(a,b){if(a.triggerJson&&void 0!==b.rowIndex){var d=this._getValueFromPreviewFunction(a,
b);if(d)return{style:c.getConditionalStyle(d.value,a.triggerJson),value:d.value};if(b=a.triggerJson.cases[b.rowIndex%a.triggerJson.cases.length]){a=c.styleFromSetters(b.setters);var e;1===b.compareInfos.length?(e=Number(b.compareInfos[0].value),b=b.compareInfos[0].operator,"\x3e"===b?e++:"\x3c"===b&&e--):2===b.compareInfos.length&&(e=(Number(b.compareInfos[1].value)+Number(b.compareInfos[0].value))/2);return{style:a,value:e}}}return null},getRangeFilterPreview:function(a){if(a.presetFilter&&n.isRangeType(a.presetFilter.method)){if(a.presetFilter.columnIndex!==
a.columnIndex)return null;var b=n.getRangeStatistics(a.presetFilter.ranges),c=b.min,b=b.max;isFinite(c)||isFinite(b)?isFinite(b)?isFinite(c)||(c=0===b?0:0<b?b/2:2*b):b=0!==c?Math.abs(2*c):100:(c=0,b=100);var d=(b-c)/a.numRows;return{value:c+d*a.rowIndex,_min:c,_max:b,_step:d}}},getSortingPreview:function(a){var b=a.presetFilter&&this.getRangeFilterPreview(a);if(!a.presetSorting.order||a.presetSorting.field!==a.columnField)return b;var c=100,e=0,f=e+a.numRows*c;b&&(e=b._min,f=b._max,c=b._step);return{value:a.presetSorting.order===
d.ORDER_ASC?e+a.rowIndex*c:f-a.rowIndex*c}}}})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/templateJsonUtils/fieldInfo/FieldInfoPreviewSampleUtil":function(){define(["dojo/_base/lang"],function(k){var g={findNonEmptySample:function(f){if(!f)return null;var e;return f.isSiteAttribute?(f.attribute.domain&&f.attribute.domain.codedValues&&f.attribute.domain.codedValues.some(function(c){if(g._isNonEmptySample(c.name))return e=c.name,!0}),e):f.isDataLayerAttribute&&f.attribute.samples&&
f.attribute.samples.length?(f.attribute.samples.some(function(c){if(g._isNonEmptySample(c))return e=c,!0}),e):null},getNonEmptySamples:function(f){if(!f)return null;if(f.isSiteAttribute){if(f.attribute.domain&&f.attribute.domain.codedValues)return f.attribute.domain.codedValues.map(function(e){return e.name}).filter(g._isNonEmptySample)}else if(f.isDataLayerAttribute&&f.attribute.samples&&f.attribute.samples.length)return f.attribute.samples.filter(g._isNonEmptySample);return null},_isNonEmptySample:function(f){return"string"===
typeof f?!!f.trim():!!f},provideSamplesFromLocatorSettings:function(f,e){f&&f.isDataLayerAttribute&&e&&e.searchText&&(f.attribute=k.clone(f.attribute),f.attribute.samples=g.getSamplesFromSearchText(e,20)||f.attribute.samples)},getSamplesFromSearchText:function(f,e){if(!f||!f.searchText)return null;var c=[];f=f.searchText.charAt(0).toUpperCase()+f.searchText.substr(1);for(var b=0;b<e;b++)c.push(f+" "+(b+1));return c}};return g})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/templateJsonUtils/fieldInfo/FieldInfoPreviewAttributeUtil":function(){define(["esri/dijit/geoenrichment/utils/FieldUtil",
"dojo/i18n!esri/nls/jsapi"],function(k,g){g=g.geoenrichment.dijit.ReportPlayer.FieldInfoPreview;var f={},e={BUILDING_AREA:5E3,SITE_AREA:1E4,FRONTAGE:800,PARKING:300};f.getAttributePreviewValue=function(c){if(!c)return"";if(c.domain&&"codedValue"===c.domain.type)return c.domain.codedValues[0].name;if("esriFieldTypeString"===c.type)return g.sampleTextValue;if("esriFieldTypeDate"===c.type){var b=new Date;c.domain&&"range"===c.domain.type&&b.setTime(c.domain.range[0]);return b.getTime()}b=c.domain&&"range"===
c.domain.type?c.domain.range[0]:e[c.name]||Number((100*Math.random()+50).toFixed(1));return"i"===k.isNumericField(c)?Math.round(b):b};return f})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/templateJsonUtils/fieldInfo/_FieldInfoDataRenderer":function(){define("esri/dijit/geoenrichment/ReportPlayer/config ../../conditionalStyling/ConditionalStyleUtil ../../../../dataProvider/supportClasses/data/AreaDataUtil ../../../../dataProvider/supportClasses/attachments/AttributesUtil ../../../grid/coreUtils/GridDataUtil esri/dijit/geoenrichment/utils/ObjectUtil dojo/i18n!esri/nls/jsapi".split(" "),
function(k,g,f,e,c,b,a){function d(a,b){return void 0===a||null===a||"number"===typeof a&&isNaN(a)||"NaN"===a||"N/A"===a||"undefined"===a||"null"===a||b&&"number"!==typeof a}a=a.geoenrichment.dijit.ReportPlayer.ReportPlayer;var h={getValueFromFieldData:function(b,f){function l(){d(n,w)?t=void 0:w?(t=h._formatValue(n,b),q=function(a){return h._formatValue(a,b)}):t=String(n)}f=f||{};var n=void 0,t=void 0,q,r=!1,u,v=!1,w=c.isNumericVariableFieldCell(b);if(f.getPreviewValueFunction){var y=f.getPreviewValueFunction({fieldInfo:b,
currentFeatureIndex:f.currentFeatureIndex,currentFeatureAttributes:f.currentFeatureAttributes});y&&(v=!0,y=y.fields&&y.fields[b.name]||y,n=y.value,"string"===typeof y.formattedValue?t=y.formattedValue:l())}v||((n=n=h._getFieldDataValue(b,{fieldData:f.fieldData,featureIndex:f.currentFeatureIndex,featureAttributes:f.currentFeatureAttributes,isMultiFeature:f.isMultiFeature}))&&"object"===typeof n?(f=n,n=f.value,t=e.formatAttributeValue(f,{skipFormattedValue:!0,unavailableDataValue:void 0,format:b})):
l());d(n,w)&&(n=void 0);d(t,!1)&&(t=void 0);void 0===n&&void 0===t&&(console.log("Error: can't calculate value for \x3d\x3e "+b.name),n=NaN,t=k.tables.showUnavailableData?a.unavailableDataShort:"",r=!0);b.triggerJson&&(u={style:g.getConditionalStyle(n,b.triggerJson),value:n,formattedValue:t});return{value:n,formattedValue:t,formatFunction:q,isUnavailableData:r,conditionalStyle:u}},_formatValue:function(a,c){return b.formatNumber(a,{places:c.decimals||0,noSeparator:!c.useThousandsSeparator,preserveTrailingZeroes:!0})},
getFieldDataValue:function(a,b){return(a=h._getFieldDataValue(a,b))&&"object"===typeof a?a.value:a},_getFieldDataValue:function(a,b){return a&&f.getAreaDataValue({fieldName:a.templateName||a.name,fieldData:b.fieldData,featureIndex:b.featureIndex,featureAttributes:b.featureAttributes,isMultiFeature:b.isMultiFeature})}};return h})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/ElementUsageTypes":function(){define([],function(){var k={PAGE_PANEL_SECTION:"pagePanelSection",INFOGRAPHIC_HEADER_SECTION:"infographicHeaderSection",
INFOGRAPHIC_SECTION:"infographicSection",INFOGRAPHIC_ICON_TABLE:"infographicIconTable",INFOGRAPHIC_VARIABLE_TABLE:"infographicVariableTable",INFOGRAPHIC_DESC_TABLE:"infographicDescTable",isInfographicLike:function(g){return g===k.INFOGRAPHIC_HEADER_SECTION||g===k.INFOGRAPHIC_SECTION}};return k})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/SpecificViewModes":function(){define([],function(){return{RICH_TEXT:"richText",VARIABLE:"variable",SPECIAL:"special",INFOGRAPHIC:"infographic"}})},
"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/tooltip/GridCellTooltipBuilder":function(){define("dojo/_base/declare ../GridDataUtil ../../../supportClasses/conditionalStyling/ConditionalStyleLegendBuilder ../../../supportClasses/templateJsonUtils/fieldInfo/FieldInfoNameUtil ../../../supportClasses/templateJsonUtils/fieldInfo/FieldInfoRenderer ../../../supportClasses/WidgetQueryUtil ../../valueField/supportClasses/TextRenderer ./_ScriptExpressionBuilder esri/dijit/geoenrichment/utils/ObjectUtil esri/dijit/geoenrichment/utils/TooltipUtil esri/dijit/geoenrichment/ReportPlayer/config dojo/i18n!esri/nls/jsapi".split(" "),
function(k,g,f,e,c,b,a,d,h,l,n,m){m=m.geoenrichment.dijit.ReportPlayer.Grid;var p=k(null,{_cell:null,_content:"",constructor:function(a){this._cell=a},getContent:function(){return this._content?"\x3cdiv class\x3d'esriGEAdjustableGridValueField_cellTooltipContent'\x3e"+this._content+"\x3c/div\x3e":null},addValue:function(a){this._content+="\x3cdiv class\x3d'esriGERowHigh esriGEAdjustableGridValueField_cellTooltipContentValue'\x3e"+a+"\x3c/div\x3e"},addImageValue:function(a){var b=g.getNumericCellValue(a);
isNaN(b)||"number"!==typeof b||(a=a.numberFormatFunction?a.numberFormatFunction(b):h.formatNumber(b),this._content+="\x3cdiv class\x3d'esriGERowHigh esriGEAdjustableGridValueField_cellTooltipContentValue'\x3e"+a+"\x3c/div\x3e")},addAlias:function(a){this._content+="\x3cdiv class\x3d'esriGERowHigh'\x3e\x3cb\x3e"+m.variable+"\x3c/b\x3e "+a+"\x3c/div\x3e"},buildRichText:function(a){var b=this._cell.parentGrid.viewModel.dynamicReportInfo;a=c.renderFieldInfoInTableCell(a,{previewValues:!0,fieldData:b&&
b.fieldData,isGraphicReport:!0,currentFeatureIndex:this._cell.parentGrid.currentFeatureIndex});this._content+="\x3cdiv class\x3d'esriGERowHigh'\x3e"+a.formattedValue+"\x3c/div\x3e"},addExpression:function(a,b){if(a=d.buildTooltipExpression(a,b))this._content+="\x3cdiv class\x3d'esriGERowHigh'\x3e"+m.variableIsBasedOnExpression+"\x3c/div\x3e",this._content+="\x3cdiv class\x3d'esriGERowHigh'\x3e"+a+"\x3c/div\x3e"},addConditionalStyleLegend:function(a){var b=g.getNumericCellValue(a),c=g.getConditionalFormatting(a);
a=g.getFieldInfo(a).isImage;this._content+=f.createLegendNode(c,a?"image":"text",b).outerHTML},addTextBlock:function(a){this._content+="\x3cdiv class\x3d'esriGERowHigh'\x3e"+a+"\x3c/div\x3e"},addSeparator:function(){this._content+="\x3cdiv class\x3d'esriGERowHigh esriGEAdjustableGridValueField_cellTooltipContentSeparator'\x3e\x3c/div\x3e"}}),t=/<\w/,q={value:!1,alias:!0,expression:!1,conditional:!1},r={setDynamicTooltipToCell:function(a,b,c){if((a.hasOverflowText()||g.isVariableLikeFieldCell(a)||
g.isImageTriggerCell(a))&&r.isTooltipVisible(a)){var d=r.getTooltipInfo(a),e=r.getSourceFieldInfo(a),e=e&&!(!e.script&&!e.expressionText)&&d.expression,d=!!d.fieldInfo,d=e||d;a.own(l.setTooltipToNode(a.domNode,function(){return r.renderCellTooltip(a,b,c)},{classes:"esriGEAdjustableGridValueField_cellTooltip",notRestricted:e,stayOnHover:d,classes:d?null:["esriGENonInteractable"],style:r.getTooltipStyleFunc(a)}))}},getTooltipInfo:function(a){var c=r.getSourceFieldInfo(a);return c&&c.tooltipInfo?c.tooltipInfo:
(a=b.getReportContainerGrid(a))&&a.tooltipInfo&&a.tooltipInfo.table||q},isTooltipVisible:function(a){var b=r.getSourceFieldInfo(a);if(b&&b.dataDrillingPanelInfo)return!1;a=r.getTooltipInfo(a);return a.value||a.alias||a.expression||a.conditional||a.fieldInfo},getSourceFieldInfo:function(a){var b=g.getFieldInfo(a);a=g.getConditionalFormatting(a);return b&&b.isImage?a&&a.fieldInfo:b},getTooltipStyleFunc:function(a){return function(){return r.getTooltipStyle(a)}},getTooltipStyle:function(a){if(!a.parentGrid)return null;
var b={},c=a.parentGrid.viewModel.getCurrentTheme(a.parentGrid.theme).table.tooltip;h.copyOwnJsonProperties(c,b);h.copyOwnJsonProperties(r.getTooltipInfo(a).style,b);return b},renderCellTooltip:function(b,c,d){d=d||{};var f=d.getExpression||function(a){return n.modules.complexCellTooltips&&a.expressionText},h=a.getFullText(b),k=g.getFieldInfo(b),l=k&&k.isImage,m=g.isVariableLikeFieldCell(k),q=g.getConditionalFormatting(b),u=r.getSourceFieldInfo(b),v=k&&k.isRichText||h&&t.test(h),w=new p(b),H=r.getTooltipInfo(b);
m?(H.value&&h&&w.addValue(h),H.alias&&w.addAlias(e.getFieldInfoAlias(k))):l?(H.value&&w.addImageValue(b),H.alias&&w.addAlias(e.getFieldInfoAlias(u))):h&&!v&&H.value&&h&&w.addValue(h);H.fieldInfo&&w.buildRichText(H.fieldInfo);if(H.expression){var J=f(u);J&&w.addExpression(J,c)}H.conditional&&q&&n.modules.complexCellTooltips&&(J&&w.addSeparator(),d.conditionalLegendDesc&&w.addTextBlock(d.conditionalLegendDesc),w.addConditionalStyleLegend(b));return w.getContent()}};return r})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/conditionalStyling/ConditionalStyleLegendBuilder":function(){define("dojo/string dojo/dom-class dojo/dom-construct dojo/dom-style ../images/ImageDataHolder ./ConditionalStyleUtil esri/dijit/geoenrichment/utils/ObjectUtil dojo/i18n!esri/nls/jsapi".split(" "),
function(k,g,f,e,c,b,a,d){d=d.geoenrichment.dijit.ReportPlayer.ConditionalLegend;var h={},l={"\x3d":"equals","\x3c":"less","\x3e":"greater","\x3c\x3d":"lessOrEquals","\x3e\x3d":"greaterOrEquals"};h.createLegendNode=function(h,m,p){function n(b){function c(b){var c=a.parseNumber(b);return isNaN(c)?b:a.formatNumber(c)}if(!b.compareInfos||!b.compareInfos.length)return!1;if("image"===m&&"default"===b.compareInfos[0].value)return d.conditionalLegend_default;b=b.compareInfos.map(function(a){return k.substitute(d["conditionalLegend_operator_"+
l[a.operator]],{value:c(a.value)})});return 1===b.length?b[0]:k.substitute(d.conditionalLegend_interval,{from:b[0],to:b[1]})}if(!m)return null;var q=f.create("div",{"class":"esriGEConditionalStylingLegend esriGEConditionalStylingLegend_"+m});f.create("div",{"class":"esriGEConditionalStylingLegend_row",innerHTML:d.conditionalLegend_title},q);var r=b.getMatchedCase(p,h);h.cases.some(function(a){var h=n(a),k=b.styleFromSetters(a.setters);if(h&&k){var l=f.create("div",{"class":"esriGEConditionalStylingLegend_row"},
q),p=f.create("div",{"class":"dijitInline"},l);"image"===m?f.create("div",{"class":"esriGEConditionalStylingLegend_symbolImage dijitInline"},p).style.backgroundImage="url("+(c.getImageData(a.setters[0].value)||"")+")":("chart"===m?g.add(p,"esriGEConditionalStylingLegend_symbolChart"):(g.add(p,"esriGEConditionalStylingLegend_text"),p.innerHTML=d.conditionalLegend_preview),p.style.backgroundImage="none",e.set(p,k));f.create("div",{"class":"dijitInline esriGESpaceBeforeBig",innerHTML:h},l);r===a&&g.add(l,
"esriGEConditionalStylingLegend_currentValue")}});return q};return h})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/tooltip/_ScriptExpressionBuilder":function(){define(["esri/dijit/geoenrichment/utils/ObjectUtil"],function(k){var g=/\s*/g,f=/(!.*?!|\+|\-|\*|\/|\(|\)|\^|\d+\.\d+|\d+)/g,e=/___.*?___/g,c=/___(.*?)___/g,b=/!/g,a=/\d+/;return{buildTooltipExpression:function(a,b){a=Array.isArray(a)?this._validateExpression(a,b):this._maskAndValidateExpressionText(a,b);if(!a||!a.length)return null;
b="";for(var c=0,d=a.length;c<d;c++){var e=a[c],f=a[c+1];"*"!==e.operator&&"/"!==e.operator||!f||"1"!==f.number?e.variableAlias?b+="\x3cdiv class\x3d'dijitInline'\x3e\x3cdiv class\x3d'esriGEAdjustableGrid_cellTooltip_expressionVariable'\x3e"+e.variableAlias+"\x3c/div\x3e\x3c/div\x3e":e.operator?b+="\x3cdiv class\x3d'dijitInline esriGEAdjustableGrid_cellTooltip_expressionOperator'\x3e"+e.operator+"\x3c/div\x3e":void 0!==e.number&&(b+="\x3cdiv class\x3d'dijitInline esriGEAdjustableGrid_cellTooltip_expressionNumber'\x3e"+
e.number+"\x3c/div\x3e"):c++}return"\x3cdiv class\x3d'esriGEAdjustableGrid_cellTooltip_expression'\x3e"+b+"\x3c/div\x3e"},_maskAndValidateExpressionText:function(d,h){d=d.replace(g,"");d=d.replace(f,"___$1___");return d.replace(e,"").length?null:d.match(e).map(function(d){d=d.replace(c,"$1");return 0===d.indexOf("!")?(d=h.get(d.replace(b,"")),{variableAlias:d&&d.alias||"N/A"}):d.match(a)?{number:k.formatNumber(Number(d))}:{operator:d}})},_validateExpression:function(b,c){return b.map(function(b){return b.variable?
(b=c.get(b.variable.fullName),{variableAlias:b&&b.alias||"N/A"}):"number"===typeof b.name||"string"===typeof b.name&&b.name.match(a)?{number:k.formatNumber(Number(b.name))}:{operator:b.name}})}}})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/GridLayoutSizer":function(){define(["./GridLayoutCalculator"],function(k){var g={resizeToFitAllowedWidth:function(f,e){g._resizeWidthForParams(f,{resetWidth:!0,columnsToPreserve:f.columns,stickToRight:!0,rightOffsetWeight:e&&e.rightOffsetWeight})},
resizeToFitWidth:function(f,e){e&&!isNaN(e)&&g._resizeWidthForParams(f,{resetWidth:!0,columnsToPreserve:f.columns,newWidth:e})},_resizeWidthForParams:function(f,e){k.recalcColumns(f,e);f.getFieldCells().forEach(function(c){c.setWidth(k.calcFieldWidth(f,c.gridData,c.column.field))});g._makeFinalAdjustments(f)},_makeFinalAdjustments:function(f){k.positionCells(f);f.getFieldCells().forEach(function(e){e.updateSizers&&e.updateSizers()});f.getFieldCells().forEach(function(e){e.updateRotationControls&&
e.updateRotationControls()})},resizeToFitHeight:function(f,e){k.recalcRowsToFitHeight(f,e);f.getFieldCells().forEach(function(c){c.setHeight(k.calcDataHeight(f,c.gridData,c.column.field))});g._makeFinalAdjustments(f)},scaleProportionallyWithinParent:function(f,e){var c=f.getTableBox();f.setPosition(c.l*e.xScale,c.t*e.yScale);1!==e.xScale&&g.resizeToFitWidth(f,c.w*e.xScale);1!==e.yScale&&g.resizeToFitHeight(f,c.h*e.yScale)},scaleProportionallyPreservingCenter:function(f,e){var c=f.getTableBox(),b=
c.w*e.xScale,a=c.h*e.yScale;f.setPosition(c.l+(c.w-b)/2,c.t+(c.h-a)/2);1!==e.xScale&&g.resizeToFitWidth(f,b);1!==e.yScale&&g.resizeToFitHeight(f,a)}};return g})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/_GridDebugUtil":function(){define(["esri/dijit/geoenrichment/when","../../../_devConfig"],function(k,g){var f={},e=0;f.refreshStart=function(c){g.table.printGridRefresh&&(c=f._getGridInfo(c,!0),console.log("AdjustableGrid.js "+c.key+" \x3d\x3e refresh \x3d\x3e start"))};f.refreshEnd=
function(c){g.table.printGridRefresh&&k(c.getRenderPromise(),function(){var b=f._getGridInfo(c,!1);console.log("AdjustableGrid.js "+b.key+" \x3d\x3e refresh \x3d\x3e end ("+b.refreshTime+" ms)")})};f._getGridInfo=function(c,b){var a;if(c.isReportContainerPageGrid)a="Page grid";else{var d=[];for(a=c.parentWidget;a;){d.push(a);if(a.isReportContainerPageGrid)break;a=a.parentWidget}a=d[d.length-1].getFieldCells().indexOf(d[d.length-2]);for(var d=d.length,f="",g=0;g<d;g++)f+="\x3e";void 0===c._debugId&&
(c._debugId=e++);a="panel "+a+" "+f+"("+c._debugId+")"}var k;b?c._degubStartTime=(new Date).getTime():k=(new Date).getTime()-c._degubStartTime;return{key:a,refreshTime:k}};return f})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/ChartContainer":function(){define("require dojo/_base/declare dojo/_base/lang esri/dijit/geoenrichment/Deferred dojo/dom-class dojo/dom-construct dojo/dom-style esri/dijit/geoenrichment/when dijit/_WidgetBase dijit/_TemplatedMixin ./_ChartLegendSupport ./_ChartEventSupport ./_ChartComparisonSupport esri/dijit/geoenrichment/ReportPlayer/config ./utils/ChartTypes ./utils/ChartSorting ./utils/ChartJsonUtil ./utils/builder/ChartPlots ./utils/ChartFilterUtil esri/dijit/geoenrichment/utils/DelayUtil esri/dijit/geoenrichment/utils/DomUtil esri/dijit/geoenrichment/utils/InvokeUtil esri/dijit/geoenrichment/utils/MouseUtil esri/dijit/geoenrichment/utils/WaitingUtil ../sections/dynamicSettings/supportClasses/FilterUtil ../supportClasses/templateJsonUtils/query/TemplateJsonQueryUtil dojo/text!../templates/ChartContainer.html dojo/i18n!esri/nls/jsapi ../../_devConfig".split(" "),
function(k,g,f,e,c,b,a,d,h,l,n,m,p,t,q,r,u,v,w,y,A,B,C,z,E,G,F,D,H){function J(){if(a)return a.promise;var a=new e;k("dojox/charting/Chart dojox/charting/action2d/Magnify ./utils/action2d/Highlight ./utils/builder/ChartBuilder ./utils/ChartCalculator ./utils/ChartStyleUtil ./tooltips/ChartTooltip ./iconRendering/IconRenderer ./textRendering/TextRenderer ./tableViewRendering/TableViewRenderer".split(" "),function(b,c,d,e,f,h,k,l,m,n){I=b;L=c;M=d;N=e;Q=f;O=h;P=k;R=l;S=m;T=n;K=g(I,{_renderPlotBackground:function(a,
b,c,d){this.theme.plotarea.backgroundImageData?this.surface.createImage({src:this.theme.plotarea.backgroundImageData,x:b.l-1,y:b.t-1,width:c+2,height:d+2}):this.inherited(arguments)}});a.resolve()});return a.promise}D=D.geoenrichment.dijit.ReportPlayer.ChartContainer;var K,I,L,M,N,Q,O,P,R,S,T;return g([h,l,n,m,p],{templateString:F,nls:D,viewModel:null,theme:null,parentWidget:null,currentFeatureIndex:null,immediateRender:!1,chartTheme:null,enableAxisLabelsAutoTilt:!1,isEditMode:!1,chart:null,_currentSeries:null,
_iconRenderer:null,_textRenderer:null,_tableViewRenderer:null,_tableViewInfo:null,_renderChartPendingFlag:!1,postCreate:function(){this.inherited(arguments);this._showError(!1);A.hide(this.missingVariablesDiv);this.viewModel.isGraphicStyle&&c.add(this.domNode,"graphicReportChart");c.add(this.domNode,this.viewModel.isLightDocumentTheme(this.theme)?"light":"dark");this._showEmptyView(!1)},_currentSeriesItems:null,_currentSeriesItemsUnfiltered:null,_originalSeriesItems:null,_currentVisualProperties:null,
_currentChartType:null,_currentComparisonInfo:null,_currentDataDrillingPanelInfo:null,_isMultiFeatureChart:null,_initPromise:null,_firstRenderPromise:null,_hasPresetFilter:null,updateChart:function(b){var c=this;this._destroyChart();if(b)return this._checkForMissingVariables(b),this._currentChartType=b.type,this._currentSeriesItems=(this._isMultiFeatureChart=b.isMultiFeatureChart)?u.getSeriesItemsForMultiFeatureChart(b.type,b.seriesItems,this.viewModel.dynamicReportInfo&&this.viewModel.dynamicReportInfo.fieldData.areaData):
b.seriesItems,this._originalSeriesItems=b.seriesItems&&b.seriesItems.slice(),this._currentVisualProperties=b.visualProperties,this._currentComparisonInfo=b.comparisonInfo,this._currentDataDrillingPanelInfo=b.dataDrillingPanelInfo,a.set(this.domNode,{width:this._currentVisualProperties.width+"px",height:this._currentVisualProperties.height+"px"}),this.domNode.style.backgroundColor=this._currentVisualProperties.panelBackgroundColor||"",A.hide(this.chartLabel),this._initPromise=J().then(function(){c.domNode&&
(c._initChartComparisonSelect(),c._updateLabels(),c._createChart(),c._addPlotEventListeners(),c._createLegend())}),this._firstRenderPromise=d(this._initPromise,function(){var a=c._currentVisualProperties.filter;c._hasPresetFilter=!!a;return!a||a.ranges&&!c.viewModel.dynamicReportInfo?c._updateSeries():d(c.getFilterRanges(),function(b){b=b.map(function(b){var c=E.filterData(b.dataArray,a);return{fieldName:b.fieldName,min:c[0],max:c[c.length-1]}});return c._setFilterRanges(b)})}),z.showProgressPromise(this.domNode,
this._initPromise)},getRenderPromise:function(){return this._firstRenderPromise},_checkForMissingVariables:function(a){var b,c,d;G.processChartFieldInfos(a,function(a,e){if(a.isMissing)switch(e){case "series":b=!0;break;case "tooltip":c=!0;break;case "dataDrilling":d=!0}});var e=b||c||d;A[e?"show":"hide"](this.missingVariablesDiv);e&&(this.missingVariablesDiv.innerHTML=b?D.containsMissingVariablesInData:c?D.containsMissingVariablesInTooltip:D.containsMissingVariablesInInteractivePanel,this.missingVariablesDiv.style.top=
(a.visualProperties.height-this.missingVariablesDiv.clientHeight)/2+"px")},isMultiFeatureChart:function(){return this._isMultiFeatureChart},getLegendNode:function(){return this.legendContainerDiv},getChartSeries:function(){return this._currentSeries},_updateLabels:function(){this.chartLabel.innerHTML=this._currentVisualProperties.title.text;A[this.chartLabel.innerHTML?"show":"hide"](this.chartLabel);this.chartLabel.style.textAlign=this._currentVisualProperties.title.align;this.chartLabel.style.marginTop=
(this._currentVisualProperties.title.verticalShift||0)+"px";var b=f.mixin({},this.viewModel.getChartDefaultStyles(this.theme).titleStyle,this._currentVisualProperties.title.style);delete b.backgroundColor;a.set(this.chartLabel,O.getStyleObjWithUnits(b))},_createChart:function(){var a=b.create("div",{"class":"chartContainerDiv_innerChartNode"},this.chartContainerDiv),c=new K(a,{margins:this._getChartMargins()});this.chart=c;c.setTheme(this.chartTheme);N.getChartBuilder(this._currentChartType).configureChart({chart:c,
seriesItems:this._currentSeriesItems,visualProperties:this._currentVisualProperties,chartType:this._currentChartType,comparisonInfo:this._currentComparisonInfo,themeSettings:this.viewModel.getChartDefaultStyles(this.theme),viewModel:this.viewModel,currentFeatureIndex:this.currentFeatureIndex});if(!t.isPlayerOnServer){if(this.viewModel.dynamicReportInfo||H.charts.enableEffects)this._currentChartType===q.PIE&&new L(c,v.PRIMARY,{scale:1.03}),v.getWorkingPlots(c).forEach(function(a,b){new M(c,a)},this);
this._setChartTooltip()}},_getChartMargins:function(){function a(a){return"number"===typeof b._currentVisualProperties[a]?b._currentVisualProperties[a]:10}var b=this;return{t:a("marginTop"),r:a("marginRight"),b:a("marginBottom"),l:a("marginLeft")}},_setChartTooltip:function(){v.getWorkingPlots(this.chart).forEach(function(a,b){b=0===b?this._currentChartType:this._getComparisonChartType();(new P(this.chart,a,{duration:50})).setChartType(b)},this)},_destroyChart:function(){this._levelLineBuilder&&this._levelLineBuilder.hideLevelLine();
this.chartContainerDiv&&b.empty(this.chartContainerDiv);this.chart&&this.chart.destroy();this.chart=null;this._destroyLegend()},_updateSeries:function(){var a=this;this._removeSeries();if(this.chart){if(!this._currentSeriesItems)return this.resize();this._seriesTotalStats={};this._currentSeries=N.getChartBuilder(this._currentChartType).calcSeries({chartContainer:this,chart:this.chart,chartType:this._currentChartType,isMultiFeatureChart:this._isMultiFeatureChart,viewModel:this.viewModel,theme:this.theme,
themeSettings:this.viewModel.getChartDefaultStyles(this.theme),seriesItems:this._currentSeriesItems,visualProperties:this._currentVisualProperties,currentFeatureIndex:this.currentFeatureIndex,plotStats:this._seriesTotalStats,excludedSeriesHash:this._excludedSeriesHash,sorting:this._sorting||this._currentVisualProperties.sorting,comparisonInfo:this._currentComparisonInfo,comparisonFeatureAttributes:this._getComparisonFeatureAttributes(),dataDrillingPanelInfo:this._currentDataDrillingPanelInfo});var b=
N.checkSeriesAreValid(this._currentSeries);this._showError(!b);var c;b&&(this._currentSeries.forEach(function(b){a._excludedSeriesHash[b.name]||a.chart.addSeries(b.name,b.data,b.params)}),c=this.resize());return d(c,function(){a.onContentUpdated()})}},_removeSeries:function(){var a=this;this._currentSeries=this._currentSeries||[];this._currentSeries.forEach(function(b){a.chart.removeSeries(b.name)});this._currentSeries.length=0},_chartWidth:0,_chartHeight:0,_resizedFlag:!1,_resizeDfd:null,_pendingResizeObj:!1,
resize:function(b,c,f){if(this._currentVisualProperties)return void 0!==b&&a.set(this.domNode,{width:b+"px",height:c+"px"}),d(this._initPromise,function(){if(A.isNodeInLayout(this.domNode))return void 0!==b&&Q.resizeVisualProperties(this._currentVisualProperties,b,c),this._resizedFlag||(this.domNode.style.opacity="0"),this._resizeDfd=this._resizeDfd||new e,f||this.immediateRender?this._doResizeChart():B.invoke(this,"_doResizeChart",50);this._pendingResizeObj={width:b,height:c,immediate:f}}.bind(this))},
_doResizeChart:function(){var a=this;if(this.chart){this._resizedFlag||(this.domNode.style.opacity="1");this._resizedFlag=!0;this._updateLegend();var b=Q.calcChartDimentions(this,{visualProps:this._currentVisualProperties,comparisonInfo:this._currentComparisonInfo,chartType:this._currentChartType,maxIconSize:R.AXIS_ICON_MAX_SIZE,numPoints:this._currentSeries[0]?this._currentSeries[0].data.length:0}),c=b.w,b=b.h;if(this.enableAxisLabelsAutoTilt&&this.viewModel.isGraphicStyle&&q.hasAxis(this._currentChartType)&&
!q.isXAxisVertical(this._currentChartType)){var d=Q.calcAxisLabelsAutoTilt(c,this._currentSeries,this._currentVisualProperties,this.viewModel.getChartDefaultStyles(this.theme));this.chart.getAxis("x").opt.rotation=d?-d:-this._currentVisualProperties.xAxis.labelsAngle}this._chartWidth=c;this._chartHeight=b;this._adjustErrorMessage();if(this._tableViewInfo)this._refreshTableView(),this._renderChartPendingFlag=!0;else{try{this.chart&&(this.chart.isPreRenderMode=q.isColumnBarLike(this._currentChartType),
this.chart.resize(this._chartWidth,this._chartHeight),this.chart.dirty&&this.chart.render(),q.isColumnBarLike(this._currentChartType)&&(N.getChartBuilder(this._currentChartType).updateBarSize({chart:this.chart,chartType:this._currentChartType,isMultiFeatureChart:this._isMultiFeatureChart,currentFeatureIndex:this.currentFeatureIndex,viewModel:this.viewModel,seriesItems:this._currentSeriesItems,visualProperties:this._currentVisualProperties,chartSize:this.chart.plotArea[q.isColumnLike(this._currentChartType)?
"width":"height"],excludedSeriesHash:this._excludedSeriesHash,comparisonInfo:this._currentComparisonInfo,numComparisonFeatures:this._getNumComparisonFeatures()}),N.getChartBuilder(this._currentChartType).prettifyColumnBarYAxis({totalStat:this._seriesTotalStats,chart:this.chart,chartType:this._currentChartType,chartSeries:this._currentSeries,themeSettings:this.viewModel.getChartDefaultStyles(this.theme),visualProperties:this._currentVisualProperties,chartSize:this.chart.plotArea[q.isColumnLike(this._currentChartType)?
"height":"width"],viewModel:this.viewModel})),this.chart.isPreRenderMode=!1,this.chart.dirty&&this.chart.render())}catch(U){console.log(U)}return y.delay(function(){a._updateLegend();a._updateIcons();a._updateTexts();a._resizeDfd&&a._resizeDfd.resolve();a._resizeDfd=null;a.onRendered()})}}},notifyShown:function(){var a=this;return d(this._initPromise,function(){A.isNodeInLayout(a.domNode)&&d(a._pendingResizeObj&&a.resize(a._pendingResizeObj.width,a._pendingResizeObj.height,a._pendingResizeObj.immediate),
function(){a._pendingResizeObj=null;a.viewModel.isAnimationAllowed()&&v.getWorkingPlots(a.chart).forEach(function(b,c){a.chart.getPlot(b).renderAnimation&&a.chart.getPlot(b).renderAnimation()})})})},onRendered:function(){},_getIconRendererClass:function(){return R},_updateIcons:function(){this._iconRenderer||(this._iconRenderer=(new this._getIconRendererClass)(),this.own(this._iconRenderer),this._iconRenderer.setViewMode(this._viewMode));this._iconRenderer.renderIcons({viewModel:this.viewModel,theme:this.theme,
parentWidget:this,chartType:this._currentChartType,iconNode:this.chartContainerWithAxis,chartW:this._chartWidth,chartH:this._chartHeight,visualProperties:this._currentVisualProperties,comparisonInfo:this._currentComparisonInfo,chart:this.chart})},_getTextRendererClass:function(){return S},_updateTexts:function(){this._textRenderer||(this._textRenderer=(new this._getTextRendererClass)(),this._textRenderer.currentFeatureIndex=this.currentFeatureIndex,this.own(this._textRenderer),this._textRenderer.setViewMode(this._viewMode));
this._textRenderer.renderTexts({viewModel:this.viewModel,theme:this.theme,parentWidget:this,textNode:this.chartContainerWithAxis,chartW:this._chartWidth,chartH:this._chartHeight,visualProperties:this._currentVisualProperties,chart:this.chart})},_viewMode:null,setViewMode:function(a){if(this._viewMode!==a)return this._viewMode=a,d(this._initPromise,function(){this._iconRenderer&&this._iconRenderer.setViewMode(a);this._textRenderer&&this._textRenderer.setViewMode(a);this._tableViewRenderer&&this._tableViewRenderer.setViewMode(a)}.bind(this))},
_showError:function(a){H.emulateErrors.contentErrors&&(a=!0);A[a?"show":"hide"](this.errorDiv);A[a?"hide":"show"](this.chartNormalViewDiv)},_adjustErrorMessage:function(){this.errorDiv.style.paddingTop=a.get(this.domNode,"height")/2-20+"px"},_sorting:null,getSorting:function(){return this._sorting},sortChart:function(a){this._sorting=a&&a!==r.NONE?a:null;return d(this._initPromise,function(){this._updateSeries()}.bind(this))},_filterStats:null,_numShownElements:null,_filterRanges:null,canFilterAreas:function(){return this._isMultiFeatureChart&&
!!this._getGeoenrichment()},canFilterVariables:function(){return q.canFilterVariables(this._currentChartType,this._isMultiFeatureChart)},getFilterRanges:function(){return this.canFilterAreas()||this.canFilterVariables()?d(this._initPromise,function(){this.canFilterAreas()?this._filterStats=this._getGeoenrichment().collectFilterRangesStats():this._filterStats=w.collectStatsForVariables(this._currentChartType,this._currentSeriesItemsUnfiltered||this._currentSeriesItems,this._currentVisualProperties,
this.viewModel,this.currentFeatureIndex);return this._filterStats.filterRanges}.bind(this)):this._filterStats=null},setFilterRanges:function(a){this._hasPresetFilter=!1;return this._setFilterRanges(a)},_setFilterRanges:function(a){this._filterRanges=a;return d(this._initPromise,function(){this._currentSeriesItemsUnfiltered&&(this._currentSeriesItems=this._currentSeriesItemsUnfiltered,this._currentSeriesItemsUnfiltered=null);this._currentSeriesItemsUnfiltered=this._currentSeriesItems;var b=w.filterSeriesItems(this._currentChartType,
this._currentSeriesItems,this._currentVisualProperties,a,this.viewModel,this.currentFeatureIndex,this.canFilterAreas());this._currentSeriesItems=b.seriesItems;this._numShownElements=b.numShownElements;var c;this.canFilterAreas()&&this._setFilterRangesForComparison(a)?this._numShownElements+=this._getGeoenrichment().getAllGeographyAttributes().length:c=this._updateSeries();this._showEmptyView(!this._numShownElements);return c}.bind(this))},getNumElementsTotal:function(){return this._filterStats&&(this.canFilterAreas()?
this._filterStats.numAreasTotal:this._filterStats.numVariablesTotal)||0},getNumElementsShown:function(){return"number"===typeof this._numShownElements?this._numShownElements:this.getNumElementsTotal()},_showEmptyView:function(a){A[a?"hide":"show"](this.chartNormalViewDiv);A[a?"show":"hide"](this.noDataPlaceHolder);a&&this._syncEmptyViewPlaceholder()},_syncEmptyViewPlaceholder:function(){this.noDataPlaceHolder&&a.set(this.noDataPlaceHolder,"paddingTop",(a.get(this.domNode,"height")-a.get(this.noDataPlaceHolder,
"height"))/2+"px")},chartToTable:function(a){return d(this._initPromise,function(){this._removeTable();this._setIsTableView(a);A.hide([this.chartContainerDiv,this.legendContainerDiv]);for(var b=0;b<this.chartContainerWithAxis.children.length;b++){var c=this.chartContainerWithAxis.children[b];c!==this.tableContainerDiv&&A.hide(c)}this._tableViewRenderer||(this._tableViewRenderer=new T,this.own(this._tableViewRenderer),this._tableViewRenderer.setViewMode(this._viewMode));return this._refreshTableView(!0)}.bind(this))},
_refreshTableView:function(b){return this._tableViewRenderer.renderTableForChart({chartType:this._currentChartType,isMultiFeatureChart:this._isMultiFeatureChart,viewModel:this.viewModel,theme:this.theme,parentWidget:this,tableNode:this.tableContainerDiv,width:a.get(this.domNode,"width"),height:this._chartHeight,chartSeries:this._currentSeries,visualProperties:this._currentVisualProperties,hasComparison:!!this._currentComparisonInfo,chart:this.chart,showAnimation:b,tableViewInfo:this._tableViewInfo})},
tableToChart:function(){if(this._tableViewInfo)return d(this._initPromise,function(){this._removeTable();if(this._renderChartPendingFlag)return this._renderChartPendingFlag=!1,d(this.resize(),this.notifyShown.bind(this));this.notifyShown()}.bind(this))},_removeTable:function(){this._setIsTableView(null);A.show([this.chartContainerDiv,this.legendContainerDiv]);for(var a=0;a<this.chartContainerWithAxis.children.length;a++)A.show(this.chartContainerWithAxis.children[a]);this._tableViewRenderer&&this._tableViewRenderer.destroyTable()},
_setIsTableView:function(a){this._tableViewInfo=a;c[this._tableViewInfo?"add":"remove"](this.domNode,"isChartDataInTableView");this._updateComparisonLabel()},getVisualState:function(){return{type:"chart",sorting:this.getSorting(),hasPresetFilter:this._hasPresetFilter,filterRanges:this._filterRanges&&f.clone(this._filterRanges),comparisonAttributes:this._comparisonAttributes,additionalAttributes:this._additionalAttributes&&this._additionalAttributes.slice(),tableViewInfo:this._tableViewInfo&&f.clone(this._tableViewInfo),
tableViewRenderer:this._tableViewRenderer&&this._tableViewRenderer.getVisualState(),excludedSeriesHash:this._excludedSeriesHash&&f.clone(this._excludedSeriesHash)}},setVisualState:function(a){if(a){this._excludedSeriesHash=a.excludedSeriesHash;var b=this;return d(this._initPromise,function(){return d(b._resizeDfd&&b._resizeDfd.promise,function(){return d(a.sorting&&b.sortChart(a.sorting),function(){return d(a.filterRanges&&b.setFilterRanges(a.filterRanges),function(){a.additionalAttributes&&(b._additionalAttributes=
a.additionalAttributes);return d(a.comparisonAttributes&&b._setComparisonAttributes(a.comparisonAttributes),function(){return d(a.tableViewInfo&&b.chartToTable(a.tableViewInfo),function(){return b._tableViewRenderer&&b._tableViewRenderer.setVisualState(a.tableViewRenderer)})})})})})})}},isMouseOver:function(a){return C.isMouseOver(this.domNode,{event:a})||this.comparisonSelect&&this.comparisonSelect.isMouseOver(a)},getWidth:function(){return this._currentVisualProperties.width},getHeight:function(){return this._currentVisualProperties.height},
onContentUpdated:function(){},onShowDataDrillingPreview:function(a){},onTooltipInfoCreated:function(a){},destroy:function(){this._destroyChart();this.inherited(arguments)}})})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/_ChartLegendSupport":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-style ./utils/ChartTypes ./utils/ChartStyleUtil ./utils/ChartCalculator ./legends/ChartLegendTypes ./legends/ChartLegendPlacements ./legends/MinMaxLegend ./legends/SelectableLegend ./legends/ChartLegendSymbols".split(" "),
function(k,g,f,e,c,b,a,d,h,l,n,m){return k(null,{legend:null,_placements:[h.LEFT,h.RIGHT,h.TOP,h.BOTTOM],_excludedSeriesHash:null,_createLegend:function(){this._excludedSeriesHash={};this._placements.forEach(function(a){f.remove(this.domNode,"legendPlacement"+a)},this);this._currentVisualProperties.legend&&(this._currentVisualProperties.legend.type===d.MIN_MAX?this._createMinMaxLegend():this._createSeriesLegend())},_createSeriesLegend:function(){var a=this._currentVisualProperties.legend.series.placement;
a!==h.NONE&&(this.legend=(new n(g.mixin({chart:this.chart,chartType:this._currentChartType,allowSelect:!!this.viewModel.dynamicReportInfo&&(c.isColumnBarLike(this._currentChartType)||c.isLineLike(this._currentChartType)),isStacked:h.isOnSide(a),isRtlPlacement:a===h.LEFT&&!this.viewModel.isGraphicStyle,keepItemsTheSameWidth:!0,customLegendSymbol:this._currentVisualProperties.legend.series.symbol,defaultLegendSymbol:m.getDefaultSymbol(this._currentChartType,this.viewModel.isGraphicStyle),showValues:this._currentChartType===
c.WAFFLE,hideLastPoint:this._currentVisualProperties.legend.series.hideOthers,onSeriesExclusionChanged:g.hitch(this,this._onSeriesExclusionChanged)},this._getAdditionalLegendParams()))).placeAt(this.getLegendNode()),this._applyStyleToSeriesLegend(),f.add(this.domNode,"legendPlacement"+a))},_applyStyleToSeriesLegend:function(){var a=this.viewModel.getChartDefaultStyles(this.theme),a=g.mixin({},a.legendStyle,this._currentVisualProperties.legend.series.style);this.viewModel.isGraphicStyle||delete a.backgroundColor;
e.set(this.legend.domNode,b.getStyleObjWithUnits(a));this._currentVisualProperties.legend.series.hasBorder||e.set(this.legend.domNode,"border","none")},_createMinMaxLegend:function(){this._currentVisualProperties.legend.minMax&&this._currentVisualProperties.legend.minMax.placement!==h.NONE&&(this.legend=(new l({viewModel:this.viewModel,theme:this.theme,chartType:this._currentChartType})).placeAt(this.getLegendNode()),f.add(this.domNode,"hasMinMaxLegend"),f.add(this.domNode,"legendPlacement"+this._currentVisualProperties.legend.minMax.placement))},
_getAdditionalLegendParams:function(){return null},_onSeriesExclusionChanged:function(a){this._excludedSeriesHash=a;this._updateSeries()},_updateLegend:function(){this.legend&&(this._currentVisualProperties.legend.type===d.MIN_MAX?this._updateMinMaxLegend():this._updateSeriesLegend())},_updateSeriesLegend:function(){this.legend.chartWidth=this.domNode.clientWidth-2*a.PRETTY_PADDING;var b=(!this._isMultiFeatureChart||c.isLineLike(this._currentChartType))&&this._currentComparisonInfo&&this._currentVisualProperties.legend.series.showComparison,
d=this._currentSeries.filter(function(a){return!a.isComparisonSeries||b});this.legend.series=d;this.legend.showSeriesData=1===d.length&&!c.isLineLike(this._currentChartType);d=!!this.viewModel.dynamicReportInfo&&1<d.length;d!==this.legend.allowSelect&&(this.legend.allowSelect=d);this.legend.refresh()},_updateMinMaxLegend:function(){var a=this._currentSeries.filter(function(a){return!a.isComparisonSeries});this.legend.refresh(a,this._currentVisualProperties)},_destroyLegend:function(){this.legend&&
this.legend.destroy();this.legend=null}})})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/ChartStyleUtil":function(){define(["dojo/_base/lang"],function(k){var g={},f={left:1,right:1,top:1,bottom:1,width:1,height:1,fontSize:1};g.getStyleObjWithUnits=function(e,c){c=c||"px";e=k.mixin({},e);for(var b in e)if(f[b]){var a=e[b];!a||"string"===typeof a&&-1!==a.indexOf(c)||(e[b]=a+c)}return e};return g})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/ChartCalculator":function(){define("dojo/_base/lang dojo/dom-style ./ChartTypes ../legends/ChartLegendTypes ../legends/ChartLegendPlacements ../../themes/ThemeLibrary esri/dijit/geoenrichment/utils/DomUtil".split(" "),
function(k,g,f,e,c,b,a){return{PRETTY_PADDING:10,calcChartDimentions:function(b,h){var d=h.visualProps,n=h.comparisonInfo,m=h.chartType,p=h.maxIconSize,t=h.numPoints;h=d.width;var q=d.height,r=0,u=0,v=0,w,y,A,B,C=!a.isHidden(b.chartLabel),z=0;f.isColumnLike(m)&&!d.xAxis.show&&d.showAxisIcons&&(q+=30);C&&(z=g.get(b.chartLabel,"height")+(d.title.verticalShift||0),q-=z);d.showAxisIcons&&(f.isColumnLike(m)?q-=Math.min(p,(h-100)/t*.8)+10:f.isBarLike(m)&&(p=Math.min(p,(q-50)/t*.8)+10,r+=p,h-=p));var d=
d.legend||{},t=d[d.type===e.MIN_MAX?"minMax":"series"]||{},p=t.placement||c.NONE,t=(t.placementOffset||0)/100,E=p===c.LEFT||p===c.RIGHT,G=b.comparisonSelectBlock&&b.comparisonSelectBlock.offsetWidth+20,F=b.comparisonSelectBlock&&b.comparisonSelectBlock.offsetHeight+20;!n||!f.isComparisonSupported(m)||d.type===e.MIN_MAX&&E||(q-=F);E||g.set(b.getLegendNode(),{width:h-20+"px"});m=b.legend&&a.noTransformPosition(b.legend.domNode);m=k.mixin({w:0,h:0},m);E||g.set(b.getLegendNode(),{width:""});var D=E?q-
48:0;m.h=D?Math.min(m.h,D):m.h;m.h+=20;d.type===e.MIN_MAX&&E&&(m.w=Math.max(m.w,G));switch(p){case c.LEFT:w=10;y=z+q*t;r+=2*w+m.w;h-=r;break;case c.RIGHT:A=10;y=z+q*t;u+=2*A+m.w;h-=u;break;case c.TOP:q-=m.h;y=C?z+10:10;A=w=10;v+=m.h;break;case c.BOTTOM:q-=m.h,B=A=w=10,n&&(B+=F-10)}g.set(b.chartLabel,{marginLeft:"10px",marginRight:"10px"});g.set(b.chartContainerWithAxis,{marginTop:v+"px",marginLeft:r+"px",marginRight:u+"px"});b.legend&&g.set(b.legend.domNode,{maxHeight:D?D+"px":""});g.set(b.getLegendNode(),
{left:void 0!==w?w+"px":"",right:void 0!==A?A+"px":"",top:void 0!==y?y+"px":"",bottom:void 0!==B?B+"px":""});return{w:h,h:q}},calcAxisLabelsAutoTilt:function(c,e,f,g){if(!e||!e.length||0!==f.xAxis.labelsAngle)return!1;var d=!1,h=(c-50)/e[0].data.length-20;c=k.mixin({},g.xAxis.axisStyle,g.xAxis.style,f.xAxis.style);var l=a.getMeasureContext({style:"font-size:"+(c.fontSize||b.CHART_DATA_FONT_SIZE-1)+"px;font-family:"+(c.fontFamily||b.DEFAULT_FONT_FAMILY_GRAPHIC)});e[0].data.some(function(a){return l.measureText(a.name).w>
h})&&(d=20);l.destroy();return d},resizeVisualProperties:function(a,b,c){var d=a.width,e=a.height;a.width=b;a.height=c;a.floatingTexts&&a.floatingTexts.forEach(function(a){a.style.left*=b/d;a.style.top*=c/e});a.floatingIcons&&a.floatingIcons.forEach(function(a){a.style.left*=b/d;a.style.top*=c/e})}}})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/legends/MinMaxLegend":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-style dijit/_WidgetBase dijit/_TemplatedMixin ../utils/ChartStyleUtil ../utils/ChartTypes dojo/text!../../templates/MinMaxLegend.html dojo/i18n!esri/nls/jsapi".split(" "),
function(k,g,f,e,c,b,a,d,h){h=h.geoenrichment.dijit.ReportPlayer.MinMaxLegend;return k([e,c],{templateString:d,nls:h,viewModel:null,theme:null,chartType:null,refresh:function(c,d){function e(a){var b=a.fieldInfo;return b&&(b.script?b.script.alias:b.alias)||a.label}var h,k,l=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY,u,v;c.forEach(function(a){a.data.forEach(function(b){var c=b.originalValue;c<l&&(l=c,h=b,u=a);c>n&&(n=c,k=b,v=a)})});if(k&&h){var w=this.viewModel.getChartDefaultStyles(this.theme);
c=g.mixin({},w.minMaxLegend.titleStyle,d.legend.minMax.titleStyle);var y=g.mixin({},w.minMaxLegend.minVariableLabelStyle,d.legend.minMax.minVariableLabelStyle);d=g.mixin({},w.minMaxLegend.maxVariableLabelStyle,d.legend.minMax.maxVariableLabelStyle);f.set(this.largestGroupTitleDiv,b.getStyleObjWithUnits(c));f.set(this.smallestGroupTitleDiv,b.getStyleObjWithUnits(c));this.largestGroupDiv.innerHTML=e(k.point);this.smallestGroupDiv.innerHTML=e(h.point);f.set(this.largestGroupDiv,b.getStyleObjWithUnits(d));
f.set(this.smallestGroupDiv,b.getStyleObjWithUnits(y));d.color||(this.largestGroupDiv.style.color=a.isLineLike(this.chartType)?v.params.stroke.color:k.fill);y.color||(this.smallestGroupDiv.style.color=a.isLineLike(this.chartType)?u.params.stroke.color:h.fill)}}})})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/legends/SelectableLegend":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/on dijit/_WidgetBase dijit/_TemplatedMixin esri/dijit/geoenrichment/TriStateItem esri/dijit/geoenrichment/lists/FlowList ../utils/ThemeCalculator ./LegendSymbolRenderer".split(" "),
function(k,g,f,e,c,b,a,d,h,l,n,m,p){var t=k(null,{createPresentation:function(d,g,h,k,m){var n=this,q=e.create("div",{"class":"selectableLegendRoot "+(this.isStacked()?"":"dijitInline")},h);q.style.paddingLeft=(this.isStacked()?3:10)+"px";q.style.paddingRight=(this.isStacked()?3:10)+"px";m=this.canSelect()&&new l(q,{"class":"dijitInline selectableLegendRootCheckbox"});k=p.renderSymbol({defaultSymbol:this.getDefaultLegendSymbol(),customSymbol:this.getCusomLegendSymbol(),marker:d.marker,stroke:d.stroke,
fill:d.fill,width:8,height:15});g=e.create("div",{innerHTML:d.label,"class":"dijitInline selectableLegendRootLabel TrimWithEllipses"});if(h=d.valueText&&e.create("div",{innerHTML:this.isStacked()?d.valueText:"("+d.valueText+")","class":"dijitInline selectableLegendRootValue TrimWithEllipses"}))h.style.marginLeft="10px";this.isRtlPlacement()?(e.place(g,q),h&&e.place(h,q),e.place(k,q)):(e.place(k,q),e.place(g,q),h&&e.place(h,q));m&&(m.set("checked",!d.unchecked),f[d.unchecked?"add":"remove"](q,"selectableLegendRoot_unselected"),
m.onClick=function(a){f[a.checked?"remove":"add"](q,"selectableLegendRoot_unselected");n.onSelectionChanged(d.label,a.checked)});(m=this.getItemMaxWidth())&&this.needFormatAsTable()&&(h&&(k=m-c.getMarginBox(k).w-c.getMarginBox(g).w-h.clientWidth,h.style.marginLeft=k+"px"),q.style.width=m+"px");this.setItemWidth(b.get(q,"width"),q.clientWidth);this.canEditLabel(d)&&(f.add(g,"isEditable"),a(g,"click",function(a){a.stopPropagation();n.onLabelClicked(d,q)}));return q},isRtlPlacement:function(){},isStacked:function(){},
needFormatAsTable:function(){},canSelect:function(){},onSelectionChanged:function(a,b){},getDefaultLegendSymbol:function(){},getCusomLegendSymbol:function(){},canEditLabel:function(a){},onLabelClicked:function(a,b){},getItemMaxWidth:function(){},setItemWidth:function(a,b){}});return k([d,h],{templateString:"\x3cdiv class\x3d'esriGESelectableLegend'\x3e\x3cdiv data-dojo-attach-point\x3d'listDiv'\x3e\x3c/div\x3e\x3c/div\x3e",series:null,allowSelect:!0,allowEditLabels:!1,showSeriesData:!1,isRtlPlacement:!1,
keepItemsTheSameWidth:!1,customLegendSymbol:null,defaultLegendSymbol:null,showValues:!1,isStacked:!1,hideLastPoint:!1,chartWidth:0,chartType:null,list:null,_isCollectingWidthsFlag:!1,_uncheckedSeriesHash:null,_itemMaxWidth:0,_itemFullWidths:null,_isFlowStacked:!1,postCreate:function(){var a=this;this._uncheckedSeriesHash={};var b=g.mixin(new t,{onSelectionChanged:function(b,c){c?delete a._uncheckedSeriesHash[b]:a._uncheckedSeriesHash[b]=!0;a.onSeriesExclusionChanged(a._uncheckedSeriesHash)},onLabelClicked:function(b,
c){if(a.showSeriesData)a.onPointLabelClickedAt(void 0!==b.unsortedIndex?b.unsortedIndex:a.list.items.indexOf(b),c);else a.onSeriesLabelClickedAt(a.list.items.indexOf(b),c)},isStacked:function(){return a.isStacked},needFormatAsTable:function(){return a.isStacked||a._isFlowStacked},canSelect:function(){return a.allowSelect},getDefaultLegendSymbol:function(){return a.defaultLegendSymbol},getCusomLegendSymbol:function(){return a.customLegendSymbol},canEditLabel:function(b){return!b.isComparisonSeries&&
a.allowEditLabels},isRtlPlacement:function(){return a.isRtlPlacement},getItemMaxWidth:function(){return a._isCollectingWidthsFlag?0:a._itemMaxWidth},setItemWidth:function(b,c){a._isCollectingWidthsFlag&&(a._itemFullWidths.push(c),a._itemMaxWidth=Math.max(a._itemMaxWidth,b))}});this.list=new n({"class":"selectableLegendFlowList",itemRenderer:b},this.listDiv);this.own(this.list);this.isRtlPlacement&&(this.domNode.style.textAlign="right")},refresh:function(){var a=this._getItems();this.list.domNode.style.width=
"";this._itemMaxWidth=0;this._itemFullWidths=[];this._isCollectingWidthsFlag=!0;this._isFlowStacked=!1;this.list.setItems(a);this._isCollectingWidthsFlag=!1;var b=0;this._itemFullWidths.forEach(function(a){b+=a});this._isFlowStacked=!this.isStacked&&this.chartWidth&&b>this.chartWidth;this.keepItemsTheSameWidth&&this.list.refresh();!this.isStacked&&this.chartWidth&&(this._isFlowStacked?(a=this.list.domNode.children[0].clientWidth,a=Math.max(1,Math.floor(this.chartWidth/a))*a+2):a=b+2,this.list.domNode.style.width=
a+"px")},_getItems:function(){var a=this,b=[];this.showSeriesData?(this.series&&this.series[0]&&this.series[0].data.forEach(function(c){var d={label:c.name||"",valueText:a.showValues?c.tooltip.valueLabel:null,unsortedIndex:c.unsortedIndex};c=a._getDataFillAndStrokeColors(null,c);d.fill=c.fill;d.stroke=c.stroke;d.marker=c.marker;b.push(d)}),this.hideLastPoint&&b.pop()):this.series&&this.series.forEach(function(c){var d={label:c.name,unchecked:!0===a._uncheckedSeriesHash[c.name],isComparisonSeries:c.isComparisonSeries};
c=a._getDataFillAndStrokeColors(c.params,c.data[0]);d.fill=c.fill;d.stroke=c.stroke;d.marker=c.marker;b.push(d)});return b},_getDataFillAndStrokeColors:function(a,b){a=a||{};var c=m.getPointIconStyle(b),d=a.markerFill||a.fill;d||(d=b.point&&b.point.hidden&&b.unhiddenFillColor||b.fill);d||(d=c.fillColor);var e=a.markerStroke&&a.markerStroke.color;e||(e=a.stroke&&a.stroke.color&&0<a.stroke.width?a.stroke.color:b.stroke&&b.stroke.color&&0<b.stroke.width?b.point&&b.point.hidden&&b.unhiddenLineColor||
b.stroke.color:c.borderColor);return{fill:d,stroke:e,marker:a.unscaledMarker||a.marker||b.marker}},resetExclusion:function(){this._uncheckedSeriesHash={}},onSeriesLabelClickedAt:function(a,b){},onPointLabelClickedAt:function(a,b){},onSeriesExclusionChanged:function(a){}})})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/legends/LegendSymbolRenderer":function(){define(["dojo/dom-class","dojo/dom-construct","esri/dijit/geoenrichment/utils/ColorUtil","esri/dijit/geoenrichment/utils/ShapeUtil","./ChartLegendSymbols"],
function(k,g,f,e,c){return{renderSymbol:function(b){var a=g.create("div",{"class":"dijitInline esriGEReportPlayerChartLegendSymbol"}),d=b.stroke&&f.toCSSColor(b.stroke),h=b.fill&&f.toCSSColor(b.fill);if(b.marker&&!b.customSymbol){k.add(a,"isSVGSymbol");var l=e.createSVGNode({xmin:0,ymin:0,width:6,height:6},{width:(b.width||8)+"px",height:(b.height||8)+"px",overflow:"visible"});l.appendChild(e.createPathNode(b.marker,{borderColor:d||"transparent",borderWidth:1,fillColor:h||"transparent"}));g.place(l,
a)}else k.add(a,(b.customSymbol||b.defaultSymbol||c.SQUARE).toLowerCase()),h&&(a.style.backgroundColor=h),d&&(a.style.border="1px solid "+d);return a}}})},"esri/dijit/geoenrichment/utils/ShapeUtil":function(){define(["dojo/dom-style","dojo/_base/lang","dojo/dom-geometry","esri/dijit/geoenrichment/utils/ColorUtil","esri/dijit/geoenrichment/utils/DomUtil"],function(k,g,f,e,c){var b={fillColor:"#FFFFFF",fillAlpha:1,borderAlpha:0,borderWidth:1},a={createSVGNode:function(a,b){var c=document.createElementNS("http://www.w3.org/2000/svg",
"svg");b&&k.set(c,b);a=[a.xmin||0,a.ymin||0,a.width,a.height].join(" ");c.setAttribute("viewBox",a);c.setAttribute("xmlns","http://www.w3.org/2000/svg");return c},createPathNode:function(b,c){var d=document.createElementNS("http://www.w3.org/2000/svg","path");d.setAttribute("d",b);a._setSettingsToNode(d,c);return d},createEllipseNode:function(b,c,e,f,g){var d=document.createElementNS("http://www.w3.org/2000/svg","ellipse");d.setAttribute("cx",b||0);d.setAttribute("cy",c||0);d.setAttribute("rx",e);
d.setAttribute("ry",f);a._setSettingsToNode(d,g);return d},createCircleNode:function(b,c,e,f){var d=document.createElementNS("http://www.w3.org/2000/svg","circle");d.setAttribute("cx",b||0);d.setAttribute("cy",c||0);d.setAttribute("r",e);a._setSettingsToNode(d,f);return d},createRectNode:function(b,c,e,f,g){var d=document.createElementNS("http://www.w3.org/2000/svg","rect");d.setAttribute("x",b||0);d.setAttribute("y",c||0);d.setAttribute("width",e);d.setAttribute("height",f);a._setSettingsToNode(d,
g);return d},createLineNode:function(b,c,e,f,g){var d=document.createElementNS("http://www.w3.org/2000/svg","line");d.setAttribute("x1",b||0);d.setAttribute("y1",c||0);d.setAttribute("x2",e||0);d.setAttribute("y2",f||0);a._setSettingsToNode(d,g);return d},createPolygonNode:function(b,c){var d=document.createElementNS("http://www.w3.org/2000/svg","polygon");d.setAttribute("points",b);a._setSettingsToNode(d,c);return d},createNodeByAttributes:function(b,c,e){var d=null;switch(b.name){case "path":d=
a.createPathNode(b.d,c);break;case "ellipse":d=a.createEllipseNode(b.cx,b.cy,b.rx,b.ry,c);break;case "circle":d=a.createCircleNode(b.cx,b.cy,b.r,c);break;case "rect":d=a.createRectNode(b.x,b.y,b.width,b.height,c);break;case "line":d=a.createLineNode(b.x1,b.y1,b.x2,b.y2,c);break;case "polygon":d=a.createPolygonNode(b.points,c)}d&&(b=b["fill-opacity"],void 0===b||e&&e.overrideFillOpacity||(d.hasAttribute("fill-opacity")&&(b*=d.getAttribute("fill-opacity")),d.setAttribute("fill-opacity",b)));return d},
_setSettingsToNode:function(b,c){if(c.borderWidth){var d=a.toColor(c,"border","#000000");b.setAttribute("stroke",e.toCSSColor(d,!0));b.setAttribute("stroke-width",c.borderWidth);b.setAttribute("stroke-opacity",d.a);c.borderDashArray&&b.setAttribute("stroke-dasharray",Array.isArray(c.borderDashArray)?c.borderDashArray.join(","):c.borderDashArray);c.strokeMiterLimit&&b.setAttribute("stroke-miterlimit",c.strokeMiterLimit);c.borderScale||b.setAttribute("vector-effect","non-scaling-stroke")}c.fillColor&&
(d=a.toColor(c,"fill","#FFFFFF"),b.setAttribute("fill",e.toCSSColor(d,!0)),b.setAttribute("fill-opacity",d.a))},toColor:function(a,b,c,f){c=e.toColor(a[b+"Color"],c);1===c.a&&(a=a[b+"Alpha"],isNaN(a)&&(a=f),isNaN(a)||(c.a=a));return c},createSVGFromJson:function(c,e,f,k,m){m=m||{};k=g.mixin({},!m.noDefaults&&b,k);void 0===k.borderColor&&(k.borderColor=k.fillColor);var d=a.createSVGNode(c.viewBox,{width:e+"px",height:f+"px",overflow:"visible"});m.preserveAspectRatio&&d.setAttribute("preserveAspectRatio",
m.preserveAspectRatio);k.borderScale=m.borderScale;c.g.forEach(function(b){(b=a.createNodeByAttributes(b,k,{overrideFillOpacity:m.overrideFillOpacity}))&&d.appendChild(b)});return d},_iBoxCache:{},calcContentBox:function(b,e,k,n,m){var d=JSON.stringify(b.viewBox)+";"+JSON.stringify(b.g)+";"+e+";"+k+";"+JSON.stringify(m||{});if(a._iBoxCache[d])return g.mixin({},a._iBoxCache[d]);b=a.createSVGFromJson(b,e,k,n,m);b.style.position="absolute";b.style.left="0";b.style.top="0";document.body.appendChild(b);
n=c.getNodesBox(b.children);m=f.position(b);document.body.removeChild(b);n.x-=m.x;n.y-=m.y;n.r=e-(n.x+n.w);n.b=k-(n.y+n.h);a._iBoxCache[d]=g.mixin({},n);return n}};return a})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/legends/ChartLegendSymbols":function(){define(["../utils/ChartTypes"],function(k){var g={SQUARE:"Square",CIRCLE:"Circle",RECTANGLE:"Rectangle",LINE:"Line",isSupported:function(f){for(var e in g)if(g[e]===f)return!0;return!1},getDefaultSymbol:function(f,e){return e&&f!==k.WAFFLE?
g.CIRCLE:g.SQUARE}};return g})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/_ChartEventSupport":function(){define("dojo/_base/declare ./utils/builder/ChartPlots ./utils/ChartTypes ./level/LevelLineBuilder ./tooltips/ChartTooltip esri/dijit/geoenrichment/utils/DeviceUtil".split(" "),function(k,g,f,e,c,b){return k(null,{showLevelLine:!0,_levelLineBuilder:null,_addPlotEventListeners:function(){var a=this;this.chart&&f.hasAxis(this._currentChartType)&&(this._levelLineBuilder=this._levelLineBuilder||
this.showLevelLine&&new e({lineContainerNode:this.domNode}),g.getWorkingPlots(this.chart).forEach(function(d,e){this.chart.connectToPlot(d,function(d){if(d.shape&&d.shape.shape&&d.shape.rawNode){var g=d.type,h=d.shape.rawNode,k=0===e?a._currentChartType:a._getComparisonChartType(),l=!1,q=!f.isXAxisVertical(a._currentChartType);a._currentVisualProperties.renderColumnBarsInOppositeDirections?(l=a.chart.series.filter(function(a){return d.run.plot===a.plot}),l=l.indexOf(d.run)>=l.length/2):l=d.y<a._currentVisualProperties.yAxis.baseLineValue;
a._levelLineBuilder&&a._levelLineBuilder.supportsLevelLine(k)&&("onmouseout"===g?a._levelLineBuilder.hideLevelLine():"onmouseover"===g&&a._levelLineBuilder.showLevelLine(a.chart,h,k,q,l));"onmouseover"===g&&a._currentDataDrillingPanelInfo&&a._currentDataDrillingPanelInfo.showOnClick&&(h.style.cursor="pointer");"onclick"===g&&!b.isMobileDevice()&&a.viewModel.dynamicReportInfo&&c.tryShowDataDrillingForShownTooltip()}})},this))}})})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/builder/ChartPlots":function(){define([],
function(){var k={GRID:"grid",PRIMARY:"default",SECONDARY:"secondary",getWorkingPlots:function(g){var f=[];g.getPlot(k.PRIMARY)&&f.push(k.PRIMARY);g.getPlot(k.SECONDARY)&&f.push(k.SECONDARY);return f}};return k})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/level/LevelLineBuilder":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/dom-style ../utils/ChartTypes esri/dijit/geoenrichment/utils/DomUtil".split(" "),function(k,g,f,e,c,b,a){var d={updateLine:function(b,
d){f.remove(b,"esriGEReportPlayer_chartContainerLevelLineH esriGEReportPlayer_chartContainerLevelLineV");d?f.add(b,"esriGEReportPlayer_chartContainerLevelLineH"):f.add(b,"esriGEReportPlayer_chartContainerLevelLineV");a.show(b);c.set(b,{pointerEvents:"none",left:"",top:"",width:"",height:""})}};return k(null,{lineContainerNode:null,_levelLineDiv:null,_secondaryLineDiv:null,constructor:function(a){g.mixin(this,a)},supportsLevelLine:function(a){return a===b.COLUMN||a===b.BAR||b.isLineLike(a)},showLevelLine:function(a,
c,d,f,g){this._levelLineDiv=this._levelLineDiv||e.create("div",null,this.lineContainerNode);this._drawLine(this._levelLineDiv,a,c,d,f,g);b.isLineLike(d)&&(this._secondaryLineDiv=this._secondaryLineDiv||e.create("div",null,this.lineContainerNode),this._drawLine(this._secondaryLineDiv,a,c,d,!f,g))},_drawLine:function(e,f,g,k,p,t){f=f.calculateGeometry();g=a.noTransformPosition(g);var h=a.noTransformPosition(f.node),l=c.get(f.node,"width"),m=c.get(f.node,"height"),n=a.noTransformPosition(this.lineContainerNode);
d.updateLine(e,p);switch(k){case b.COLUMN:p&&c.set(e,{top:(t?g.y+g.h-n.y:g.y-n.y-1)+"px",left:h.x-n.x+f.offsets.l+"px",width:l-f.offsets.l-f.offsets.r+"px"});break;case b.BAR:p||c.set(e,{left:(t?g.x-n.x:g.x+g.w-n.x)+"px",top:h.y-n.y+f.offsets.t+"px",height:m-f.offsets.t-f.offsets.b+"px"});break;case b.LINE:case b.VERTICAL_LINE:p?c.set(e,{top:g.y+g.h/2-n.y-1+"px",left:h.x-n.x+f.offsets.l+"px",width:l-f.offsets.l-f.offsets.r+"px"}):c.set(e,{left:g.x+.5*g.w-n.x+"px",top:h.y-n.y+f.offsets.t+"px",height:m-
f.offsets.t-f.offsets.b+"px"})}},hideLevelLine:function(){a.hide([this._levelLineDiv,this._secondaryLineDiv])}})})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/tooltips/ChartTooltip":function(){define("dojo/_base/declare dojo/_base/lang dojo/string dojo/dom-construct ./ZoomSupportTooltip ./_BuilderUtil ./_ColumnBarChartTooltipBuilder ./_GaugeChartTooltipBuilder ./_WaffleChartTooltipBuilder ./_LineChartTooltipBuilder ./_PieDonutRingChartTooltipBuilder ../utils/ChartTypes ../../supportClasses/conditionalStyling/ConditionalStyleLegendBuilder ../../dataDrilling/DataDrillingVisualizer ../../supportClasses/WidgetQueryUtil dojo/i18n!esri/nls/jsapi".split(" "),
function(k,g,f,e,c,b,a,d,h,l,n,m,p,t,q,r){function u(a,c,d){a._hide();var e=new t({viewModel:c.viewModel,theme:c.theme,parentWidget:c.chartContainer,getPreviewValueFunction:b.buldPreviewValueFunction(c,{type:"dataDrilling"}),domNode:d,closeZoomedDDWhenClickedOutside:!0,closeZoomedDDOnEsc:!0,onClose:function(){e.play(!1,!0)}});e.play(!0,!0,null,c.dataDrillingPanelInfo.sectionJson)}r=r.geoenrichment.dijit.ReportPlayer.ChartTooltip;var v={lastShownInfo:null,setInfo:function(a){(v.lastShownInfo=a)&&setTimeout(function(){v.lastShownInfo===
a&&(v.lastShownInfo=null)},6E4)}};k=k(c,{tooltipClass:"esriGEChartContainer_chartTooltip_masterTooltip",_chartType:null,constructor:function(){var a=this,b=this.text;this.text=function(c,d){var e;e=c.run&&c.run.data&&c.run.data[c.index];e=e.tooltip&&"object"===typeof e.tooltip?a._renderTooltip(e.tooltip):void 0;return e||b(c,d)}},_needSetRectFromShape:function(){return m.isPictureLike(this._chartType)},setChartType:function(a){this._chartType=a},_renderTooltip:function(a){a=g.mixin({},a,a.getContext());
var b=!a.viewModel.dynamicReportInfo,c=b&&!a.viewModel.isGraphicStyle,d=!q.isDataDrillingView(a.chartContainer);(a.viewModel.enableDataDrilling||b)&&d||delete a.dataDrillingPanelInfo;var f=e.create("div",{"class":"esriGEChartContainer_chartTooltip"},document.body);if(!c)if(a.richTextFieldInfo||a.showTitle||a.showValue||a.showMin||a.showMax||a.showAvg||a.showWeight||a.showConditional||a.dataDrillingPanelInfo)this._buildTooltip(a,f,b,d);else if(b)e.create("div",{"class":"chartTooltip_row esriGERowHigh",
innerHTML:r.noTooltipAvailable},f);else return{node:null};v.setInfo(a.dataDrillingPanelInfo&&a.dataDrillingPanelInfo.showOnClick&&!b?{tooltip:this,info:a,root:f}:null);document.body.removeChild(f);return{node:f,style:a.tooltipStyle}},_buildTooltip:function(b,c,g,k){var q=this;this._chartType===m.PIE||this._chartType===m.DONUT||this._chartType===m.RING?n.buildPieDonutRingChartTooltip(b,c):this._chartType===m.GAUGE?d.buildGaugeChartTooltip(b,c):this._chartType===m.WAFFLE?h.buildWaffleChartTooltip(b,
c):m.isColumnBarLike(this._chartType)?a.buildColumnChartTooltip(b,c):m.isLineLike(this._chartType)&&l.buildLineChartTooltip(b,c);b.conditionalStyling&&b.showConditional&&e.place(p.createLegendNode(b.conditionalStyling,"chart",b.isBenchmarked?b.unbenchmarkedValue:b.value),c);if(b.dataDrillingPanelInfo||g&&k){var t=e.create("div",{"class":"chartTooltip_row esriGERowHigh esriGECenter",style:"margin-top:20px;"},c);(k=g&&!b.dataDrillingPanelInfo)||e.create("div",{"class":"dijitInline esriGESpaceAfterMedium",
innerHTML:f.substitute('\x3csvg xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"16" height\x3d"16" viewBox\x3d"0 0 32 32"\x3e\x3cpath fill\x3d"${fill}" d\x3d"M30 28v1H3V4h1v24h2v-9h6v9h2V6h6v22h2V13h6v15h2z"/\x3e\x3c/svg\x3e',{fill:b.tooltipLinkStyle.color})},t);t=e.create("div",{"class":"dijitInline esriGELink",innerHTML:g?b.dataDrillingPanelInfo?r.drillForMoreDataEdit:r.addDataDrilling:r.drillForMoreData},t);k||(t.style.color=b.tooltipLinkStyle.color);t.addEventListener("click",function(){g?(q._hide(),
b.chartContainer.onShowDataDrillingPreview(b)):u(q,b,c)})}}});k.tryShowDataDrillingForShownTooltip=function(){var a=v.lastShownInfo;a&&u(a.tooltip,a.info,a.root)};return k})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/tooltips/ZoomSupportTooltip":function(){define("dojo/_base/declare dojox/charting/action2d/Tooltip dojox/lang/functional dojox/gfx/matrix esri/dijit/geoenrichment/utils/DeviceUtil esri/dijit/geoenrichment/utils/TooltipUtil".split(" "),function(k,g,f,e,c,b){var a=Math.PI/4,d=
Math.PI/2,h={_tooltips:[],show:function(a,c,d,e){this.hide();var f=a.node,g="string"===typeof a?a:null;if(f||g){var h=f?f.outerHTML||f.innerHTML:g;(h=-1!==h.indexOf("href")||-1!==h.indexOf("esriGELink"))||(e=(e||"")+" esriGENonInteractable");this._tooltips.push(b.showTooltipForNode(d,f||g,{position:c,notRestricted:!0,stayOnHover:h,classes:e&&[e],style:a.style}))}},hide:function(){this._tooltips.forEach(function(a){a&&a.destroy()});this._tooltips.length=0}};return k(g,{tooltipClass:null,process:function(b){if("onplotreset"===
b.type||"onmouseout"===b.type)"onplotreset"===b.type&&delete this.angles;else if(b.shape&&"onmouseover"===b.type){var g=["after-centered","before-centered"];if(!this._needSetRectFromShape())switch(b.element){case "marker":case "circle":case "spider_circle":case "spider_plot":case "candlestick":break;case "column":g=["above-centered","below-centered","after-centered","before-centered"];case "bar":break;default:if(!this.angles){var k="number"===typeof b.run.data[0]?f.map(b.run.data,"x ? Math.max(x, 0) : 0"):
f.map(b.run.data,"x ? Math.max(x.y, 0) : 0");this.angles=f.map(f.scanl(k,"+",0),"* 2 * Math.PI / this",f.foldl(k,"+",0))}var k=e._degToRad(b.plot.opt.startAngle),l=(this.angles[b.index]+this.angles[b.index+1])/2+k;k&&(0>l||l>2*Math.PI)&&(l=Math.abs(2*Math.PI-Math.abs(l)));l<a||(l<d+a?g=["below-centered","above-centered"]:l<Math.PI+a?g=["before-centered","after-centered"]:l<2*Math.PI-a&&(g=["above-centered","below-centered"]))}c.isMobileDevice()&&(g=["above-centered","below-centered"]);(k=this.text(b,
this.plot))&&h.show("string"===typeof k?this._format(k):k,g,b.shape.rawNode,this.tooltipClass)}},_needSetRectFromShape:function(){return!1},_hide:function(){h.hide()}})})},"dojox/charting/action2d/Tooltip":function(){define("dijit/Tooltip dojo/_base/lang dojo/_base/declare dojo/_base/window dojo/_base/connect dojo/dom-style ./PlotAction dojox/gfx/matrix dojo/has dojo/has!dojo-bidi?../bidi/action2d/Tooltip dojox/lang/functional dojox/lang/functional/scan dojox/lang/functional/fold".split(" "),function(k,
g,f,e,c,b,a,d,h,l,n){var m=function(a,b){var c=a.run&&a.run.data&&a.run.data[a.index];return c&&"number"!=typeof c&&(c.tooltip||c.text)?c.tooltip||c.text:b.tooltipFunc?b.tooltipFunc(a):a.y},p=Math.PI/4,t=Math.PI/2;b=f(h("dojo-bidi")?"dojox.charting.action2d.NonBidiTooltip":"dojox.charting.action2d.Tooltip",a,{defaultParams:{text:m,mouseOver:!0,defaultPosition:["after-centered","before-centered"]},optionalParams:{},constructor:function(a,b,c){this.text=c&&c.text?c.text:m;this.mouseOver=c&&void 0!=
c.mouseOver?c.mouseOver:!0;this.defaultPosition=c&&void 0!=c.defaultPosition?c.defaultPosition:["after-centered","before-centered"];this.connect()},process:function(a){if("onplotreset"===a.type||"onmouseout"===a.type)k.hide(this.aroundRect),this.aroundRect=null,"onplotreset"===a.type&&delete this.angles;else if(!(!a.shape||this.mouseOver&&"onmouseover"!==a.type||!this.mouseOver&&"onclick"!==a.type)){var b={type:"rect"},f=this.defaultPosition;switch(a.element){case "marker":b.x=a.cx;b.y=a.cy;b.w=b.h=
1;break;case "circle":b.x=a.cx-a.cr;b.y=a.cy-a.cr;b.w=b.h=2*a.cr;break;case "spider_circle":b.x=a.cx;b.y=a.cy;b.w=b.h=1;break;case "spider_plot":return;case "column":f=["above-centered","below-centered"];case "bar":b=g.clone(a.shape.getShape());b.w=b.width;b.h=b.height;break;case "candlestick":b.x=a.x;b.y=a.y;b.w=a.width;b.h=a.height;break;default:if(!this.angles){var l="number"==typeof a.run.data[0]?n.map(a.run.data,"x ? Math.max(x, 0) : 0"):n.map(a.run.data,"x ? Math.max(x.y, 0) : 0");this.angles=
n.map(n.scanl(l,"+",0),"* 2 * Math.PI / this",n.foldl(l,"+",0))}var l=d._degToRad(a.plot.opt.startAngle),m=(this.angles[a.index]+this.angles[a.index+1])/2+l;b.x=a.cx+a.cr*Math.cos(m);b.y=a.cy+a.cr*Math.sin(m);b.w=b.h=1;l&&(0>m||m>2*Math.PI)&&(m=Math.abs(2*Math.PI-Math.abs(m)));m<p||(m<t+p?f=["below-centered","above-centered"]:m<Math.PI+p?f=["before-centered","after-centered"]:m<2*Math.PI-p&&(f=["above-centered","below-centered"]))}h("dojo-bidi")&&this._recheckPosition(a,b,f);l=this.chart.getCoords();
b.x+=l.x;b.y+=l.y;b.x=Math.round(b.x);b.y=Math.round(b.y);b.w=Math.ceil(b.w);b.h=Math.ceil(b.h);this.aroundRect=b;(a=this.text(a,this.plot))&&k.show(this._format(a),this.aroundRect,f);this.mouseOver||(this._handle=c.connect(e.doc,"onclick",this,"onClick"))}},onClick:function(){this.process({type:"onmouseout"})},_recheckPosition:function(a,b,c){},_format:function(a){return a}});return h("dojo-bidi")?f("dojox.charting.action2d.Tooltip",[b,l]):b})},"dojox/charting/action2d/PlotAction":function(){define(["dojo/_base/connect",
"dojo/_base/declare","./Base","dojo/fx/easing","dojox/lang/functional"],function(k,g,f,e,c){var b=e.backOut;return g("dojox.charting.action2d.PlotAction",f,{overOutEvents:{onmouseover:1,onmouseout:1},constructor:function(a,c,e){this.anim={};e||(e={});this.duration=e.duration?e.duration:400;this.easing=e.easing?e.easing:b},connect:function(){this.handle=this.chart.connectToPlot(this.plot.name,this,"process")},disconnect:function(){this.handle&&(k.disconnect(this.handle),this.handle=null)},reset:function(){},
destroy:function(){this.inherited(arguments);c.forIn(this.anim,function(a){c.forIn(a,function(a){a.action.stop(!0)})});this.anim={}}})})},"dojox/charting/action2d/Base":function(){define(["dojo/_base/lang","dojo/_base/declare","dojo/Evented"],function(k,g,f){return g("dojox.charting.action2d.Base",f,{constructor:function(e,c){this.chart=e;this.plot=c?k.isString(c)?this.chart.getPlot(c):c:this.chart.getPlot("default")},connect:function(){},disconnect:function(){},destroy:function(){this.disconnect()}})})},
"dojox/lang/functional":function(){define(["./functional/lambda","./functional/array","./functional/object"],function(k){return k})},"dojox/lang/functional/lambda":function(){define(["../..","dojo/_base/lang","dojo/_base/array"],function(k,g,f){var e=g.getObject("lang.functional",!0,k),c={},b=1<"ab".split(/a*/).length?String.prototype.split:function(a){var b=this.split.call(this,a);(a=a.exec(this))&&0==a.index&&b.unshift("");return b},a=function(a){var c=[],d=b.call(a,/\s*->\s*/m);if(1<d.length)for(;d.length;)a=
d.pop(),c=d.pop().split(/\s*,\s*|\s+/m),d.length&&d.push("(function("+c.join(", ")+"){ return ("+a+"); })");else if(a.match(/\b_\b/))c=["_"];else{var d=a.match(/^\s*(?:[+*\/%&|\^\.=<>]|!=)/m),e=a.match(/[+\-*\/%&|\^\.=<>!]\s*$/m);if(d||e)d&&(c.push("$1"),a="$1"+a),e&&(c.push("$2"),a+="$2");else{var d=a.replace(/(?:\b[A-Z]|\.[a-zA-Z_$])[a-zA-Z_$\d]*|[a-zA-Z_$][a-zA-Z_$\d]*:|this|true|false|null|undefined|typeof|instanceof|in|delete|new|void|arguments|decodeURI|decodeURIComponent|encodeURI|encodeURIComponent|escape|eval|isFinite|isNaN|parseFloat|parseInt|unescape|dojo|dijit|dojox|window|document|'(?:[^'\\]|\\.)*'|"(?:[^"\\]|\\.)*"/g,
"").match(/([a-z_$][a-z_$\d]*)/gi)||[],g={};f.forEach(d,function(a){g.hasOwnProperty(a)||(c.push(a),g[a]=1)})}}return{args:c,body:a}},d=function(a){return a.length?function(){var b=a.length-1,c=e.lambda(a[b]).apply(this,arguments);for(--b;0<=b;--b)c=e.lambda(a[b]).call(this,c);return c}:function(a){return a}};g.mixin(e,{rawLambda:function(b){return a(b)},buildLambda:function(b){b=a(b);return"function("+b.args.join(",")+"){return ("+b.body+");}"},lambda:function(b){if("function"==typeof b)return b;
if(b instanceof Array)return d(b);if(c.hasOwnProperty(b))return c[b];var e=a(b);return c[b]=new Function(e.args,"return ("+e.body+");")},clearLambdaCache:function(){c={}}});return e})},"dojox/lang/functional/array":function(){define(["dojo/_base/kernel","dojo/_base/lang","dojo/_base/array","./lambda"],function(k,g,f,e){var c={};g.mixin(e,{filter:function(b,a,d){"string"==typeof b&&(b=b.split(""));d=d||k.global;a=e.lambda(a);var f=[],l,n,m;if(g.isArray(b))for(n=0,m=b.length;n<m;++n)l=b[n],a.call(d,
l,n,b)&&f.push(l);else if("function"==typeof b.hasNext&&"function"==typeof b.next)for(n=0;b.hasNext();)l=b.next(),a.call(d,l,n++,b)&&f.push(l);else for(n in b)n in c||(l=b[n],a.call(d,l,n,b)&&f.push(l));return f},forEach:function(b,a,d){"string"==typeof b&&(b=b.split(""));d=d||k.global;a=e.lambda(a);var f,l;if(g.isArray(b))for(f=0,l=b.length;f<l;a.call(d,b[f],f,b),++f);else if("function"==typeof b.hasNext&&"function"==typeof b.next)for(f=0;b.hasNext();a.call(d,b.next(),f++,b));else for(f in b)f in
c||a.call(d,b[f],f,b);return d},map:function(b,a,d){"string"==typeof b&&(b=b.split(""));d=d||k.global;a=e.lambda(a);var f,l,n;if(g.isArray(b))for(f=Array(l=b.length),n=0;n<l;f[n]=a.call(d,b[n],n,b),++n);else if("function"==typeof b.hasNext&&"function"==typeof b.next)for(f=[],n=0;b.hasNext();f.push(a.call(d,b.next(),n++,b)));else for(n in f=[],b)n in c||f.push(a.call(d,b[n],n,b));return f},every:function(b,a,d){"string"==typeof b&&(b=b.split(""));d=d||k.global;a=e.lambda(a);var f,l;if(g.isArray(b))for(f=
0,l=b.length;f<l;++f){if(!a.call(d,b[f],f,b))return!1}else if("function"==typeof b.hasNext&&"function"==typeof b.next)for(f=0;b.hasNext();){if(!a.call(d,b.next(),f++,b))return!1}else for(f in b)if(!(f in c||a.call(d,b[f],f,b)))return!1;return!0},some:function(b,a,d){"string"==typeof b&&(b=b.split(""));d=d||k.global;a=e.lambda(a);var f,l;if(g.isArray(b))for(f=0,l=b.length;f<l;++f){if(a.call(d,b[f],f,b))return!0}else if("function"==typeof b.hasNext&&"function"==typeof b.next)for(f=0;b.hasNext();){if(a.call(d,
b.next(),f++,b))return!0}else for(f in b)if(!(f in c)&&a.call(d,b[f],f,b))return!0;return!1}});return e})},"dojox/lang/functional/object":function(){define(["dojo/_base/kernel","dojo/_base/lang","./lambda"],function(k,g,f){var e={};g.mixin(f,{keys:function(c){var b=[],a;for(a in c)a in e||b.push(a);return b},values:function(c){var b=[],a;for(a in c)a in e||b.push(c[a]);return b},filterIn:function(c,b,a){a=a||k.global;b=f.lambda(b);var d={},g,l;for(l in c)l in e||(g=c[l],b.call(a,g,l,c)&&(d[l]=g));
return d},forIn:function(c,b,a){a=a||k.global;b=f.lambda(b);for(var d in c)d in e||b.call(a,c[d],d,c);return a},mapIn:function(c,b,a){a=a||k.global;b=f.lambda(b);var d={},g;for(g in c)g in e||(d[g]=b.call(a,c[g],g,c));return d}});return f})},"dojox/lang/functional/scan":function(){define(["dojo/_base/kernel","dojo/_base/lang","./lambda"],function(k,g,f){var e={};g.mixin(f,{scanl:function(c,b,a,d){"string"==typeof c&&(c=c.split(""));d=d||k.global;b=f.lambda(b);var h,l,n;if(g.isArray(c))for(h=Array((l=
c.length)+1),h[0]=a,n=0;n<l;a=b.call(d,a,c[n],n,c),h[++n]=a);else if("function"==typeof c.hasNext&&"function"==typeof c.next)for(h=[a],n=0;c.hasNext();h.push(a=b.call(d,a,c.next(),n++,c)));else for(n in h=[a],c)n in e||h.push(a=b.call(d,a,c[n],n,c));return h},scanl1:function(c,b,a){"string"==typeof c&&(c=c.split(""));a=a||k.global;b=f.lambda(b);var d,h,l;h=!0;if(g.isArray(c)){d=Array(h=c.length);d[0]=l=c[0];for(var n=1;n<h;d[n]=l=b.call(a,l,c[n],n,c),++n);}else if("function"==typeof c.hasNext&&"function"==
typeof c.next){if(c.hasNext())for(d=[l=c.next()],n=1;c.hasNext();d.push(l=b.call(a,l,c.next(),n++,c)));}else for(n in c)n in e||(h?(d=[l=c[n]],h=!1):d.push(l=b.call(a,l,c[n],n,c)));return d},scanr:function(c,b,a,d){"string"==typeof c&&(c=c.split(""));d=d||k.global;b=f.lambda(b);var e=c.length,g=Array(e+1),n=e;for(g[e]=a;0<n;--n,a=b.call(d,a,c[n],n,c),g[n]=a);return g},scanr1:function(c,b,a){"string"==typeof c&&(c=c.split(""));a=a||k.global;b=f.lambda(b);var d=c.length,e=Array(d),g=c[d-1],d=d-1;for(e[d]=
g;0<d;--d,g=b.call(a,g,c[d],d,c),e[d]=g);return e}})})},"dojox/lang/functional/fold":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/_base/kernel","./lambda"],function(k,g,f,e){var c={};k.mixin(e,{foldl:function(b,a,d,g){"string"==typeof b&&(b=b.split(""));g=g||f.global;a=e.lambda(a);var h,n;if(k.isArray(b))for(h=0,n=b.length;h<n;d=a.call(g,d,b[h],h,b),++h);else if("function"==typeof b.hasNext&&"function"==typeof b.next)for(h=0;b.hasNext();d=a.call(g,d,b.next(),h++,b));else for(h in b)h in
c||(d=a.call(g,d,b[h],h,b));return d},foldl1:function(b,a,d){"string"==typeof b&&(b=b.split(""));d=d||f.global;a=e.lambda(a);var g,l,n;if(k.isArray(b))for(g=b[0],l=1,n=b.length;l<n;g=a.call(d,g,b[l],l,b),++l);else if("function"==typeof b.hasNext&&"function"==typeof b.next){if(b.hasNext())for(g=b.next(),l=1;b.hasNext();g=a.call(d,g,b.next(),l++,b));}else for(l in n=!0,b)l in c||(n?(g=b[l],n=!1):g=a.call(d,g,b[l],l,b));return g},foldr:function(b,a,c,g){"string"==typeof b&&(b=b.split(""));g=g||f.global;
a=e.lambda(a);for(var d=b.length;0<d;--d,c=a.call(g,c,b[d],d,b));return c},foldr1:function(b,a,c){"string"==typeof b&&(b=b.split(""));c=c||f.global;a=e.lambda(a);for(var d=b.length,g=b[d-1],d=d-1;0<d;--d,g=a.call(c,g,b[d],d,b));return g},reduce:function(b,a,c){return 3>arguments.length?e.foldl1(b,a):e.foldl(b,a,c)},reduceRight:function(b,a,c){return 3>arguments.length?e.foldr1(b,a):e.foldr(b,a,c)},unfold:function(b,a,c,g,k){k=k||f.global;a=e.lambda(a);c=e.lambda(c);b=e.lambda(b);for(var d=[];!b.call(k,
g);d.push(a.call(k,g)),g=c.call(k,g));return d}})})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/tooltips/_BuilderUtil":function(){define("dojo/string dojo/dom-class dojo/dom-construct dojo/dom-style ../legends/ChartLegendSymbols ../legends/LegendSymbolRenderer ../../supportClasses/templateJsonUtils/fieldInfo/FieldInfoRenderer ../../../dataProvider/supportClasses/data/AreaDataUtil dojo/i18n!esri/nls/jsapi".split(" "),function(k,g,f,e,c,b,a,d,h){var l=h.geoenrichment.dijit.ReportPlayer.ChartContainer;
h=h.geoenrichment.dijit.ReportPlayer.ChartTooltip;return{addTitle:function(a,b,c){a=f.create("div",{"class":"chartTooltip_title esriGERowHigh"},a);c&&this.addColor(c,a);this.addLabel(b,a)},addColor:function(a,d){a=a||{};a=b.renderSymbol({defaultSymbol:c.CIRCLE,fill:a.fill,stroke:a.stroke,marker:a.marker,width:8,height:10});g.add(a,"esriGESpaceAfterBig");f.place(a,d)},addRowOffset:function(a){this.addColor(null,a)},addLabel:function(a,b){return f.create("div",{"class":"chartTooltip_label dijitInline esriGESpaceAfterBig",
innerHTML:a},b)},addValue:function(a,b){return f.create("div",{"class":"chartTooltip_value dijitInline esriGESpaceAfterBig",innerHTML:a},b)},buildStatLabels:function(a,b,c,d,e,g,h){function k(c,d){if(a[c]&&d){var e=f.create("div",{"class":"chartTooltip_row esriGERowHigh"},b);l.addColor(null,e);m.push(l.addLabel(d,e));l.addValue(a[c],e)}}var l=this,m=[];a.showWeight&&k("weightValueLabel",c);a.showMin&&k("minValueLabel",d);a.showMax&&k("maxValueLabel",e);a.showAvg&&k("avgValueLabel",g);a.showWeight&&
k("weightInStackLabel",h);return m},formatTable:function(a){var b=0;a.forEach(function(a){b=Math.max(b,e.get(a,"width"))});a.forEach(function(a){e.set(a,"width",b+"px")})},buildSeriesLabel:function(a){return!0===a.isThisAreaSpecific?a.seriesLabel&&!a.isThisAreaSingleSeries?k.substitute(h.thisAreaSeries,{seriesName:a.seriesLabel}):l.thisArea:a.seriesLabel},addBenchmarkValue:function(a,b){return this.addValue(a.unbenchmarkedValueLabel+" ("+(0<a.value?"+":"")+a.valueLabel+")",b)},buildRichText:function(b,
c){b=a.renderFieldInfoInTableCell(b.richTextFieldInfo,{previewValues:!0,fieldData:b.fieldData,isGraphicReport:!0,getPreviewValueFunction:this.buldPreviewValueFunction(b,{type:"tooltip"})});f.create("div",{"class":"chartTooltip_row esriGERow20",innerHTML:b.formattedValue},c)},buldPreviewValueFunction:function(a,b){return function(c){if(!c||!c.fieldInfo)return null;switch(c.fieldInfo.name){case "headers.CHART_POINT_VALUE":return{value:a.isBenchmarked?a.unbenchmarkedValue:a.value};case "headers.CHART_POINT_NAME":return{formattedValue:a.pointName};
case "headers.CHART_SERIES_NAME":return{formattedValue:a.seriesName};case "headers.CHART_AREA_NAME":return{formattedValue:a.areaName||l.thisArea}}if(!a.fieldData)return null;c=c.fieldInfo;if(c.expressionText&&-1!==c.expressionText.indexOf("!headers.CHART_POINT_VALUE!")){var e;switch(b.type){case "tooltip":e=a.tooltipTemplateValues;break;case "dataDrilling":e=a.dataDrillingPanelInfo.templateValues}(e=e&&e[c.templateName]&&e[c.templateName][a.fieldInfo&&a.fieldInfo.templateName])&&(c=e)}c=d.getAreaDataValue({featureAttributes:a.isComparisonPoint?
a.comparisonFeatureAttribute:null,fieldData:a.fieldData,featureIndex:a.featureIndex,fieldName:c.templateName||c.name});return"number"===typeof c?{value:c||0}:{formattedValue:c}}}}})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/tooltips/_ColumnBarChartTooltipBuilder":function(){define(["dojo/dom-construct","./_BuilderUtil","dojo/i18n!esri/nls/jsapi"],function(k,g,f){f=f.geoenrichment.dijit.ReportPlayer.ChartTooltip;return{buildColumnChartTooltip:function(e,c){var b=e.getGroup&&e.getGroup();
e.isMultiFeature||b&&1!==b.length?this._buildMultiSeriesTooltip(e,c):this._buildSingleSeriesTooltip(e,c)},_buildSingleSeriesTooltip:function(e,c){var b=[];e.richTextFieldInfo&&g.buildRichText(e,c);var a=k.create("div",{"class":"chartTooltip_row esriGERowHigh"},c);g.addColor(e,a);b.push(g.addLabel(e.label,a));e.isUnavailableData?g.addValue(f.unavailableData,a):e.isBenchmarked?g.addBenchmarkValue(e,a):(g.addValue(e.valueLabel,a),b=b.concat(g.buildStatLabels(e,c,f.weight,f.minValue,f.maxValue,f.avgValue)));
a.style.display=e.showValue?"":"none";g.formatTable(b)},_buildMultiSeriesTooltip:function(e,c){var b=[];e.showTitle&&g.addTitle(c,e.isMultiFeature?g.buildSeriesLabel(e):e.label);e.richTextFieldInfo&&g.buildRichText(e,c);var a=k.create("div",{"class":"chartTooltip_row esriGERowHigh"},c);g.addColor(e,a);b.push(g.addLabel(e.isMultiFeature?e.label:g.buildSeriesLabel(e),a));if(e.isUnavailableData)g.addValue(f.unavailableData,a);else if(e.isBenchmarked)g.addBenchmarkValue(e,a);else{g.addValue(e.valueLabel,
a);var d;d=e.isMultiFeature?g.buildStatLabels(e,c,f.weightInAreas,f.minValueInAreas,f.maxValueInAreas,f.avgValueInAreas,f.weightInStack):e.isSinglePointInSeries?g.buildStatLabels(e,c,null,null,null,null,f.weightInStack):g.buildStatLabels(e,c,f.weightInSeries,f.minValueInSeries,f.maxValueInSeries,f.avgValueInSeries,f.weightInStack);b=b.concat(d)}a.style.display=e.showValue?"":"none";e.showValue&&e.getGroup().forEach(function(a){if(e.id!==a.id){var d=k.create("div",{"class":"chartTooltip_row esriGERowHigh"},
c);g.addColor(a,d);b.push(g.addLabel(a.isMultiFeature?a.label:g.buildSeriesLabel(a),d));a.isUnavailableData?g.addValue(f.unavailableData,d):e.isBenchmarked?g.addBenchmarkValue(a,d):g.addValue(a.valueLabel,d)}});g.formatTable(b)}}})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/tooltips/_GaugeChartTooltipBuilder":function(){define(["dojo/dom-construct","dojo/string","./_BuilderUtil","dojo/i18n!esri/nls/jsapi"],function(k,g,f,e){e=e.geoenrichment.dijit.ReportPlayer.ChartTooltip;return{buildGaugeChartTooltip:function(c,
b){c.showTitle&&f.addTitle(b,c.label,c);c.richTextFieldInfo&&f.buildRichText(c,b);b=k.create("div",{"class":"chartTooltip_row esriGERowHigh"},b);f.addRowOffset(b);c.isUnavailableData?f.addLabel(e.unavailableData,b):c.hasNegativeValues?f.addLabel(c.valueLabel,b):f.addLabel(g.substitute(e.gaugeChartTooltip_label,{value:c.valueLabel,total:c.sumValueLabel}),b);b.style.display=c.showValue?"":"none"}}})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/tooltips/_WaffleChartTooltipBuilder":function(){define(["dojo/dom-construct",
"dojo/string","./_BuilderUtil","dojo/i18n!esri/nls/jsapi"],function(k,g,f,e){e=e.geoenrichment.dijit.ReportPlayer.ChartTooltip;return{buildWaffleChartTooltip:function(c,b){c.showTitle&&f.addTitle(b,c.label,c);c.richTextFieldInfo&&f.buildRichText(c,b);b=k.create("div",{"class":"chartTooltip_row esriGERowHigh"},b);f.addRowOffset(b);c.isUnavailableData?f.addLabel(e.unavailableData,b):c.hasNegativeValues?f.addLabel(c.valueLabel,b):f.addLabel(g.substitute(e.waffleChartTooltip_label,{value:c.valueLabel,
total:c.sumValueLabel}),b);b.style.display=c.showValue?"":"none"}}})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/tooltips/_LineChartTooltipBuilder":function(){define(["dojo/dom-construct","./_BuilderUtil","dojo/i18n!esri/nls/jsapi"],function(k,g,f){f=f.geoenrichment.dijit.ReportPlayer.ChartTooltip;return{buildLineChartTooltip:function(e,c){var b=[];e.showTitle&&g.addTitle(c,e.label);e.richTextFieldInfo&&g.buildRichText(e,c);var a=k.create("div",{"class":"chartTooltip_row esriGERowHigh"},c);
g.addColor(e,a);b.push(g.addLabel(g.buildSeriesLabel(e),a));e.isBenchmarked?g.addBenchmarkValue(e,a):g.addValue(e.valueLabel,a);a.style.display=e.showValue?"":"none";var d;e.isMultiFeature?d=g.buildStatLabels(e,c,f.weightInAreas,f.minValueInAreas,f.maxValueInAreas,f.avgValueInAreas):e.isBenchmarked||(d=g.buildStatLabels(e,c,f.weightInSeries,f.minValueInSeries,f.maxValueInSeries,f.avgValueInSeries,f.weightInStack));d&&(b=b.concat(d));e.showValue&&e.getGroup().forEach(function(a){if(e.id!==a.id){var d=
k.create("div",{"class":"chartTooltip_row esriGERowHigh"},c);g.addColor(a,d);b.push(g.addLabel(g.buildSeriesLabel(a),d));a.isUnavailableData?g.addValue(f.unavailableData,d):a.isBenchmarked?g.addBenchmarkValue(a,d):g.addValue(a.valueLabel,d)}});g.formatTable(b)}}})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/tooltips/_PieDonutRingChartTooltipBuilder":function(){define(["dojo/dom-construct","dojo/string","./_BuilderUtil","dojo/i18n!esri/nls/jsapi"],function(k,g,f,e){e=e.geoenrichment.dijit.ReportPlayer.ChartTooltip;
return{buildPieDonutRingChartTooltip:function(c,b){c.showTitle&&f.addTitle(b,c.label,c);c.richTextFieldInfo&&f.buildRichText(c,b);var a=k.create("div",{"class":"chartTooltip_row esriGERowHigh"},b);f.addRowOffset(a);c.isUnavailableData?f.addLabel(e.unavailableData,a):c.isBenchmarked?f.addBenchmarkValue(c,a):(f.addLabel(g.substitute(e.pieChartTooltip_label,{value:c.valueLabel,total:c.sumValueLabel}),a),b=f.buildStatLabels(c,b,e.weight,e.minValue,e.maxValue,e.avgValue),f.formatTable(b));a.style.display=
c.showValue?"":"none"}}})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/_ChartComparisonSupport":function(){define("dojo/_base/declare ../comparison/ComparisonSelect ./utils/ChartTypes ../../dataProvider/supportClasses/ge/LocalGEChart ./dummyData/DummyGE esri/dijit/geoenrichment/utils/DomUtil dojo/i18n!esri/nls/jsapi".split(" "),function(k,g,f,e,c,b,a){function d(a,b){return a&&b&&a.StdGeographyLevel===b.StdGeographyLevel&&a.StdGeographyID===b.StdGeographyID}a=a.geoenrichment.dijit.ReportPlayer.ChartContainer;
return k(null,{comparisonSelect:null,_comparisonAttributes:null,_additionalAttributes:null,_ge:null,_stdPolygonsController:null,_initChartComparisonSelect:function(){var c=this;this._additionalAttributes=[];b.hide(this.comparisonSelectBlock);if(this._currentComparisonInfo){this._updateComparisonLabel();var e=this._getGeoenrichment().getData().features;this.comparisonSelect=(new g({defaultLevelId:this._currentComparisonInfo.defaultLevel,fields:this._getGeoenrichment().getAttributeFields(),canAddFeatures:this._canAddRemoveFeatures(),
addFeatureMessage:a.addToChart,featureIsAlreadyAddedMessage:a.alreadyAdded,canRemoveFeatures:this._canAddRemoveFeatures(),removeFeatureMessage:a.removeFromChart,onFeatureSelected:function(a,b,d){c._setComparisonAttributes(d)},isFeatureAdded:function(a,b,e){return d(c._comparisonAttributes,e)||c._additionalAttributes.some(function(a){return d(a,e)})},canRemoveFeature:function(a,b,e){return!d(c._comparisonAttributes,e)},onAddFeature:function(a,b,d){c._additionalAttributes.push(d);c._updateSeries();
c._syncWithShownFeatures()},onRemoveFeature:function(a,b,e){c._additionalAttributes=c._additionalAttributes.filter(function(a){return!d(a,e)});c._updateSeries();c._syncWithShownFeatures()}})).placeAt(this.comparisonSelectDiv);this.own(this.comparisonSelect);this.comparisonSelect.setFeatures(e);this.comparisonSelect.setDefaultValue();this._comparisonAttributes=this.comparisonSelect.getSelectedAttributes();this.comparisonSelect.get("options").length?(b.show(this.comparisonSelectBlock),b.enableContent(this.comparisonSelectBlock,
!!this.viewModel.dynamicReportInfo),this.viewModel.dynamicReportInfo&&(this._stdPolygonsController=this.viewModel.getStdPolygonsController(this._currentComparisonInfo.calculatorName,this.currentFeatureIndex),this.own(this._stdPolygonsController),this._syncWithShownFeatures())):(this.comparisonSelect.destroy(),this._currentComparisonInfo=null)}},_canAddRemoveFeatures:function(){return this._isMultiFeatureChart&&!f.isLineLike(this._currentChartType)},_updateComparisonLabel:function(){if(this._currentComparisonInfo){var b;
b=this._canAddRemoveFeatures()?a.selectOrAddGeographyToCompare:this._tableViewInfo?a.compareWith:f.isColumnBarLike(this._getComparisonChartType())?a.comparisonLabelBars:a.comparisonLabelDots;this.comparisonLabel.innerHTML=b;this.comparisonLabel.style.color=this.viewModel.getDocumentDefaultStyles(this.theme).color}},_syncWithShownFeatures:function(){if(this._stdPolygonsController){this._stdPolygonsController.setAttributeFields(this._getGeoenrichment().getAttributeFields());var a=this._getGeoenrichment().getAllGeographyAttributes({ignoreFilters:!0});
this._stdPolygonsController.setShownFeatureAttributes(this._getComparisonFeatureAttributes());this._stdPolygonsController.setAllFeatureAttributes(a)}},_getComparisonChartType:function(){return this._currentComparisonInfo&&this._currentComparisonInfo.chartType||this._currentChartType},_getGeoenrichment:function(){return this._currentComparisonInfo?this._ge?this._ge:this._ge=this.viewModel.dynamicReportInfo?new e(this._originalSeriesItems,this._currentComparisonInfo.calculatorName,this.viewModel.dynamicReportInfo.fieldData.areaData,
this._isMultiFeatureChart,this.viewModel.dynamicReportInfo.analysisAreas.map(function(a){return a.shortName||a.name}),this.currentFeatureIndex):this._createDummyGE():null},_createDummyGE:function(){return c.getInstance()},_setFilterRangesForComparison:function(a){if(!this._currentComparisonInfo)return!1;this._getGeoenrichment().setFilterRanges(a);a=this._getGeoenrichment().getData().features;this.comparisonSelect.setFeatures(a);this.comparisonSelect.setDefaultValue();this._setComparisonAttributes(this.comparisonSelect.getSelectedAttributes());
b[this.comparisonSelect.get("options").length?"show":"hide"](this.comparisonSelectBlock);return!0},_setComparisonAttributes:function(a){this._comparisonAttributes=a;this.comparisonSelect.get("options").length?d(this.comparisonSelect.getSelectedAttributes(),this._comparisonAttributes)||this.comparisonSelect.setSelectedAttributes(this._comparisonAttributes):this._comparisonAttributes=null;a=this._updateSeries();this._syncWithShownFeatures();return a},_getComparisonFeatureAttributes:function(){if(!this._currentComparisonInfo)return null;
var a=this._additionalAttributes.filter(function(a){return 0<=this.comparisonSelect.getFeatureIndexById(a.StdGeographyLevel,a.StdGeographyID)},this),b=this._comparisonAttributes&&a.some(function(a){return d(a,this._comparisonAttributes)},this),a=a.slice();!b&&this._comparisonAttributes&&a.push(this._comparisonAttributes);return a},_getNumComparisonFeatures:function(){var a=this._getComparisonFeatureAttributes();return a&&a.length||0}})})},"esri/dijit/geoenrichment/ReportPlayer/core/comparison/ComparisonSelect":function(){define("dojo/_base/declare dojo/on dojo/dom-class dojo/dom-construct esri/dijit/geoenrichment/OnDemandSelect esri/dijit/geoenrichment/lists/FlowListDefaultItemRenderer ../../dataProvider/supportClasses/areas/AreasInfoTemplateBuilder ./ComparisonListUtil esri/dijit/geoenrichment/utils/DeviceUtil esri/dijit/geoenrichment/utils/TooltipUtil".split(" "),
function(k,g,f,e,c,b,a,d,h,l){var n=k(b,{createLabelNode:!0,fields:null,addFeatureMessage:null,featureIsAlreadyAddedMessage:null,removeFeatureMessage:null,canAddFeatures:!1,canRemoveFeatures:!1,_createImageNode:function(a,b){var c=this;if(a.isArea){if(this.fields&&!h.isMobileDevice()){var d=e.create("div",{"class":"esriGESpaceBeforeBig dijitInline esriGEInfoIcon esriGEComparisonSelect_infoIcon"},b);l.setTooltipToNode(d,function(){return c._buildGeographyTooltip(a)},{notRestricted:!0})}this.canRemoveFeatures&&
(d=e.create("div",{"class":"esriGESpaceBeforeBig dijitInline esriGEComparisonSelect_removeButton"},b),this.isAdded(a)&&this.canRemoveFeature(a)?(g(d,"click",function(b){b.stopPropagation();c.onRemoveFeature(a)}),l.setTooltipToNode(d,this.removeFeatureMessage)):f.add(d,"disabled"));this.canAddFeatures&&(b=e.create("div",{"class":"esriGESpaceBeforeBig dijitInline esriGEComparisonSelect_addButton"},b),this.isAdded(a)?(f.add(b,"disabled"),l.setTooltipToNode(b,this.featureIsAlreadyAddedMessage)):(g(b,
"click",function(b){b.stopPropagation();c.onAddFeature(a)}),l.setTooltipToNode(b,this.addFeatureMessage)))}},_buildGeographyTooltip:function(b){var c=this.fields.map(function(a){return{label:a.label,value:a.formatFunction(b.attributes[a.name])}});return a.buildAttributesTable(null,c,{padding:10,maxHeight:document.body.clientHeight-40})},isAdded:function(a){},onAddFeature:function(a){},canRemoveFeature:function(a){},onRemoveFeature:function(a){}});return k(c,{listClass:"esriGEOnDemandSelectSpacedOut esriGEOnDemandSelectVeryTallList600",
defaultLevelId:null,fields:null,addFeatureMessage:null,featureIsAlreadyAddedMessage:null,removeFeatureMessage:null,canAddFeatures:!1,canRemoveFeatures:!1,showTitleForSingleGroup:!1,buildRendering:function(){var a=this;h.isMobileDevice()&&(this.listClass+=" esriGEComparisonSelectListMobile");var b=new n;b.fields=this.fields;b.addFeatureMessage=this.addFeatureMessage;b.featureIsAlreadyAddedMessage=this.featureIsAlreadyAddedMessage;b.canAddFeatures=this.canAddFeatures;b.isAdded=function(b){return a.isFeatureAdded(b.levelId,
b.featureId,b.attributes)};b.onAddFeature=function(b){a.closePopup();a.onAddFeature(b.levelId,b.featureId,b.attributes)};b.canRemoveFeatures=this.canRemoveFeatures;b.removeFeatureMessage=this.removeFeatureMessage;b.canRemoveFeature=function(b){return a.canRemoveFeature(b.levelId,b.featureId,b.attributes)};b.onRemoveFeature=function(b){a.closePopup();a.onRemoveFeature(b.levelId,b.featureId,b.attributes)};this.itemRenderer=b;this.inherited(arguments)},setGroups:function(a){this.set("options",d.getOptionsFromGroups(a,
{hideTitleForSingleGroup:!this.showTitleForSingleGroup}))},setFeatures:function(a){this.set("options",d.getListOptionsFromFeatures(a))},setDefaultValue:function(a){var b=d.getDefaultOptionValue(this.options,this.defaultLevelId);this.set("value",b);if(a&&a.emitEvent)this.onChange();return b},isFeatureAdded:function(a,b,c){return!1},canRemoveFeature:function(a,b,c){return!0},onChange:function(){var a=this.getSelectedItem();a&&this.onFeatureSelected(a.levelId,a.featureId,a.attributes)},getFeatureIndexById:function(a,
b){return d.getFeatureIndexInOptionsById(this.options,a,b)},selectFeatureByIndex:function(a){a=d.getOptionValueByFeatureIndex(this.options,a||0);this.set("value",a);return a},getNumFeatures:function(){return d.getNumFeaturesFromOptions(this.options)},getValue:function(){var a=this.getSelectedItem();return a&&{value:a.value,featureId:a.featureId,levelId:a.levelId,attributes:a.attributes}},setValue:function(a,b){this.set("value",a+"."+b)},getSelectedAttributes:function(){var a=this.getSelectedItem();
return a&&a.attributes},setSelectedAttributes:function(a){a&&this.setValue(a.StdGeographyLevel,a.StdGeographyID)},onFeatureSelected:function(a,b,c){},onAddFeature:function(a,b,c){},onRemoveFeature:function(a,b,c){}})})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/areas/AreasInfoTemplateBuilder":function(){define("esri/dijit/geoenrichment/when esri/dijit/geoenrichment/promise/all esri/dijit/PopupTemplate ../attachments/AttributesUtil esri/dijit/geoenrichment/utils/DomUtil dojo/i18n!esri/nls/jsapi".split(" "),
function(k,g,f,e,c,b){b=b.geoenrichment.dijit.ReportPlayer.AreasInfoTemplateBuilder;var a={buildInfoTemplates:function(a,b,c){var d=this,e={};b=b.map(function(b,c){return k(d._getAttributesAndNotesForAreaAt(a,c),function(a){e[c]=a;d._buildAreaInfoTemplate(b,a.attributesText,a.notesText)})});return g(b).then(function(){c.groups&&c.groups.forEach(function(a){var b=e[a.indexes[0]];d._buildGroupInfoTemplate(a,b.attributesText,b.notesText)})})},buildInfoTemplateForFeature:function(a,b,c,e){var d=this;
return k(this._getAttributesAndNotesForAreaAt(a,c),function(a){d._buildFeatureInfosInfoTemplate([{feature:b,title:e}],a.attributesText,a.notesText)})},_getAttributesAndNotesForAreaAt:function(c,f){c.supportsMultipleAreas&&c.setCurrentAnalysisAreaIndex(f);return g([function(){return k(c.getAttributes(),function(c){return c&&c.length?a.buildAttributesTable(b.attributes,c.map(function(a){return{label:a.alias,value:e.formatAttributeValue(a,{unavailableDataValue:b.unavailableData})}})):null})}(),function(){return k(c.getNotes(),
function(c){return c&&c.length?a.formatArrayOfTexts(b.notes,c.map(function(a){return a.text})):null})}()]).then(function(a){return{attributesText:a[0]||"",notesText:a[1]||""}})},_buildAreaInfoTemplate:function(a,b,c){var d=[{feature:a.feature,title:a.name}];a.location&&d.push({feature:a.location,title:a.locationName||a.name});this._buildFeatureInfosInfoTemplate(d,b,c)},_buildGroupInfoTemplate:function(a,b,c){var d=[];a.location&&d.push({feature:a.location,title:a.locationName||a.name});this._buildFeatureInfosInfoTemplate(d,
b,c)},_buildFeatureInfosInfoTemplate:function(a,b,c){a.forEach(function(a){b||c?a.feature.setInfoTemplate(new f({title:a.title,fieldInfos:[],description:b+c})):a.feature.setInfoTemplate(null)})},formatArrayOfTexts:function(a,b){return"\x3cp\x3e"+a+"\x3c/p\x3e"+("\x3cp style\x3d'padding-left:10px'\x3e"+b.join("\x3cbr/\x3e\x3cbr/\x3e")+"\x3c/p\x3e")},buildAttributesTable:function(a,e,f){f=f||{};var d=f.padding?f.padding+"px":"0px 5px",g=null;if(f.maxHeight){var h=f.padding||0,k=c.getTextBox("Text").h,
h=(2*h+k)*(e.length+(a?1:0));f.maxHeight<h&&(h=f.maxHeight/h,g=Math.floor(k*h)+"px",f.padding&&(d=Math.floor(f.padding*h*.5)+"px "+f.padding+"px"))}var l="";a&&(l+="\x3cp\x3e"+a+"\x3c/p\x3e");var r="padding:"+d+";"+(g?"font-size:"+g+";":""),l=l+"\x3ctable\x3e";e.forEach(function(a){l+="\x3ctr style\x3d'text-align:left;'\x3e";var c=l+="\x3ctd style\x3d'"+r+"'\x3e"+a.label+"\x3c/td\x3e";a=a.value;a=null===a||void 0===a||"number"===typeof a&&isNaN(a)?b.unavailableData:a;l=c+("\x3ctd style\x3d'"+r+"'\x3e"+
a+"\x3c/td\x3e");l+="\x3c/tr\x3e"});return l+="\x3c/table\x3e"}};return a})},"esri/dijit/geoenrichment/ReportPlayer/core/comparison/ComparisonListUtil":function(){define(["dojo/_base/declare","dojo/dom-class","esri/dijit/geoenrichment/lists/FlowListDefaultItemRenderer","esri/dijit/geoenrichment/ReportPlayer/countryConfig"],function(k,g,f,e){var c={getListOptionsFromFeatures:function(b,a){b=c.getFeatureGroups(b,a);return c.getOptionsFromGroups(b,a)},getFeatureGroups:function(b,a){var c={},f=[];b.forEach(function(a){if(!a.attributes.isThisArea){var b=
a.attributes.StdGeographyLevel||"",d=c[b];d||(d=(d=e.getGeographiesModel())?d.getLevelPluralName(b):b,d={levelId:b,label:d,features:[]},c[b]=d,f.push(d));d.features.push(a)}});f.forEach(function(a){a.features.sort(function(a,b){return(a.attributes.StdGeographyName||"").localeCompare(b.attributes.StdGeographyName||"")})});return f},getOptionsFromGroups:function(b,a){function c(a){a.features.forEach(function(b){g.push({isArea:!0,value:e||!b.attributes.StdGeographyID?String(k++):b.attributes.StdGeographyLevel+
"."+b.attributes.StdGeographyID,label:b.attributes.StdGeographyName||"",attributes:b.attributes,featureId:b.attributes.StdGeographyID,levelId:a.levelId})})}var e=a&&a.isIndexBased,f=a&&a.hideTitleForSingleGroup,g=[],k=0;1!==b.length||b[0].levelId?b.forEach(function(a,d){0<d&&g.push({isSeparator:!0});(1<b.length||!f)&&g.push({isTitle:!0,enabled:!1,value:a.levelId,label:a.label+":"});c(a)}):c(b[0]);return g},getDefaultOptionValue:function(b,a){function c(a){var c;b.some(function(b){if(b.isArea&&(!a||
!f||b.levelId===f.id))return c=b,!0});return c}var f;a&&(f=e.getGeographiesModel().getLevel(a));return(a=c(!0)||c(!1))&&a.value},getFeatureIndexInOptionsById:function(b,a,c){var d=a+"."+c,e=-1,f=0;b.some(function(a){if(a.isArea){if(a.value===d)return e=f,!0;f++}});return e},getOptionValueByFeatureIndex:function(b,a){var c,e=0;b.some(function(b){if(b.isArea){if(e===a)return c=b,!0;e++}});return c&&c.value},getNumFeaturesFromOptions:function(b){var a=0;b.forEach(function(b){b.isArea&&a++});return a}};
k=k(f,{createPresentation:function(b,a,c,e,f){var d=this.inherited(arguments);b.isArea&&g.add(d,"esriGEComparisonList_areaItemRoot");return d}});c.ComparisonListItemRenderer=k;return c})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/ge/LocalGEChart":function(){define(["dojo/_base/declare","dojo/_base/lang","./LocalGEBase","../data/AreaDataUtil"],function(k,g,f,e){return k(f,{_fieldNameToPointCache:null,constructor:function(c,b,a,d,f,k){this._fieldNameToPointCache={};c[0]&&c[0].points.forEach(function(a){a.fieldInfo&&
(this._fieldNameToPointCache[a.fieldInfo.name]=a)},this);(this._skipThisArea=d)?(a=e.combineAreaDataObjectCalculators(a,b,{removeDuplicates:!0}),d=a.thisAreas.map(function(a,b){a=g.mixin({},a);a.StdGeographyName=f[b];a.isThisArea=!0;return a}),c={},c[b]={data:d.shift(),comparisonLevels:d.concat(a.comparisonLevels)}):c=a[k||0];this._initGE(null,c,b)},_createField:function(c,b){var a=this.inherited(arguments),d=this._fieldNameToPointCache[c];if(d&&d.fieldInfo){var e=d.fieldInfo;a.alias=d.label||e.alias;
a.decimals="number"===typeof e.decimals?e.decimals:-1;a.units=e.showPercent?"pct":e.showCurrency?"currency":a.units;a.type=e.type||a.type}else a.noVariableField=!0;return a},_filterAttributeField:function(c){return!c.noVariableField}})})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/dummyData/DummyGE":function(){define(["esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/ge/LocalGEChart","dojo/i18n!esri/nls/jsapi"],function(k,g){g=g.geoenrichment.dijit.ReportPlayer.DummyGE;return{_ge:null,
getInstance:function(){this._ge||(this._ge=this._createGE());return this._ge},_createGE:function(){return new k([],"dummyCalc",[{dummyCalc:{data:{StdGeographyName:null,StdGeographyID:null},comparisonLevels:[{StdGeographyName:g.sampleData,StdGeographyID:"sampleData"}]}}])}}})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/ChartSorting":function(){define([],function(){var k={NONE:"None",ASC:"Ascending",DESC:"Descending",isSupported:function(g){for(var f in k)if(k[f]===g)return!0;return!1},
toSupportedValue:function(g){return k.isSupported(g)?g:k.NONE}};return k})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/ChartFilterUtil":function(){define(["dojo/_base/lang","esri/dijit/geoenrichment/utils/ObjectUtil","./ChartTypes","./builder/utils/ChartDataUtil"],function(k,g,f,e){var c={collectStatsForVariables:function(b,a,c,f,k){var d=0,h={min:Infinity,max:-Infinity,decimals:0,dataArray:[]};a.forEach(function(a,l){a.points.forEach(function(m,n){m=e.getPointValue({point:m,viewModel:f,
currentFeatureIndex:k,index:n,seriesIndex:l,chartType:b,visualProperties:c,numPoints:a.points.length});h.min=Math.min(h.min,m);h.max=Math.max(h.max,m);h.decimals=Math.max(h.decimals,g.getPlaces(m));h.dataArray.push(m);d++})});return{filterRanges:[h],numVariablesTotal:d}},filterSeriesItems:function(b,a,d,e,f,g,k){return k?c._filterAreas(b,a,e,f):c._filterVariables(b,a,d,e,f,g)},_filterAreas:function(b,a,c,g){var d=0,h={};c.forEach(function(a){h[a.fieldName]=a});if(f.isLineLike(b))b=a.filter(function(a,
b){return!a.points.some(function(a){var c=e.getPointValue({point:a,viewModel:g,currentFeatureIndex:b});a=h[a.fieldInfo.name];return c<a.min||c>a.max})}),d=b.length,b.length||(b.__firstSeriesItem=a[0]);else{var m={};a.forEach(function(a){a.points.forEach(function(a,b){if(!m[b]){var c=e.getPointValue({point:a,viewModel:g,currentFeatureIndex:b});a=h[a.fieldInfo.name];if(c<a.min||c>a.max)m[b]=!0}})});b=a.map(function(a){a=k.mixin({},a);a.__firstPoint=a.points[0];a.points=a.points.filter(function(a,b){return!m[b]});
d=a.points.length;return a})}return{seriesItems:b,numShownElements:d}},_filterVariables:function(b,a,c,f,g,n){var d,h=0,l=f[0];d=[];var q=1<a.length;a.forEach(function(a,f){var h=k.mixin({},a);h.points=[];a.points.forEach(function(d,m){d.originalIndex=m;m=e.getPointValue({point:d,viewModel:g,currentFeatureIndex:n,index:m,seriesIndex:f,chartType:b,visualProperties:c,numPoints:a.points.length});m<l.min||m>l.max?q&&(d=k.mixin({},d),d.hidden=!0,h.points.push(d)):h.points.push(d)});q?d.push(h):h.points.length&&
d.push(h)});if(q){var r=0;d.forEach(function(a){r=Math.max(r,a.points.length)});for(var u=0;u<r;u++)d.every(function(a){a=a.points[u];return!a||a.hidden})&&d.forEach(function(a){if(a=a.points[u])a._toRemove=!0});d=d.filter(function(a){a.points=a.points.filter(function(a){return!a._toRemove});return a.points.length})}d.forEach(function(a){a.points.forEach(function(a){a.hidden||h++})});return{seriesItems:d,numShownElements:h}},getFirstSeriesPoint:function(b){return b.__firstPoint},getFirstSeriesItem:function(b){return b.__firstSeriesItem}};
return c})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/builder/utils/ChartDataUtil":function(){define(["../../../../supportClasses/templateJsonUtils/fieldInfo/FieldInfoRenderer","esri/dijit/geoenrichment/utils/ObjectUtil","../../ChartTypes","esri/dijit/geoenrichment/ReportPlayer/countryConfig"],function(k,g,f,e){function c(b){return a||(b&&b.yAxis&&b.yAxis.nonZeroInclusive?h:d)}var b={formatNumber:function(a,b,c,d){a=a||0;b={places:b.dataLabelsDecimals||0,preserveTrailingZeroes:!0};
if(d)return g.formatNumberAsCurrency(a,e.getCurrencyFormat(),b);a=g.formatNumber(a,b);c&&(a+="%");return a},undefinedToDefault:function(a,b){return void 0===a?b:a}},a,d=[1E3,1100,1200,150,70,900,110,300,80,200,1700],h=[1E3,1100,1250,1200,1050,990],l=[1,.7,1.2,.5,1.1,1.3,.3,2,.4],n=[.91,.92,.9,1.2,1.2,1.3];b.CHART_DATA_SMOOTH=[1145,1134,1159,1275,1404,1408,1337,1149,1074,1040,1065,1078,964,798,531,360,254,258];b.getPointValue=function(a){var b=a.point,d=a.index,e=a.seriesIndex,h=a.chartType,m=a.visualProperties,
v=a.viewModel,w=a.currentFeatureIndex,y=a.chartData,A=a.isComparisonSeries,B=a.comparisonFeatureAttribute;a=a.numPoints;if(b.value&&(b.value.value||v.dynamicReportInfo))return b.value.value;if(v.dynamicReportInfo)y=A?B&&B[b.fieldInfo.name]||0:k.getFieldDataValue(b.fieldInfo,{fieldData:v.dynamicReportInfo.fieldData,featureIndex:w}),y=g.parseNumber(y),isNaN(y)&&console.log("Can't render chart value for field \x3d\x3e "+(b.fieldInfo?b.fieldInfo.name:"missing field"));else if(b=b.fieldInfo&&b.fieldInfo.statefulName&&
b.fieldInfo.statefulName.charAt(0),y=y||c(m),y=y[d%y.length],h===f.GAUGE&&"p"!==b&&m.gaugeRangeMax)a=m.gaugeRangeMin||0,y=.425123*(m.gaugeRangeMax-a)+a;else if(h===f.WAFFLE)"p"===b||"number"!==typeof m.waffleRangeMin&&"number"!==typeof m.waffleRangeMax?a&&(y="p"===b?90.85/a:y/a):(d=m.waffleRangeMin,m=m.waffleRangeMax,"number"===typeof d&&"number"!==typeof m?m=0===d?1E3:d*((1<a?a:2)+1):"number"!==typeof d&&"number"===typeof m&&(d=0),y=.9085*(m-d)/(a||1)+d);else if(y*=l[e%l.length]*(0===e?1:n[d%n.length]),
!m.conditionalStyling){a=y;if("p"===b||m.dataLabelsShowValuePercentSymbol||m.yAxis&&m.yAxis.showPercentSymbol||m.yAxis&&m.yAxis.showValuesAsWeightsInSeries)a=Number((a/24.5123).toFixed(m.dataLabelsDecimals||1));"i"===b&&(a=Number((a/7).toFixed(m.dataLabelsDecimals||1)));y=a}return y};b.getCaptionValue=function(a,b){return a.captionFieldInfo?b.dynamicReportInfo?k.getFieldDataValue(a.captionFieldInfo,{fieldData:b.dynamicReportInfo.fieldData}):k.renderFieldInfoInTableCell(a.captionFieldInfo).formattedValue:
""};b.allowNegativeValuesInPreview=function(a,b){return f.supportsNegativeValues(a)&&!b.isStacked&&!b.renderColumnBarsInOppositeDirections};b.getChartData=function(a){function b(){f=Infinity;g=-Infinity;e.forEach(function(a){f=Math.min(f,a);g=Math.max(g,a)})}function d(a,b,c){var d=g-f,h=f;f=isFinite(a)?a:Math.min(0,f);g=isFinite(b)?b:g>=f?g:2*f;c&&(a=.1*(g-f),f+=a,g-=a);var k=(g-f)/d;e=e.map(function(a){return(a-h)*k+f})}var e=a.chartData,e=(e||c(a.visualProperties)).slice();e.length=Math.min(e.length,
a.numPoints);var f,g;if(a.filterRangesStats)return b(),d(a.filterRangesStats.min,a.filterRangesStats.max,!0),e;if(a.conditionalStats){b();var h=a.conditionalStats.min;a=a.conditionalStats.max;d(0===h?-10:0>h?1.2*h:.8*h,0===a?10:0>a?.8*a:1.2*a,!1)}return e};b.setPreviewChartData_dev=function(b){a=b};return b})},"url:esri/dijit/geoenrichment/templates/OnDemandSelect.html":'\x3cdiv class\x3d"esriGEOnDemandSelect"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"openButton" class\x3d"onDemandSelect_openButton"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"arrow" class\x3d"onDemandSelect_arrow"\x3e\x26nbsp;\x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"selectedLabel" class\x3d"onDemandSelect_selectedLabel TrimWithEllipses"\x3e\x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"selectedItemHolder" class\x3d"onDemandSelect_selectedItem TrimWithEllipses"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:esri/dijit/geoenrichment/ReportPlayer/templates/ComparisonSettings.html":'\x3cdiv class\x3d"esriGEReportPlayerToolbar_comparisonSettings esriGENonSelectable"\x3e\r\n    \x3cdiv class\x3d"esriGERow20" data-dojo-attach-point\x3d"showBackgroundImageBlock"\x3e\r\n        ${nls.comparisonSettings}\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"esriGESpaceBefore20"\x3e\r\n        \x3cdiv class\x3d"esriGERow20" data-dojo-attach-point\x3d"showBackgroundImageBlock"\x3e\r\n            \x3clabel data-dojo-attach-point\x3d"showBackgroundImageLabel"\x3e\x26nbsp;${nls.showBackgroundImage}\x3c/label\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"esriGERow20"\x3e\r\n            \x3cdiv class\x3d"dijitInline"\x3e\r\n                \x3clabel data-dojo-attach-point\x3d"splitPanelsLabel"\x3e\x26nbsp;${nls.splitPanels}\x3c/label\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"dijitInline esriGESpaceBeforeBig esriGEInfoIcon" data-dojo-attach-point\x3d"splitPanelsInfoIcon"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"esriGERow20"\x3e\r\n            \x3cdiv class\x3d"dijitInline"\x3e${nls.zoomPanels}\x3c/div\x3e\r\n            \x3cdiv class\x3d"dijitInline esriGESpaceBeforeBig esriGEInfoIcon" data-dojo-attach-point\x3d"zoomPanelsInfoIcon"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"esriGERow20 esriGESpaceBefore20" data-dojo-attach-point\x3d"zoomBlock"\x3e\r\n            \x3cdiv class\x3d"dijitInline esriGESpaceAfterBig comparisonSettings_zoomOutButton esriGEIcon16" data-dojo-attach-point\x3d"zoomOutButton"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"dijitInline esriGESpaceAfterBig comparisonSettings_zoomLabel" data-dojo-attach-point\x3d"zoomLabel"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"dijitInline esriGESpaceAfterBig comparisonSettings_zoomInButton esriGEIcon16" data-dojo-attach-point\x3d"zoomInButton"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"dijitInline esriGELink comparisonSettings_resetLink" data-dojo-attach-point\x3d"resetButton"\x3e${nls.reset}\x3c/div\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"esriGERow20 esriGESpaceBefore20" data-dojo-attach-point\x3d"zoomSplitBlock"\x3e\r\n            \x3cdiv class\x3d"dijitInline esriGESpaceAfterBig comparisonSettings_zoomOutButton esriGEIcon16" data-dojo-attach-point\x3d"zoomOutSplitButton"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"dijitInline esriGESpaceAfterBig comparisonSettings_zoomLabel" data-dojo-attach-point\x3d"zoomSplitLabel"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"dijitInline esriGESpaceAfterBig comparisonSettings_zoomInButton esriGEIcon16" data-dojo-attach-point\x3d"zoomInSplitButton"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"dijitInline esriGELink comparisonSettings_resetLink" data-dojo-attach-point\x3d"resetSplitButton"\x3e${nls.reset}\x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:esri/dijit/geoenrichment/ReportPlayer/templates/PlayerToolbarHolder.html":'\x3cdiv class\x3d"esriGEPlayerToolbar"\x3e\r\n\r\n    \x3c!--left--\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"infographicsSelectDiv" class\x3d"dijitInline playerToolbar_infographicsSelectDiv"\x3e\x3c/div\x3e\r\n    \r\n    \x3c!--center--\x3e\r\n    \r\n    \x3cdiv data-dojo-attach-point\x3d"areaTitleDiv" class\x3d"dijitInline playerToolbar_areaTitleDiv"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"areaTitleInnerDiv" class\x3d"dijitInline playerToolbar_areaTitleInnerDiv TrimWithEllipses"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"areasSelectDiv" class\x3d"dijitInline playerToolbar_areasSelectDiv"\x3e\x3c/div\x3e\r\n\r\n    \x3c!--right--\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"rightSideControlsBlock" class\x3d"dijitInline playerToolbar_rightSideControlsBlock"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"zoomSelectDiv" class\x3d"dijitInline dijitInline playerToolbar_zoomSelectDiv"\x3e\x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"pageSelectDiv" class\x3d"dijitInline dijitInline playerToolbar_pageSelectDiv"\x3e\x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"commandButtonsContainer" class\x3d"dijitInline playerToolbar_commandButtonsContainer"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:esri/dijit/geoenrichment/ReportPlayer/templates/ReportPlayer.html":'\x3cdiv class\x3d"esriGEReportPlayer esriGENonSelectable"\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"printBackgroundView" class\x3d"esriGEAbsoluteStretched"\x3e\x3c/div\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"normalViewDiv"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"playerToolbarDiv"\x3e\x3c/div\x3e\r\n\r\n        \x3cdiv data-dojo-attach-point\x3d"printableDivContainer" class\x3d"reportPalyer_printableDivContainer"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"printableDiv" class\x3d"reportPalyer_printableDiv"\x3e\r\n                \x3cdiv data-dojo-attach-point\x3d"reportContainerDiv"\x3e\x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"reportPlayer_sidePageNavigator" data-dojo-attach-point\x3d"sidePageNavigator"\x3e\r\n            \x3cdiv class\x3d"reportPlayer_paginationArrowUp" data-dojo-attach-point\x3d"prevPageButton"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"reportPlayer_paginationArrowDown" data-dojo-attach-point\x3d"nextPageButton"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv data-dojo-attach-point\x3d"playerAfterToolbarDiv" class\x3d"reportPlayer_playerAfterToolbarDiv"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"errorViewDiv" class\x3d"esriGEReportPlayerErrorMessage"\x3e\r\n        ${nls.cantPlayReportError}\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:esri/dijit/geoenrichment/ReportPlayer/themes/images/longArrows/upArrowLong.svg.txt":'\x3csvg xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"${size}" height\x3d"${size}" viewBox\x3d"0 0 16 16"\x3e\r\n\t\x3cpath fill\x3d"${fillColor}" d\x3d"M3.79 4.71L8 0.5L12.21 4.71L10.8 4.71L8.5 2.42L8.5 15.5L7.51 15.5L7.51 2.4L5.2 4.71L3.79 4.71Z"/\x3e\r\n\x3c/svg\x3e\r\n',"url:esri/dijit/geoenrichment/ReportPlayer/themes/images/longArrows/downArrowLong.svg.txt":'\x3csvg xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"${size}" height\x3d"${size}" viewBox\x3d"0 0 16 16"\x3e\r\n\t\x3cpath fill\x3d"${fillColor}" d\x3d"M3.9 11.45L8.12 15.67L12.33 11.45L10.91 11.45L8.62 13.74L8.62 0.56L7.63 0.56L7.63 13.76L5.32 11.45L3.9 11.45Z"/\x3e\r\n\x3c/svg\x3e\r\n',
"url:esri/dijit/geoenrichment/ReportPlayer/core/templates/AdjustableGrid.html":'\x3cdiv class\x3d"esriGEAdjustableGrid"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"mainNode" class\x3d"adjustableGridMainNode"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n\r\n\r\n',"url:esri/dijit/geoenrichment/ReportPlayer/core/templates/MinMaxLegend.html":'\x3cdiv class\x3d"esriGEMinMaxLegend"\x3e\r\n    \x3cdiv class\x3d"esriGEMinMaxLegend_variableBlock"\x3e\r\n        \x3cdiv class\x3d"esriGEMinMaxLegend_titleRow" data-dojo-attach-point\x3d"largestGroupTitleDiv"\x3e${nls.largestGroup}\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriGEMinMaxLegend_valueRow" data-dojo-attach-point\x3d"largestGroupDiv"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"esriGEMinMaxLegend_variableBlock"\x3e\r\n        \x3cdiv class\x3d"esriGEMinMaxLegend_titleRow" data-dojo-attach-point\x3d"smallestGroupTitleDiv"\x3e${nls.smallestGroup}\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriGEMinMaxLegend_valueRow" data-dojo-attach-point\x3d"smallestGroupDiv"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:esri/dijit/geoenrichment/ReportPlayer/core/templates/ChartContainer.html":'\x3cdiv class\x3d"esriGEReportPlayer_chartContainer esriGENonSelectable"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"chartLabel" class\x3d"chartContainer_chartLabel TrimWithEllipses"\x3e\x3c/div\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"noDataPlaceHolder" class\x3d"esriGENoDataPlaceHolder"\x3e\r\n        \x3cdiv class\x3d"esriGENoDataPlaceHolderLabel"\x3e${nls.noChartData}\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"chartNormalViewDiv"\x3e\r\n        \x3cdiv class\x3d"chartContainer_chartContainerWithAxis" data-dojo-attach-point\x3d"chartContainerWithAxis"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"chartContainerDiv"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"tableContainerDiv"\x3e\x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"legendContainerDiv" class\x3d"chartContainer_legendContainer"\x3e\x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"comparisonSelectBlock" class\x3d"chartContainer_comparisonSelectBlock"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"comparisonLabel" class\x3d"chartContainer_comparisonLabel"\x3e\x3c/div\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"comparisonSelectDiv" class\x3d"chartContainer_comparisonSelectDiv"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"errorDiv" class\x3d"esriGEReportPlayerPanelErrorMessage"\x3e${nls.chartLoadError}\x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"missingVariablesDiv" class\x3d"chartContainer_missingVariablesMessage"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"*noref":1}});
define("esri/dijit/geoenrichment/ReportPlayer/ReportPlayer","dojo/_base/declare dojo/_base/lang esri/dijit/geoenrichment/promise/all esri/dijit/geoenrichment/Deferred esri/dijit/geoenrichment/when dojo/on dojo/keys dojo/dom-class dijit/_WidgetBase dijit/_TemplatedMixin ./config ./playerSupports/_CommandSupport ./playerSupports/_LogoSupport ./playerSupports/_MapSupport ./playerSupports/_PageNavigationSupport ./playerSupports/_PrintSupport ./playerSupports/_ReportContainersSwitcher ./playerSupports/_SmartLayoutSupport ./playerSupports/_ZoomSupport ./playerSupports/_WaitingSupport ./supportClasses/PlayerConfigurator ./supportClasses/PlayerToFullScreenAnimator ./toolbar/PlayerToolbar ./ReportPlayerViewModel ./PlayerResizeModes ./PlayerThemes ./PlayerViewModes ./ReportPlayerState ./PlayerZoomBehaviors ./DataProviderGE esri/dijit/geoenrichment/utils/DelayUtil esri/dijit/geoenrichment/utils/DeviceUtil esri/dijit/geoenrichment/utils/DomUtil esri/dijit/geoenrichment/utils/InvokeUtil esri/dijit/geoenrichment/utils/async/AsyncQueue dojo/text!./templates/ReportPlayer.html dojo/i18n!esri/nls/jsapi ./_devConfig".split(" "),function(k,
g,f,e,c,b,a,d,h,l,n,m,p,t,q,r,u,v,w,y,A,B,C,z,E,G,F,D,H,J,K,I,L,M,N,Q,O,P){O=O.geoenrichment.dijit.ReportPlayer.ReportPlayer;return k([h,l,m,p,t,r,u,v,w,q,y],{templateString:Q,nls:O,dataProvider:null,exportCommands:null,config:null,theme:void 0,viewMode:void 0,enableDataDrilling:void 0,showToolbarInPopup:void 0,showAreaTitle:void 0,scaleSlidesToFitWindow:void 0,showCloseButton:!1,showToFullScreenAnimation:!1,allowAutoOrientation:!0,mobileLandscapeViewMode:void 0,canAddMoreAreas:!1,areasSelectButtons:null,
resizeMode:void 0,printConfig:{subtitle:O.preparedByEsri,printDialogClass:"esri/dijit/geoenrichment/ReportPlayer/printing/PageOptionsDialog/PageOptionsDialog"},showProgressBar:!0,defaultZoomBehavior:void 0,nlsMap:null,isDataDrillingPlayer:!1,isPlayerOnServer:!1,_viewModel:null,_reportData:null,_analysisAreaIndex:0,_originalAreaViewMode:null,_showAllAreasSideBySide:!1,playerToolbar:null,postCreate:function(){this.config=g.mixin(n,this.config);if(n.isPlayerOnServer=this.isPlayerOnServer)this.defaultZoomBehavior=
H.RESET;this._viewModel=new (this._getViewModelClass());this._setUpDataProvider();A.configurePlayer(this);!this.isPlayerOnServer&&this._initToolbar();this._initContainerSwither();!this.isPlayerOnServer&&this._initSmartLayout();!this.isPlayerOnServer&&this._initCommands();!this.isPlayerOnServer&&this._initPageNavigationControls();!this.isPlayerOnServer&&this._initZoomControls();!this.isPlayerOnServer&&this._applyTheme();!this.isPlayerOnServer&&this._showError(!1);!this.isPlayerOnServer&&this._initProgressController();
I.isMobileDevice()&&(d.add(this.domNode,"esriGEReportPlayerMobile"),this._setUpMobileOrientationHandling())},_setUpDataProvider:function(){this.dataProvider=this.dataProvider||new J;this.exportCommands&&this.exportCommands.forEach(function(a){this.dataProvider.registerCommand(a)},this)},_orientationDfd:null,_setUpMobileOrientationHandling:function(){var a=this;this.allowAutoOrientation&&this.own(b(window,"orientationchange",function(){a._orientationDfd&&a._orientationDfd.resolve("cancel");var b=a._orientationDfd=
new e;a._showWaiting(b.promise,"orientationchange");b.promise.then(function(b){"cancel"!==b&&(a._setViewMode(a.viewMode),a.refresh())});c(a.getRenderPromise(),function(){K.delay(500).then(b.resolve,b.resolve)})}))},_getViewModelClass:function(){return z},_setViewMode:function(a){this.viewMode=a;this.defaultZoomBehavior=null;A.configurePlayer(this);this._refreshZoomControls()},_initToolbar:function(){var c=this;this.playerToolbar=(new C({player:this,popupButtonDiv:this.playerAfterToolbarDiv,showToolbarInPopup:this.showToolbarInPopup,
showAreaTitle:this.showAreaTitle,stretchToolbarNode:!this.showToolbarInPopup&&(this.resizeMode===E.FIT_WINDOW?document.body:this.domNode),showCloseButton:this.showCloseButton,canAddMoreAreas:this.canAddMoreAreas,areasSelectButtons:this.areasSelectButtons,onShowAnalysisAreaAt:function(a){c.showAnalysisAreaAt(a)},onCompareAreasSideBySide:function(){c._showAllAnalysisAreasSideBySide()},onShowPageAt:function(a){c.showPageAt(a)},isScrollShown:function(){var a=c.getCurrentReportContainer();return a&&a.isScrollShown&&
a.isScrollShown()},onClose:function(){c._onClose()},onAddMoreAreas:function(){c.onAddMoreAreas()},onRemoveAreas:function(a){c.onAreasPreRemoved(a);a.forEach(function(a){a.hidden=!0});if(c.viewMode===F.PANELS_IN_STACK_ALL)if(2>c.getAnalysisAreas().filter(function(a){return!a.hidden}).length)c._setAllAreasVisible(!1);else{var b={};a.forEach(function(a){b[a.index]=!1});c.getCurrentReportContainer().setAreasVisibilityState(b,{append:!0});c._updateAreaSelect()}else if(c.getCurrentAnalysisArea().hidden){var d=
c.getAnalysisAreas().filter(function(a){return!a.hidden})[0];d?c.showAnalysisAreaAt(d.index):c.refresh()}else c._updateAreaSelect();c.onAreasRemoved(a)}})).placeAt(this.playerToolbarDiv);this.own(this.playerToolbar);this.showCloseButton&&this.own(b(window,"keyup",function(b){c.getWaitingPromise()||D.isViewingDataDrillingZoom||D.isImageViewerShown||b.keyCode===a.ESCAPE&&c._onClose()}));L.hide(this.playerToolbarDiv)},_applyTheme:function(){d.remove(this.domNode,"playerThemeDark playerThemeLight");d.add(this.domNode,
this.theme===G.DARK?"playerThemeDark":"playerThemeLight");this.playerToolbar.setTheme(this.theme)},playReport:function(a,b){return this._showWaiting(this._callAfterRendering("_doPlayReport",[a,b]),"playReport")},_doPlayReport:function(a,b){this.playerToolbar&&this.playerToolbar.closePopup();var d=this;this._showError(!1);this._progressController&&this._progressController.reset();this.showToFullScreenAnimation&&this.resizeMode===E.FIT_WINDOW&&B.animateTo(this);this.dataProvider._onCreateReportStarted=
function(){d._viewModel.preInitialize()};this._viewModel.reset();return c(this.dataProvider.getReportData(a,{progressCallback:function(a){d._progressController&&d._progressController.setLoadDataProgress(a)}}),function(a){if(d.viewMode===F.PANELS_IN_STACK_ALL){var c=d.viewMode;1<a.analysisAreas.length&&!a.isMultiFeature?d._originalAreaViewMode||(d._showAllAreasSideBySide=!0,d._originalAreaViewMode=A.getDefaultViewMode(d)):(d._showAllAreasSideBySide=!1,c=d._originalAreaViewMode||A.getDefaultViewMode(d));
d._setViewMode(c)}return d.setReportData(a,b)},function(a){d._showError(a)})},refresh:function(a){return this._reportData&&c(this.setReportData(this._reportData,{waitUntilAllContentIsReady:!(!a||!a.waitUntilAllContentIsReady)}),function(){this.showPageAt(0);return this.resize()}.bind(this))},_isDataBeingSetFlag:!1,_notifyShownPendingFlag:!1,setReportData:function(a,b){return this._showWaiting(this._callAfterRendering("_doSetReportData",[a,b]),"setReportData")},_doSetReportData:function(a,b){var d=
this;b=b||{};this._reportData=a;L.show(this.playerToolbarDiv);if(!a||P.emulateErrors.emptyDataProviderResponse)this._showError(!0);else{this._isDataBeingSetFlag=!0;D.isAnimationSuspended=!0;this.onSetReportDataStart();var f=new e;this._viewModel.setAnimationAllowed(!b.disableAnimation);this._configureViewModel(a);(d.isPlayerOnServer?c():K.delay(0)).then(function(){if(1===a.analysisAreas.length||a.isMultiFeature)d._destroyAllContainers(),d._resetMapBuilder(),d._applyReportData({analysisAreaIndex:0,
rerenderContent:!0}).then(f.resolve,f.reject);else{var e=function(){for(;0<=g&&a.analysisAreas[g].hidden;)g--;0>g?f.resolve():d._applyReportData({analysisAreaIndex:g--,rerenderContent:!1,isFinalArea:0>g}).then(function(){(d.isPlayerOnServer?c():K.delay(0)).then(e)},f.reject)};!1!==b._resetLoadedContents&&(d._destroyAllContainers(),d._resetMapBuilder());var g=a.analysisAreas.length-1;e()}});this._progressController&&this._progressController.setNumAreas(a.analysisAreas.length);this._progressController&&
this._progressController.setLoadDataProgress(1);return f.promise.then(function(){return d._progressController&&d._progressController.finalize()}).otherwise(function(a){d._showError(a)}).always(function(){var a=d.getCurrentReportContainer();if(a&&a.domNode)return(d.isPlayerOnServer?c():K.delay(300)).then(function(){d._isDataBeingSetFlag=!1;d._notifyShownPendingFlag=!L.isNodeInLayout(d.domNode);D.isAnimationSuspended=d.isPlayerOnServer;d.onSetReportDataEnd();d._emitPendingResizedEvent();d._progressController&&
d._progressController.reset();if(b.waitUntilAllContentIsReady)return d.getRenderPromise()})})}},showAnalysisAreaAt:function(a){return this._callAfterRendering("_doShowAnalysisAreaAt",[a])},_doShowAnalysisAreaAt:function(a){var b=this;return c(this._setAllAreasVisible(!1),function(){if(b._analysisAreaIndex!==a&&b.getAnalysisAreas()[a]&&!b.getAnalysisAreas()[a].hidden)return b._applyReportData({analysisAreaIndex:a,rerenderContent:!1})})},_showAllAnalysisAreasSideBySide:function(){return this._callAfterRendering("_doShowAllAnalysisAreasSideBySide")},
_doShowAllAnalysisAreasSideBySide:function(){return this._setAllAreasVisible(!0)},_setAllAreasVisible:function(a){if(this._showAllAreasSideBySide!==a)return a?(this._showAllAreasSideBySide=!0,this._originalAreaViewMode=this.viewMode===F.PANELS_IN_STACK_ALL?A.getDefaultViewMode(this):this.viewMode,this._setViewMode(F.PANELS_IN_STACK_ALL)):(this._showAllAreasSideBySide=!1,this._setViewMode(this._originalAreaViewMode),this._originalAreaViewMode=null),this.refresh()},_applyReportData:function(a){var b=
this;a=a||{};var d=this._reportData&&this._reportData.isMultiFeature?0:a.analysisAreaIndex||0,e=!1!==a.rerenderContent;this._analysisAreaIndex=d;this._showError(!this._reportData);if(this._reportData)return c(this._viewModel.initialize(!this._reportData.reportObject.isGraphicReport,this.viewMode),function(){return b._setReportContainer(e)?b._doApplyTemplateJson({analysisAreaIndex:d,isFinalArea:a.isFinalArea}):b._updateAreaSelect()})},_doApplyTemplateJson:function(a){var b=this,d=this.getCurrentReportContainer(),
e=g.clone(this._reportData.templateJson);P.emulateErrors.emptyTemplateJson&&(e.sectionsTables.length=0);var f=d.fromJson(e,{waitUntilAllContentIsReady:!0,progressCallback:function(c){b._progressController&&b._progressController.setProgressForAreaAt(c,a.analysisAreaIndex)},analysisAreaIndex:a.analysisAreaIndex,isFinalArea:a.isFinalArea,renderSync:this.isPlayerOnServer}),e=d.getPagePromise?d.getPagePromise():f,d=d.getContentPromise?d.getContentPromise():f;this._registerContainerLoadPromise(d||e);this._updateAreaSelect();
return c(e,function(){b._setCurrentContainerLoaded();b.showPageAt(b._currentPageIndex);return b.resize()})},_updateAreaSelect:function(){this.playerToolbar&&this.playerToolbar.updateAreaSelect({analysisAreas:this._reportData.analysisAreas,combinedAreasInfo:this._reportData.combinedAreasInfo,currentAreaIndex:this._showAllAreasSideBySide?"all":this.getCurrentAnalysisAreaIndex(),isMultiFeature:this._reportData.isMultiFeature})},getReportData:function(){return this._reportData},getReportTitle:function(){return this._reportData&&
this._reportData.reportTitle||""},getCurrentAnalysisAreaIndex:function(){return this._analysisAreaIndex},getCurrentAnalysisArea:function(){return this._reportData&&this._reportData.analysisAreas[this._analysisAreaIndex]},getAnalysisAreas:function(){return this._reportData&&this._reportData.analysisAreas},reportDataToJson:function(a){return this._showWaiting(this.dataProvider.reportDataToJson(this.getReportData(),a),"reportDataToJson")},reportDataFromJson:function(a,b){var d=this;this._showError(!1);
return this._showWaiting(c(this.dataProvider.reportDataFromJson(a),function(a){return d.setReportData(a,b)}),"reportDataFromJson")},_configureViewModel:function(a){this._viewModel.setTheme(this._reportData.templateJson.theme);this._viewModel.enableDataDrilling=!this.isPlayerOnServer&&this.enableDataDrilling;this._viewModel.setDynamicReportInfo({fieldData:this._reportData.fieldData,analysisAreas:this._reportData.analysisAreas,combinedAreasInfo:this._reportData.combinedAreasInfo,infographicOptions:this._reportData.infographicOptions,
attachmentsStore:this._reportData.attachmentsStore,createMapFunc:g.hitch(this,this._createMap),reportObject:this._reportData.reportObject,isMultiFeature:this._reportData.isMultiFeature,isFixedDataMode:!this._reportData.config.geoenrichmentUrl,geClient:this._reportData.geClient,templateVariableProvider:this._reportData.templateVariableProvider,countryID:this._reportData.config.countryID,hierarchy:this._reportData.config.hierarchy,templateJson:this._reportData.templateJson});this._viewModel.getDynamicImageFunc=
g.hitch(this,this._getReportLogo)},notifyShown:function(){!this._isDataBeingSetFlag&&this._notifyShownPendingFlag&&(this.getCurrentReportContainer()&&this.getCurrentReportContainer().notifyShown(),this._notifyShownPendingFlag=!1)},_isErrorShown:!1,_showError:function(a){P.emulateErrors.playerError&&(a=!0);L[a?"hide":"show"](this.printableDivContainer);L[a?"show":"hide"](this.errorViewDiv);d[a?"add":"remove"](this.domNode,"esriGEReportPlayerError");this._isErrorShown=!!a;a?(L.hide(this.sidePageNavigator),
L.show(this.playerToolbarDiv),this.playerToolbar&&this.playerToolbar.setErrorShown(!0),this._progressController&&this._progressController.reset(),console.log(a),this.onError(a)):this.playerToolbar&&this.playerToolbar.setErrorShown(!1)},isErrorShown:function(){return this._isErrorShown},setPrintMode:function(a){d[a?"add":"remove"](this.domNode,"esriGEReportPlayerInPrinting")},resize:function(a,b){this._resize({width:a,height:b});this._updatePageNavigator();this._updateZoomControls();this.playerToolbar&&
this.playerToolbar.update()},_pendingResizeEvent:null,_emitResizedEvent:function(a){this._pendingResizeEvent={isPaginating:!!a};this._isDataBeingSetFlag||this._emitPendingResizedEvent()},_emitPendingResizedEvent:function(){this._pendingResizeEvent&&(this.onResized(this._pendingResizeEvent.isPaginating),this._pendingResizeEvent=null)},_onClose:function(){var a;this.showToFullScreenAnimation&&this.resizeMode===E.FIT_WINDOW&&(a=B.animateFrom(this));c(a,function(){this.onClose()}.bind(this))},getVisualState:function(){return{type:"reportPlayer",
viewMode:this.viewMode,reportContainers:this.getAllReportContainers().map(function(a){return a.getVisualState&&a.getVisualState()})}},setVisualState:function(a){return this._callAfterRendering("_doSetVisualState",[a])},_doSetVisualState:function(a){var b=a&&this.getAllReportContainers().map(function(b,c){return b.setVisualState&&b.setVisualState(a.reportContainers[c])});return f(b)},_renderQueue:null,getRenderPromise:function(){return this._renderQueue&&this._renderQueue.getPromise()},_registerContainerLoadPromise:function(a){this._renderQueue=
this._renderQueue||new N;this._renderQueue.add(a);this.playerToolbar&&this.playerToolbar.setContentLoadPromise(this.getRenderPromise())},_safeFuncCaller:null,_callAfterRendering:function(a,b){if(this.isPlayerOnServer)return this[a].apply(this,b);var d=this;this._safeFuncCaller=this._safeFuncCaller||{};this._safeFuncCaller[a]=function(){return d[a].apply(d,b)};return c(this.getRenderPromise(),function(){return M.invoke(d._safeFuncCaller,a)})},onSetReportDataStart:function(){},onSetReportDataEnd:function(){},
onResized:function(a){},onClose:function(){},onError:function(a){},onAddMoreAreas:function(){},onAreasPreRemoved:function(a){},onAreasRemoved:function(a){}})});