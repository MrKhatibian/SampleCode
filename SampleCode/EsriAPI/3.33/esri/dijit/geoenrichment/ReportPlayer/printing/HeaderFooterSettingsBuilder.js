// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.33/esri/copyright.txt for details.
//>>built
define("esri/dijit/geoenrichment/ReportPlayer/printing/HeaderFooterSettingsBuilder","dojo/string esri/dijit/geoenrichment/when esri/dijit/geoenrichment/utils/DateUtil ../core/supportClasses/templateJsonUtils/TemplateJsonAnalyzer ../PlayerViewModes dojo/i18n!esri/nls/jsapi".split(" "),function(p,q,r,t,u,h){h=h.geoenrichment.dijit.ReportPlayer.ReportPlayer;return{createHeaderFooterParams:function(a,b,d){var k;if(a.viewMode===u.PANELS_IN_STACK_ALL){var c=a.getCurrentReportContainer().getVisibleAreas(),
f=b.dynamicReportInfo.combinedAreasInfo,l,n=c.every(function(a){a=a.isGrouped+";"+a.groupIndex;l=l||a;return l===a});k=(n=n&&f.groups&&c.length===f.groups[c[0].groupIndex].indexes.length)?c.length===a.getAnalysisAreas().length?[f]:[f.groups[c[0].groupIndex]]:[null]}else k=b.dynamicReportInfo.isMultiFeature?[b.dynamicReportInfo.combinedAreasInfo]:a.getAnalysisAreas();var g=b.getDocumentDefaultStyles(),m={backgroundColor:g.backgroundColor,color:g.color,fontFamily:g.fontFamily};return q(this._getSourceText(a,
d),function(c){return k.map(function(e){return{header:{show:d.addHeader,title:d.reportTitle||a.getReportTitle(),subtitle:d.reportSubtitle||a.printConfig.subtitle,siteInfo:e&&{siteName:e.name,siteDesc:e.description,siteAddr:e.address,latitude:e.latitude,longitude:e.longitude},style:{headerStyle:m,titleStyle:b.getTableDefaultStyles(null,"ReportTitle"),latLongStyle:b.getTableDefaultStyles(null,"GreyText")}},dataSource:{show:c&&d.addDataSource,sourceText:c&&p.substitute(h.sourcePattern,{source:c}),style:{dataSourceStyle:m}},
footer:{show:d.addFooter,copyrightText:"\u00a9"+(new Date).getFullYear()+" Esri",formattedDate:r.getReportFooterDate(),style:{footerStyle:m}},documentStyle:g}})})},_getSourceText:function(a,b){if(!b.addDataSource)return null;b=a.getReportData();return a.isDataDrillingPlayer?(a=t.collectVariablesStats(b.templateJson),b.templateVariableProvider.getVariablesDataVintageDescription({usedVariablesCache:a})):b.reportObject.dataVintageDescription}}});